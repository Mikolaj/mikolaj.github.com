%!PS-Adobe-2.0
%%Creator: dvips(k) 5.86 Copyright 1999 Radical Eye Software
%%Title: dis.dvi
%%Pages: 66
%%PageOrder: Ascend
%%BoundingBox: 0 0 596 842
%%DocumentFonts: Helvetica-Bold Times-Italic Times-Roman Helvetica
%%+ Times-Bold Helvetica-Oblique Courier Symbol CMR10 CMSY10 CMMI10
%%+ Courier-Bold
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: dvips dis
%DVIPSParameters: dpi=600, compressed
%DVIPSSource:  TeX output 2001.12.13:1831
%%BeginProcSet: texc.pro
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/id 0 N/rw 0 N/rc 0 N/gp 0 N/cp 0 N/G 0 N/CharBuilder{save 3
1 roll S A/base get 2 index get S/BitMaps get S get/Cd X pop/ctr 0 N Cdx
0 Cx Cy Ch sub Cx Cw add Cy setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx
sub Cy .1 sub]/id Ci N/rw Cw 7 add 8 idiv string N/rc 0 N/gp 0 N/cp 0 N{
rc 0 ne{rc 1 sub/rc X rw}{G}ifelse}imagemask restore}B/G{{id gp get/gp
gp 1 add N A 18 mod S 18 idiv pl S get exec}loop}B/adv{cp add/cp X}B
/chg{rw cp id gp 4 index getinterval putinterval A gp add/gp X adv}B/nd{
/cp 0 N rw exit}B/lsh{rw cp 2 copy get A 0 eq{pop 1}{A 255 eq{pop 254}{
A A add 255 and S 1 and or}ifelse}ifelse put 1 adv}B/rsh{rw cp 2 copy
get A 0 eq{pop 128}{A 255 eq{pop 127}{A 2 idiv S 128 and or}ifelse}
ifelse put 1 adv}B/clr{rw cp 2 index string putinterval adv}B/set{rw cp
fillstr 0 4 index getinterval putinterval adv}B/fillstr 18 string 0 1 17
{2 copy 255 put pop}for N/pl[{adv 1 chg}{adv 1 chg nd}{1 add chg}{1 add
chg nd}{adv lsh}{adv lsh nd}{adv rsh}{adv rsh nd}{1 add adv}{/rc X nd}{
1 add set}{1 add clr}{adv 2 chg}{adv 2 chg nd}{pop nd}]A{bind pop}
forall N/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "1 July 1998",
%   filename = "8r.enc",
%   email = "tex-fonts@@tug.org",
%   docstring = "Encoding for TrueType or Type 1 fonts
%                to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both 
% ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def

%%EndProcSet
%%BeginProcSet: texps.pro
%!
TeXDict begin/rf{findfont dup length 1 add dict begin{1 index/FID ne 2
index/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type/integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics/Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont/setfont cvx]cvx def}def/ObliqueSlant{
dup sin S cos div neg}B/SlantFont{4 index mul add}def/ExtendFont{3 -1
roll mul exch}def/ReEncodeFont{CharStrings rcheck{/Encoding false def
dup[exch{dup CharStrings exch known not{pop/.notdef/Encoding true def}
if}forall Encoding{]exch pop}{cleartomark}ifelse}if/Encoding exch def}
def end

%%EndProcSet
%%BeginProcSet: special.pro
%!
TeXDict begin/SDict 200 dict N SDict begin/@SpecialDefaults{/hs 612 N
/vs 792 N/ho 0 N/vo 0 N/hsc 1 N/vsc 1 N/ang 0 N/CLIP 0 N/rwiSeen false N
/rhiSeen false N/letter{}N/note{}N/a4{}N/legal{}N}B/@scaleunit 100 N
/@hscale{@scaleunit div/hsc X}B/@vscale{@scaleunit div/vsc X}B/@hsize{
/hs X/CLIP 1 N}B/@vsize{/vs X/CLIP 1 N}B/@clip{/CLIP 2 N}B/@hoffset{/ho
X}B/@voffset{/vo X}B/@angle{/ang X}B/@rwi{10 div/rwi X/rwiSeen true N}B
/@rhi{10 div/rhi X/rhiSeen true N}B/@llx{/llx X}B/@lly{/lly X}B/@urx{
/urx X}B/@ury{/ury X}B/magscale true def end/@MacSetUp{userdict/md known
{userdict/md get type/dicttype eq{userdict begin md length 10 add md
maxlength ge{/md md dup length 20 add dict copy def}if end md begin
/letter{}N/note{}N/legal{}N/od{txpose 1 0 mtx defaultmatrix dtransform S
atan/pa X newpath clippath mark{transform{itransform moveto}}{transform{
itransform lineto}}{6 -2 roll transform 6 -2 roll transform 6 -2 roll
transform{itransform 6 2 roll itransform 6 2 roll itransform 6 2 roll
curveto}}{{closepath}}pathforall newpath counttomark array astore/gc xdf
pop ct 39 0 put 10 fz 0 fs 2 F/|______Courier fnt invertflag{PaintBlack}
if}N/txpose{pxs pys scale ppr aload pop por{noflips{pop S neg S TR pop 1
-1 scale}if xflip yflip and{pop S neg S TR 180 rotate 1 -1 scale ppr 3
get ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg TR}if xflip
yflip not and{pop S neg S TR pop 180 rotate ppr 3 get ppr 1 get neg sub
neg 0 TR}if yflip xflip not and{ppr 1 get neg ppr 0 get neg TR}if}{
noflips{TR pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop pop
90 rotate 1 -1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get
neg sub neg TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr
1 get neg sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr
2 get ppr 0 get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4
-1 roll add 2 div 3 1 roll add 2 div 2 copy TR .96 dup scale neg S neg S
TR}if}N/cp{pop pop showpage pm restore}N end}if}if}N/normalscale{
Resolution 72 div VResolution 72 div neg scale magscale{DVImag dup scale
}if 0 setgray}N/psfts{S 65781.76 div N}N/startTexFig{/psf$SavedState
save N userdict maxlength dict begin/magscale true def normalscale
currentpoint TR/psf$ury psfts/psf$urx psfts/psf$lly psfts/psf$llx psfts
/psf$y psfts/psf$x psfts currentpoint/psf$cy X/psf$cx X/psf$sx psf$x
psf$urx psf$llx sub div N/psf$sy psf$y psf$ury psf$lly sub div N psf$sx
psf$sy scale psf$cx psf$sx div psf$llx sub psf$cy psf$sy div psf$ury sub
TR/showpage{}N/erasepage{}N/copypage{}N/p 3 def @MacSetUp}N/doclip{
psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll newpath 4 copy 4 2
roll moveto 6 -1 roll S lineto S lineto S lineto closepath clip newpath
moveto}N/endTexFig{end psf$SavedState restore}N/@beginspecial{SDict
begin/SpecialSave save N gsave normalscale currentpoint TR
@SpecialDefaults count/ocount X/dcount countdictstack N}N/@setspecial{
CLIP 1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto
closepath clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx
sub div rhiSeen{rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR
}{rhiSeen{rhi ury lly sub div dup scale llx neg lly neg TR}if}ifelse
CLIP 2 eq{newpath llx lly moveto urx lly lineto urx ury lineto llx ury
lineto closepath clip}if/showpage{}N/erasepage{}N/copypage{}N newpath}N
/@endspecial{count ocount sub{pop}repeat countdictstack dcount sub{end}
repeat grestore SpecialSave restore end}N/@defspecial{SDict begin}N
/@fedspecial{end}B/li{lineto}B/rl{rlineto}B/rc{rcurveto}B/np{/SaveX
currentpoint/SaveY X N 1 setlinecap newpath}N/st{stroke SaveX SaveY
moveto}N/fil{fill SaveX SaveY moveto}N/ellipse{/endangle X/startangle X
/yrad X/xrad X/savematrix matrix currentmatrix N TR xrad yrad scale 0 0
1 startangle endangle arc savematrix setmatrix}N end

%%EndProcSet
TeXDict begin @defspecial

/crestversion 0 def
 
@fedspecial end
%%BeginFont: CMSY10
%!PS-AdobeFont-1.1: CMSY10 1.0
%%CreationDate: 1991 Aug 15 07:20:57

% Copyright (C) 1997 American Mathematical Society.  All Rights Reserved.

11 dict begin
/FontInfo 7 dict dup begin
/version (1.0) readonly def
/Notice (Copyright (C) 1997 American Mathematical Society. All Rights Reserved) readonly def
/FullName (CMSY10) readonly def
/FamilyName (Computer Modern) readonly def
/Weight (Medium) readonly def
/ItalicAngle -14.035 def
/isFixedPitch false def
end readonly def
/FontName /CMSY10 def
/PaintType 0 def
/FontType 1 def
/FontMatrix [0.001 0 0 0.001 0 0] readonly def
/Encoding 256 array
0 1 255 {1 index exch /.notdef put} for
dup 1 /periodcentered put
dup 15 /bullet put
dup 21 /greaterequal put
dup 48 /prime put
dup 91 /union put
dup 104 /angbracketleft put
dup 105 /angbracketright put
dup 106 /bar put
readonly def
/FontBBox{-29 -960 1116 775}readonly def
/UniqueXX 5000820 def
currentdict end
currentfile eexec
9b9c1569015f2c1d2bf560f4c0d52257bac8ced9b09a275ab231194ecf829352
05826f4e975dcecec72b2cf3a18899ccde1fd935d09d813b096cc6b83cdf4f23
b9a60db41f9976ac333263c908dcefcdbd4c8402ed00a36e7487634d089fd45a
f4a38a56a4412c3b0baffaeb717bf0de9ffb7a8460bf475a6718b0c73c571145
d026957276530530a2fbefc6c8f67052788e6703bb5ee49533870bca1f113ad8
3750d597b842d8d96c423ba1273ddd32f3a54a912a443fcd44f7c3a6fe3956b0
aa1e784aaec6fce08dae0c76da9d0a3eba57b98a6233d9e9f0c3f00fcc6b2c6a
9ba23af389e6dfff4efec3de05d6276c6be417703ce508377f25960ef4ed83b4
9b01b873f3a639ce00f356229b6477a081933fef3bb80e2b9dffa7f75567b1fa
4d739b772f8d674e567534c6c5bbf1cf615372be20b18472f7aa58be8c216dbd
df81cc0a86b6d8318ca68fe22c8af13b54d7576fe4ca5a7af9005ea5cc4edb79
c0ab668e4fec4b7f5a9eb5f0e4c088cd818ecc4feb4b40ec8bd2981bf2336074
b64c430a05cba0221dbc83ae38c6183e5a3f9e0ccbf759b18b8a402d3f90d426
2de18d4a7aae3a6c5b00d0776f59de03935a830225dd9095796e8497098b91e4
1bfe3542be913a4abb4eff66746a21fe1c8fb3619aa8bdabc3f9fffe9f074bd6
e78aaf1e8a16f59cf24cca4dab63336118acb6589344b2f647636405c0707303
83dc5f07a85a1236446396788e0debcfdc209fdbb5e88ab2e8cf84d1ddfeeb06
1b55725da2eb8cc37b9af01bf7060f9629071b2d429dbe92ed4dddf6d08c2766
e5e90090cd1ef90b35b5e5e47fce10ac381b65daf722ab34a90ac74c21d001cd
17e542def3c629bde16d8bf95336c21b98837a3f0dc2b2e8713c3b432f7614ab
e9b1f0a5f9e88d89206c67000a738fb51ecba344229cf2452a6b17b867360689
bed713b8fdfae0671af09f2972d0956a67e383e14a0b30957903ba017570be3f
f0b917cf7ef36a520d713d596ba5a336f13b0da35f271c55a6feddbea20c37f7
8dab073936db3648929a19b726d501d3ac3371ce518ae2447c387822524f6f39
addf1b0372f0b21c3360a7971cee81efdc78a95d05559f1bf96a3f0d47363e21
30af84fc9d1f86bfb5f56be54564879738f126380ebe032a325fab2c6ea103f9
98f547ce048345da1a375b07ace61b31491c0c498a9456791db9c53f77bb57b7
62a77c056a38789db36fe4ed47830a675daabac94d6bcb362ed1f4cfb68e362d
85067c4b6125b174fe9b34133b88e1bbf0e47e3a257c82b0d6e7320dd2285421
ada54606fedf58e42eeceb7ca18ec9d8765fd0bb3806615f0f9030c262ea8f12
f70bc4d6e91b4e5388426b99c87cd72279f5fbda88866f608089d01baedbadd2
f38332e646efdee34abd8c47ec0d274e8b031376f086087ce142c1c87805a9d2
cbf9dca34d4b0603c0207bf1fb7ca0abed8e270230c804ed4c112bae8ce797ea
0ea6cf6fe212c0ac0570fa15f7ebea2f8cd05f4977b9a5e5e9c6b47e68ae9f66
cb1d22fac9545be5bacb28cc9b792d8bbe8d87c2deaa5bf42092be2db7c9486d
80aecfe306c4a0b1ed7e73bb8fcc3afa28e9173821efef799c70f8a33cfbcf6e
860320a445f73db51857d9f4cfdc0e39ed6a231742734e25c9fa77f12a8a8013
08cf8c8ab73f1478a19a2d3cd5301618a1d89aed12ae74567e87d50b43387022
5197ea7914e0babfc0cf742e3d275979e4347c71f75b763362b3e0e0cea971e8
3e956c9215699141a105117e7fccd342c607dc416af692d4ef85877c3c30b784
7615795f3fd98125e6eabc41b3c3ff88e2a6012f1ffbf03cb8420711acf8c6f0
e4f8faf777de2a238a3ce3e70c5ea287134dc2243dd4730ab5be1138981d426b
dcaf51177e
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
cleartomark

%%EndFont 
%%BeginFont: CMMI10
%!PS-AdobeFont-1.1: CMMI10 1.100
%%CreationDate: 1996 Jul 23 07:53:57

% Copyright (C) 1997 American Mathematical Society.  All Rights Reserved.

11 dict begin
/FontInfo 7 dict dup begin
/version (1.100) readonly def
/Notice (Copyright (C) 1997 American Mathematical Society. All Rights Reserved) readonly def
/FullName (CMMI10) readonly def
/FamilyName (Computer Modern) readonly def
/Weight (Medium) readonly def
/ItalicAngle -14.04 def
/isFixedPitch false def
end readonly def
/FontName /CMMI10 def
/PaintType 0 def
/FontType 1 def
/FontMatrix [0.001 0 0 0.001 0 0] readonly def
/Encoding 256 array
0 1 255 {1 index exch /.notdef put} for
dup 59 /comma put
readonly def
/FontBBox{-32 -250 1048 750}readonly def
/UniqueXX 5087385 def
currentdict end
currentfile eexec
80347982ab3942d930e069a70d0d48311d725e830d1c76fba12e12486e989c98
74c2b527f0925722787027f44470d484262c360cdfdddf3657533a57bb16f730
48bfbbfcb73a650484015441fdc837add94ac8fbd2022e3ec8f115d4b4bb7b7f
15388f22cc6198efe768bd9fceb3446ee4a8dc27d6cd152485384ef5f59381ff
da43f2d20c8fb08aa27ab2015b774db10dacfdcd33e60f178c461553146ab427
bdd7da12534ba078ad3d780414930da4f8d58abefd45db119b10eb409dd89792
3c6e705479464a4b310b58348c4b42393988fef4925cf984423aaf65fea9f0e6
4629953bcf50b919d968d99bd185f83112b2759cc411764e9bde677f57c5ee5a
c555448d5f81a16259ded1e11bf4119d53e8ab07a802df900d3a2d5ccc1c6876
d29c5e9effb7af3ef83400b0910c07873a8c56fa7b1eb1ba426043b00cc95dbe
dc6e136cbbbcb3f67509964f9f281ebf81fe5b018122eaf66c4a838487e82e18
6e006093042848a903efb3469ab6b4049767aadb95c30408dfd58d8a10f4cb22
168decd9f3ee100f07b49aa44c92139b669cc312ba20192454eb2375be6284b0
26659d964b96ae82d4942e758027fcf23c25ed01115af27ce7f20efe2a822bb6
84004f20243a49c9e93301fc21b80815c033c3e2ba58ef53da2157d524b395f2
b37abca13bc6a2f42e824ab7e47106176b0d6db267fbb795ac7425582df2e3dc
55863468a9200742bd7b552c48f8cf58bc21343bd3b95abfa140f33f37c6f3f7
8b0d8a5154eb7c1f62ec598267f13e841a3e64172663935ac8b665d86540d316
ddece329c008049c5e74b27d59022c5515059bc3b89370b1bc6a169c888bb325
e0b74282d6f053a50da4024ed1e433271a32ab8c17d41c632b41cf9f3ecd5fe1
24daf7aea7ce8a63047b245822930d517df7baaafa69d2d17f7d93cebd45416d
f3459365434123a76ccf883a4973bab19807e1f0c4bab03a45f7ed69ff2660ff
3963e4def11001eec4238c368a39d874fd30b3c14f4186ec7700fbce22abe468
eb32baf7b0164f8f21a9b5e706b91411faaa44467cb2180ab03de375c1ab93e9
76e11ab92fdd4a7280a6d1a8dc65c4c89d04c8ed6988045a2a3de9a4c7b1efd3
75b79ee3d49569213fcb818f6f1cf250f5e595c4b2c31610a8eea1046e889df5
10af9721cc0f20069e163dff476ab5e006dceb928e94b980cd5bc1487d3542bc
f1f9c5e8ffdb710cff68d6dd22f4e88abc163798481d8cdfa9704c5eeed516b1
f2e14950425d5328bbbbcafd9defc7207840165765d4cba79e900f78ba1fe4a4
db3e76ad95373a4234e745d3191dbfdac1d4ea83353ba0f99670196dbaa1c3d5
a77462bead93f499ab7f3d2e4677984ea0668039e9952db4c3e3b76d96650ba3
33348f5018c393e4adc21225758e823e0bf68779f4a1cb17cd9615b573b52e3f
daa6a54ea18258f948acde4886e378c5f0155b9ac17d5c9c8f0683aa0f7efa
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
cleartomark

%%EndFont 
%%BeginFont: CMR10
%!PS-AdobeFont-1.1: CMR10 1.00B
%%CreationDate: 1992 Feb 19 19:54:52

% Copyright (C) 1997 American Mathematical Society.  All Rights Reserved.

11 dict begin
/FontInfo 7 dict dup begin
/version (1.00B) readonly def
/Notice (Copyright (C) 1997 American Mathematical Society. All Rights Reserved) readonly def
/FullName (CMR10) readonly def
/FamilyName (Computer Modern) readonly def
/Weight (Medium) readonly def
/ItalicAngle 0 def
/isFixedPitch false def
end readonly def
/FontName /CMR10 def
/PaintType 0 def
/FontType 1 def
/FontMatrix [0.001 0 0 0.001 0 0] readonly def
/Encoding 256 array
0 1 255 {1 index exch /.notdef put} for
dup 61 /equal put
readonly def
/FontBBox{-251 -250 1009 969}readonly def
/UniqueXX 5000793 def
currentdict end
currentfile eexec
8053514d28ec28da1630165fab262882d3fca78881823c5537fe6c3dda8ee5b8
97e17cb027f5c73fdbb56b0a7c25fc3512b55fe8f3acfbffcc7f4a382d8299cc
8fd37d3cea49dabdca92847af0560b404ef71134b0f3d99934fc9d0b4e602011
b9cfb856c23f958f3c5a2fbe0ef8587d1f5774879c324e51fcb22888b74f2415
50d7401eb990d4f3a7af635198422283cac1b6cd446ddbcbd915db9bff88844e
784c6bf7389803d9450b0c21756a017306457c7e62c1d269f306bd3402e266de
fc3b5e7d8a8d2f5bf0fe6ddd40d07391df4fad4a6018dce29a2b8f692b29f202
3a7c0e66de8ed85c14f1f8492167357f51a7e84cc5d92e0fee4d81cf7fbc8de5
2d2e7bb57142033993f9c08c315abade8dbc4a732e84e142d3bee51557910e12
cd8aa37c459a5e6b7f5269f59078aba3be4641a11ac48d0b625c8325b38ec08e
4c9e5e7fed976a5650d99d82114f449b9ca14c4ec957702295a39a93ef93f618
99b8ea06b092c3c1e503e6e436e0a9fa22576c8930ab3dc8c20f5d82b69cddf8
ff4dacfa9c54bed5a3aa3ea5b129fe96be632843b9b6bc91b615581a985db56b
1e01ca60ee69ca92cf5c0882ece62edad3e106d835348822400f0b66af658f2a
e56ed08f8b0010571807009b73ab12a8cf14ca6c71f03c2a48c500f9d62266af
154a6375ff600d9bac3f05ce34142d6867a79581c533176bb2f3117336671e2e
44638a97167e2ea9644e31ea16c2ad2990ea33c54001e0c8156e6de8ab6a4d40
a7137ba275f39589fea2e2db8256adc103d6f9cc038037a47e8fd469c5f98a5e
3c15bd4ace40d340018b1cff7d1ed8abb0ac57b5b5a2c20a51957b96c453edb7
dae5affd91a46d938fe0a13363001d844ded4323f1ee6d30012aea19b024a552
315505535c85dc26bad31e09c50e6512802976d298c4e90d0044c362e6bf3ab3
62a454ee93de25ce54411090c29e9d75c80ce26a84404bd9de3aee0e3f921ac5
87f907572b8354a5c3165eea7e8b2ba4e4f834663063e9a307d8ff6f8b61acd8
799bc105cddcf8f95f2160494fc01f7ec3effb95de571b8d7f27a2f9ad203c09
cd4cffd98a119a507460e7fef5c910405e877aa1f8da68d1272e59e3adccef8d
82e692b3229926fbe621080b7831a2ee248948dd3ae55082a939f02875a7a0eb
7ae7d50270a576fbdfde7109c670f51be75b80b6fe3045ea50e2121024113974
87d0093bc5c693c16b533a75364f7b9867694ec88a29ba9dc6751eb1f9d33428
f8e731bdc736140e114ebb09c7a0903fdc797acbc91bf8d225e1b5208ce4dbb3
21982c1e143280a51f8c7c62f66daaf0f0d3cd1be3e0240089bfa7b1385411b7
f78d03aa3a268ec69af3a947b7838a438d2a5a7186c2d1f80b20073d02cf6300
82160ccc126d375e2bcef9b517520f4861c6a2523cf37cf725fdd441de199d8c
65f7082053bd46c662d07bbf620c9ea26bcb903131623f4a0e4ec8098607d01d
95f1a99339ee8e30d95254a36541d53f77f7eee4104efcec0fffc890c31a3290
9c0481548a3b3932b099015005c5462d8dc1d110f279f7a8f767df4b81214b65
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
cleartomark

%%EndFont 
TeXDict begin 39158280 55380996 1000 600 600 (dis.dvi)
@start /Fa 134[55 4[55 1[55 2[55 55 55 1[55 1[55 1[55
55 55 55 2[55 9[55 3[55 2[55 2[55 55 7[55 55 67[{
TeXBase1Encoding ReEncodeFont}20 90.9091 /Courier-Bold
rf /Fb 145[33 48 109[{TeXBase1Encoding ReEncodeFont}2
66.4176 /Times-Italic rf /Fc 202[33 33 33 33 33 49[{
TeXBase1Encoding ReEncodeFont}5 66.4176 /Times-Roman
rf /Fe 207[18 32[33 15[{}2 66.4176 /CMSY10 rf /Ff 196[25
59[{}1 90.9091 /CMMI10 rf /Fg 207[21 32[37 15[{}2 74.7198
/CMSY10 rf /Fh 194[71 61[{}1 90.9091 /CMR10 rf /Fi 134[45
45 66 45 45 25 35 30 45 45 45 45 71 25 45 25 25 45 45
30 40 45 40 45 40 14[61 5[56 14[51 2[25 7[45 45 45 2[30
23 2[30 30 37[51 2[{TeXBase1Encoding ReEncodeFont}37
90.9091 /Times-Roman rf /Fk 149[25 35 35 12[61 69[71
5[45 13[25 1[{}7 90.9091 /CMSY10 rf /Fl 145[37 3[21 106[{
TeXBase1Encoding ReEncodeFont}2 74.7198 /Times-Italic
rf /Fm 149[28 39 39 12[66 75[50 13[28 1[{}6 99.6264 /CMSY10
rf /Fn 194[77 61[{}1 99.6264 /CMR10 rf /Fo 190[54 14[37
37 49[{TeXBase1Encoding ReEncodeFont}3 74.7198 /Times-Roman
rf /Fr 134[40 40 61 40 45 25 35 35 45 45 45 45 66 25
2[25 45 45 25 40 45 40 45 45 42[45 2[45 1[45 9[30 39[{
TeXBase1Encoding ReEncodeFont}27 90.9091 /Times-Italic
rf /Fs 134[50 50 1[50 55 30 50 35 1[55 55 55 80 25 2[25
55 55 30 50 55 50 55 50 12[55 60 65 1[60 70 1[75 6[55
60 65 65 65 65 12[50 50 50 50 2[25 43[55 2[{
TeXBase1Encoding ReEncodeFont}39 89.6632 /Helvetica-Bold
rf /Ft 134[51 51 51 51 51 51 51 51 51 51 51 51 51 51
51 1[51 51 51 51 51 51 51 1[51 1[51 1[51 1[51 1[51 51
51 1[51 51 51 51 1[51 51 51 51 51 51 1[51 51 51 51 51
51 51 51 51 51 51 51 51 2[51 7[51 51 51 51 51 51 51 2[51
51 40[{.85 ExtendFont TeXBase1Encoding ReEncodeFont}62
99.6264 /Courier rf /Fu 130[46 46 46 46 46 46 46 46 46
46 46 46 46 46 46 46 46 46 46 46 46 46 46 46 46 46 46
46 46 46 46 46 46 46 46 46 46 46 46 46 46 46 46 46 46
46 46 46 46 46 46 46 46 46 46 46 46 46 46 46 46 46 46
46 46 46 46 46 2[46 3[46 46 46 46 46 46 46 46 46 46 46
46 46 1[46 1[46 46 46 33[{.85 ExtendFont TeXBase1Encoding ReEncodeFont}
86 90.9091 /Courier rf /Fv 134[60 60 1[60 66 36 60 42
66 66 66 66 96 30 60 1[30 66 66 36 60 66 60 66 60 10[72
78 66 72 2[72 84 1[90 66 2[30 78 1[66 72 78 2[78 10[60
60 60 60 60 60 2[30 36 42[66 2[{TeXBase1Encoding ReEncodeFont}46
107.596 /Helvetica-Bold rf /Fw 134[45 45 65 1[50 25 45
30 1[50 50 50 75 20 2[20 50 50 1[50 50 45 50 50 9[85
9[75 50 60 1[25 3[60 1[65 60 60 6[25 5[50 50 50 50 2[25
46[{TeXBase1Encoding ReEncodeFont}35 89.6632 /Helvetica-Oblique
rf /Fx 134[72 72 100 72 79 43 72 50 1[79 79 79 115 36
2[36 79 79 43 72 79 72 1[72 12[79 86 93 4[108 79 2[36
1[100 79 86 93 93 8[43 3[72 72 72 72 72 72 2[36 43[79
2[{TeXBase1Encoding ReEncodeFont}41 129.115 /Helvetica-Bold
rf /Fy 134[50 50 72 1[55 33 39 44 1[55 50 55 83 28 55
1[28 55 50 33 44 55 44 55 50 9[100 3[55 2[61 2[94 66
78 1[39 3[66 72 72 66 72 6[33 50 1[50 1[50 50 50 50 50
50 45[55 2[{TeXBase1Encoding ReEncodeFont}44 99.6264
/Times-Bold rf /Fz 134[103 103 145 1[114 62 103 72 1[114
114 114 165 52 2[52 114 114 62 103 114 103 114 103 9[175
2[114 6[155 114 134 1[52 3[124 1[134 134 134 6[62 5[103
103 103 103 49[{TeXBase1Encoding ReEncodeFont}36 185.902
/Helvetica-Bold rf /FA 133[39 44 44 66 44 50 28 39 39
50 50 50 50 72 28 44 1[28 50 50 28 44 50 44 50 50 9[83
2[55 50 61 1[61 72 1[83 55 66 1[33 1[72 61 61 72 66 61
61 13[50 50 1[50 28 25 33 25 2[33 33 33 36[50 2[{
TeXBase1Encoding ReEncodeFont}53 99.6264 /Times-Italic
rf /FB 137[45 12[20 47[50 50 50 50 50 50 50 50 50 50
48[{TeXBase1Encoding ReEncodeFont}12 89.6632 /Helvetica
rf /FC 105[50 1[44 44 24[44 50 50 72 50 50 28 39 33 50
50 50 50 78 28 50 28 28 50 50 33 44 50 44 50 44 3[33
1[33 2[72 94 72 72 61 55 66 72 55 72 72 89 61 72 39 33
72 72 55 61 72 66 66 72 5[28 28 50 50 50 50 50 50 50
50 50 50 28 25 33 25 56 1[33 33 33 4[41 30[55 55 2[{
TeXBase1Encoding ReEncodeFont}78 99.6264 /Times-Roman
rf /FD 134[60 2[60 60 33 47 40 1[60 60 60 93 33 2[33
60 60 40 53 60 53 60 53 11[86 1[66 5[106 3[40 3[73 86
80 16[60 60 60 48[{TeXBase1Encoding ReEncodeFont}30 119.552
/Times-Roman rf /FE 133[56 5[40 5[72 4[40 72 2[64 1[64
1[72 9[120 9[120 1[96 28[36 46[{TeXBase1Encoding ReEncodeFont}12
143.462 /Times-Italic rf /FF 135[86 121 2[52 86 60 2[95
95 138 43 86 1[43 1[95 1[86 95 86 95 86 19[129 95 6[103
112 2[112 65[{TeXBase1Encoding ReEncodeFont}22 154.968
/Helvetica-Bold rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%PaperSize: A4

%%EndSetup
%%Page: 1 1
1 0 bop 1002 1880 a FF(Extending)42 b(Extended)h(ML)1217
2837 y FE(K)-5 b(enneth)34 b(W)-13 b(.)35 b(MacK)-5 b(enzie)1449
3652 y FD(Master)30 b(of)f(Science)1195 3851 y(School)h(of)f(Computer)g
(Science)1321 4049 y(Di)m(vision)g(of)h(Informatics)1301
4248 y(Uni)m(v)n(ersity)f(of)h(Edinb)n(ur)n(gh)1761 4447
y(2001)p eop
%%Page: 1 2
1 1 bop 1743 289 a FF(Abstract)345 557 y FC(This)25 b(dissertation)g
(describes)h(research)h(into)e(the)h(ef)n(fect)g(of)h(higher)n(-order)f
(functors)f(on)h(the)g(Ex-)345 717 y(tended)35 b(ML)h(de)n(v)o
(elopment)d(methodology)-6 b(.)61 b(Mosco)n(w)34 b(ML)i(is)f(an)h
(implementation)d(of)j(Stan-)345 878 y(dard)21 b(ML)g(which)g(has)g
(been)h(e)o(xtended)f(to)g(incorporate)g(\002rst-class)g(structures)g
(and)g(higher)n(-order)345 1038 y(functors.)30 b(I)23
b(ha)n(v)o(e)h(e)o(xtended)e(the)i(grammar)f(of)g(Mosco)n(w)f(ML)h(to)h
(include)e(the)i(EML)f(syntax)f(and)345 1198 y(ha)n(v)o(e)30
b(modi\002ed)g(the)g(Mosco)n(w)f(ML)i(compiler)e(to)h(parse)h(and)g
(typecheck)f(the)g(e)o(xtended)g(gram-)345 1358 y(mar)-5
b(.)28 b(This)19 b(has)h(been)g(used)g(to)f(carry)i(out)e(a)h(case)g
(study)f(in)l(v)n(olving)f(the)i(formal)f(de)n(v)o(elopment)f(of)i(a)
345 1518 y(K)n(e)o(y)j(W)-8 b(ords)24 b(in)g(Conte)o(xt)g(program,)g
(and)g(this)g(has)g(demonstrated)f(that)h(the)g(use)g(of)h(higher)f
(order)345 1678 y(functors)f(can)h(be)g(used)f(to)g(transform)g(the)h
(usual)f(top-do)n(wn)f(EML)h(de)n(v)o(elopment)e(methodology)345
1838 y(so)j(that)h(bottom-up)e(de)n(v)o(elopment)f(strate)o(gies)i(can)
h(also)g(be)g(used.)2048 5471 y FB(i)p eop
%%Page: 2 3
2 2 bop 1332 289 a FF(Ac)m(kno)n(wledg)r(ements)345 557
y FC(I)26 b(w)o(ould)g(lik)o(e)g(to)g(thank)f(my)h(supervisor)l(,)g
(Don)g(Sannella,)h(for)f(his)g(help)g(and)g(encouragement.)35
b(I)345 717 y(w)o(ould)18 b(also)h(lik)o(e)g(to)g(thank)g(Claudio)g
(Russo)g(for)h(advice)g(on)f(the)g(inner)g(w)o(orkings)g(of)g(the)g
(Mosco)n(w)345 878 y(ML)24 b(compiler)-5 b(.)2038 5471
y FB(ii)p eop
%%Page: 3 4
3 3 bop 1637 293 a FF(Dec)m(laration)345 561 y FC(I)32
b(declare)h(that)f(this)f(thesis)g(w)o(as)h(composed)f(by)h(myself,)h
(that)f(the)g(w)o(ork)g(contained)f(herein)i(is)345 721
y(my)23 b(o)n(wn)g(e)o(xcept)h(where)g(e)o(xplicitly)e(stated)h
(otherwise)g(in)h(the)f(te)o(xt,)g(and)h(that)f(this)g(w)o(ork)h(has)g
(not)345 881 y(been)h(submitted)e(for)i(an)o(y)f(other)h(de)o(gree)g
(or)g(professional)e(quali\002cation)i(e)o(xcept)f(as)h(speci\002ed.)
2782 1641 y(\()p FA(K)m(enneth)g(W)-9 b(.)24 b(MacK)m(enzie)p
FC(\))2028 5471 y FB(iii)p eop
%%Page: 4 5
4 4 bop 1281 1026 a Fz(T)-15 b(ab)n(le)51 b(of)h(Contents)345
1617 y Fy(1)99 b(Intr)n(oduction)2687 b(1)494 1778 y
FC(1.1)104 b(Summary)2609 b(1)494 1938 y(1.2)104 b(Standard)26
b(ML)2467 b(2)494 2098 y(1.3)104 b(Mosco)n(w)24 b(ML)2481
b(2)723 2258 y(1.3.1)119 b(Syntax)25 b(for)g(SML)g(functor)f(ar)n
(guments)1279 b(3)723 2418 y(1.3.2)119 b(Applicati)n(v)o(e)23
b(and)i(generati)n(v)o(e)f(functors)1260 b(4)723 2578
y(1.3.3)119 b(Higher)25 b(Order)g(Functors)g(and)f(Functor)h
(Signatures)821 b(5)723 2738 y(1.3.4)119 b(First-class)25
b(Structures)g(and)f(P)o(ackage)i(T)-8 b(ypes)1004 b(12)494
2898 y(1.4)104 b(Extended)25 b(ML)2395 b(13)723 3058
y(1.4.1)119 b(Speci\002cations)25 b(in)g(EML)1730 b(13)723
3219 y(1.4.2)119 b(F)o(ormal)24 b(Program)i(De)n(v)o(elopment)c(in)j
(EML)1077 b(15)494 3379 y(1.5)104 b(Extending)24 b(EML)2301
b(17)345 3638 y Fy(2)99 b(Extended)27 b(Mosco)o(w)e(ML)2214
b(20)494 3798 y FC(2.1)104 b(Grammar)25 b(for)g(the)g(Core)g(language)
1674 b(21)494 3959 y(2.2)104 b(Grammar)25 b(for)g(the)g(Modules)e
(language)1519 b(24)494 4119 y(2.3)104 b(Comments)24
b(on)h(the)f(grammar)1859 b(27)723 4279 y(2.3.1)119 b(The)25
b(unique)f(e)o(xistential)f(quanti\002er)1337 b(27)723
4439 y(2.3.2)119 b(P)o(ackage)26 b(bindings)1927 b(27)723
4599 y(2.3.3)119 b(Unde\002ned)25 b(functor)g(bindings)1530
b(27)723 4759 y(2.3.4)119 b(Axioms)24 b(in)g(speci\002cations)1642
b(27)723 4919 y(2.3.5)119 b(Local)25 b(speci\002cations)1833
b(28)494 5079 y(2.4)104 b(Implementation)2314 b(28)2025
5471 y FB(iv)p eop
%%Page: 5 6
5 5 bop 723 279 a FC(2.4.1)119 b(V)-11 b(alue)25 b(Polymorphism)1787
b(29)723 439 y(2.4.2)119 b(Functor)25 b(Signatures)g(and)f(EML)1468
b(30)494 599 y(2.5)104 b(De\002ciencies)26 b(in)e(the)h(Implementation)
1547 b(32)345 859 y Fy(3)99 b(An)26 b(Example:)31 b(K)n(ey)24
b(W)-7 b(ords)24 b(in)h(Context)1639 b(34)494 1019 y
FC(3.1)104 b(Introduction)2453 b(34)494 1179 y(3.2)104
b(The)25 b(Speci\002cation)2247 b(35)494 1340 y(3.3)104
b(De)n(v)o(elopment:)29 b(Stage)c(1)2059 b(41)494 1500
y(3.4)104 b(Implementation)23 b(of)i(the)g(Main)f(Functor)1491
b(45)494 1660 y(3.5)104 b(Completing)24 b(the)h(Implementation)1671
b(48)494 1820 y(3.6)104 b(Comments)2514 b(53)723 1980
y(3.6.1)119 b(Proofs)2368 b(53)723 2140 y(3.6.2)119 b(Inadequac)o(y)25
b(of)g(Functor)g(Speci\002cations)1143 b(53)345 2400
y Fy(4)99 b(Conclusion)2700 b(57)494 2560 y FC(4.1)104
b(Directions)24 b(for)h(Further)h(Research)1683 b(57)494
2720 y(4.2)104 b(Final)25 b(Comments)2284 b(58)345 2980
y Fy(Bibliograph)o(y)2767 b(59)2035 5471 y FB(v)p eop
%%Page: 1 7
1 6 bop 1629 1026 a Fz(Chapter)52 b(1)1517 1523 y(Intr)l(oduction)345
2098 y Fx(1.1)128 b(Summar)q(y)345 2361 y FC(This)29
b(document)g(describes)h(a)h(project)f(to)f(e)o(xamine)h(the)g(ef)n
(fects)g(of)g(certain)g(e)o(xtensions)f(to)g(the)345
2521 y(Extended)35 b(ML)h(speci\002cation)f(language.)64
b(Extended)35 b(ML)h(is)f(ef)n(fecti)n(v)o(ely)g(a)h(superset)f(of)h
(the)345 2681 y(Standard)30 b(ML)g(language,)i(and)e(pro)o(vides)f
(constructs)g(for)i(including)e(axioms)g(in)h(programs)g(in)345
2841 y(order)d(to)f(specify)h(the)f(beha)n(viour)g(of)h(the)g(program;)
g(EML)f(also)g(pro)o(vides)g(a)h(means)f(of)h(lea)n(ving)345
3002 y(programs)e(partially)g(unde\002ned)g(\(b)n(ut)g(fully)g
(speci\002ed\),)i(and)e(this)g(leads)g(to)g(a)h(methodology)e(for)345
3162 y(the)30 b(formal)g(de)n(v)o(elopment)e(of)i(SML)h(programs.)46
b(EML)30 b(e)o(xploits)e(the)i(Standard)h(ML)e(modules)345
3322 y(language)24 b(in)h(in)f(order)h(to)g(modularise)e
(speci\002cations)i(and)f(proofs.)491 3482 y(Mosco)n(w)38
b(ML)g(is)h(an)g(implementation)e(of)i(SML,)f(and)h(has)g(recently)g
(been)g(e)o(xtended)g(to)345 3642 y(include)24 b(higher)n(-order)g
(functors)g(and)h(\002rst-class)f(structures.)30 b(The)24
b(goal)g(of)h(the)f(present)g(project)345 3802 y(has)32
b(been)g(to)g(inte)o(grate)f(EML)h(and)g(Mosco)n(w)f(ML)g(and)i(to)e
(see)i(what)f(ef)n(fect)g(the)g(higher)n(-order)345 3962
y(module)24 b(constructs)g(ha)n(v)o(e)g(on)h(the)f(EML)g(de)n(v)o
(elopment)f(methodology)-6 b(.)491 4122 y(In)27 b(the)f(remainder)h(of)
g(this)f(chapter)g(we)h(will)f(gi)n(v)o(e)f(a)i(description)f(of)h(the)
f(e)o(xtensions)f(in)h(the)345 4282 y(Mosco)n(w)19 b(ML)g(modules)g
(language)h(including)f(some)g(practicalities)g(in)l(v)n(olv)o(ed)g(in)
h(using)f(the)h(ne)n(w)345 4443 y(features.)31 b(This)24
b(is)g(then)h(follo)n(wed)e(by)i(a)g(brief)g(description)f(of)h
(Extended)f(ML.)491 4603 y(Chapter)30 b(2)e(gi)n(v)o(es)g(a)h(grammar)f
(for)i(a)f(language)f(amalgamating)f(Mosco)n(w)h(ML)g(and)h(EML;)345
4763 y(we)g(comment)e(on)h(the)g(grammar)g(and)h(then)f(brie\003y)g
(describe)h(an)f(implementation)e(of)j(the)f(lan-)345
4923 y(guage)d(obtained)f(by)g(e)o(xtending)g(the)g(Mosco)n(w)g(ML)g
(compiler)-5 b(.)491 5083 y(In)37 b(Chapter)g(3)f(we)g(use)h(this)e
(implementation)f(to)i(aid)g(in)g(the)g(formal)g(de)n(v)o(elopment)e
(of)j(a)2033 5471 y FB(1)p eop
%%Page: 2 8
2 7 bop 345 -28 a Fw(Chapter)24 b(1.)55 b(Introduction)2431
b FB(2)345 279 y FC(program;)43 b(this)37 b(de)n(v)o(elopment)f(mak)o
(es)h(e)o(xtensi)n(v)o(e)e(use)j(of)g(higher)n(-order)g(functors.)68
b(W)-8 b(e)39 b(then)345 439 y(discuss)24 b(our)g(results)g(and)h
(point)f(out)g(some)g(dif)n(\002culties)g(with)g(the)h(ne)n(w)f(v)o
(ersion)g(of)h(EML.)491 599 y(Chapter)c(4)g(consists)e(of)h
(suggestions)f(for)i(further)f(research)i(follo)n(wed)d(by)h(some)g
(concluding)345 760 y(remarks.)345 1159 y Fx(1.2)128
b(Standar)m(d)36 b(ML)345 1423 y FC(Standard)28 b(ML)f(\(SML\))h(is)f
(a)i(strongly-typed)c(functional)i(programming)f(language.)40
b(A)27 b(formal)345 1583 y(de\002nition)e(of)h(SML)f(is)h(gi)n(v)o(en)e
(in)h([MTH90)o(],)i(and)e(there)h(is)g(also)f(a)h(commentary)f(on)g
(the)h(de\002ni-)345 1743 y(tion)e(in)g([MT91)o(].)31
b(The)25 b(de\002nition)f(of)h(SML)f(w)o(as)h(re)n(vised)f(in)h(1997,)f
(and)g(the)h(re)n(vised)f(de\002nition)345 1903 y(is)37
b(gi)n(v)o(en)f(in)h([MTHM97)o(];)43 b(there)38 b(is)f(no)g(separate)h
(commentary)f(on)g(the)g(re)n(vised)g(de\002nition,)345
2063 y(b)n(ut)c([MT91)o(])h(is)f(still)f(useful.)56 b(T)-8
b(o)33 b(a)n(v)n(oid)g(ambiguity)e(we)j(will)e(sometimes)g(refer)j(to)e
(the)g(1990)345 2223 y(v)o(ersion)24 b(of)g(SML)h(as)g(SML90)f(and)h
(the)g(1997)f(v)o(ersion)g(as)h(SML97.)491 2383 y(W)-8
b(e)24 b(will)e(assume)g(that)g(the)h(reader)h(is)f(f)o(amiliar)f(with)
g(the)h(basics)g(of)g(SML)g(programming.)28 b(A)345 2543
y(useful)i(te)o(xtbook)f(is)i([P)o(au96)o(];)j(ho)n(we)n(v)o(er)l(,)d
(this)f(appeared)h(before)g([MTHM97)o(],)i(and)d(there)h(are)345
2703 y(some)24 b(de)n(viations)f(from)i(the)f(of)n(\002cial)h(1997)f(v)
o(ersion)g(of)h(SML.)345 3103 y Fx(1.3)128 b(Mosco)n(w)36
b(ML)345 3367 y FC(A)31 b(slogan)f(often)h(heard)h(in)f(connection)f
(with)h(ML)g(and)g(other)g(functional)f(programming)g(lan-)345
3527 y(guages)k(is)h(\223functions)f(are)h(\002rst-class)g
(citizens\224.)60 b(This)34 b(is)g(not)g(the)h(case)g(for)g(structures)
f(and)345 3687 y(functors,)g(which)e(are)i(\002rst-order)f(objects.)54
b(Structures)32 b(cannot)h(be)f(passed)h(as)g(v)n(alues)e(within)345
3847 y(the)g(Core)i(language,)g(and)e(functors)g(may)g(not)g(be)h
(declared)g(within)e(structures,)j(and)f(may)f(not)345
4007 y(return)c(functors)g(as)g(results,)g(or)h(tak)o(e)f(other)g
(functors)g(as)h(parameters.)38 b(Ho)n(we)n(v)o(er)l(,)27
b(recent)g(theo-)345 4167 y(retical)c(w)o(ork)g(by)g(Claudio)g(Russo)g
(\(see)h([Rus98])g(or)f([Rus00]\))h(has)f(sho)n(wn)f(ho)n(w)g
(structures)h(and)345 4327 y(functors)28 b(can)g(in)g(f)o(act)g(be)g
(used)g(as)g(\002rst-class)g(objects)g(in)f(ML.)h(These)g(features)g
(ha)n(v)o(e)g(been)g(in-)345 4487 y(corporated)d(into)f(the)h(Mosco)n
(w)f(ML)h(implementation.)k(W)-8 b(e)26 b(are)g(particularly)e
(interested)h(in)f(the)345 4647 y(use)j(of)g(higher)n(-order)g
(functors,)g(and)g(we)g(will)f(describe)h(ho)n(w)f(the)o(y)g(are)i
(used)f(in)f(Mosco)n(w)g(ML.)345 4808 y(The)36 b(syntax)g(is)g(some)n
(what)f(in)l(v)n(olv)o(ed,)j(and)f(occasionally)e(confusing,)k(and)d
(it)g(seems)g(w)o(orth-)345 4968 y(while)30 b(to)g(go)g(into)g(some)g
(detail.)48 b(Much)30 b(of)h(the)f(material)g(belo)n(w)g(is)g(a)h
(paraphrase)g(of)g(parts)f(of)345 5128 y(the)e(Mosco)n(w)f(ML)h(Owner')
-5 b(s)28 b(Manual,)g(b)n(ut)g(a)g(considerable)g(amount)g(of)g(e)o
(xperimentation)e(has)p eop
%%Page: 3 9
3 8 bop 345 -28 a Fw(Chapter)24 b(1.)55 b(Introduction)2431
b FB(3)345 279 y FC(been)25 b(required)g(to)f(disco)o(v)o(er)g(ho)n(w)g
(things)f(actually)h(w)o(ork)h(in)f(practice.)345 624
y Fv(1.3.1)107 b(Syntax)28 b(f)n(or)i(SML)f(functor)f(ar)n(guments)345
851 y FC(As)g(a)h(preliminary)-6 b(,)28 b(recall)h(that)f(there)h(are)h
(tw)o(o)e(forms)g(of)h(syntax)e(for)i(functor)g(de\002nitions)e(and)345
1011 y(functor)e(e)o(xpressions)e(in)h(SML.)h(The)g(primiti)n(v)o(e)d
(syntax)i(only)g(allo)n(ws)g(one)g(ar)n(gument:)530 1232
y Fu(functor)49 b(F\(X:S\))g(=)e(...)345 1453 y FC(the)25
b(functor)f Ft(F)h FC(can)g(then)g(be)f(called)h(by)g(writing)530
1674 y Fu(structure)50 b(A:S)d(=)g(...)530 1787 y(structure)j(B)d(=)f
(F\(A\))345 2007 y FC(T)-8 b(o)25 b(deal)f(with)g(more)h(comple)o(x)f
(ar)n(guments)g(we)h(can)g(write,)g(for)g(e)o(xample)530
2228 y Fu(functor)49 b(F\(type)g(t;)e(val)g(x:)g(t)g(structure)j(X:S\))
e(=)e(...)345 2449 y FC(and)25 b(then)f(call)h Ft(F)g
FC(by)f(putting)530 2670 y Fu(structure)50 b(B)d(=)f(F\(type)j(t)e(=)f
(int;)i(val)g(x)e(=)h(7;)g(structure)j(X=A\))345 2891
y FC(The)25 b(ar)n(guments)g(are)h(in)f(f)o(act)h(packaged)f(into)g(a)g
(single)g(structure)g(and)g(then)g(passed)g(as)g(an)h(ar)n(gu-)345
3051 y(ment)f(using)f(the)i(primiti)n(v)o(e)d(syntax.)32
b(See)26 b([MTH90)o(,)g(Figure)g(18])f(for)h(details.)32
b(W)-8 b(e)26 b(will)f(refer)i(to)345 3211 y(this)d(syntax)g(as)h(the)f
FA(derived)h FC(or)g FA(alternative)e FC(syntax)i(for)g(functor)f(ar)n
(guments.)491 3371 y(The)c(f)o(act)h(that)f(there)g(are)h(tw)o(o)f
(types)g(of)g(syntax)g(can)g(be)h(confusing.)28 b(A)20
b(functor)g(with)g(a)g(single)345 3531 y(ar)n(gument)34
b(can)g(either)g(be)h(declared)f(using)g(the)g(primiti)n(v)o(e)d
(syntax)j(abo)o(v)o(e,)h(or)g(the)f(alternati)n(v)o(e)345
3691 y(syntax:)530 3912 y Fu(functor)49 b(F\(structure)i(X:S\))c(=)g
(...)345 4133 y FC(When)25 b(it)f(is)g(applied,)g(matching)g(syntax)g
(must)g(be)h(used:)530 4354 y Fu(structure)50 b(B)d(=)f(F\(structure)51
b(X=A\);)345 4575 y FC(The)25 b(situation)e(becomes)h(more)h(comple)o
(x)e(when)i(Mosco)n(w)f(ML)-9 b(')k(s)23 b(e)o(xtensions)g(are)j
(considered.)p eop
%%Page: 4 10
4 9 bop 345 -28 a Fw(Chapter)24 b(1.)55 b(Introduction)2431
b FB(4)345 279 y Fv(1.3.2)107 b(Applicative)28 b(and)h(g)q(enerative)f
(functor)n(s)345 507 y FC(The)22 b(normal)f(ML)h(functors)g(ha)n(v)o(e)
g(a)g(generati)n(v)o(e)f(semantics;)h(this)f(means)h(that)f(if)h(a)h
(functor)f(body)345 667 y(declares)32 b(a)g(ne)n(w)f(type,)i(then)e(e)n
(v)o(ery)h(application)e(of)i(that)f(functor)g(will)g(generate)h(a)g
(ne)n(w)g(type,)345 827 y(e)n(v)o(en)g(if)h(the)g(functor)g(is)g
(applied)g(to)f(the)h(same)g(structure)g(twice.)56 b(Consider)33
b(the)g(declarations)345 987 y(belo)n(w)-6 b(.)484 1177
y Fu(signature)50 b(S)c(=)h(sig)h(type)f(t)g(val)h(x:)f(t)f(end;)484
1290 y(functor)j(F\(X:S\))f(:>)g(S)e(=)484 1403 y(struct)623
1516 y(type)i(t)f(=)f(X.t*X.t)623 1629 y(val)i(x)e(=\(X.x,X.x\))484
1742 y(end;)484 1968 y(structure)k(A)c(=)h(struct)i(type)e(t)g(=)g(int)
g(val)h(x)f(=)f(3)h(end;)484 2081 y(structure)j(B)c(=)h(F\(A\);)484
2193 y(structure)j(C)c(=)h(F\(A\);)345 2384 y FC(In)32
b(these)h(circumstances)e(the)i(e)o(xpression)e Ft(val)50
b(x)h(=)f(if)h(true)f(then)g(B.x)g(else)g(C.x)32 b FC(will)345
2544 y(f)o(ail)20 b(to)h(elaborate,)g(as)g(the)f(types)g
Ft(B.t)h FC(and)f Ft(C.t)g FC(will)g(be)h(distinct.)28
b(Mosco)n(w)19 b(ML)h(allo)n(ws)g(functors)345 2704 y(with)29
b(an)h FA(applicative)e FC(semantics,)i(where)g(the)g(functor)f(will)g
(produce)g(equi)n(v)n(alent)f(types)h(when)345 2864 y(applied)f(to)h
(equi)n(v)n(alent)e(ar)n(guments.)43 b(In)29 b(Mosco)n(w)f(ML)h(a)g
(functor)g(becomes)g(applicati)n(v)o(e)e(if)i(its)345
3024 y(formal)36 b(parameters)i(are)f(not)f(surrounded)h(by)f
(parentheses)h(when)g(the)g(functor)f(is)h(declared.)345
3184 y(Thus,)24 b(gi)n(v)o(en)f(the)i(follo)n(wing)e(declarations)484
3375 y Fu(signature)50 b(S)c(=)h(sig)h(type)f(t)g(val)h(x:)f(t)f(end;)
484 3488 y(functor)j(F')e(X:S)g(:>)h(S)e(=)484 3601 y(struct)623
3714 y(type)i(t)f(=)f(X.t*X.t)623 3826 y(val)i(x)e(=\(X.x,X.x\))484
3939 y(end;)484 4165 y(structure)k(A)c(=)h(struct)i(type)e(t)g(=)g(int)
g(val)h(x)f(=)f(3)h(end;)484 4278 y(structure)j(B)c(=)h(F'\(A\);)484
4391 y(structure)j(C)c(=)h(F'\(A\);)345 4581 y FC(the)25
b(e)o(xpression)e Ft(val)50 b(x)h(=)g(if)f(true)g(then)g(B.x)g(else)g
(C.x)25 b FC(elaborates)f(successfully)-6 b(.)491 4741
y(There)32 b(are)h(se)n(v)o(eral)e(things)f(that)i(should)e(be)i(noted)
f(here.)52 b(Firstly)-6 b(,)32 b(recall)g(that)g(there)g(is)f(an)345
4902 y(alternati)n(v)o(e)25 b(type)i(of)g(functor)f(de\002nition)g
Ft(functor)49 b(G\(type)h(t\))g(=)h(...)p FC(.)36 b(T)-8
b(o)27 b(get)f(an)h(applica-)345 5062 y(ti)n(v)o(e)21
b(v)o(ersion)g(of)i(this)e(functor)l(,)i(we)g(cannot)f(simply)f(omit)g
(the)h(parentheses;)h(in)f(f)o(act)h(we)f(must)g(put)345
5222 y Ft(functor)49 b(G)i(sig)f(type)g(t)h(end)f(=)h(...)p
FC(.)p eop
%%Page: 5 11
5 10 bop 345 -28 a Fw(Chapter)24 b(1.)55 b(Introduction)2431
b FB(5)491 279 y FC(Secondly)-6 b(,)29 b(note)f(that)g(it)g(is)g(the)h
(presence)g(or)g(absence)g(of)f(parentheses)h(in)f(the)g
FA(declar)o(ation)345 439 y FC(of)i(the)h(functor)f(that)g(determines)g
(whether)g(the)h(functor)f(is)g(generati)n(v)o(e)f(or)i(applicati)n(v)o
(e.)46 b(If)31 b(we)345 599 y(ha)n(v)o(e)24 b(a)i(generati)n(v)o(e)d
(functor)i Ft(F\(X:S\))50 b(=)g(...)31 b FC(then)24 b(the)h
(declaration)484 791 y Fu(functor)49 b(G)e(X)f(=)h(F\(X\))345
982 y FC(produces)25 b(a)g(functor)g(whose)f(beha)n(viour)h(is)f(the)h
(same)g(as)g(that)f(of)h Ft(F)p FC(,)g(e)o(xcept)g(that)f(the)h
(semantics)345 1142 y(are)g(applicati)n(v)o(e.)k(This)24
b(means,)g(for)h(instance,)f(that)g(if)h(we)g(ha)n(v)o(e)f(a)h
(generati)n(v)o(e)f(functor)g(and)h(pass)345 1302 y(it)35
b(as)h(a)h(parameter)f(to)g(a)g(higher)n(-order)g(functor)g
Ft(H)f FC(\(using)g(mechanisms)g(which)h(we)g(will)f(see)345
1462 y(later\))26 b(then)f(we)h(could)f(create)i(a)f(local)g(applicati)
n(v)o(e)e(v)o(ersion)g(of)i(the)g(functor)f(for)h(use)g(within)e(the)
345 1622 y(body)g(of)h Ft(H)p FC(.)491 1782 y(A)34 b(third)g(thing)f
(to)g(note)h(is)g(that)g(Mosco)n(w)e(ML)i(allo)n(ws)f(us)h(to)f(omit)g
(the)h(parentheses)g(sur)n(-)345 1942 y(rounding)21 b(the)g(actual)h
(parameter)g(in)g(a)g(functor)g(in)l(v)n(ocation.)28
b(This)21 b(has)h(no)g(ef)n(fect)g(on)g(the)f(seman-)345
2102 y(tics)j(of)h(the)g(functor)-5 b(.)30 b(The)25 b(e)o(xpressions)
484 2294 y Fu(structure)50 b(B)c(=)h(F\(A\))345 2485
y FC(and)484 2676 y Fu(structure)j(B)c(=)h(F)g(A)345
2867 y FC(ha)n(v)o(e)24 b(e)o(xactly)h(the)f(same)h(ef)n(fect,)g(re)o
(gardless)f(of)h(whether)f(F)i(is)e(generati)n(v)o(e)g(or)h(applicati)n
(v)o(e.)491 3027 y(The)h(alternati)n(v)o(e)f(syntax)g(for)h(functor)g
(ar)n(guments)f(cannot)g(be)h(used)g(when)g(parentheses)f(are)345
3187 y(omitted.)k(Gi)n(v)o(en)24 b Ft(functor)49 b(F\(type)h(t\))g(=)h
(...)p FC(,)24 b(the)h(e)o(xpression)484 3378 y Fu(structure)50
b(A)c(=)h(F)g(type)h(t)e(=)h(int)345 3569 y FC(f)o(ails)24
b(to)h(elaborate;)f(ho)n(we)n(v)o(er)484 3760 y Fu(structure)50
b(A)c(=)h(F)g(struct)h(type)g(t)f(=)g(int)g(end)345 3952
y FC(does)24 b(elaborate,)h(and)g(is)f(equi)n(v)n(alent)f(to)i(the)f
(usual)484 4143 y Fu(structure)50 b(A)c(=)h(F)g(\(type)h(t)f(=)f
(int\).)345 4514 y Fv(1.3.3)107 b(Higher)28 b(Or)n(der)h(Functor)n(s)g
(and)g(Functor)f(Signatures)345 4741 y FC(Mosco)n(w)f(ML)g(allo)n(ws)g
(functors)h(to)g(tak)o(e)g(other)g(functors)g(as)g(parameters,)h(and)f
(to)g(return)g(other)345 4902 y(functors)j(as)h(results)f(\(so)h(that)f
(it)g(is)h(no)n(w)f(possible)f(to)h(ha)n(v)o(e)h(curried)g(functors,)h
(gi)n(ving)d(further)345 5062 y(opportunities)17 b(for)j(confusion)f
(in)g(the)g(syntax)g(for)g(functor)h(ar)n(guments\).)28
b(Furthermore,)21 b(functors)345 5222 y(can)k(no)n(w)f(be)h(declared)g
(within)f(functor)h(and)f(structure)h(bodies.)p eop
%%Page: 6 12
6 11 bop 345 -28 a Fw(Chapter)24 b(1.)55 b(Introduction)2431
b FB(6)345 279 y Fs(1.3.3.1)89 b(Functor)23 b(signatures)345
507 y FC(In)37 b(order)h(to)f(specify)g(the)g(\223type\224)h(of)f(a)h
(functor)f(passed)g(as)g(a)h(parameter)g(to)e(a)i(higher)n(-order)345
667 y(functor)31 b(it)g(becomes)g(necessary)h(to)f(introduce)g
FA(functor)f(signatur)l(es)p FC(.)49 b(An)32 b(e)o(xample)e(in)l(v)n
(olving)345 827 y(higher)n(-order)25 b(functors)f(and)h(functor)f
(signatures)g(follo)n(ws.)484 1048 y Fu(signature)50
b(SIG1)d(=)g(sig)h(type)f(s)g(val)h(x:)f(s)f(end;)484
1161 y(signature)k(SIG2)d(=)g(sig)h(type)f(t)g(val)h(y:)f(t*t)g(end;)
484 1386 y(signature)j(FSIG)d(=)g(functor)i(\(Z:)f(SIG1\))g(->)f(SIG2)
484 1612 y(functor)i(D)e(\(X:)g(SIG1\):)i(SIG2)e(=)484
1725 y(struct)623 1838 y(type)h(t)f(=)f(X.s)623 1951
y(val)i(y)e(=)h(\(X.x,)h(X.x\))484 2064 y(end)484 2290
y(functor)h(Apply)f(\()623 2403 y(functor)h(F:)e(FSIG)623
2515 y(structure)j(A:)d(SIG1)484 2628 y(\):)g(SIG2)h(=)f(F\(A\);)484
2854 y(structure)j(A1:)d(SIG1)h(=)484 2967 y(struct)623
3080 y(type)g(s)f(=)f(string)623 3193 y(val)i(x)e(=)h("test")484
3306 y(end;)484 3532 y(structure)j(B)c(=)h(Apply)h(\()f(structure)j
(A=A1)d(functor)i(F=D)f(\);)345 3753 y FC(Here)39 b(the)g(object)g
Ft(FSIG)f FC(is)g(a)h(functor)g(signature.)72 b(When)39
b(we)g(wish)g(to)f(de\002ne)i(the)e(second-)345 3913
y(order)24 b(functor)g Ft(Apply)g FC(we)g(use)g(the)g(functor)g
(signature)g Ft(FSIG)f FC(to)h(specify)g(the)g(types)f(of)i(functors)
345 4073 y(which)h(are)i(acceptable)g(as)f(ar)n(guments.)36
b(In)28 b(f)o(act,)f(the)g(functor)g(which)g(is)f(supplied)g(as)h(an)g
(actual)345 4233 y(ar)n(gument)c(need)h(not)f(match)h(the)f(functor)h
(signature)f(e)o(xactly;)g(it)g(can)h(instead)f(be)h(more)g(general.)
345 4393 y(According)j(to)g(the)h(Mosco)n(w)e(ML)i(Owner')-5
b(s)27 b(Manual)g(\([RRS00b)q(,)i(11.1]\))e(this)g(means)g(that)g(the)
345 4553 y(actual)d(ar)n(gument)g(is)g(\223more)g(polymorphic,)f(e)o
(xpects)h(a)g(less)g(general)h(ar)n(gument,)e(or)i(produces)f(a)345
4713 y(more)h(general)g(result\224.)491 4873 y(Functor)32
b(signatures)f(come)g(in)g(tw)o(o)h(v)n(arieties:)43
b FA(opaque)31 b FC(and)h FA(tr)o(anspar)l(ent)p FC(.)49
b(Syntactically)345 5033 y(the)25 b(tw)o(o)h(types)f(of)h(signature)f
(are)h(indicated)f(in)h(a)g(manner)g(similar)e(to)i(that)f(used)g(to)h
(distinguish)345 5193 y(between)i(generati)n(v)o(e)f(and)h(applicati)n
(v)o(e)e(functors.)40 b(An)27 b(opaque)h(signature)f(is)h(indicated)f
(by)h(en-)p eop
%%Page: 7 13
7 12 bop 345 -28 a Fw(Chapter)24 b(1.)55 b(Introduction)2431
b FB(7)345 279 y FC(closing)22 b(the)g(ar)n(guments)g(in)h
(parentheses;)g(if)g(the)o(y)f(are)h(omitted)e(then)i(the)g(signature)f
(is)g(transpar)n(-)345 439 y(ent)k(\(so)g Ft(FSIG)f FC(abo)o(v)o(e)g
(is)h(opaque\).)35 b(The)26 b(dif)n(ference)h(between)f(the)g(tw)o(o)f
(types)h(of)g(signature)g(lies)345 599 y(in)d(the)g(w)o(ay)g(in)g
(which)g(type)g(information)f(is)h(propagated)f(to)h(the)g(output)f(of)
i(the)f(functor)-5 b(.)29 b(Essen-)345 760 y(tially)-6
b(,)23 b(if)h(a)h(functor)f(has)h(an)f(opaque)h(signature)e(then)i(the)
f(ef)n(fect)h(is)f(similar)f(to)h(using)g(an)g(opaque)345
920 y(signature)h(e)o(xpression)g(to)h(constrain)g(the)g(output)f(of)h
(the)g(functor:)33 b(the)27 b(implementation)c(of)k(an)o(y)345
1080 y(types)j(declared)g(within)f(the)h(body)g(of)g(the)h(functor)f
(is)f(hidden)h(from)g(the)g(user)-5 b(.)47 b(Con)l(v)o(ersely)-6
b(,)30 b(if)345 1240 y(a)f(transparent)g(signature)f(is)h(used)g(then)g
(the)g(implementation)d(will)i(be)i(visible)d(to)i(the)g(user)-5
b(.)43 b(In)345 1400 y(the)32 b(e)o(xample)f(abo)o(v)o(e)h(we)g(ha)n(v)
o(e)g(used)g(an)h(opaque)f(signature,)h(so)f(the)g(f)o(act)h(that)f
(type)f Ft(t)i FC(in)e Ft(B)i FC(is)345 1560 y(actually)27
b Ft(string)f FC(is)h(hidden)f(from)h(the)g(user)-5 b(.)38
b(The)27 b(f)o(act)h(that)f Ft(t)g FC(is)g Ft(string)f
FC(can)h(be)h(re)n(v)o(ealed)f(to)345 1720 y(the)22 b(user)h(in)f(\(at)
g(least\))h(tw)o(o)f(w)o(ays.)29 b(Firstly)-6 b(,)22
b(FSIG)h(can)g(be)g(replaced)g(by)f(the)g(transparent)g(functor)345
1880 y(signature)484 2101 y Fu(signature)50 b(FSIG)d(=)g(functor)i(Z:)e
(SIG1)h(->)f(SIG2)345 2322 y FC(alternati)n(v)o(ely)-6
b(,)22 b(we)j(can)h(re)n(v)o(eal)e(the)g(type)h(by)f(adding)h(an)g(e)o
(xplicit)e(sharing)h(constraint:)484 2543 y Fu(signature)50
b(FSIG)d(=)g(functor)i(\(Z:)f(SIG1\))g(->)f(SIG2)h(where)g(type)g(t)e
(=)h(Z.s)345 2764 y FC(F)o(or)25 b(further)g(e)o(xplanation)e(consult)h
([RRS00b)q(,)g(11.3].)491 2924 y(Functors)h(can)g(also)f(be)h(curried.)
31 b(In)25 b(the)g(e)o(xample)f(abo)o(v)o(e)g(we)h(could)f(put)484
3145 y Fu(functor)49 b(Apply2)577 3258 y(\()d(F:)i(FSIG)f(\))577
3370 y(\()f(A:)i(SIG1)f(\))484 3483 y(\):)g(SIG2)h(=)f(F\(A\);)345
3704 y FC(or)484 3925 y Fu(functor)i(EvalAt)577 4038
y(\()d(A:)i(SIG1)f(\))577 4151 y(\()f(F:)i(FSIG)f(\))484
4264 y(\):)g(SIG2)h(=)f(F\(A\);)345 4485 y FC(W)-8 b(e)25
b(can)g(then)g(declare)484 4705 y Fu(functor)49 b(ApplyD)f(=)f
(Apply2\(D\);)345 4926 y FC(to)24 b(obtain)g(a)h(functor)g(mapping)f
(structures)g(to)g(structures,)g(or)484 5147 y Fu(functor)49
b(EvalAtA1)g(=)e(EvalAt\(A1\);)p eop
%%Page: 8 14
8 13 bop 345 -28 a Fw(Chapter)24 b(1.)55 b(Introduction)2431
b FB(8)345 279 y FC(to)24 b(obtain)g(a)h(functor)g(mapping)f(functors)g
(to)g(structures.)491 439 y(It)34 b(is)g(possible)f(to)g(write)h(do)n
(wn)g(signatures)f(for)h(curried)g(functors)g(directly)-6
b(.)58 b(A)34 b(signature)345 599 y(satis\002ed)24 b(by)h
Ft(EvalAt)f FC(can)h(be)g(declared)g(by)g(writing)484
820 y Fu(signature)50 b(ESIG)d(=)g(functor)i(\(E:)f(SIG1\))g(->)f
(functor)i(\(F:)e(FSIG\))h(->)f(SIG2;)345 1041 y FC(Some)36
b(care)g(is)f(needed)h(when)g(the)f Ft(where)g FC(construct)g(is)h
(used)f(in)g(conjunction)f(with)h(functor)345 1201 y(signatures)24
b(for)h(curried)g(functors.)30 b(If)25 b(we)g(ha)n(v)o(e)484
1422 y Fu(signature)50 b(S)c(=)h(sig)h(type)f(t;)g(val)h(x:)f(t)g(end;)
484 1704 y(signature)j(FSIG)d(=)g(functor)i(\(A:)f(S)e(where)i(type)g
(t)f(=)g(int\))h(->)f(S;)345 1924 y FC(is)38 b(a)h(v)n(alid)f(opaque)g
(functor)h(signature,)i(and)e(is)f(accepted)i(by)e(the)h(Mosco)n(w)e
(ML)h(compiler)-5 b(.)345 2085 y(Ho)n(we)n(v)o(er)23
b(if)i(we)g(try)g(to)f(mak)o(e)h(the)g(functor)f(signature)g
(transparent)h(by)f(writing)484 2305 y Fu(signature)50
b(FSIG')e(=)f(functor)h(A:)g(S)e(where)i(type)g(t)f(=)g(int)g(->)g(S;)
345 2526 y FC(then)30 b(a)g(syntax)f(error)i(occurs.)47
b(The)30 b(Mosco)n(w)f(ML)h(grammar)g(does)g(not)f(seem)h(to)g(e)o
(xclude)f(e)o(x-)345 2686 y(pressions)g(of)h(this)f(type,)i(and)f(the)g
(error)h(seems)e(to)h(occur)g(because)h(the)f(compiler)f(cannot)h(dis-)
345 2846 y(tinguish)23 b(the)i(abo)o(v)o(e)e(declaration)i(from)f(one)h
(of)g(the)g(form)484 3067 y Fu(signature)50 b(FSIG')e(=)f(functor)h(A:)
g(S)e(where)i(type)g(t)f(=)g(\(int)h(->)f(bool\))h(->)f(...;)345
3288 y FC(This)25 b(problem)h(is)g(an)g(artef)o(act)h(of)g(the)f(Mosco)
n(w)f(ML)h(technique)g(of)g(using)f(the)i(presence)f(or)h(ab-)345
3448 y(sence)33 b(of)g(parentheses)f(to)h(produce)f(constructs)g(with)g
(dif)n(fering)g(semantics.)53 b(It)33 b(seems)f(lik)o(ely)345
3608 y(that)24 b(the)h(language)g(w)o(ould)f(ha)n(v)o(e)g(been)i
(easier)f(to)f(understand)h(if)f(a)i(dif)n(ferent)e(method)g(had)h
(been)345 3768 y(used,)e(perhaps)f(the)h(use)f(of)h(a)g(dif)n(ferent)g
(type)f(of)h(parentheses;)g(for)g(e)o(xample,)f(there)h(is)f(no)h
(appar)n(-)345 3929 y(ent)i(reason)f(why)g(e)o(xpressions)g(such)g(as)
484 4149 y Fu(functor)49 b(F{X:S})f(=)f(...)345 4370
y FC(or)484 4591 y Fu(signature)j(FSIG')e(=)f(functor)h({A:)g(S)f
(where)h(type)g(t)e(=)h(\(int)h(->)f(bool\)})i(->)e(...;)p
eop
%%Page: 9 15
9 14 bop 345 -28 a Fw(Chapter)24 b(1.)55 b(Introduction)2431
b FB(9)345 279 y FC(could)32 b(not)g(ha)n(v)o(e)h(been)g(used)f(to)h
(denote)f(applicati)n(v)o(e)f(functors)i(and)f(transparent)h(functor)g
(sig-)345 439 y(natures.)69 b(It)37 b(should)g(be)h(noted)f(ho)n(we)n
(v)o(er)l(,)i(that)e(the)h(inability)e(to)h(use)g Ft(where)g
FC(in)g(transparent)345 599 y(functor)22 b(signatures)f(\(probably\))h
(does)g(not)g(actually)f(restrict)h(the)h(e)o(xpressi)n(v)o(e)d(po)n
(wer)i(of)g(the)g(lan-)345 760 y(guage;)27 b(since)f(type)h
(information)e(propagates)g(through)h(transparent)g(functor)h
(signatures,)f(type)345 920 y(constraints)i(are)i(redundant)f(in)g
(this)g(conte)o(xt.)43 b(Ne)n(v)o(ertheless,)29 b(this)g(feature)h(is)f
(something)e(of)j(a)345 1080 y(nuisance)24 b(in)h(practice)g(since)g
(it)f(mak)o(es)g(it)h(dif)n(\002cult)f(to)g(e)o(xperiment)g(with)g
(functor)g(signatures.)491 1240 y(It)f(should)e(be)i(apparent)f(by)g
(no)n(w)g(that)g(the)h(syntax)e(in)l(v)n(olv)o(ed)g(in)h(writing)g(do)n
(wn)f(higher)n(-order)345 1400 y(functors)34 b(can)h(be)f(comple)o(x.)
59 b(W)-8 b(e)35 b(can)g(write)f(higher)n(-order)h(curried)f(functors)g
(with)g(a)h(choice)345 1560 y(of)30 b(generati)n(v)o(e)f(or)h
(applicati)n(v)o(e)e(ar)n(guments,)j(opaque)e(or)i(transparent)e
(functor)h(signatures,)g(and)345 1720 y(opaque)g(or)h(transparent)g
(signature)f(ascriptions)f(to)i(output)e(structures;)k(furthermore,)f
(we)f(can)345 1880 y(add)f(sharing)g(constraints.)45
b(There)31 b(is)e(considerable)h(scope)g(for)g(confusion,)h(and)f(it)g
(can)g(be)g(e)o(x-)345 2040 y(tremely)24 b(dif)n(\002cult)g(to)g
(obtain)g(the)h(desired)g(amount)f(of)g(type)h(propagation.)345
2344 y Fs(1.3.3.2)89 b(Alternative)23 b(syntax)h(in)h(functor)e
(signatures)345 2571 y FC(Another)30 b(layer)h(of)g(comple)o(xity)d(is)
i(added)h(by)f(the)g(choice)h(of)g(syntax)f(for)h(functor)f(ar)n
(guments.)345 2731 y(In)43 b(the)f(e)o(xample)g(abo)o(v)o(e)g(we)g(ha)n
(v)o(e)h(tried)f(to)g(stick)g(to)h(the)f(primiti)n(v)o(e)e(syntax)i
(\(e)o(g)g Ft(functor)345 2891 y(D\(X:SIG1\):)100 b(SIG2)50
b(=)g(...)p FC(\))36 b(b)n(ut)26 b(ha)n(v)o(e)g(used)h(the)f(alternati)
n(v)o(e)f(syntax)h(for)h(the)f(higher)n(-order)345 3052
y(functor)35 b Ft(Apply)g FC(since)g(it)g(has)g(tw)o(o)g(ar)n(guments.)
62 b(If)36 b(we)g(wish)e(to)h(use)h(the)f(alternati)n(v)o(e)f(syntax)
345 3212 y(throughout)23 b(then)i(we)g(must)e(write)484
3415 y Fu(signature)50 b(SIG1)d(=)g(sig)h(type)f(s)g(val)h(x:)f(s)f
(end;)484 3528 y(signature)k(SIG2)d(=)g(sig)h(type)f(t)g(val)h(y:)f
(t*t)g(end;)484 3641 y(signature)j(FSIG)d(=)g(functor)i(\(SOMETHING1:)i
(sig)c(structure)j(X:)d(SIG1)h(end\))1643 3754 y(->)f(SIG2)484
3980 y(functor)i(D)e(\(structure)j(X:)d(SIG1\):)h(SIG2)g(=)484
4093 y(struct)669 4206 y(type)g(t)f(=)g(X.s)669 4319
y(val)h(y)f(=)f(\(X.x,)j(X.x\))484 4431 y(end)484 4657
y(functor)g(Apply)f(\()623 4770 y(functor)h(F:)e(FSIG)623
4883 y(structure)j(A:)d(SIG1)484 4996 y(\):)g(SIG2)h(=)f(F\(structure)j
(X=A\);)484 5222 y(structure)g(A1:)d(SIG1)h(=)p eop
%%Page: 10 16
10 15 bop 345 -28 a Fw(Chapter)24 b(1.)55 b(Introduction)2381
b FB(10)484 279 y Fu(struct)623 392 y(type)48 b(s)f(=)f(string)623
505 y(val)i(x)e(=)h("test")484 618 y(end;)484 844 y(structure)j(B)c(=)h
(Apply)h(\()f(structure)j(A=A1)d(functor)i(F=D)f(\);)484
1070 y(functor)h(Apply2)577 1183 y(\()d(SOMETHING2:)51
b(sig)c(functor)i(F:)e(FSIG)h(end\))577 1295 y(\()e(SOMETHING3:)51
b(sig)c(structure)j(A:)d(SIG1)h(end\))484 1408 y(:)f(SIG2)h(=)e
(SOMETHING2.F\(struc)q(tu)q(re)53 b(X=SOMETHING3.A\);)484
1634 y(functor)c(Eval)577 1747 y(\()d(SOMETHING2:)51
b(sig)c(structure)j(A:)d(SIG1)h(end\))577 1860 y(\()e(SOMETHING3:)51
b(sig)c(functor)i(F:)e(FSIG)h(end\))484 1973 y(:)f(SIG2)h(=)e
(SOMETHING3.F\(struc)q(tu)q(re)53 b(X=SOMETHING2.A\);)345
2180 y FC(A)29 b(small)f(b)n(ut)h(essential)g(change)g(is)g(that)g(we)g
(ha)n(v)o(e)g(had)g(to)g(modify)f Ft(FSIG)h FC(so)g(that)g(the)g(name)g
(of)345 2340 y(the)i(input)g(structure)g(matches)h(that)f(of)h(the)f
(input)g(structure)g(for)h Ft(D)p FC(.)g(This)f(is)g(not)g(surprising)g
(in)345 2500 y(vie)n(w)24 b(of)h(the)g(f)o(act)g(that)f
Ft(D)h FC(no)n(w)f(demands)g(a)i(parameter)f(called)g
Ft(X)p FC(:)f(this)g(must)g(be)h(re\003ected)h(in)e(the)345
2660 y(functor)h(signature.)491 2821 y(A)i(more)f(noticeable)g(change)g
(is)g(that)g(all)g(of)g(the)g(signature)g(e)o(xpressions)f(in)h(the)g
(formal)g(pa-)345 2981 y(rameter)19 b(lists)f(ha)n(v)o(e)g(to)h(ha)n(v)
o(e)f(names)h(attached)f(to)h(them)f(\(the)h(ones)f(be)o(ginning)f
(with)h Ft(SOMETHING)p FC(\).)345 3141 y(This)24 b(appears)h(to)f(be)h
(related)g(to)g(the)g(f)o(act)g(that)484 3348 y Fu(functor)49
b(F\(structure)h(A:SIGA)f(structure)g(B:SIGB\):SIG)i(=)c(...)345
3555 y FC(is)24 b(short)g(for)484 3762 y Fu(functor)49
b(F\(X:struct)1040 3875 y(structure)h(A:SIGA)1040 3988
y(structure)g(B:SIGB)901 4101 y(end\))809 4214 y(:SIG)d(=)g(open)h(X)f
(in)g(...)g(end)345 4421 y FC(The)21 b(precise)h(reason)f(why)g(this)f
(syntax)h(is)g(required)g(when)h(we)f(be)o(gin)g(to)g(use)g(functor)g
(signatures)345 4581 y(is)j(not)g(clear)l(,)h(although)f(the)g
(apparently)h(unnecessary)f(names)h(do)f(come)h(into)e(play)i(when)f
(type-)345 4741 y(sharing)30 b(is)f(required.)47 b(Ho)n(we)n(v)o(er)l
(,)31 b(it)e(should)g(be)i(clear)g(that)f(the)g(alternati)n(v)o(e)f
(syntax)g(should)g(be)345 4902 y(used)23 b(sparingly)f(if)i(possible;)e
(it)h(is)g(already)h(necessary)g(to)f(in)l(v)o(ent)f(names)h(for)h
(signatures,)e(struc-)345 5062 y(tures,)32 b(functors)f(and)g(functor)g
(signatures,)h(and)f(a)g(further)h(class)f(of)g(names)g(is)g(an)g
(unwelcome)345 5222 y(addition.)p eop
%%Page: 11 17
11 16 bop 345 -28 a Fw(Chapter)24 b(1.)55 b(Introduction)2381
b FB(11)345 279 y Fs(1.3.3.3)89 b(Ascription)23 b(of)i(functor)e
(signatures)345 507 y FC(The)f(grammar)f(of)h(Mosco)n(w)e(ML)i(only)f
(allo)n(ws)f(functor)i(signatures)f(to)g(appear)h(in)g(tw)o(o)f(conte)o
(xts:)345 667 y(within)h(the)i(formal)g(parameter)g(list)f(of)h(a)g
(functor)g(de\002nition)f(\(to)g(specify)h(the)g(type)f(of)h(a)g
(functor)345 827 y(ar)n(gument\),)k(and)g(within)f(package)h(bindings)f
(for)h(functors)f(\(see)i(belo)n(w\).)39 b(One)28 b(is)g(not)f(allo)n
(wed)345 987 y(to)e(constrain)h(the)f(type)h(of)g(a)g(functor)f(by)h
(ascribing)f(a)h(functor)g(signature)f(to)h(it.)33 b(Thus)25
b(a)h(functor)345 1147 y(declaration)e(of)h(the)g(form)484
1311 y Fu(functor)49 b(F:)e(FSIG)h(=)69 b Fr(str)m(e)n(xp)345
1476 y FC(is)28 b FA(not)g FC(acceptable,)i(e)n(v)o(en)d(though)h(one)g
(might)f(e)o(xpect)h(that)g(it)g(w)o(ould)g(be)g(by)h(analogy)f(with)f
(the)345 1636 y(situation)35 b(for)j(structure)f(declarations.)67
b(The)37 b(reasons)h(for)f(this)f(restriction)h(are)h(not)e(clear)i(at)
345 1796 y(present,)24 b(b)n(ut)g(it)g(will)g(turn)g(out)g(to)g(ha)n(v)
o(e)g(repercussions)g(for)h(our)f(attempts)f(to)h(e)o(xtend)g(EML)g
(with)345 1956 y(higher)n(-order)h(functors.)345 2254
y Fs(1.3.3.4)89 b(Other)24 b(f)o(eatures)345 2482 y FC(T)-8
b(w)o(o)18 b(other)h(features)g(of)g(the)g(Mosco)n(w)e(ML)i(modules)e
(language)i(are)h(w)o(orth)e(mentioning.)27 b(Firstly)-6
b(,)345 2642 y(one)23 b(can)h(de\002ne)g(anon)o(ymous)d(functors)i
(analogously)f(to)g(the)i(w)o(ay)f(in)g(which)g(anon)o(ymous)e(func-)
345 2802 y(tions)j(are)h(de\002ned:)31 b(a)25 b(simple)f(e)o(xample)g
(is)484 2966 y Fu(sig)47 b(S)g(=)g(...)484 3079 y(functor)i(ID)e(=)g
(functor)i(\(X:S\))f(=>)f(X;)345 3243 y FC(Anon)o(ymous)18
b(functors)j(can)g(appear)g(in)g(an)o(y)f(conte)o(xt)g(where)h(a)g
(functor)g(e)o(xpression)e(is)i(e)o(xpected;)345 3403
y(in)j(particular)h(the)o(y)f(can)h(be)g(passed)g(as)f(actual)h
(parameters)g(to)g(higher)n(-order)g(functors.)491 3564
y(Another)h(thing)g(to)g(note)g(is)g(that)g(there)h(are)g(separate)g
(namespaces)g(for)g(functors)f(and)g(struc-)345 3724
y(tures;)e(it)g(is)h(perfectly)g(le)o(gal)e(to)i(write)484
3888 y Fu(sig)47 b(S)g(=)g(...)484 4001 y(structure)j(X:)d(S)f(=)h(...)
484 4114 y(functor)i(X\(X:S\))f(=)f(X;)484 4227 y(structure)j(X')d(=)f
(X\(X\);)345 4391 y FC(Unfortunately)22 b(this)h(can)h(lead)f(to)g
(ambiguity)f(when)h(a)h(functor)f(returns)g(another)g(functor)h(which)
345 4551 y(is)g(de\002ned)h(by)g(name.)31 b(Gi)n(v)o(en)23
b(the)i(de\002nitions)e(abo)o(v)o(e,)h(we)h(could)f(write)484
4716 y Fu(functor)49 b(F\(X:S\))f(=)f(X)345 4880 y FC(and)36
b(it)f(is)g(not)g(clear)i(whether)e(the)h(result)f(should)g(be)h(the)f
(structure)h Ft(X)f FC(or)h(the)g(functor)f Ft(X)p FC(.)h(By)345
5040 y(def)o(ault)24 b(the)h(structure)g(is)f(returned;)h(to)f
(indicate)g(that)h(the)f(functor)h(is)f(required)h(we)g(must)f(write)
484 5204 y Fu(functor)49 b(F\(X:S\))f(=)f(op)g(X)p eop
%%Page: 12 18
12 17 bop 345 -28 a Fw(Chapter)24 b(1.)55 b(Introduction)2381
b FB(12)345 279 y Fv(1.3.4)107 b(Fir)n(st-c)n(lass)28
b(Structures)g(and)h(P)m(ac)n(ka)o(g)q(e)f(T)-6 b(ypes)345
507 y FC(In)31 b(SML,)g(structures)f(and)h(functors)g(may)g(not)f(be)h
(manipulated)f(as)h(core)g(v)n(alues.)49 b(Thus)30 b(state-)345
667 y(ments)24 b(such)g(as)484 829 y Fu(signature)50
b(SIG)d(=)g(...)484 942 y(structure)j(A:)d(SIG)g(=)g(...)484
1055 y(structure)j(B:)d(SIG)g(=)g(...)484 1281 y(structure)j(X)c(=)h
(if)g(x)g(<)g(7)f(then)i(A)f(else)h(B)345 1434 y FC(\(where)26
b Ft(A)g FC(and)g Ft(B)f FC(are)i(pre)n(viously)d(de\002ned)i
(structures\))g(are)g(ille)o(gal.)32 b(This)25 b(is)g(because)i(the)e
(SML)345 1584 y(type-system)30 b(becomes)h(compromised)f(if)i(such)f
(statements)f(are)j(allo)n(wed.)50 b(Ho)n(we)n(v)o(er)l(,)31
b(Russo)345 1734 y(has)k(sho)n(wn)g(that)g(this)f(problem)h(can)h(be)f
(o)o(v)o(ercome)g(by)g(the)g(introduction)f(of)i FA(pac)n(ka)o(g)o(e)f
(types)345 1884 y FC(for)c(structures)g(and)g(functors.)50
b(A)31 b(structure)g(can)h(be)f(pack)o(ed)h(into)e(a)h(form)h(where)f
(its)g(internal)345 2035 y(components)38 b(cannot)i(be)f(directly)g
(accessed.)76 b(Such)40 b(an)g(object)f(can)h(then)g(be)g(manipulated)
345 2185 y(within)31 b(the)h(core)g(and)g(subsequently)f(unpack)o(ed)h
(to)f(its)h(original)f(form.)52 b(The)32 b(e)o(xample)f(abo)o(v)o(e)345
2335 y(can)25 b(no)n(w)f(be)h(successfully)f(implemented)f(by)i
(writing)484 2498 y Fu(signature)50 b(SIG)d(=)g(...)484
2610 y(structure)j(A:)d(SIG)g(=)g(...)484 2723 y(structure)j(B:)d(SIG)g
(=)g(...)484 2949 y(val)g(A_packed)j(=)c([structure)k(A)d(as)g(SIG];)
484 3062 y(val)g(B_packed)j(=)c([structure)k(B)d(as)g(SIG];)484
3288 y(structure)j(X)c(as)h(SIG)h(=)f(if)g(x)f(<)h(7)g(then)h(A_packed)
95 b(else)48 b(B_packed)345 3461 y FC(Functors)24 b(can)i(also)e(be)h
(pack)o(ed)g(and)g(unpack)o(ed)g(using)e(a)i(similar)f(syntax.)491
3621 y(The)d(e)o(xample)f(gi)n(v)o(en)g(abo)o(v)o(e)g(is)g(tri)n(vial,)
g(b)n(ut)h(this)f(technique)g(has)h(ob)o(vious)e(uses)i(for)g(run-time)
345 3781 y(recon\002guration)h(of)h(programs.)29 b(First-class)23
b(modules)e(are)i(also)g(useful)f(in)g(the)h(implementation)345
3941 y(of)j(data-structures.)35 b(There)27 b(are)g(certain)f
(non-uniform)f(functional)h(data-structures)g(which)f(are)345
4101 y(most)j(naturally)g(dealt)g(with)g(using)g(polymorphic)f
(recursion.)43 b(This)28 b(is)g(not)g(a)n(v)n(ailable)g(is)h(SML;)345
4261 y(it)f(can)i(be)f(simulated,)f(b)n(ut)g(this)g(requires)h(the)g
(programmer)f(to)h(pass)g(data)g(such)f(as)h(the)g(current)345
4421 y(depth)36 b(of)h(recursion)g(as)g(function)f(parameters.)67
b(This)37 b(technique)f(is)g(not)h(ideal)f(as)h(the)g(SML)345
4581 y(type-system)19 b(cannot)h(be)h(used)g(to)f(ensure)h(that)f(such)
g(data)h(is)f(used)g(correctly)-6 b(.)29 b(Ho)n(we)n(v)o(er)l(,)20
b(higher)n(-)345 4741 y(order)29 b(functors)f(and)h(\002rst-class)g
(structures)f(can)h(be)g(used)f(to)h(o)o(v)o(ercome)e(this)h(problem.)
42 b(There)345 4902 y(is)28 b(also)f(a)i(useful)f(technique)f(kno)n(wn)
g(as)i FA(data-structur)o(al)c(bootstr)o(apping)g FC(which)i(uses)h
(higher)n(-)345 5062 y(order)21 b(methods)e(to)h(construct)f(comple)o
(x)g(data)i(structures.)28 b(The)21 b(reader)g(should)e(consult)g
([Oka98,)345 5222 y(Chapter)25 b(10])g(for)g(e)o(xamples.)p
eop
%%Page: 13 19
13 18 bop 345 -28 a Fw(Chapter)24 b(1.)55 b(Introduction)2381
b FB(13)345 279 y Fx(1.4)128 b(Extended)35 b(ML)345 542
y FC(Extended)22 b(ML)g(\(EML\))g(is)g(an)g(e)o(xtension)f(of)i(the)f
(Standard)h(ML)f(language,)g(pro)o(viding)f(a)i(frame-)345
703 y(w)o(ork)h(for)h(formal)f(speci\002cation)g(and)g(de)n(v)o
(elopment)e(of)i(SML)g(programs.)30 b(EML)24 b(e)o(xtends)f(SML)345
863 y(by)i(pro)o(viding)f(means)h(for)h(embedding)f(logical)g(axioms)f
(in)i(an)f(SML)h(program)f(in)h(order)g(to)f(de-)345
1023 y(scribe)31 b(its)f(beha)n(viour)l(,)i(and)f(also)f(by)h(allo)n
(wing)e(the)i(programmer)f(to)g(lea)n(v)o(e)h(certain)g(parts)g(of)g(a)
345 1183 y(program)c(unimplemented.)39 b(Expositions)25
b(of)j(EML)f(can)i(be)f(found)f(in)h([San91])g(and)g([Kah97].)345
1343 y([KST94])f(gi)n(v)o(es)e(a)j(full)e(semantics)g(for)h(EML)g(in)f
(the)h(style)f(of)h(the)g(SML)g(de\002nition.)36 b(An)27
b(intro-)345 1503 y(duction)d(to)g(the)h(semantics)f(can)h(be)g(found)f
(in)g([KST97].)345 1848 y Fv(1.4.1)107 b(Speci\002cations)27
b(in)j(EML)345 2075 y FC(EML)c(is)g(a)h(relati)n(v)o(ely)e(small)h(e)o
(xtension)f(of)i(SML.)f(One)h(of)g(the)f(main)g(features)i(of)e(EML)g
(is)h(that)345 2235 y(it)d(pro)o(vides)g(ne)n(w)g(k)o(e)o(yw)o(ords)g
(\(such)h(as)g(the)f(quanti\002ers)h Ft(exists)f FC(and)h
Ft(forall)p FC(,)e(and)i(the)g(logical)345 2395 y(connecti)n(v)o(es)31
b Ft(implies)g FC(and)h Ft(iff)p FC(\))g(which)g(can)h(be)f(used)g(to)g
(specify)g(the)g(intended)g(beha)n(viour)345 2555 y(of)f(modules.)46
b(A)31 b(well-kno)n(wn)e(e)o(xample)h(is)g(the)g(procedure)h(of)g
(sorting)e(elements)h(of)h(a)f(totally)345 2715 y(ordered)25
b(set.)31 b(In)24 b(SML)h(one)g(can)g(write)530 2936
y Fu(signature)50 b(ORD)d(=)g(sig)716 3049 y(type)h(t)716
3162 y(val)f(le:)h(t*t)f(->)g(bool)530 3275 y(end;)345
3496 y FC(with)28 b(the)h(intention)f(of)h(describing)f(structures)g
(which)h(contain)f(a)i(type)f Ft(t)g FC(of)g(elements)f(and)h(an)345
3656 y(ordering)24 b(relation)h Ft(le)f FC(between)h(elements.)30
b(In)25 b(EML)f(this)g(can)h(be)g(made)g(e)o(xplicit)e(by)i(writing)530
3877 y Fu(signature)50 b(ORD)d(=)g(sig)716 3990 y(type)h(t)716
4103 y(val)f(le:)h(t*t)f(->)g(bool)716 4215 y(axiom)h(forall)h(x)d(=>)h
(le\(x,x\))716 4328 y(axiom)h(forall)h(\(x,y,z\))f(=>)g(le\(x,y\))g
(andalso)h(le\(y,z\))g(implies)g(le\(x,z\))716 4441 y(axiom)f(forall)h
(\(x,y\))f(=>)f(le\(x,y\))i(andalso)g(le\(y,x\))g(implies)f(x==y)716
4554 y(axiom)g(forall)h(\(x,y\))f(=>)f(le\(x,y\))i(orelse)f(le\(y,x\))
530 4667 y(end;)345 4888 y FC(It)31 b(is)g(then)h(possible)e(to)h
(write)g(a)h(generic)g(sorting)e(functor)i(which,)g(gi)n(v)o(en)e(a)i
(structure)f Ft(X)h FC(satis-)345 5048 y(fying)h Ft(ORD)g
FC(\(and)h(the)g(axioms)e(within)h(it\),)i(will)e(produce)h(a)g
(structure)f(containing)g(a)h(function)345 5208 y(which)g(will)f(sort)h
(elements)g(of)h Ft(X)f FC(according)g(to)h Ft(X.le)p
FC(.)58 b(The)35 b(adv)n(antage)f(which)g(EML)g(gi)n(v)o(es)p
eop
%%Page: 14 20
14 19 bop 345 -28 a Fw(Chapter)24 b(1.)55 b(Introduction)2381
b FB(14)345 279 y FC(us)30 b(here)g(is)g(that)f(if)h(the)g(sorting)f
(functor)h(is)f(properly)h(written)f(then)h(it)f(can)i(be)f(pro)o(v)o
(ed)f(that)g(the)345 439 y(sorting)35 b(function)h(will)f(be)i(correct)
g(for)g FA(any)f FC(structure)h(which)f(satis\002es)g
Ft(ORD)p FC(,)g(where)h(we)f(in-)345 599 y(terpret)i(satisf)o(action)e
(in)h(the)g(strong)g(EML)g(sense)h(which)f(includes)f(satisf)o(action)h
(of)g(axioms.)345 760 y(In)c(this)g(w)o(ay)g(EML)g(e)o(xploits)e(the)i
(SML)g(module)f(system)h(to)f(modularise)h(speci\002cations)f(and)345
920 y(proofs:)e(a)24 b(program)g(can)h(be)f(split)f(up)h(into)f
(functors)h(whose)g(input)f(and)h(output)f(structures)g(ha)n(v)o(e)345
1080 y(their)32 b(beha)n(viour)f(speci\002ed)h(by)g(EML)f(signatures,)i
(and)f(the)g(o)o(v)o(erall)e(program)i(can)g(be)g(sho)n(wn)345
1240 y(to)d(be)h(correct)h(by)e(sho)n(wing)f(that)i(the)f(parts)h(of)g
(the)f(program)h(are)g(correct)h(with)e(respect)h(to)f(the)345
1400 y(beha)n(viour)34 b(speci\002ed)g(by)g(their)g(signatures.)58
b(W)-8 b(e)35 b(will)e(go)h(into)g(more)g(detail)g(on)g(this)f(subject)
345 1560 y(belo)n(w)-6 b(.)491 1720 y(The)34 b(e)o(xample)g(abo)o(v)o
(e)f(illustrates)g(another)h(of)g(the)h(features)f(of)h(EML:)e(the)h
(predicate)h Ft(==)p FC(.)345 1880 y(Recall)28 b(that)f(SML)g(has)g
(the)g(equality)f(predicate)i Ft(=)p FC(.)37 b(This)27
b(is)g(o)o(v)o(erloaded)f(and)h(applies)f(to)h(man)o(y)345
2040 y(types.)51 b(Ho)n(we)n(v)o(er)l(,)32 b Ft(=)g FC(can)g(only)f(be)
h(applied)f(to)h(so-called)f FA(equality)g(types)p FC(.)51
b(F)o(or)32 b(simple)f(types)345 2201 y(such)k(as)g(inte)o(gers)e(or)i
(strings)f(it)h(is)f(clear)i(what)e(equality)g(should)g(mean;)40
b(for)35 b(more)f(comple)o(x)345 2361 y(types)23 b(such)h(as)f
(functions)g(of)h(type)f Ft(int)51 b(->)f(int)23 b FC(we)h(still)f(kno)
n(w)f(what)i(equality)f(should)f(mean,)345 2521 y(b)n(ut)i(there)h(is)f
(no)h(general)g(method)f(to)g(decide)h(whether)g(tw)o(o)f(dif)n
(ferently-de\002ned)h(functions)e(are)345 2681 y(in)h(f)o(act)i(equal,)
f(in)f(the)h(sense)g(that)f(the)o(y)g(agree)i(on)f(e)n(v)o(ery)f
(possible)g(ar)n(gument.)30 b(Because)c(of)f(this,)345
2841 y(one)j(may)f(not)g(apply)g(the)h Ft(=)g FC(operator)f(to)h
(functions)e(in)i(SML.)f(In)h(f)o(act,)h(SML97)e(does)h(not)f(e)n(v)o
(en)345 3001 y(re)o(gard)22 b(the)g(type)f Ft(real)h
FC(as)g(an)g(equality)g(type)f(\(although)g(Mosco)n(w)g(ML)h(does\):)29
b(see)22 b([MTHM97)o(,)345 3161 y(G.21].)491 3321 y(F)o(or)35
b(a)g(dif)n(ferent)f(e)o(xample,)i(consider)e(the)h(problem)f(of)g
(implementing)f(queues)h(in)g(SML.)345 3481 y(There)c(are)g
(implementations)d(where)j(a)g(queue)g(is)f(represented)h(by)f(tw)o(o)g
(lists,)h(one)f(containing)345 3642 y(elements)19 b(from)h(the)g(front)
f(of)h(the)g(list,)g(and)g(the)f(other)h(containing)f(elements)g(from)h
(the)g(back)g(\(see)345 3802 y([P)o(au96,)k(7.3])g(for)g(e)o(xample\).)
30 b(W)l(ith)23 b(this)g(implementation)f(it)i(is)f(possible)g(for)h(a)
h(gi)n(v)o(en)d(queue)j(to)345 3962 y(be)d(represented)h(by)e(se)n(v)o
(eral)h(dif)n(ferent)g(pairs)g(of)g(lists.)28 b(In)23
b(SML)f Ft(int)50 b(list)21 b FC(is)h(an)g(equality)g(type,)345
4122 y(b)n(ut)i(clearly)h Ft(==)g FC(is)f FA(not)g FC(the)h(relation)f
(that)g(we)i(w)o(ant)e(to)h(decide)f(if)h(tw)o(o)g(queues)f(are)i(the)e
(same.)491 4282 y(T)-8 b(o)23 b(deal)g(with)f(problems)f(such)i(as)g
(this,)f(EML)g(has)h(the)f(operator)h Ft(==)g FC(to)f(denote)h
(\223logical\224)f(or)345 4442 y(\223beha)n(vioural\224)27
b(equality)f(\(the)h(ne)o(gation)e(of)i Ft(==)g FC(is)f(denoted)h(by)g
Ft(=/=)p FC(\))f(we)i(ha)n(v)o(e)e FA(e)3240 4457 y Fo(1)3305
4442 y Fn(==)f FA(e)3528 4457 y Fo(2)3596 4442 y FC(if)i
FA(e)3728 4457 y Fo(2)345 4602 y FC(can)g(be)g(substituted)e(for)j
FA(e)1278 4617 y Fo(1)1347 4602 y FC(\(and)f(vice-v)o(ersa\))g(in)g(an)
o(y)f(e)o(xpression)g(without)f(altering)i(the)g(v)n(alue)345
4762 y(of)e(that)f(e)o(xpression.)491 4922 y(There)31
b(are)h(other)e(EML)g(predicates)h(such)f(as)h Ft(proper)e
FC(and)i Ft(terminates)e FC(which)h(we)h(will)345 5082
y(not)24 b(discuss)g(here:)31 b(see)25 b(the)g(references)h(for)f
(further)g(details.)p eop
%%Page: 15 21
15 20 bop 345 -28 a Fw(Chapter)24 b(1.)55 b(Introduction)2381
b FB(15)345 279 y Fv(1.4.2)107 b(Formal)28 b(Pr)n(ogram)h(De)n
(velopment)e(in)j(EML)345 507 y FC(\(This)24 b(section)g(is)h(modelled)
e(closely)h(on)h([KST97,)g(Section)g(4]\))345 667 y(The)e(features)g
(discussed)f(abo)o(v)o(e)g(deal)h(with)f(the)h(speci\002cation)f(of)h
(programs)g(in)f(EML.)g(There)i(is)345 827 y(also)i(a)i(mechanism)d(in)
i(EML)f(for)h(aiding)f(in)h(the)f(formal)h(de)n(v)o(elopment)e(of)i
(programs.)36 b(Certain)345 987 y(e)o(xpressions)g(may)i(be)g(left)g
(unde\002ned)g(by)g(assigning)e(them)i(the)g(v)n(alue)f
Ft(?)p FC(.)70 b(This)38 b(allo)n(ws)e(the)345 1147 y(actual)31
b(coding)f(of)h(a)h(program)e(fragment)h(to)g(be)g(deferred)h(until)e
(later)h(in)f(the)h(de)n(v)o(elopment)e(of)345 1307 y(the)k(program;)k
(ho)n(we)n(v)o(er)l(,)d(if)f(the)h(beha)n(viour)e(of)i(the)f
(unde\002ned)g(part)h(is)f(speci\002ed)g(by)g(axioms)345
1467 y(then)24 b(we)h(will)e(be)i(able)f(to)g(guarantee)h(that)f
FA(any)g FC(implementation)e(of)j(the)f(unde\002ned)g(part)h(which)345
1627 y(satis\002es)30 b(the)g(axioms)f(will)h(lead)g(to)g(a)h(correct)g
(program.)47 b(This)29 b(gi)n(v)o(es)g(rise)i(to)f(a)g(methodology)345
1787 y(for)35 b(program)g(de)n(v)o(elopment:)50 b(one)35
b(starts)f(with)h(a)h(speci\002cation)f(of)g(the)g(program)g(as)g
(functor)345 1948 y(whose)30 b(implementation)f(is)h(unde\002ned,)i(b)n
(ut)f(whose)f(beha)n(viour)g(is)h(speci\002ed)g(by)f(appropriate)345
2108 y(EML)24 b(signatures.)30 b(Thus)24 b(the)h(initial)e
(speci\002cation)i(of)g(a)g(program)f(may)h(be)g(of)f(the)h(form)484
2329 y Fu(functor)49 b(F\(X0:)f(SIG0\))g(:)f(SIG0')h(=)f(?)345
2549 y FC(W)-8 b(e)36 b(then)f(proceed)h(from)f(the)g(initial)f
(speci\002cation)h(by)g(decomposing)f(the)h(functor)g(F)h(into)f(a)345
2709 y(number)24 b(of)h(other)g(functors:)484 2930 y
Fu(functor)49 b(G1\(X1:)f(SIG1\):)h(SIG1')f(=)f(?)1040
3043 y(.)1040 3156 y(.)1040 3269 y(.)484 3382 y(functor)i(Gn\(Xn:)f
(SIGn\):)h(SIGn')f(=)f(?)345 3603 y FC(and)25 b(rede\002ning)g
Ft(F)f FC(by)484 3824 y Fu(functor)49 b(F\(X0:)f(SIG0\):)h(SIG0')f(=)69
b Fr(str)m(e)n(xp)345 4044 y FC(where)28 b FA(str)l(e)n(xp)f
FC(is)g(some)g(structure)g(e)o(xpression)f(in)l(v)n(olving)f
Ft(G1)p FC(,.)15 b(.)g(.)g Ft(Gn)p FC(.)37 b(W)-8 b(e)28
b(can)g(then)f(repeat)g(the)345 4205 y(procedure,)d(re\002ning)g(each)g
(functor)f Ft(Gi)p FC(.)30 b(Ev)o(entually)-6 b(,)22
b(we)h(arri)n(v)o(e)g(at)h(functors)f(whose)g(speci\002ca-)345
4365 y(tion)k(is)g(tractable)h(enough)f(to)h(admit)e(\(at)i(least)g
(partial\))g(implementation)d(by)i(e)o(x)o(ecutable)g(SML)345
4525 y(code.)64 b(This)35 b(gi)n(v)o(es)g(a)h(tree-lik)o(e)g(process)g
(of)g(re\002nement.)64 b(At)35 b(each)i(branch)f(of)g(the)g(tree)g(cer)
n(-)345 4685 y(tain)26 b(proof)h(obligations)e(are)i(incurred;)h(if)f
(we)g(can)g(pro)o(v)o(e)f(that)h(these)f(obligations)f(are)j
(satis\002ed)345 4845 y(then)c(we)h(can)f(guarantee)h(that)f(the)g
(resulting)g(program)g(is)g(correct)h(with)e(respect)i(to)f(the)g
(original)345 5005 y(speci\002cation.)p eop
%%Page: 16 22
16 21 bop 345 -28 a Fw(Chapter)24 b(1.)55 b(Introduction)2381
b FB(16)491 279 y FC(The)25 b(de)n(v)o(elopment)e(process)h(in)l(v)n
(olv)o(es)f(three)i(distinct)f(processes:)30 b FA(decomposition)p
FC(,)23 b FA(coding)345 439 y FC(and)k FA(r)l(e\002nement)p
FC(.)38 b(W)-8 b(e)27 b(will)g(no)n(w)f(describe)h(the)g(proof)g
(obligations)e(associated)i(with)f(each)i(pro-)345 599
y(cess;)k(these)e(are)h(tak)o(en)f(almost)e(v)o(erbatim)h(from)h
([KST97].)46 b(Each)30 b(proof)g(obligation)e(is)h(of)h(the)345
760 y(form)1579 920 y FA(e)n(x)7 b(p)1722 935 y Fo(1)1778
920 y Fm([)14 b(\001)d(\001)g(\001)i([)h FA(e)n(x)7 b(p)2200
935 y Fl(n)2265 920 y Fm(j)-17 b Fn(=)22 b FA(S)q(I)6
b(G)345 1152 y FC(where)36 b(each)h FA(e)n(x)7 b(p)997
1167 y Fl(j)1061 1152 y FC(is)36 b(either)g(an)g(EML)f(signature)g(or)i
(structure)e(e)o(xpression,)j(and)e FA(S)q(I)6 b(G)34
b FC(is)i(an)345 1312 y(EML)29 b(signature.)46 b(T)-8
b(o)29 b(sho)n(w)g(that)h(such)f(an)h(obligation)e(is)h(satis\002ed)h
(we)g(are)h(required)f(to)f(sho)n(w)345 1472 y(that)24
b(the)h(axioms)f(in)g FA(S)q(I)6 b(G)24 b FC(are)h(logical)f
(consequences)h(of)g(the)g(axioms)e(in)i(the)f(v)n(arious)g
FA(e)n(x)7 b(p)3568 1487 y Fl(j)3596 1472 y FC(.)345
1632 y(The)25 b(three)g(processes)f(in)h(the)f(de)n(v)o(elopment)f
(process)i(are)g(as)g(follo)n(ws.)345 1938 y Fs(Decomposition.)345
2165 y FC(This)f(is)g(the)h(process)g(described)f(abo)o(v)o(e)g(of)h
(replacing)g(a)g(functor)f(de\002nition)530 2386 y Fu(functor)49
b(F\(X0:)f(SIG0\):)h(SIG0')f(=)f(?)345 2607 y FC(with)24
b(an)h(e)o(xpression)e(of)i(the)g(form)530 2828 y Fu(functor)49
b(F\(X0:)f(SIG0\):)h(SIG0')f(=)70 b Fr(str)m(e)n(xp)345
3048 y FC(where)22 b FA(str)l(e)n(xp)f FC(is)g(an)h(arbirary)g
(structure)f(e)o(xpression)f(in)l(v)n(olving)f Ft(X0)j
FC(and)f(possibly)f(se)n(v)o(eral)g(other)345 3209 y(functors)k
Ft(G0,...,)50 b(G)p FA(n)p FC(.)30 b(F)o(or)25 b(a)g(simple)f(e)o
(xample)g(consider)g(the)h(case)530 3429 y Fu(functor)49
b(F\(X0:)f(SIG0\):)h(SIG0')f(=)f(G2\(G1\(X0\)\))345 3650
y FC(where)25 b Ft(G1)g FC(and)f Ft(G2)h FC(are)h(ne)n(w)e(functors)g
(gi)n(v)o(en)g(by)530 3871 y Fu(functor)49 b(G1\(X1:)g(SIG1\):)f(SIG1')
h(=)d(?)530 3984 y(functor)j(G2\(X2:)g(SIG2\):)f(SIG2')h(=)d(?)345
4205 y FC(This)29 b(step)h(generates)g(three)g(proof)g(obligations,)f
(each)i(stating)e(that)g(the)h(output)f(of)h(one)g(of)g(the)345
4365 y(functors)24 b(is)h(acceptable)g(as)g(input)f(for)h(another:)669
4586 y Fu(SIG0)48 b Fk(j)-15 b Fh(=)46 b Fu(SIG1)669
4699 y(SIG1)i Fk(j)-15 b Fh(=)46 b Fu(SIG2)669 4812 y(SIG2')j
Fk(j)-15 b Fh(=)46 b Fu(SIG0')p eop
%%Page: 17 23
17 22 bop 345 -28 a Fw(Chapter)24 b(1.)55 b(Introduction)2381
b FB(17)345 279 y Fs(Coding.)345 507 y FC(A)25 b(functor)f(of)h(the)g
(form)484 681 y Fu(functor)49 b(F\(X:)f(SIG\):)g(SIG')g(=)e(?)345
855 y FC(is)24 b(replaced)i(by)484 1029 y Fu(functor)49
b(F\(X:)f(SIG\):)g(SIG')g(=)69 b Fr(str)m(e)n(xp)345
1203 y FC(where)25 b FA(str)l(e)n(xp)g FC(is)f(an)h(EML)f(functor)h
(body)-6 b(.)30 b(This)24 b(gi)n(v)o(es)f(a)i(single)f(obligation:)484
1378 y Fu(SIG)47 b Fk([)69 b Fr(str)m(e)n(xp)48 b Fk(j)-15
b Fh(=)46 b Fu(SIG')345 1552 y FC(\(and)25 b(possibly)e(others)h
(arising)g(from)h(the)g(use)f(of)h(structures)f(within)g
FA(s)n(t)7 b(r)o(e)n(x)g(p)p FC(\).)345 1851 y Fs(Re\002nement.)345
2079 y FC(A)25 b(functor)f(of)h(the)g(form)484 2253 y
Fu(functor)49 b(F\(X:)f(SIG\):)g(SIG')g(=)69 b Fr(str)m(e)n(xp)345
2427 y FC(is)24 b(replaced)i(by)484 2601 y Fu(functor)49
b(F\(X:)f(SIG\):)g(SIG')g(=)69 b Fr(str)m(e)n(xp')345
2776 y FC(where)28 b FA(s)n(t)7 b(r)o(e)n(x)g(p)869 2739
y Fg(0)921 2776 y FC(is)28 b(an)g(EML)f(functor)h(body)g(\(presumably)f
(implementing)e(one)j(or)g(more)g(unde-)345 2936 y(\002ned)d(e)o
(xpressions)e(in)i FA(s)n(t)7 b(r)o(e)n(x)g(p)p FC(\).)30
b(This)24 b(gi)n(v)o(es)f(the)i(proof)f(obligation)484
3110 y Fu(SIG)47 b Fk([)f Fr(s)n(t)6 b(r)o(e)n(x)h(p)1004
3077 y Fe(0)1095 3110 y Fk(j)-15 b Fh(=)67 b Fr(s)n(t)6
b(r)o(e)n(x)h(p)345 3284 y FC(\(and)25 b(possibly)e(others)h(arising)g
(from)h(the)g(use)f(of)h(structures)f(within)g FA(s)n(t)7
b(r)o(e)n(x)g(p)3044 3248 y Fg(0)3068 3284 y FC(\))345
3678 y Fx(1.5)128 b(Extending)35 b(EML)345 3941 y FC(The)24
b(program)g(de)n(v)o(elopment)e(procedure)j(gi)n(v)o(en)e(abo)o(v)o(e)g
(is)h(clearly)g(a)h(top-do)n(wn)d(procedure;)j(we)345
4101 y(start)31 b(with)g(a)h(speci\002cation)f(of)g(the)h(entire)f
(program)g(and)h(gradually)f(re\002ne)h(it)f(until)g(we)g(reach)345
4261 y(e)o(x)o(ecutable)24 b(code.)32 b(It)26 b(is)f(also)f(clear)i
(that)f(the)g(process)g(relies)h(hea)n(vily)e(on)h(the)g(module)f
(structure)345 4421 y(of)40 b(SML.)f(It)g(is)h(natural)f(to)g(ask)h
(what)f(ef)n(fect)h(the)f(introduction)f(of)i(Mosco)n(w)e(ML)-9
b(')k(s)38 b(higher)n(-)345 4581 y(order)31 b(functors)f(w)o(ould)g(ha)
n(v)o(e)h(on)f(EML.)g(The)h(answer)g(to)f(this)g(question)f(appears)i
(to)g(be)g(gi)n(v)o(en)345 4741 y(in)37 b([SST92],)k(and)d(is)f(that)g
(the)g(use)g(of)h(higher)n(-order)f(functors)g(can)h(introduce)f(a)h
(bottom-up)345 4902 y(element)28 b(into)g(the)g(EML)g(methodology)-6
b(.)39 b(T)-8 b(o)29 b(be)f(clarify)h(this,)f(reconsider)h(the)f
(decomposition)345 5062 y(e)o(xample)35 b(abo)o(v)o(e,)k(b)n(ut)c
(suppose)h(that)g(the)g(decomposition)e(is)i(as)g(follo)n(ws:)52
b(we)37 b(be)o(gin)e(with)h(a)345 5222 y(functor)p eop
%%Page: 18 24
18 23 bop 345 -28 a Fw(Chapter)24 b(1.)55 b(Introduction)2381
b FB(18)530 279 y Fu(functor)49 b(F\(X0:)f(SIG0\):)h(SIG0')f(=)f(?)345
488 y FC(and)25 b(replace)g(it)f(by)530 697 y Fu(functor)49
b(F\(X0:)f(SIG0\):)h(SIG0')f(=)f(G2\(G1\(X0\)\))345 907
y FC(where)25 b Ft(G1)g FC(and)f Ft(G2)h FC(are)h(ne)n(w)e(functors)g
(gi)n(v)o(en)g(by)530 1116 y Fu(functor)49 b(G1\(X1:)g(SIG0\):)f(SIG1)g
(=)f(?)530 1229 y(functor)i(G2\(X2:)g(SIG1\):)f(SIG0')h(=)d(?)345
1438 y FC(T)-8 b(o)26 b(simplify)f(matters)h(we)g(ha)n(v)o(e)g(assumed)
g(that)g(the)g(output)f(signature)h(of)h(G1)f(e)o(xactly)g(matches)345
1598 y(the)33 b(input)g(signature)g(of)h(G2,)h(and)f(similarly)e(for)i
(the)f(other)h(functors.)56 b(In)34 b(this)f(situation,)h(we)345
1758 y(could)c(use)h(higher)n(-order)g(functors)g(to)f(decompose)h(F)g
(by)g(introducing)e(ne)n(w)i(functors)g Ft(H1)f FC(and)345
1918 y Ft(H2)24 b FC(gi)n(v)o(en)g(by)530 2127 y Fu(functor)49
b(H1\(X0:)g(SIG0\):)f(SIG1)g(=)f(?)530 2240 y(functor)i(H2\(structure)i
(Y:)c(SIG0)1040 2353 y(functor)i(H:)e(functor)i(SIG0)f(->)f(SIG1\):)i
(SIG0')f(=)f(?)345 2562 y FC(and)25 b(then)f(writing)530
2771 y Fu(functor)49 b(F\(X0:SIG0\):)i(SIG0')d(=)f(H2\(structure)j
(Y=X0)e(functor)h(H=H1\);)345 2980 y FC(This)25 b(can)i(clearly)f(be)g
(generalised)g(by)g(allo)n(wing)f(functors)g(with)h(multiple)e(ar)n
(guments,)i(curried)345 3140 y(functors,)i(and)g(functors)g(of)g(e)n(v)
o(en)f(higher)h(order)-5 b(.)40 b(It)28 b(should)f(be)h(noted)g(that)g
(this)f(subsumes)f(the)345 3301 y(earlier)f(functor)f(decomposition)e
(step)i(as)g(we)h(can)g(easily)e(produce)i(a)f(functor)h(which)e(tak)o
(es)i(tw)o(o)345 3461 y(functors)g(as)h(parameters)g(and)f(returns)h
(their)f(composition.)31 b(The)26 b(only)e(proof)i(obligations)d(aris-)
345 3621 y(ing)j(in)g(the)h(particular)f(e)o(xample)g(abo)o(v)o(e)g
(arise)h(from)f(the)h(use)f(of)h(structures)f(within)g(the)g(functor)
345 3781 y(body)-6 b(,)30 b(because)g(the)f(signatures)g(of)h(the)g
(formal)f(ar)n(guments)g(coincide)h(with)f(the)g(signatures)g(of)345
3941 y(the)e(formal)g(ones)f(\(and)i(this)e(is)h(usually)f(what)g
(happens)h(in)g(practice\);)h(in)f(a)h(more)f(general)g(situ-)345
4101 y(ation)g(we)g(w)o(ould)g(ha)n(v)o(e)g(to)f(check)i(obligations)d
(similar)h(to)h(those)g(arising)f(in)h(the)g(original)g(case,)345
4261 y(b)n(ut)d(in)l(v)n(olving)f(functor)i(signatures.)491
4421 y(As)g(mentioned)f(earlier)l(,)i(the)e(use)h(of)h(higher)n(-order)
f(functors)f(introduces)h(the)g(possibility)d(of)345
4581 y(a)g(bottom-up)e(strate)o(gy)h(into)g(the)h(EML)g(de)n(v)o
(elopment)d(methodology)-6 b(.)27 b(When)22 b(f)o(aced)h(with)e(a)i(ne)
n(w)345 4741 y(problem)i(we)g(may)h(ha)n(v)o(e)f(pre)n
(viously-implemented)d(functors)j(for)h(carrying)g(out)f(tasks)g(such)g
(as)345 4902 y(sorting)d(or)i(producing)e(comple)o(x)h
(data-structures.)29 b(A)24 b(higher)n(-order)f(functor)h(can)g(then)f
(be)g(used)345 5062 y(to)i(incorporate)h(such)g(functors)f(into)g(the)h
(solution)e(of)i(our)g(problem.)33 b(W)-8 b(e)26 b(will)f(see)h(an)g(e)
o(xample)345 5222 y(of)f(this)f(process)g(in)h(Chapter)g(3.)p
eop
%%Page: 19 25
19 24 bop 345 -28 a Fw(Chapter)24 b(1.)55 b(Introduction)2381
b FB(19)491 279 y FC(In)29 b(the)f(ne)o(xt)g(chapter)h(we)f(will)g
(describe)h(an)f(implementation)e(which)j(amalgamates)e(EML)345
439 y(and)c(Mosco)n(w)f(ML,)g(and)h(we)h(will)e(subsequently)f(use)i
(this)f(to)h(carry)h(out)e(a)i(formal)e(de)n(v)o(elopment)345
599 y(using)i(higher)n(-order)h(functors.)p eop
%%Page: 20 26
20 25 bop 1629 1026 a Fz(Chapter)52 b(2)1088 1523 y(Extended)f(Mosco)m
(w)h(ML)345 2015 y FC(W)-8 b(e)28 b(ha)n(v)o(e)g(incorporated)f(the)h
(EML)f(syntax)g(into)g(the)g(Mosco)n(w)g(ML)g(syntax)g(to)g(produce)h
(a)g(lan-)345 2175 y(guage)g(which)h(we)f(shall)g(refer)i(to)e(as)h
FA(Extended)f(Moscow)h(ML)p FC(.)g(This)e(w)o(as)i(done)f(by)h(taking)e
(the)345 2335 y(Mosco)n(w)20 b(ML)g(grammar)h(\(see)g([RRS00a)r(])g
(and)g(adding)f(phrases)h(for)g(the)g(e)o(xtra)g(EML)f(constructs)345
2495 y(\(together)32 b(with)f(a)i(minor)e(ne)n(w)h(feature:)46
b(a)32 b(unique)g(e)o(xistential)e(quanti\002er\).)53
b(Since)33 b(the)f(EML)345 2656 y(syntax)27 b(and)h(semantics)f(are)h
(based)g(on)g(SML90)f(and)h(Mosco)n(w)f(ML)g(is)g(based)h(on)g(SML97)f
(cer)n(-)345 2816 y(tain)e(features)h(of)g(EML)f(had)g(to)g(be)h
(modi\002ed)f(to)g(mak)o(e)h(it)f(compatible)f(with)h(Mosco)n(w)f(ML;)h
(see)345 2976 y(the)g(comments)e(after)i(the)g(grammar)g(for)g(more)f
(details.)491 3136 y(A)k(BNF)g(grammar)f(for)h(the)f(syntax)g(of)h
(Extended)e(Mosco)n(w)h(ML)g(is)g(gi)n(v)o(en)f(belo)n(w)-6
b(.)37 b(Certain)345 3296 y(items)28 b(in)h(the)g(grammar)h(are)g(mark)
o(ed)f(with)g(a)g(superscript)g(b)n(ullet)f(symbol)g(\(for)i(e)o
(xample)f FA(e)n(x)7 b(p)3728 3260 y Fg(\017)345 3456
y Ft(terminates)p FC(\);)23 b(this)g(indicates)h(that)h(the)f
(corresponding)g(program)g(se)o(gments)g(are)h(not)f(allo)n(wed)345
3616 y(to)k(contain)g(the)h Ft(?)42 b FC(symbol)28 b(denoting)f(an)i
(unde\002ned)g(v)n(alue.)42 b(The)28 b(grammar)h(is)f(based)h(directly)
345 3776 y(on)35 b(the)h(grammar)f(gi)n(v)o(en)f(in)i(the)f(Mosco)n(w)f
(ML)i(documentation.)61 b(T)-7 b(erms)35 b(which)h(ha)n(v)o(e)f(been)
345 3936 y(added)g(to)g(the)g(Mosco)n(w)e(ML)i(grammar)g(are)g(mark)o
(ed)g(with)g(a)g(b)n(ullet)f(in)h(the)g(descripti)n(v)o(e)e(te)o(xt)345
4097 y(on)h(the)f(right-hand)h(side)f(of)h(the)g(page.)58
b(Some)34 b(of)g(these)g(b)n(ullets)f(ha)n(v)o(e)h(superscript)f
(numbers)345 4257 y(attached)23 b(to)g(them:)29 b(these)22
b(numbers)h(correspond)f(to)h(comments)f(in)g(the)h(sections)f(follo)n
(wing)f(the)345 4417 y(grammar)-5 b(.)29 b(The)21 b(grammar)g(should)f
(be)i(consulted)e(in)h(conjunction)f(with)g(the)h(Mosco)n(w)f(ML)h
(Lan-)345 4577 y(guage)g(Ov)o(ervie)n(w)g([RRS00a)q(])h(where)g
(comments)e(are)j(made)e(re)o(garding)f(certain)i(restrictions)e(on)345
4737 y(the)j(syntax;)f([RRS00a)r(])h(also)g(e)o(xplains)e(which)i
(parts)g(of)g(the)g(grammar)g(do)g(not)f(appear)i(in)e(SML.)2008
5471 y FB(20)p eop
%%Page: 21 27
21 26 bop 345 -28 a Fw(Chapter)24 b(2.)55 b(Extended)24
b(Mosco)o(w)f(ML)1970 b FB(21)345 279 y Fx(2.1)128 b(Grammar)36
b(f)m(or)h(the)e(Core)h(langua)o(g)q(e)345 542 y Fs(Expressions)23
b(and)h(Matc)o(hes)345 710 y Fr(e)n(xp)238 b Fi(::=)101
b Fr(infe)n(xp)908 823 y(e)n(xp)47 b Fu(:)g Fr(ty)1116
b Fi(type)25 b(constraint)h(\(L\))908 936 y Fr(e)n(x)7
b(p)1038 903 y Fe(\017)1038 962 y Fc(1)1123 936 y Fu(==)47
b Fr(e)n(x)7 b(p)1392 903 y Fe(\017)1392 962 y Fc(2)2352
936 y Fk(\017)23 b Fi(comparison\(R\))908 1048 y Fr(e)n(x)7
b(p)1038 1015 y Fe(\017)1038 1074 y Fc(1)1123 1048 y
Fu(=/=)47 b Fr(e)n(x)7 b(p)1438 1015 y Fe(\017)1438 1074
y Fc(2)2352 1048 y Fk(\017)23 b Fi(comparison\(R\))908
1161 y Fu(exists)48 b Fr(ma)n(t)6 b(c)o(h)1456 1128 y
Fe(\017)2352 1161 y Fk(\017)23 b Fi(e)o(xistential)k(quanti\002er)908
1274 y Fu(exists_unique)51 b Fr(ma)n(t)6 b(c)o(h)1781
1241 y Fe(\017)2352 1274 y Fk(\017)2397 1241 y Fc(1)2458
1274 y Fi(unique)25 b(e)o(xistential)h(quanti\002er)908
1387 y Fu(forall)48 b Fr(ma)n(t)6 b(c)o(h)1456 1354 y
Fe(\017)2352 1387 y Fk(\017)23 b Fi(uni)n(v)o(ersal)j(quanti\002er)908
1500 y Fr(e)n(x)7 b(p)1038 1467 y Fe(\017)1123 1500 y
Fu(terminates)769 b Fk(\017)23 b Fi(con)l(v)o(er)n(gence)28
b(predicate)908 1613 y Fr(e)n(x)7 b(p)1038 1580 y Fe(\017)1123
1613 y Fu(proper)953 b Fk(\017)23 b Fi(de\002nedness)j(predicate)908
1726 y Fr(e)n(xp)1031 1740 y Fc(1)1116 1726 y Fu(andalso)49
b Fr(e)n(xp)1610 1740 y Fc(2)2352 1726 y Fi(sequential)27
b(conjunction)908 1839 y Fr(e)n(xp)1031 1853 y Fc(1)1116
1839 y Fu(orelse)48 b Fr(e)n(xp)1563 1853 y Fc(2)2352
1839 y Fi(sequential)27 b(disjunction)908 1952 y Fr(e)n(x)7
b(p)1038 1966 y Fc(1)1123 1952 y Fu(implies)49 b Fr(e)n(x)7
b(p)1624 1966 y Fc(2)2352 1952 y Fk(\017)23 b Fi(implication\(R\))908
2065 y Fr(e)n(xp)1031 2079 y Fc(1)1116 2065 y Fu(iff)47
b Fr(e)n(xp)1424 2079 y Fc(2)2352 2065 y Fk(\017)23 b
Fi(logical)j(equi)n(v)n(alence)908 2178 y Fr(e)n(xp)47
b Fu(handle)i Fr(matc)o(h)729 b Fi(handle)25 b(e)o(xception)908
2290 y Fu(raise)48 b Fr(e)n(xp)1043 b Fi(raise)25 b(e)o(xception)908
2403 y Fr(e)n(x)7 b(p)1038 2417 y Fc(1)1123 2403 y Fu(raises)48
b Fr(ma)n(t)6 b(c)o(h)681 b Fk(\017)23 b Fi(test)h(for)g(e)o(xception)
908 2516 y Fr(e)n(x)7 b(p)1038 2530 y Fc(1)1123 2516
y Fu(raises)55 b Fr(pa)n(t)785 b Fk(\017)23 b Fi(test)h(for)g(e)o
(xception)908 2629 y Fu(if)47 b Fr(e)n(xp)1170 2643 y
Fc(1)1255 2629 y Fu(then)h Fr(e)n(xp)1610 2643 y Fc(2)1695
2629 y Fu(else)g Fr(e)n(xp)2050 2643 y Fc(3)2352 2629
y Fi(conditional)908 2742 y Fu(while)g Fr(e)n(xp)1309
2756 y Fc(1)1394 2742 y Fu(do)f Fr(e)n(xp)1656 2756 y
Fc(2)2352 2742 y Fi(iteration)908 2855 y Fu(case)g Fr(e)n(xp)h
Fu(of)f Fr(matc)o(h)683 b Fi(case)24 b(analysis)908 2968
y Fu(fn)47 b Fr(matc)o(h)1085 b Fi(function)26 b(e)o(xpression)345
3163 y Fr(infe)n(xp)143 b Fi(::=)101 b Fr(appe)n(xp)908
3276 y(infe)n(xp)1126 3290 y Fc(1)1188 3276 y Fr(id)26
b(infe)n(xp)1502 3290 y Fc(2)2352 3276 y Fi(in\002x)o(ed)e(application)
345 3470 y Fr(appe)n(xp)103 b Fi(::=)e Fr(ate)n(xp)908
3583 y(appe)n(xp)25 b(ate)n(xp)968 b Fi(application)345
3778 y Fr(ate)n(xp)168 b Fi(::=)101 b Fr(scon)1279 b
Fi(special)25 b(constant)908 3891 y Fk(h)p Fu(op)p Fk(i)f
Fr(longvid)988 b Fi(v)n(alue)25 b(identi\002er)908 4004
y Fu({)e Fk(h)g Fr(e)n(xpr)l(ow)h Fk(i)f Fu(})929 b Fi(record)908
4117 y Fu(#)23 b Fr(lab)1260 b Fi(record)25 b(selector)908
4230 y Fu(\(\))1352 b Fi(0-tuple)908 4342 y Fu(\()p Fr(e)n(xp)1077
4356 y Fc(1)1116 4342 y Fu(,)46 b Fk(\001)10 b(\001)g(\001)48
b Fu(,)e Fr(e)n(xp)1566 4356 y Fb(n)1605 4342 y Fu(\))701
b Fr(n)p Fi(-tuple,)25 b Fr(n)c Fk(\025)f Fi(2)908 4455
y Fu([)p Fr(e)n(xp)1077 4469 y Fc(1)1116 4455 y Fu(,)46
b Fk(\001)10 b(\001)g(\001)48 b Fu(,)e Fr(e)n(xp)1566
4469 y Fb(n)1605 4455 y Fu(])701 b Fi(list,)24 b Fr(n)d
Fk(\025)e Fi(0)908 4568 y Fu(#[)p Fr(e)n(xp)1123 4582
y Fc(1)1162 4568 y Fu(,)47 b Fk(\001)10 b(\001)g(\001)47
b Fu(,)g Fr(e)n(xp)1613 4582 y Fb(n)1651 4568 y Fu(])655
b Fi(v)o(ector)l(,)25 b Fr(n)c Fk(\025)e Fi(0)908 4681
y Fu(\()p Fr(e)n(xp)1077 4695 y Fc(1)1116 4681 y Fu(;)46
b Fk(\001)10 b(\001)g(\001)48 b Fu(;)e Fr(e)n(xp)1566
4695 y Fb(n)1605 4681 y Fu(\))701 b Fi(sequence,)26 b
Fr(n)21 b Fk(\025)e Fi(2)908 4794 y Fu(let)47 b Fr(dec)h
Fu(in)f Fr(e)n(xp)1528 4808 y Fc(1)1566 4794 y Fu(;)g
Fk(\001)10 b(\001)g(\001)47 b Fu(;)g Fr(e)n(xp)2017 4808
y Fb(n)2102 4794 y Fu(end)112 b Fi(local)25 b(declaration,)h
Fr(n)21 b Fk(\025)f Fi(1)908 4907 y Fu([)46 b(structure)k
Fr(mode)n(xp)e Fu(as)f Fr(sig)o(e)n(xp)i Fu(])100 b Fi(structure)26
b(package)908 5020 y Fu([)46 b(functor)j Fr(mode)n(xp)g
Fu(as)e Fr(sig)o(e)n(xp)i Fu(])192 b Fi(functor)26 b(package)908
5133 y Fu(\()46 b Fr(e)n(xp)i Fu(\))908 5246 y(?)1398
b Fk(\017)23 b Fi(unde\002ned)j(v)n(alue)345 5440 y Fr(e)n(xpr)l(ow)101
b Fi(::=)g Fr(lab)47 b Fu(=)g Fr(e)n(xp)h Fk(h)e Fu(,)h
Fr(e)n(xpr)l(ow)h Fk(i)501 b Fi(e)o(xpression)26 b(ro)n(w)345
5635 y Fr(matc)o(h)141 b Fi(::=)101 b Fr(mrule)47 b Fk(h)g
Fu(|)f Fr(matc)o(h)i Fk(i)345 5830 y Fr(mrule)150 b Fi(::=)101
b Fr(pat)49 b Fu(=>)e Fr(e)n(xp)p eop
%%Page: 22 28
22 27 bop 345 -28 a Fw(Chapter)24 b(2.)55 b(Extended)24
b(Mosco)o(w)f(ML)1970 b FB(22)345 279 y Fs(Dec)n(larations)23
b(and)i(Bindings)345 448 y Fr(dec)275 b Fi(::=)100 b
Fu(val)48 b Fr(tyvar)o(seq)h(valbind)1179 b Fi(v)n(alue)24
b(declaration)946 561 y Fu(fun)48 b Fr(tyvar)o(seq)h(fvalbind)1154
b Fi(function)25 b(declaration)946 674 y Fu(type)48 b
Fr(typbind)1486 b Fi(type)24 b(declaration)946 787 y
Fu(eqtype)49 b Fr(typbind)1393 b Fk(\017)23 b Fi(equality)j(type)e
(declaration)946 900 y Fu(datatype)50 b Fr(datbind)h
Fk(h)c Fu(withtype)g Fr(t)6 b(y)h(pbind)2475 867 y Fe(\017)2561
900 y Fk(i)338 b Fi(datatype)25 b(declaration)946 1012
y Fu(datatype)50 b Fr(tycon)e Fu(=)f(datatype)i Fr(tyconpath)462
b Fi(datatype)25 b(replication)946 1125 y Fu(abstype)49
b Fr(datbind)j Fk(h)47 b Fu(withtype)g Fr(t)6 b(y)h(pbind)2429
1092 y Fe(\017)2515 1125 y Fk(i)384 b Fi(abstype)25 b(declaration)1301
1238 y Fu(with)48 b Fr(dec)f Fu(end)946 1351 y(exception)j
Fr(e)n(xbind)1286 b Fi(e)o(xception)26 b(declaration)946
1464 y Fu(local)49 b Fr(dec)1350 1478 y Fc(1)1434 1464
y Fu(in)f Fr(dec)1699 1478 y Fc(2)1783 1464 y Fu(end)1013
b Fi(local)24 b(declaration)946 1577 y Fu(open)48 b Fr(longstrid)1505
1591 y Fc(1)1593 1577 y Fk(\001)10 b(\001)g(\001)47 b
Fr(longstrid)2062 1591 y Fb(n)2934 1577 y Fi(open)24
b(declaration,)i Fr(n)21 b Fk(\025)f Fi(1)946 1690 y
Fu(structure)50 b Fr(strbind)1269 b Fi(structure)26 b(declaration)946
1803 y Fu(functor)49 b Fr(funbind)1342 b Fi(functor)25
b(declaration)946 1916 y Fu(signature)50 b Fr(sigbind)1259
b Fi(signature)26 b(declaration)2934 2029 y(empty)e(declaration)946
2142 y Fr(dec)1071 2156 y Fc(1)1156 2142 y Fk(h)p Fu(;)p
Fk(i)48 b Fr(dec)1445 2156 y Fc(2)2934 2142 y Fi(sequential)26
b(declaration)946 2254 y Fu(infix)49 b Fk(h)p Fr(d)r
Fk(i)e Fr(id)1459 2268 y Fc(1)1508 2254 y Fk(\001)10
b(\001)g(\001)g Fr(id)1683 2268 y Fb(n)2934 2254 y Fi(in\002x)23
b(\(left\))i(directi)n(v)o(e,)f Fr(n)d Fk(\025)f Fi(1)946
2367 y Fu(infixr)49 b Fk(h)p Fr(d)r Fk(i)f Fr(id)1506
2381 y Fc(1)1554 2367 y Fk(\001)10 b(\001)g(\001)h Fr(id)1730
2381 y Fb(n)2934 2367 y Fi(in\002x)23 b(\(right\))i(directi)n(v)o(e,)g
Fr(n)c Fk(\025)f Fi(1)946 2480 y Fu(nonfix)49 b Fr(id)1341
2494 y Fc(1)1389 2480 y Fk(\001)10 b(\001)g(\001)h Fr(id)1565
2494 y Fb(n)2934 2480 y Fi(non\002x)24 b(directi)n(v)o(e,)h
Fr(n)20 b Fk(\025)g Fi(1)946 2593 y Fu(axiom)49 b Fr(axseq)1504
b Fk(\017)23 b Fi(axiom)345 2788 y Fr(valbind)130 b Fi(::=)100
b Fr(pat)50 b Fu(=)c Fr(e)n(xp)i Fk(h)f Fu(and)g Fr(valbind)52
b Fk(i)936 b Fi(v)n(alue)24 b(binding)946 2901 y Fu(rec)48
b Fr(valbind)1532 b Fi(recursi)n(v)o(e)25 b(binding)345
3096 y Fr(fvalbind)105 b Fi(::=)243 b Fk(h)p Fu(op)p
Fk(i)48 b Fr(var)h(atpat)1655 3110 y Fc(1)6 b(1)1778
3096 y Fk(\001)k(\001)g(\001)47 b Fr(atpat)2107 3110
y Fc(1)6 b Fb(n)2230 3096 y Fk(h)p Fu(:ty)p Fk(i)48 b
Fu(=)e Fr(e)n(xp)2701 3110 y Fc(1)996 3208 y Fu(|)h Fk(h)p
Fu(op)p Fk(i)h Fr(var)h(atpat)1655 3222 y Fc(2)6 b(1)1778
3208 y Fk(\001)k(\001)g(\001)47 b Fr(atpat)2107 3222
y Fc(2)6 b Fb(n)2230 3208 y Fk(h)p Fu(:ty)p Fk(i)48 b
Fu(=)e Fr(e)n(xp)2701 3222 y Fc(2)996 3321 y Fu(|)h Fk(\001)10
b(\001)g(\001)996 3434 y Fu(|)47 b Fk(h)p Fu(op)p Fk(i)h
Fr(var)h(atpat)1655 3448 y Fb(m)6 b Fc(1)1793 3434 y
Fk(\001)k(\001)g(\001)47 b Fr(atpat)2122 3448 y Fb(m)5
b(n)2259 3434 y Fk(h)p Fu(:ty)p Fk(i)48 b Fu(=)f Fr(e)n(xp)2731
3448 y Fb(m)1135 3547 y Fk(h)g Fu(and)g Fr(fvalbind)52
b Fk(i)2934 3096 y Fr(m)p Ff(;)10 b Fr(n)20 b Fk(\025)g
Fi(1)345 3699 y Fr(typbind)130 b Fi(::=)100 b Fr(tyvar)o(seq)50
b(tycon)e Fu(=)f Fr(ty)g Fk(h)f Fu(and)i Fr(typbind)j
Fk(i)946 3812 y Fr(tyvar)o(seq)f(tycon)e Fu(=)f(?)93
b Fk(h)47 b Fu(and)g Fr(typbind)52 b Fk(i)535 b(\017)23
b Fi(question)j(mark)d(type)h(binding)345 4007 y Fr(datbind)125
b Fi(::=)100 b Fr(tyvar)o(seq)50 b(tycon)e Fu(=)f Fr(conbind)52
b Fk(h)46 b Fu(and)i Fr(datbind)j Fk(i)345 4202 y Fr(conbind)110
b Fi(::=)100 b Fk(h)p Fu(op)p Fk(i)48 b Fr(vid)i Fk(h)p
Fu(of)d Fr(ty)p Fk(i)h(h)e Fu(|)h Fr(conbind)52 b Fk(i)345
4396 y Fr(e)n(xbind)162 b Fi(::=)100 b Fk(h)p Fu(op)p
Fk(i)48 b Fr(vid)i Fk(h)p Fu(of)d Fr(ty)p Fk(i)h(h)e
Fu(and)i Fr(e)n(xbind)j Fk(i)946 4509 y(h)p Fu(op)p Fk(i)d
Fr(vid)i Fu(=)d Fk(h)p Fu(op)p Fk(i)g Fr(longvid)52 b
Fk(h)46 b Fu(and)i Fr(e)n(xbind)j Fk(i)345 4704 y Fr(axseq)195
b Fi(::=)100 b Fr(axe)n(xp)49 b Fk(h)e Fu(and)g Fr(axseq)h
Fk(i)1176 b(\017)23 b Fi(axioms)345 4899 y Fr(axe)n(xp)192
b Fi(::=)100 b Fr(e)n(x)7 b(p)1076 4866 y Fe(\017)2934
4899 y Fk(\017)23 b Fi(axiomatic)i(e)o(xpression)p eop
%%Page: 23 29
23 28 bop 345 -28 a Fw(Chapter)24 b(2.)55 b(Extended)24
b(Mosco)o(w)f(ML)1970 b FB(23)345 279 y Fs(T)-5 b(ype)24
b(e)o(xpressions)345 447 y Fr(tyconpath)103 b Fi(::=)d
Fr(longtycon)1017 b Fi(long)25 b(type)f(constructor)1004
559 y Fr(longtycon)50 b Fu(where)f Fr(strid)h Fu(=)d
Fr(mode)n(xp)101 b Fi(type)25 b(constructor)h(projection)345
754 y Fr(ty)393 b Fi(::=)100 b Fr(tyvar)1187 b Fi(type)25
b(v)n(ariable)1004 867 y Fu({)47 b Fk(h)g Fr(tyr)l(ow)g
Fk(i)g Fu(})820 b Fi(record)25 b(type)g(e)o(xpression)1004
980 y Fr(tyseq)49 b(tyconpath)783 b Fi(type)25 b(construction)1004
1093 y Fr(ty)1069 1107 y Fc(1)1154 1093 y Fu(*)47 b Fk(\001)10
b(\001)g(\001)47 b Fu(*)f Fr(ty)1546 1107 y Fb(n)2376
1093 y Fi(tuple)25 b(type,)f Fr(n)d Fk(\025)e Fi(2)1004
1206 y Fr(ty)1069 1220 y Fc(1)1154 1206 y Fu(->)47 b
Fr(ty)1358 1220 y Fc(2)2376 1206 y Fi(function)26 b(type)e(e)o
(xpression)1004 1319 y Fu([)47 b Fr(sig)o(e)n(xp)i Fu(])957
b Fi(package)26 b(type)e(e)o(xpression)1004 1432 y Fu(\()47
b Fr(ty)g Fu(\))345 1626 y Fr(tyr)l(ow)256 b Fi(::=)100
b Fr(lab)48 b Fu(:)f Fr(ty)g Fk(h)f Fu(,)h Fr(tyr)l(ow)g
Fk(i)546 b Fi(type-e)o(xpression)28 b(ro)n(w)345 1865
y Fs(P)m(atterns)345 2015 y Fr(atpat)168 b Fi(::=)100
b Fu(_)1422 b Fi(wildcard)899 2128 y Fr(scon)1303 b Fi(special)25
b(constant)899 2241 y Fk(h)p Fu(op)p Fk(i)48 b Fr(longvid)988
b Fi(v)n(alue)24 b(identi\002er)899 2353 y Fu({)47 b
Fk(h)g Fr(patr)l(ow)h Fk(i)e Fu(})866 b Fi(record)899
2466 y Fu(\(\))1376 b Fi(0-tuple)899 2579 y Fu(\()p Fr(pat)1062
2593 y Fc(1)1101 2579 y Fu(,)47 b Fk(\001)10 b(\001)g(\001)47
b Fu(,)g Fr(pat)1546 2593 y Fb(n)1584 2579 y Fu(\))737
b Fr(n)p Fi(-tuple,)25 b Fr(n)20 b Fk(\025)g Fi(2)899
2692 y Fu([)p Fr(pat)1062 2706 y Fc(1)1101 2692 y Fu(,)47
b Fk(\001)10 b(\001)g(\001)47 b Fu(,)g Fr(pat)1546 2706
y Fb(n)1584 2692 y Fu(])737 b Fi(list,)23 b Fr(n)e Fk(\025)f
Fi(0)899 2805 y Fu(#[)p Fr(pat)1108 2819 y Fc(1)1147
2805 y Fu(,)47 b Fk(\001)10 b(\001)g(\001)47 b Fu(,)g
Fr(pat)1592 2819 y Fb(n)1630 2805 y Fu(])691 b Fi(v)o(ector)l(,)24
b Fr(n)d Fk(\025)f Fi(0)899 2918 y Fu(\()47 b Fr(pat)i
Fu(\))345 3113 y Fr(patr)l(ow)101 b Fi(::=)f Fu(...)1330
b Fi(wildcard)899 3226 y Fr(lab)48 b Fu(=)f Fr(pat)i
Fk(h)e Fu(,)f Fr(patr)l(ow)i Fk(i)539 b Fi(pattern)25
b(ro)n(w)899 3339 y Fr(lab)48 b Fk(h)p Fu(:)p Fr(ty)p
Fk(i)g(h)f Fu(as)g Fr(pat)i Fk(i)d(h)h Fu(,)g Fr(patr)l(ow)h
Fk(i)100 b Fi(label)24 b(as)g(v)n(ariable)345 3533 y
Fr(pat)238 b Fi(::=)100 b Fr(atpat)1283 b Fi(atomic)24
b(pattern)899 3646 y Fk(h)p Fu(op)p Fk(i)48 b Fr(longvid)k(atpat)751
b Fi(constructed)26 b(v)n(alue)899 3759 y Fr(pat)1016
3773 y Fc(1)1101 3759 y Fr(vid)50 b(pat)1378 3773 y Fc(2)2367
3759 y Fi(in\002x)o(ed)24 b(v)n(alue)g(construction)899
3872 y Fr(pat)50 b Fu(:)c Fr(ty)1146 b Fi(typed)899 3985
y Fk(h)p Fu(op)p Fk(i)48 b Fr(var)i Fk(h)p Fu(:)p Fr(ty)p
Fk(i)e Fu(as)f Fr(pat)605 b Fi(layered)p eop
%%Page: 24 30
24 29 bop 345 -28 a Fw(Chapter)24 b(2.)55 b(Extended)24
b(Mosco)o(w)f(ML)1970 b FB(24)345 279 y Fx(2.2)128 b(Grammar)36
b(f)m(or)h(the)e(Modules)g(langua)o(g)q(e)345 494 y Fs(Module)24
b(e)o(xpressions)345 661 y Fr(mode)n(xp)238 b Fi(::=)100
b Fr(appmode)n(xp)1063 774 y(mode)n(xp)48 b Fu(:)f Fr(sig)o(e)n(xp)1074
b Fi(transparent)27 b(constraint)f(\(L\))1063 887 y Fr(mode)n(xp)48
b Fu(:>)g Fr(sig)o(e)n(xp)1027 b Fi(opaque)25 b(constraint)h(\(L\))1063
1000 y Fu(functor)49 b(\()e Fr(modid)j Fu(:)d Fr(sig)o(e)n(xp)i
Fu(\))d(=>)h Fr(mode)n(xp)102 b Fi(generati)n(v)o(e)26
b(functor)1063 1113 y Fu(functor)49 b Fr(modid)h Fu(:)d
Fr(sig)o(e)n(xp)i Fu(=>)e Fr(mode)n(xp)287 b Fi(applicati)n(v)o(e)26
b(functor)1063 1226 y Fu(rec)48 b(\()e Fr(strid)51 b
Fu(:)c Fr(sig)o(e)n(xp)i Fu(\))d Fr(mode)n(xp)487 b Fi(recursi)n(v)o(e)
25 b(structure)345 1420 y Fr(appmode)n(xp)103 b Fi(::=)d
Fr(atmode)n(xp)1063 1533 y(appmode)n(xp)50 b(atmode)n(xp)908
b Fi(functor)25 b(application)345 1728 y Fr(atmode)n(xp)168
b Fi(::=)100 b Fu(struct)49 b Fr(dec)e Fu(end)1086 b
Fi(basic)1063 1841 y Fk(h)p Fu(op)p Fk(i)48 b Fr(longmodid)1125
b Fi(module)24 b(identi\002er)1063 1954 y Fu(let)48 b
Fr(dec)f Fu(in)g Fr(mode)n(xp)i Fu(end)758 b Fi(local)24
b(declaration)1063 2067 y Fu(\()47 b Fr(dec)70 b Fu(\))1387
b Fi(abbre)n(viated)26 b(structure)1063 2180 y Fu(\()47
b Fr(mode)n(xp)h Fu(\))345 2502 y Fs(Module)24 b(bindings)345
2671 y Fr(strbind)125 b Fi(::=)100 b Fr(strid)51 b Fk(h)46
b Fr(con)i Fk(i)f Fu(=)f Fr(mode)n(xp)j Fk(h)d Fu(and)i
Fr(strbind)h Fk(i)100 b Fi(structure)25 b(binding)926
2783 y Fr(strid)51 b Fu(as)c Fr(sig)o(e)n(xp)i Fu(=)d
Fr(e)n(xp)i Fk(h)f Fu(and)g Fr(strbind)i Fk(i)183 b(\017)2654
2750 y Fc(2)2691 2783 y Fi(package)26 b(binding)926 2896
y Fr(strid)51 b(con)c Fu(=)g(?)93 b Fk(h)47 b Fu(and)g
Fr(strbind)i Fk(i)452 b(\017)23 b Fi(unde\002ned)i(structure)h(binding)
345 3091 y Fr(funbind)105 b Fi(::=)100 b Fr(funid)51
b(ar)m(g)1284 3105 y Fc(1)1369 3091 y Fk(\001)10 b(\001)g(\001)47
b Fr(ar)m(g)1633 3105 y Fb(n)1717 3091 y Fk(h)g Fr(con)h
Fk(i)e Fu(=)h Fr(mode)n(xp)1017 3204 y Fk(h)g Fu(and)g
Fr(funbind)i Fk(i)966 b Fi(functor)25 b(binding,)g Fr(n)c
Fk(\025)f Fi(0)926 3317 y Fr(funid)51 b Fu(\()c Fr(spec)h
Fu(\))e Fk(h)h Fr(con)h Fk(i)e Fu(=)h Fr(mode)n(xp)1017
3430 y Fk(h)g Fu(and)g Fr(funbind)i Fk(i)966 b Fi(abbre)n(viated)26
b(generati)n(v)o(e)g(binding)926 3543 y Fr(funid)51 b
Fu(as)c Fr(sig)o(e)n(xp)i Fu(=)e Fr(e)n(xp)g Fk(h)g Fu(and)g
Fr(funbind)j Fk(i)142 b Fi(package)25 b(binding)926 3656
y Fr(funid)51 b(ar)m(g)1284 3670 y Fc(1)1369 3656 y Fk(\001)10
b(\001)g(\001)47 b Fr(ar)m(g)1633 3670 y Fb(n)1717 3656
y Fr(con)h Fu(=)f(?)1017 3769 y Fk(h)g Fu(and)g Fr(funbind)i
Fk(i)966 b(\017)2654 3736 y Fc(3)2714 3769 y Fi(unde\002ned)25
b(v)o(ersion)926 3881 y Fr(funid)51 b Fu(\()c Fr(spec)h
Fu(\))93 b Fr(con)47 b Fu(=)g(?)1017 3994 y Fk(h)g Fu(and)g
Fr(funbind)i Fk(i)966 b(\017)2654 3961 y Fc(3)2714 3994
y Fi(unde\002ned)25 b(v)o(ersion)345 4189 y Fr(sigbind)115
b Fi(::=)100 b Fr(sigid)51 b Fu(=)c Fr(sig)o(e)n(xp)h
Fk(h)f Fu(and)h Fr(sigbind)h Fk(i)472 b Fi(signature)26
b(binding)345 4384 y Fr(con)250 b Fi(::=)100 b Fu(:)29
b Fr(sig)o(e)n(xp)1381 b Fi(transparent)26 b(constraint)926
4497 y Fu(:>)e Fr(sig)o(e)n(xp)1340 b Fi(opaque)25 b(constraint)345
4610 y Fr(ar)m(g)258 b Fi(::=)100 b Fu(\()47 b Fr(modid)j
Fu(:)d Fr(sig)o(e)n(xp)i Fu(\))899 b Fi(ar)n(gument)25
b(of)f(generati)n(v)o(e)h(functor)926 4723 y Fr(modid)50
b Fu(:)d Fr(sig)o(e)n(xp)1087 b Fi(ar)n(gument)25 b(of)f(applicati)n(v)
o(e)i(functor)p eop
%%Page: 25 31
25 30 bop 345 -28 a Fw(Chapter)24 b(2.)55 b(Extended)24
b(Mosco)o(w)f(ML)1970 b FB(25)345 279 y Fs(Signature)23
b(e)o(xpressions)345 448 y Fr(sig)o(e)n(xp)127 b Fi(::=)100
b Fu(sig)48 b Fr(spec)g Fu(end)1366 b Fi(basic)900 561
y Fr(sigid)1723 b Fi(signature)26 b(identi\002er)900
674 y Fr(sig)o(e)n(xp)49 b Fu(where)f Fr(typr)m(eal)1092
b Fi(type)24 b(realisation)900 787 y Fu(functor)49 b(\()e
Fr(modid)j Fu(:)d Fr(sig)o(e)n(xp)i Fu(\))d(->)h Fr(sig)o(e)n(xp)331
b Fi(opaque)25 b(functor)g(signature)900 900 y Fu(functor)49
b Fr(modid)h Fu(:)d Fr(sig)o(e)n(xp)i Fu(->)e Fr(sig)o(e)n(xp)516
b Fi(transparent)26 b(functor)g(signature)900 1012 y
Fu(rec)48 b(\()e Fr(strid)51 b Fu(:)c Fr(sig)o(e)n(xp)i
Fu(\))d Fr(sig)o(e)n(xp)716 b Fi(recursi)n(v)o(e)25 b(structure)h
(signature)345 1207 y Fr(typr)m(eal)102 b Fi(::=)e Fu(type)48
b Fr(tyvar)o(seq)h(longtycon)h Fu(=)d Fr(ty)g Fk(h)g
Fu(and)g Fr(typr)m(eal)i Fk(i)100 b Fi(type)24 b(realisation)p
eop
%%Page: 26 32
26 31 bop 345 -28 a Fw(Chapter)24 b(2.)55 b(Extended)24
b(Mosco)o(w)f(ML)1970 b FB(26)345 279 y Fs(Speci\002cations)23
b(and)h(Descriptions)395 447 y Fr(spec)232 b Fi(::=)101
b Fu(val)23 b Fr(tyvar)o(seq)j(valdesc)993 b Fi(v)n(alue)25
b(speci\002cation)989 559 y Fu(type)f Fr(typdesc)1276
b Fi(abstract)26 b(type)989 672 y Fu(type)c Fr(t)6 b(y)h(pbind)1483
639 y Fe(\017)2743 672 y Fi(type)25 b(abbre)n(viation)989
785 y Fu(eqtype)f Fr(typdesc)1184 b Fi(abstract)26 b(equality)f(type)
989 898 y Fu(eqtype)d Fr(t)6 b(y)h(pbind)1575 865 y Fe(\017)2743
898 y Fk(\017)23 b Fi(equality)j(type)e(abbre)n(viation)989
1011 y Fu(datatype)h Fr(datdesc)h Fk(h)d Fu(withtype)i
Fr(typbind)j Fk(i)276 b Fi(datatype)26 b(with)d(typbind)989
1124 y Fu(datatype)49 b Fr(tycon)f Fu(=)f(datatype)i
Fr(tyconpath)229 b Fi(datatype)26 b(replication)989 1237
y Fu(exception)g Fr(e)n(xdesc)1076 b Fi(e)o(xception)989
1350 y Fu(axiom)24 b Fr(axseq)1295 b Fk(\017)2788 1317
y Fc(4)2849 1350 y Fi(axiom)989 1463 y Fu(structure)26
b Fr(str)m(desc)1062 b Fi(structure)989 1576 y Fu(functor)25
b Fr(fundesc)1132 b Fi(functor)989 1689 y Fu(signature)26
b Fr(sigbind)1049 b Fi(signature)989 1801 y Fu(include)25
b Fr(sigid)1513 1815 y Fc(1)1575 1801 y Fk(\001)10 b(\001)g(\001)24
b Fr(strid)1861 1815 y Fb(n)2743 1801 y Fi(include,)h
Fr(n)c Fk(\025)f Fi(1)989 1914 y Fu(local)k Fr(lspec)h
Fu(in)e Fr(spec)h Fu(end)853 b Fi(local)25 b(speci\002cations)2743
2027 y(empty)989 2140 y Fr(spec)47 b Fk(h)p Fu(;)p Fk(i)h
Fr(spec)1223 b Fi(sequential)989 2253 y Fr(spec)47 b
Fu(sharing)i(type)992 b Fi(type)25 b(sharing,)g Fr(n)20
b Fk(\025)g Fi(2)1079 2366 y Fr(longtycon)1434 2380 y
Fc(1)1522 2366 y Fu(=)46 b Fk(\001)10 b(\001)g(\001)48
b Fu(=)e Fr(longtycon)2204 2380 y Fb(n)989 2479 y Fr(spec)h
Fu(sharing)1225 b Fi(structure)26 b(sharing,)f Fr(n)c
Fk(\025)f Fi(2)1079 2592 y Fr(longstrid)1404 2606 y Fc(1)1492
2592 y Fu(=)46 b Fk(\001)10 b(\001)g(\001)47 b Fu(=)g
Fr(longstrid)2144 2606 y Fb(n)989 2705 y Fu(infix)h Fk(h)p
Fr(d)r Fk(i)g Fr(id)1502 2719 y Fc(1)1550 2705 y Fk(\001)10
b(\001)g(\001)57 b Fr(id)1772 2719 y Fb(n)2743 2705 y
Fi(in\002x)24 b(\(left\))g(directi)n(v)o(e,)h Fr(n)c
Fk(\025)f Fi(1)989 2818 y Fu(infixr)48 b Fk(h)p Fr(d)r
Fk(i)g Fr(id)1548 2832 y Fc(1)1596 2818 y Fk(\001)10
b(\001)g(\001)57 b Fr(id)1818 2832 y Fb(n)2743 2818 y
Fi(in\002x)24 b(\(right\))h(directi)n(v)o(e,)g Fr(n)20
b Fk(\025)g Fi(1)989 2931 y Fu(nonfix)48 b Fr(id)1383
2945 y Fc(1)1431 2931 y Fk(\001)10 b(\001)g(\001)h Fr(id)1607
2945 y Fb(n)2743 2931 y Fi(non\002x)24 b(directi)n(v)o(e,)h
Fr(n)c Fk(\025)f Fi(1)395 3125 y Fr(lspec)207 b Fi(::=)101
b Fu(open)24 b Fr(longstrid)1522 3139 y Fc(1)1585 3125
y Fk(\001)10 b(\001)g(\001)24 b Fr(longstrid)2029 3139
y Fb(n)2743 3125 y Fi(\(local\))h(open)989 3238 y Fu(type)d
Fr(t)6 b(y)h(pbind)1483 3205 y Fe(\017)2743 3238 y Fi(type)25
b(abbre)n(viation)989 3351 y Fu(eqtype)d Fr(t)6 b(y)h(pbind)1575
3318 y Fe(\017)2743 3351 y Fk(\017)23 b Fi(equality)j(type)e(abbre)n
(viation)989 3464 y Fu(local)g Fr(lspec)h Fu(in)e Fr(lspec)i
Fu(end)827 b Fi(local)25 b(speci\002cations)2743 3577
y(empty)989 3690 y Fu(val)e Fr(tyvar)o(seq)j(valdesc)993
b Fk(\017)2788 3657 y Fc(5)2849 3690 y Fi(v)n(alue)24
b(speci\002cation)989 3803 y Fu(axiom)g Fr(axseq)1295
b Fk(\017)2788 3770 y Fc(5)2849 3803 y Fi(axiom)989 3916
y Fr(lspec)48 b Fk(h)p Fu(;)p Fk(i)f Fr(lspec)1173 b
Fi(sequential)395 4110 y Fr(valdesc)122 b Fi(::=)101
b Fr(vid)49 b Fu(:)e Fr(ty)g Fk(h)g Fu(and)g Fr(valdesc)i
Fk(i)769 b Fi(v)n(alue)25 b(description)395 4305 y Fr(typdesc)122
b Fi(::=)101 b Fr(tyvar)o(seq)49 b(tycon)f Fk(h)f Fu(and)g
Fr(typdesc)i Fk(i)537 b Fi(type)25 b(constructor)h(description)395
4500 y Fr(datdesc)117 b Fi(::=)101 b Fr(tyvar)o(seq)49
b(tycon)f Fu(=)f Fr(condesc)i Fk(h)e Fu(and)g Fr(datdesc)i
Fk(i)100 b Fi(datatype)26 b(description)395 4695 y Fr(condesc)102
b Fi(::=)f Fr(vid)49 b Fk(h)p Fu(of)f Fr(ty)p Fk(i)f(h)g
Fu(|)f Fr(condesc)k Fk(i)724 b Fi(constructor)27 b(description)395
4889 y Fr(e)n(xdesc)154 b Fi(::=)101 b Fr(vid)49 b Fk(h)p
Fu(of)f Fr(ty)p Fk(i)f(h)g Fu(and)g Fr(e)n(xdesc)i Fk(i)684
b Fi(e)o(xception)26 b(constructor)h(description)395
5084 y Fr(str)m(desc)140 b Fi(::=)101 b Fr(strid)50 b
Fu(:)d Fr(sig)o(e)n(xp)i Fk(h)d Fu(and)i Fr(str)m(desc)g
Fk(i)568 b Fi(structure)26 b(description)395 5279 y Fr(fundesc)117
b Fi(::=)101 b Fr(funid)50 b Fu(:)d Fr(sig)o(e)n(xp)i
Fk(h)e Fu(and)g Fr(fundesc)i Fk(i)524 b Fi(functor)26
b(description)p eop
%%Page: 27 33
27 32 bop 345 -28 a Fw(Chapter)24 b(2.)55 b(Extended)24
b(Mosco)o(w)f(ML)1970 b FB(27)345 279 y Fx(2.3)128 b(Comments)35
b(on)h(the)g(grammar)345 581 y Fv(2.3.1)107 b(The)29
b(unique)g(e)n(xistential)f(quanti\002er)345 808 y FC(W)-8
b(e)20 b(ha)n(v)o(e)g(introduced)f(a)i(ne)n(w)e(quanti\002er)i
Ft(exists_unique)p FC(,)d(whose)i(intended)f(meaning)g(should)345
969 y(be)38 b(clear)-5 b(.)72 b(This)38 b(has)g(been)h(included)e
(because)i(it)f(leads)g(to)g(considerable)g(simpli\002cation)f(in)345
1129 y(e)o(xamples.)29 b Ft(exists_unique)20 b FC(can)j(easily)g(be)f
(de\002ned)i(as)f(a)g(deri)n(v)o(ed)e(form)i(in)f(terms)g(of)h
Ft(exists)345 1289 y FC(and)i Ft(forall)p FC(.)345 1633
y Fv(2.3.2)107 b(P)m(ac)n(ka)o(g)q(e)28 b(bindings)345
1851 y FC(Note)c(that)h(in)f(the)h(phrase)507 2072 y
Fr(strid)48 b Fu(as)23 b Fr(sig)o(e)n(xp)49 b Fu(=)23
b Fr(e)n(xp)345 2292 y FA(e)n(xp)i FC(no)n(w)f(includes)g
Ft(?)p FC(,)h(so)f(that)g(we)i(can)f(write)f(e)o(xpressions)g(of)g(the)
h(form)507 2513 y Fr(strid)48 b Fu(as)23 b Fr(sig)o(e)n(xp)49
b Fu(=)e(?)345 2734 y FC(A)25 b(similar)e(remark)i(also)g(applies)f(to)
g(functor)h(package)g(bindings)e(of)i(the)g(form)507
2955 y Fr(fundid)48 b Fu(as)24 b Fr(sig)o(e)n(xp)49 b
Fu(=)e(?)345 3520 y Fv(2.3.3)107 b(Unde\002ned)28 b(functor)g(bindings)
345 3748 y FC(It)g(is)g(compulsory)e(for)j(unde\002ned)f(functor)g
(bindings)e(to)i(be)g(e)o(xplicitly)e(constrained)i(by)g(signa-)345
3908 y(ture)d(e)o(xpressions.)345 4252 y Fv(2.3.4)107
b(Axioms)28 b(in)i(speci\002cations)345 4479 y FC(In)25
b([KST94],)g(axioms)e(in)i(speci\002cations)f(are)i(gi)n(v)o(en)d(by)
491 4640 y Ft(axiom)50 b FA(axseq)h Fm(h)f Ft(withtype)f
FA(typbind)h Fm(i)p FC(.)345 4800 y(This)24 b(is)g(a)h(misprint;)e(the)
i Ft(withtype)e FC(e)o(xpression)h(should)f(be)i(omitted.)p
eop
%%Page: 28 34
28 33 bop 345 -28 a Fw(Chapter)24 b(2.)55 b(Extended)24
b(Mosco)o(w)f(ML)1970 b FB(28)345 279 y Fv(2.3.5)107
b(Local)29 b(speci\002cations)345 507 y FC(The)h(situation)f(with)h
(respect)h(to)f(local)g(speci\002cations)g(is)g(rather)h(confused.)47
b(SML90)30 b(allo)n(wed)345 667 y(e)o(xpressions)40 b(of)h(the)g(form)g
Ft(local)50 b FA(s)7 b(pec)1861 682 y Fo(1)1953 667 y
Ft(in)51 b FA(s)7 b(pec)2290 682 y Fo(2)2373 667 y FC(within)40
b(speci\002cations.)79 b(In)42 b(SML97,)345 827 y(these)36
b(are)h(no)e(longer)h(allo)n(wed)f(\(see)i([MTH90)o(,)i(G17])d(for)g
(an)h(e)o(xplanation\).)63 b(Mosco)n(w)35 b(ML)345 987
y(does)i(allo)n(w)g(local)g(speci\002cations,)j(b)n(ut)d(only)g(in)g(a)
h(v)o(ery)f(restricted)g(form:)56 b(essentially)36 b(only)345
1147 y Ft(open)p FC(,)31 b Ft(type)g FC(and)f Ft(local)g
FC(statements)g(are)h(allo)n(wed)f(.)49 b(In)31 b(the)g(present)f
(grammar)h(we)g(ha)n(v)o(e)f(re-)345 1307 y(lax)o(ed)36
b(this)f(to)h(allo)n(w)g(axioms)f(and)h(arbitrary)h(v)n(alue)f
(speci\002cations)g(in)g(local)g(speci\002cations,)345
1467 y(since)29 b(it)g(is)g(often)g(con)l(v)o(enient)f(to)h(declare)h
(local)f(functions)f(for)i(use)f(within)f(axioms;)j(this)d(will)345
1627 y(become)20 b(apparent)h(when)f(we)h(carry)h(out)e(a)g(formal)h
(program)f(de)n(v)o(elopment)e(in)i(the)h(ne)o(xt)e(chapter)-5
b(.)345 2027 y Fx(2.4)128 b(Implementation)345 2290 y
FC(I)36 b(ha)n(v)o(e)f(modi\002ed)g(the)g(Mosco)n(w)f(ML)h(compiler)g
(\(V)-11 b(ersion)35 b(2.00)g(\(June)g(2000\)\))g(to)g(parse)h(and)345
2451 y(typecheck)22 b(the)f(abo)o(v)o(e)g(grammar)-5
b(.)29 b(This)21 b(w)o(as)h(a)g(reasonably)f(straightforw)o(ard)g
(task,)h(as)g(the)f(com-)345 2611 y(piler)26 b(\(which)h(is)f(itself)g
(written)g(in)g(Mosco)n(w)g(ML\))g(is)g(written)g(in)g(a)i(v)o(ery)e
(modular)g(w)o(ay)-6 b(.)36 b(I)26 b(ha)n(v)o(e)345 2771
y(not)f(attempted)f(to)h(pro)o(vide)f(a)i(formal)f(semantics)g(for)g
(the)h(combined)e(language,)h(as)h(this)e(w)o(ould)345
2931 y(be)29 b(a)g(major)f(undertaking.)42 b(The)28 b(semantics)g(of)h
(EML)f([KST94])h(were)h(used)e(as)h(a)g(guide)f(when)345
3091 y(the)d(semantic)f(interpretation)g(of)h(a)h(term)f(w)o(as)g
(non-ob)o(vious.)k(There)d(remain)f(some)f(dif)n(\002culties)345
3251 y(ho)n(we)n(v)o(er)-5 b(.)29 b(The)24 b(semantics)f(of)h(EML)g
(form)g(three)h(\223layers\224:)30 b(the)24 b FA(static)g(semantics)f
FC(\(typecheck-)345 3411 y(ing\),)39 b(the)e FA(dynamic)f(semantics)g
FC(\(e)n(v)n(aluation\),)j(and)d(the)h FA(veri\002cation)f(semantics)g
FC(\(which)g(are)345 3571 y(used)29 b(to)f(gi)n(v)o(e)g(a)i(logical)e
(interpretation)g(of)h(axioms)f(and)h(other)g(EML)f(constructs\).)43
b(The)29 b(SML)345 3731 y(language)34 b(has)h(static)f(and)h(dynamic)f
(semantics,)i(b)n(ut)e(the)g(v)o(eri\002cation)h(semantics)e(are)j(no)o
(v)o(el)345 3891 y(to)i(EML.)f(T)-8 b(o)38 b(e)o(xport)g(certain)g
(typing)f(information)g(from)h(the)g(static)g(and)g(dynamic)f(seman-)
345 4052 y(tics)d(to)h(the)f(v)o(eri\002cation)g(semantics,)j(the)d
(so-called)h FA(tr)o(ace)f FC(of)h(an)g(e)o(xpression)e(is)i(used.)60
b(Cer)n(-)345 4212 y(tain)24 b(conditions)e(relating)h(to)h(traces)h
(can)f(occasionally)f(pre)n(v)o(ent)g(e)o(xpressions)g(which)h(w)o
(ould)f(be)345 4372 y(well-formed)28 b(in)g(SML)h(from)f(elaborating)g
(\(i.e.)43 b(typechecking\))28 b(in)g(EML;)g(this)f(is)i(a)f(rare)i
(phe-)345 4532 y(nomenon,)22 b(b)n(ut)g(e)o(xamples)f(can)i(be)g(found)
f(in)g([Kah95].)30 b(T)m(races)23 b(ha)n(v)o(e)f(not)g(been)h(included)
f(in)g(the)345 4692 y(current)28 b(implementation;)f(this)g(means)h
(that)g(some)f(e)o(xpressions)g(which)g(are)i(not)f(well-formed)345
4852 y(according)j(to)f(the)h(semantics)f(of)h(EML)f(will)g(in)g(f)o
(act)i(elaborate)f(successfully;)h(ho)n(we)n(v)o(er)l(,)f(it)g(is)345
5012 y(v)o(ery)24 b(unlik)o(ely)g(that)g(this)g(w)o(ould)g(be)h(a)g
(problem)f(in)g(practice.)491 5172 y(There)k(are)g(some)e(other)h
(problems)f(relating)h(to)g(the)g(semantics.)37 b(The)27
b(EML)f(semantics)g(are)p eop
%%Page: 29 35
29 34 bop 345 -28 a Fw(Chapter)24 b(2.)55 b(Extended)24
b(Mosco)o(w)f(ML)1970 b FB(29)345 279 y FC(based)24 b(on)g(SML90,)f
(and)i(some)e(of)h(the)g(features)h(of)f(SML90)f(ha)n(v)o(e)h(under)n
(gone)g(major)g(re)n(visions)345 439 y(in)33 b(SML97.)58
b(One)34 b(of)g(the)g(most)f(notable)g(changes)h(is)f(that)h(SML97)f
(and)h(Mosco)n(w)f(ML)g(ha)n(v)o(e)345 599 y FA(opaque)i
FC(signatures)g(as)h(well)f(as)h(the)g(original)f FA(tr)o(anspar)l(ent)
h FC(ones.)63 b(The)36 b(de\002nition)f(of)h(EML)345
760 y(interprets)e(all)g(signatures)f(as)i(being)f(opaque,)i(b)n(ut)e
(we)h(ha)n(v)o(e)f(allo)n(wed)g(the)g(original)f(Mosco)n(w)345
920 y(ML)k(syntax)f(to)h(remain)g(unaltered,)j(so)d(that)g(both)f
(opaque)h(and)g(transparent)g(signatures)f(are)345 1080
y(allo)n(wed.)c(This)25 b(means)g(that)h(certain)f(programs)g(will)g
(not)g(elaborate)h(as)g(speci\002ed)g(by)f(the)h(EML)345
1240 y(semantics;)21 b(ho)n(we)n(v)o(er)l(,)f(this)h(is)f(a)i
(consequence)f(of)g(the)g(transition)f(from)h(SML90)g(to)f(SML97)h(and)
345 1400 y(will)j(presumably)g(be)h(dealt)f(with)g(in)h(an)o(y)f
(future)h(v)o(ersion)e(of)i(EML.)491 1560 y(EML)30 b(also)f(omits)g
(the)h(imperati)n(v)o(e)e(features)j(of)f(SML;)g(these)f(ha)n(v)o(e)h
(been)g(retained)h(in)e(Ex-)345 1720 y(tended)24 b(Mosco)n(w)g(ML.)345
2060 y Fv(2.4.1)107 b(V)-6 b(alue)28 b(P)l(ol)n(ymorphism)345
2287 y FC(Another)g(problem)g(with)h(the)f(semantics)g(relates)h(to)g
FA(value)g(polymorphism)p FC(.)41 b(This)28 b(is)g(a)i(feature)345
2447 y(that)24 b(arises)g(from)g(the)h(interaction)e(of)i(polymorphism)
c(with)j(the)g(imperati)n(v)o(e)f(features)i(of)f(SML.)345
2608 y(SML90)g(had)g(a)h(special)f(class)g(of)g FA(imper)o(ative)f
(type)h(variables)p FC(.)30 b(These)24 b(ha)n(v)o(e)g(been)g(discarded)
h(in)345 2768 y(SML97and)e(replaced)h(with)f(the)h(concept)g(of)f(v)n
(alue)g(polymorphism)f(\(see)i([MTHM97)n(,)g(G.4])g(or)345
2928 y([P)o(au96,)33 b(8.3]\).)50 b(The)31 b(basic)g(problem)f(is)h
(that)g(if)g(references)i(to)e(polymorphic)e(function)i(types)345
3088 y(are)i(allo)n(wed)f(then)g(it)h(may)f(be)h(possible)e(to)h
(reassign)h(the)f(v)n(alue)g(of)h(the)g(reference)h(and)f(apply)345
3248 y(a)39 b(function)f(to)g(ar)n(guments)g(of)h(the)f(wrong)g(type.)
72 b(T)-8 b(o)39 b(o)o(v)o(ercome)e(this,)k(type)e(v)n(ariables)f(may)
345 3408 y(be)d(generalised)f(only)g(in)g(certain)h(types)f(of)g(e)o
(xpressions.)59 b(Mosco)n(w)33 b(ML)h(lea)n(v)o(es)g(such)h(types)345
3568 y(polymorphic)23 b(until)h(their)g(\002rst)h(use,)g(when)f(their)h
(type)f(becomes)h(\002x)o(ed.)30 b(F)o(or)25 b(e)o(xample:)484
3754 y Fu(-)47 b(val)g(nn)g(=)g([])g(@)g([];)484 3867
y(!)g(Warning:)i(Value)f(polymorphism:)484 3980 y(!)f(Free)h(type)f
(variable\(s\))k(at)c(top)g(level)h(in)g(value)g(identifier)i(nn)484
4093 y(>)d(val)g(nn)g(=)g([])g(:)g('a)g(list)484 4319
y(-)g(val)g(x)g(=)g(["Try",)i("this"];)484 4431 y(>)e(val)g(x)g(=)g
(["Try",)i("this"])f(:)f(string)i(list)484 4657 y(-)e(val)g(y)g(=)g(x)f
(@)h(nn;)484 4770 y(!)g(Warning:)i(the)e(free)h(type)g(variable)h('a)e
(has)h(been)g(instantiated)i(to)e(string)484 4883 y(>)f(val)g(y)g(=)g
(["Try",)i("this"])f(:)f(string)i(list)484 5109 y(-)e(nn;)484
5222 y(>)g(val)g(it)g(=)g([])g(:)g(string)h(list)p eop
%%Page: 30 36
30 35 bop 345 -28 a Fw(Chapter)24 b(2.)55 b(Extended)24
b(Mosco)o(w)f(ML)1970 b FB(30)345 279 y FC(In)35 b(e)o(xtended)f(Mosco)
n(w)g(ML,)g(using)g(such)h(a)g(v)n(alue)f(within)g(an)h(axiom)f(may)h
(also)f(cause)i(type)345 439 y(instantiation)22 b(to)j(occur:)530
660 y Fu(-)47 b(val)h(nn)f(=)f([])h(@)g([];)484 773 y(!)g(Warning:)i
(Value)f(polymorphism:)484 886 y(!)f(Free)h(type)f(variable\(s\))k(at)c
(top)g(level)h(in)g(value)g(identifier)i(nn)484 999 y(>)d(val)g(nn)g(=)
g([])g(:)g('a)g(list)484 1225 y(-)g(axiom)h(forall)g(l:)g(int)f(list)h
(=>)f(l@nn)h(==)f(nn;)484 1338 y(!)g(Warning:)i(the)e(free)h(type)g
(variable)h('a)e(has)h(been)g(instantiated)i(to)e(int)484
1563 y(-)f(nn;)484 1676 y(>)g(val)g(it)g(=)g([])g(:)g(int)g(list)345
1897 y FC(This)25 b(seems)g(contrary)h(to)f(the)h(spirit)f(of)h(EML,)f
(where)h(in)f(the)h(dynamic)f(semantics)g(axioms)f(are)345
2057 y(usually)35 b(treated)h(as)f(comments.)63 b(Ho)n(we)n(v)o(er)l(,)
37 b(this)e(will)g(probably)g(not)g(be)h(a)g(major)f(problem.)345
2217 y(The)25 b(De\002nition)f(of)i(ML)e(does)h(not)g(specify)g(ho)n(w)
f(a)h(compiler)g(should)f(react)i(in)e(the)h(presence)h(of)345
2378 y(v)n(alue)31 b(polymorphism)d(\(SML)j(of)h(Ne)n(w)f(Jerse)o(y)g
(responds)f(by)h(gi)n(ving)f Ft(val)50 b(nn)g(=)h([])f(@)h([])31
b FC(a)345 2538 y(completely)f(ne)n(w)h(type,)h(and)g(then)e
Ft(nn)h FC(cannot)g(subsequently)f(be)h(used)g(for)h(an)o(ything)e
(useful\),)345 2698 y(so)24 b(the)h(present)g(beha)n(viour)f(of)h
(Extended)f(Mosco)n(w)g(ML)g(is)g(probably)g(acceptable.)345
3042 y Fv(2.4.2)107 b(Functor)28 b(Signatures)g(and)h(EML)345
3270 y FC(The)c(standard)f(method)g(of)h(specifying)f(the)g(beha)n
(viour)h(of)g(a)g(functor)f(in)h(EML)f(is)g(to)h(write)484
3490 y Fu(functor)49 b(F\(X:)f(SIG1\):)g(SIG2)g(=)f(?)345
3711 y FC(This)24 b(notation)f(has)h(certain)h(weaknesses.)30
b(It)25 b(is)f(often)g(the)g(case)h(that)f(we)h(wish)f
Ft(SIG2)g FC(to)g(contain)345 3871 y(axioms)19 b(which)g(refer)j(to)d
(objects)h(declared)g(in)g Ft(SIG1)f FC(\(we)h(will)g(see)g(e)o
(xamples)f(of)h(this)f(in)h(Chapter)345 4031 y(3\).)31
b(W)-8 b(e)25 b(can)g(write)g(out)f(the)h(signatures)e(e)o(xplicitly:)
484 4252 y Fu(functor)49 b(F\(X:)f(sig)f(...)h(end\):)g(sig)f(...)h
(axiom)g(...)f(end)h(=)f(?)345 4473 y FC(The)22 b(signature)g(referred)
h(to)f(by)g Ft(X)g FC(is)g(in)g(scope)g(in)g(the)g(second)g(signature)f
(e)o(xpression,)g(so)h(we)h(can)345 4633 y(refer)i(to)e(members)g(of)h
(X)g(in)f(the)h(axiom.)30 b(Ho)n(we)n(v)o(er)l(,)22 b(we)i(may)g(wish)f
(to)g(reuse)h(the)g(signatures,)f(or)345 4793 y(simply)j(to)h(mak)o(e)h
(them)f(self-contained)g(for)h(le)o(gibility)-6 b(.)36
b(W)-8 b(e)29 b(can)f(safely)f(do)h(this)f(with)g(the)g(\002rst)345
4953 y(signature:)484 5174 y Fu(functor)49 b(F\(X:)f(SIG1\):)g(sig)g
(...)f(axiom)h(...)g(end)f(=)g(?)p eop
%%Page: 31 37
31 36 bop 345 -28 a Fw(Chapter)24 b(2.)55 b(Extended)24
b(Mosco)o(w)f(ML)1970 b FB(31)345 279 y FC(b)n(ut)22
b(we)g(cannot)g(mak)o(e)h(the)f(second)g(signature)g(self-contained)g
(as)g(there)h(w)o(ould)e(then)h(be)h(no)f(w)o(ay)345
439 y(to)i(refer)i(to)f(v)n(alues)f(within)f Ft(X)p FC(.)491
599 y(This)37 b(problem)f(can)i(be)g(o)o(v)o(ercome)e(in)h(at)h(least)f
(tw)o(o)g(w)o(ays.)68 b(W)-8 b(e)38 b(can)g(mak)o(e)f(the)g(second)345
760 y(signature)24 b(self-contained)g(as)h Ft(SIG2)f
FC(and)h(then)g(write)484 980 y Fu(functor)49 b(F\(X:)f(SIG1\):)g(sig)g
(include)h(SIG2)e(axiom)i(...)e(end)h(=)e(?)345 1201
y FC(b)n(ut)25 b(this)f(is)h(some)n(what)f(inele)o(gant)g(and)h(in)l(v)
n(olv)o(es)f(repetitions)g(if)h(more)g(than)g(one)h(functor)f(of)g(the)
345 1361 y(same)g(form)f(is)g(required.)31 b(Another)25
b(strate)o(gy)e(is)i(to)f(duplicate)g(X)h(within)f(the)g(body)g(of)h
(SIG2:)484 1582 y Fu(signature)50 b(SIG1)d(=)g(...)484
1695 y(signature)j(SIG2)d(=)g(sig)h(structure)h(X:)e(SIG1)h(axiom)g
(...)g(end;)1272 1808 y(\(*)f(axioms)i(mentioning)h(members)f(of)e(X)g
(*\))484 1921 y(functor)i(F\(X:)f(SIG1\):)g(SIG2)g(=)f(?)345
2142 y FC(b)n(ut)21 b(this)g(requires)g(us)h(to)f(ensure)h(that)f(when)
h(we)g(implement)e Ft(F)h FC(we)h(declare)g(a)g(structure)g
Ft(X)f FC(within)345 2302 y(the)29 b(body)g(of)h Ft(F)f
FC(which)g(is)g(a)h(cop)o(y)g(of)f(the)h Ft(X)f FC(which)g(is)g(occurs)
h(as)g(a)g(parameter)f(for)h Ft(F)p FC(,)g(and)f(this)345
2462 y(cop)o(ying)c(is)h(not)f(included)h(in)f(the)h(speci\002cation.)
34 b(In)27 b(SML90)e(this)g(could)h(be)g(dealt)g(with)g(by)f(the)345
2622 y(use)31 b(of)g(structure)g(sharing)f(speci\002cations,)i(b)n(ut)e
(the)h(po)n(wer)g(of)g(this)f(feature)h(has)g(been)g(greatly)345
2782 y(diminished)23 b(in)h(SML97)g(\(and)h(hence)h(Mosco)n(w)d(ML\);)h
(see)h([MTHM97)o(,)g(G.3])491 2942 y(One)34 b(possible)f(solution)f(to)
h(this)g(problem)g(w)o(ould)g(be)h(to)g(e)o(xtend)f(the)g(syntax)g(of)h
(EML)g(to)345 3102 y(include)24 b(e)o(xpressions)f(of)i(the)g(form)484
3323 y Fu(functor)49 b(F\(X:)f(SIG1\):)g(SIG2)g(with)g(axiom)g(...)g(=)
e(?)345 3544 y FC(This)27 b(w)o(ould)h(be)g(f)o(airly)g(easy)g(to)g
(implement)e(and)i(w)o(ould)g(pro)o(vide)f(a)h(neat)h(solution.)39
b(Ho)n(we)n(v)o(er)l(,)345 3704 y(the)20 b(adv)o(ent)f(of)h(functor)g
(signatures)f(in)h(Mosco)n(w)e(ML)i(suggests)f(that)g(the)h(correct)h
(w)o(ay)f(to)f(specify)345 3864 y(a)25 b(functor)g(should)e(be)i(by)g
(means)f(of)h(functor)g(signatures.)k(Rather)d(than)e(writing)484
4085 y Fu(functor)49 b(F\(X:)f(SIG1\):)g(SIG2)g(=)f(?)345
4306 y FC(we)25 b(should)f(write)484 4527 y Fu(signature)50
b(FSIG)d(=)g(functor)i(F\(X:)f(SIG1\))g(->)94 b(SIG2)484
4640 y(functor)49 b(F:)e(FSIG)h(=)f(?)345 4861 y FC(This)22
b(is)h(clearly)h(what)f(is)f(needed)i(when)f(we)g(use)h(higher)n
(-order)f(functors.)30 b(If)23 b(we)h(ha)n(v)o(e)f(a)g(functor)530
5081 y Fu(functor)49 b(H\(structure)i(X:SIG1)d(functor)h(FF:FSIG\))p
eop
%%Page: 32 38
32 37 bop 345 -28 a Fw(Chapter)24 b(2.)55 b(Extended)24
b(Mosco)o(w)f(ML)1970 b FB(32)345 279 y FC(then)19 b(the)h(beha)n
(viour)f(of)h(the)f(functor)h Ft(FF)f FC(should)f(be)i(speci\002ed)g
(by)f(its)g(\(EML\))h(functor)f(signature;)345 439 y(so)k(we)h
(certainly)g(require)g(named)f(functor)h(signatures)f(such)g(as)h
Ft(FSIG)f FC(containing)f(axioms,)h(and)345 599 y(once)i(we)g(ha)n(v)o
(e)g(such)f(signatures)g(it)h(is)f(natural)h(to)f(write)h
Ft(functor)49 b(F:)i(FSIG)f(=)g(?)25 b FC(rather)h(than)345
760 y(ha)n(ving)e(to)g(re)n(v)o(ert)h(to)f(the)h(pre)n(vious)e(syntax.)
491 920 y(Unfortunately)-6 b(,)36 b(as)e(pointed)g(out)g(in)g(1.3.3.3)f
(Mosco)n(w)h(ML)g(does)g(not)g(allo)n(w)f(functors)i(to)345
1080 y(ha)n(v)o(e)c(signatures)f(ascribed)h(to)f(them)g(in)h
(declarations.)48 b(I)32 b(am)e(presently)h(uncertain)f(as)h(to)g(why)
345 1240 y(this)i(is,)i(so)e(the)h(current)g(v)o(ersion)f(of)g(the)h
(compiler)f(has)h(not)f(implemented)f(an)i(e)o(xtension)e(for)345
1400 y(this)e(feature.)49 b(Ev)o(en)30 b(if)h(signature)f(ascription)f
(for)i(functors)g(w)o(as)f(implemented)f(it)i(w)o(ould)f(still)345
1560 y(not)i(solv)o(e)f(the)h(problems)f(with)h(axioms)f(in)h
(signatures)g(discussed)f(abo)o(v)o(e.)52 b(Perhaps)33
b(the)g(best)345 1720 y(solution)23 b(w)o(ould)h(be)h(to)f(allo)n(w)g
(declarations)g(of)h(the)g(form)484 1929 y Fu(signature)50
b(FSIG)d(=)g(functor)i(F\(X:)f(SIG1\))g(->)94 b(SIG2)47
b(with)h(axiom)g(...)484 2042 y(functor)h(F:)e(FSIG)h(=)f(?)345
2251 y FC(Although)34 b(this)g(seems)i(to)f(be)g(a)h(good)f(w)o(ay)h
(to)f(write)g(functor)h(speci\002cations,)h(there)f(still)e(be)345
2411 y(problems)k(in)i(practice.)75 b(W)-8 b(e)40 b(ha)n(v)o(e)g
(already)g(seen)f(that)g(the)h(syntax)f(for)h(functor)f(signatures)345
2572 y(can)g(become)f(rather)h(unpleasant,)i(and)d(the)g(o)o(v)o(eruse)
f(of)i(functor)f(signatures)g(might)f(tend)h(to)345 2732
y(mak)o(e)25 b(speci\002cations)g(unreadable.)33 b(W)-8
b(e)26 b(will)f(see)g(some)g(aspects)h(of)f(this)g(in)g(more)g(detail)g
(in)g(the)345 2892 y(follo)n(wing)e(chapter)-5 b(.)345
3290 y Fx(2.5)128 b(De\002ciencies)35 b(in)h(the)f(Implementation)345
3553 y FC(At)28 b(present)h(the)f(implementation)e(has)j(some)f
(de\002ciencies.)42 b(The)29 b(semantics)e(of)i(EML)f(require)345
3713 y(that)h(when)h(an)g(unde\002ned)g(e)o(xpression,)f(such)h(as)g
Ft(val)50 b(x:)g(int)h(=)f(?)p FC(,)31 b(is)e(e)n(v)n(aluated,)h(a)g
(special)345 3873 y(e)o(xception)35 b Ft(NoCode)p FC(,)j(which)e
(cannot)g(be)h(trapped)f(by)g(the)g(user)l(,)j(should)c(be)i(raised.)65
b Ft(NoCode)345 4034 y FC(should)35 b(be)i(intercepted)g(at)g(the)f
(top)h(le)n(v)o(el,)h(where)g(the)e(v)n(alue)g(of)h(the)g(e)o
(xpression)e(should)h(be)345 4194 y(replaced)h(by)f(a)h(special)f(v)n
(alue)g Ft(Incomplete)p FC(,)h(which)f(in)g(turn)g(should)f(raise)i
Ft(NoCode)e FC(if)i(an)o(y)345 4354 y(attempt)23 b(is)g(made)g(to)h(e)n
(v)n(aluate)f(it)g(\(this)g(is)g(simply)f(a)i(tactic)g(to)f(allo)n(w)g
Ft(Incomplete)f FC(v)n(alues)h(to)g(be)345 4514 y(handled)j(e)n(v)o(en)
f(if)i(the)o(y)e(originate)h(at)g(some)g(deep)h(le)n(v)o(el)e(of)h
(nesting)f(within)h(some)f(declaration\).)345 4674 y(The)g(response)f
(of)h(the)g(compiler)f(should)f(be)i(approximately)f(as)h(follo)n(ws.)
345 4883 y Fu(-)47 b(val)g(x)93 b(=)47 b(?)g(;)345 4996
y(>)g(val)g(x)g(=)g(Incomplete)j(:)c('a)345 5109 y(-)h(val)g(y)g(=)g
(x+1;)345 5222 y(>)g(val)g(y)g(=)g(Incomplete)j(:)c(int)p
eop
%%Page: 33 39
33 38 bop 345 -28 a Fw(Chapter)24 b(2.)55 b(Extended)24
b(Mosco)o(w)f(ML)1970 b FB(33)345 279 y FC(Lines)20 b(be)o(ginning)f
(with)h Ft(-)h FC(are)g(those)g(typed)f(by)g(the)h(user)g(\()p
Ft(-)72 b FC(is)20 b(Mosco)n(w)g(ML)-9 b(')k(s)19 b(prompt\).)29
b(Lines)345 439 y(be)o(ginning)23 b(with)h Ft(>)h FC(are)g(the)g
(compiler')-5 b(s)23 b(response.)491 599 y(The)38 b(present)g
(implementation)e(does)i(not)g(handle)f(this)h(situation)e(properly)-6
b(.)70 b(Unde\002ned)345 760 y(e)o(xpression)37 b(raise)h(the)g
Ft(NoCode)f FC(e)o(xception,)k(b)n(ut)c(this)g(simply)g(propagates)g
(to)h(the)g(top)f(le)n(v)o(el,)345 920 y(where)25 b(it)f(is)h(dealt)f
(with)g(normally)-6 b(.)30 b(Thus)24 b(the)g(compiler)g(presently)h
(responds)f(as)g(follo)n(ws:)345 1141 y Fu(-)47 b(val)g(x)g(=)g(?)f(;)
345 1253 y(!)h(Uncaught)i(exception:)345 1366 y(!)e(NoCode)345
1479 y(-)g(val)g(y)g(=)g(x+1;)345 1592 y(!)g(Toplevel)i(input:)345
1705 y(!)e(val)g(y)g(=)g(x+1;)345 1818 y(!)418 b(^)345
1931 y(!)47 b(Unbound)i(value)f(identifier:)i(x)491 2152
y FC(More)36 b(seriously)-6 b(,)36 b(the)f(compiler)g(does)g(not)g
(deal)h(properly)f(with)f(unde\002ned)i(functor)f(and)345
2312 y(structure)i(bindings.)68 b(Gi)n(v)o(en)36 b(a)j(declaration)e
(of)h(the)f(form)h Ft(structure)49 b(X:>)h(SIG)h(=)f(?)p
FC(,)41 b(we)345 2472 y(should)36 b(ef)n(fecti)n(v)o(ely)f(obtain)h(a)h
(structure)g(all)f(of)h(whose)g(members)f(beha)n(v)o(e)g(as)h(if)g
(de\002ned)g(by)345 2632 y(question-marks,)32 b(so)f(an)h(attempt)f(to)
h(e)n(v)n(aluate)f(a)h(member)f(of)h(such)g(a)g(structure)f(should)g
(raise)345 2792 y Ft(NoCode)p FC(.)64 b(At)37 b(present,)i(the)d
(compiler)g(crashes)g(in)g(this)g(situation.)64 b(This)35
b(has)i(not)e(pro)o(v)o(ed)h(to)345 2952 y(be)i(a)g(problem,)i(as)e
(one)g(w)o(ould)f(not)g(normally)g(attempt)f(to)i(access)g(members)f
(of)h(unde\002ned)345 3112 y(structures;)33 b(ne)n(v)o(ertheless,)d
(the)h(situation)e(is)h(less)g(than)g(ideal.)48 b(The)31
b(problem)f(is)g(probably)g(not)345 3272 y(dif)n(\002cult)24
b(to)g(o)o(v)o(ercome,)g(b)n(ut)g(lack)h(of)g(time)f(has)h(precluded)f
(this)g(at)h(the)g(time)f(of)h(writing.)491 3433 y(It)j(is)f(hoped)g
(that)h(both)f(of)h(these)f(problems)g(will)g(be)g(\002x)o(ed)h(at)g
(some)f(time)g(in)g(the)h(future;)h(in)345 3593 y(the)c(meantime,)e
(the)i(implementation)d(has)j(been)g(adequate)g(for)g(the)g(purposes)f
(for)h(which)f(it)g(has)345 3753 y(been)h(used.)p eop
%%Page: 34 40
34 39 bop 1629 1026 a Fz(Chapter)52 b(3)508 1523 y(An)g(Example:)64
b(K)m(e)m(y)53 b(W)-11 b(or)l(ds)53 b(in)d(Conte)m(xt)345
2098 y Fx(3.1)128 b(Intr)m(oduction)345 2361 y FC(In)22
b(this)g(chapter)g(we)h(will)e(carry)i(out)f(the)g(formal)g(de)n(v)o
(elopment)e(of)i(a)h(program)f(using)f(EML)h(with)345
2521 y(higher)n(-order)27 b(functors.)37 b(The)27 b(e)o(xample)f(will)g
(be)i(of)f(a)g(program)g(for)g(constructing)f(a)h(k)o(e)o(yw)o(ords)345
2681 y(in)36 b(conte)o(xt)f(\(KWIC\))j(inde)o(x.)65 b(Our)36
b(treatment)g(is)g(based)h(on)f(that)g(of)h(Aspinall)e([Asp97)o(],)40
b(b)n(ut)345 2841 y(the)31 b(use)g(of)g(this)f(problem)g(as)h(a)g
(test-case)g(for)g(speci\002cation)g(seems)g(to)f(ha)n(v)o(e)h
(originated)f(with)345 3002 y(P)o(arnas)25 b([P)o(ar72].)491
3162 y(The)c(input)f(to)g(the)h(problem)f(is)g(a)h(set)g(of)g(titles)f
(\(of)h(books,)f(articles,)i(.)15 b(.)g(.)g(\).)29 b(The)21
b(output)e(should)345 3322 y(consist)29 b(of)h(a)g(list)f(of)h(titles,)
g(each)g(of)g(which)f(contains)g(a)i(single)e(emphasised)g(k)o(e)o(yw)o
(ord)g(\(some)345 3482 y(w)o(ords)f(are)i(considered)e(to)g(be)h
(insigni\002cant,)g(and)f(are)i(re)o(garded)e(as)h(non-k)o(e)o(yw)o
(ords\).)41 b(In)29 b(gen-)345 3642 y(eral,)c(each)f(title)g(will)f
(contain)h(se)n(v)o(eral)f(k)o(e)o(yw)o(ords)g(and)i(hence)f(will)g
(mak)o(e)g(se)n(v)o(eral)f(appearances)345 3802 y(in)h(the)h(output.)
491 3962 y(The)34 b(elements)f(of)h(the)f(output)g(list)g(should)f(be)i
(sorted)f(in)h(such)f(a)h(w)o(ay)g(that)f(if)h(the)g(w)o(ords)345
4122 y(of)27 b(each)h(title)f(are)h(circularly)f(shifted)g(to)g(bring)g
(the)g(k)o(e)o(yw)o(ord)g(to)g(the)g(front)g(then)h(the)f(titles)f
(will)345 4282 y(be)i(in)g(le)o(xicographic)f(order)-5
b(.)40 b(An)28 b(e)o(xample)f(may)h(mak)o(e)g(this)f(clearer)-5
b(.)41 b(Suppose)28 b(that)f(the)h(input)345 4443 y(consists)23
b(of)i(the)g(follo)n(wing)e(titles:)491 4603 y("ML)h(for)h(the)g(W)-8
b(orking)24 b(Programmer")491 4763 y("The)h(De\002nition)f(of)h
(Standard)g(ML)-9 b(\224)491 4923 y("Commentary)24 b(on)h(Standard)g
(ML".)345 5083 y(If)30 b(we)g(assume)f(that)h(\223the\224)g(and)g
(\223of)5 b(\224)30 b(are)h(non-k)o(e)o(yw)o(ords)d(then)i(the)g
(output)e(should)h(appear)h(as)2008 5471 y FB(34)p eop
%%Page: 35 41
35 40 bop 345 -28 a Fw(Chapter)24 b(3.)55 b(An)25 b(Example:)k(K)l(e)n
(y)c(W)m(ords)g(in)f(Conte)m(xt)1455 b FB(35)345 279
y FC(follo)n(ws:)491 439 y(The)25 b Fy(De\002nition)h
FC(of)f(Standard)g(ML)491 599 y(Commentary)f(on)h(Standard)g
Fy(ML)491 760 y FC(The)g(De\002nition)f(of)h(Standard)g
Fy(ML)491 920 y(ML)h FC(for)f(the)f(W)-8 b(orking)24
b(Programmer)491 1080 y(ML)h(for)g(the)f(W)-8 b(orking)24
b Fy(Pr)n(ogrammer)491 1240 y FC(Commentary)g(on)h Fy(Standard)h
FC(ML)491 1400 y(The)f(De\002nition)f(of)h Fy(Standard)h
FC(ML)491 1560 y(ML)f(for)g(the)f Fy(W)-7 b(orking)25
b FC(Programmer)491 1720 y(ML)g Fy(f)n(or)f FC(the)h(W)-8
b(orking)24 b(Programmer)491 1880 y(Commentary)g Fy(on)h
FC(Standard)h(ML)345 2280 y Fx(3.2)128 b(The)36 b(Speci\002cation)345
2543 y FC(W)-8 b(e)27 b(no)n(w)e(gi)n(v)o(e)h(an)g(EML)g
(speci\002cation)g(of)h(the)f(problem.)35 b(The)26 b(speci\002cation)g
(is)g(based)h(closely)345 2703 y(on)40 b([Asp97)o(,)k(2.1].)77
b(The)41 b(original)e(speci\002cation)h(is)g(in)g(Aspinall')-5
b(s)38 b(speci\002cation)i(language)345 2864 y(ASL+)31
b(and)f(we)h(ha)n(v)o(e)f(had)g(to)g(mak)o(e)g(some)g(changes)h(during)
e(the)h(translation)f(to)h(EML.)g(Some)345 3024 y(of)i(the)g(names)g
(used)g(in)g([Asp97)o(])h(are)g(some)n(what)e(misleading)g(and)h(we)g
(ha)n(v)o(e)g(renamed)h(some)345 3184 y(types)d(and)i(functions)e(to)g
(clarify)i(things;)g(note)f(also)g(that)g(there)g(are)h(se)n(v)o(eral)e
(misprints)g(in)g(the)345 3344 y(main)24 b(speci\002cation)g(in)g
([Asp97)o(,)g(2.1.7].)30 b(Aspinall')-5 b(s)23 b(speci\002cation)h
(includes)g(a)g(parameterised)345 3504 y(speci\002cation)32
b(of)g(lists)f(o)o(v)o(er)g(an)h(arbitrary)h(type,)g(and)f(se)n(v)o
(eral)g(operations)f(on)h(these)g(lists;)i(we)345 3664
y(ha)n(v)o(e)24 b(replaced)h(this)f(with)f(ML)-9 b(')k(s)24
b(b)n(uilt-in)f Ft(list)h FC(type,)g(and)g(we)h(mak)o(e)f(use)h(of)g
(se)n(v)o(eral)e(functions)345 3824 y(from)h(the)h(SML)g(standard)f
Ft(List)g FC(library)h(for)g(the)g(sak)o(e)g(of)f(simplicity)-6
b(.)491 3984 y(As)25 b(a)g(preliminary)f(we)h(de\002ne)g(some)f(useful)
h(functions.)484 4205 y Fu(fun)47 b(fst)h(\(a,_\))g(=)f(a)484
4318 y(fun)g(snd)h(\(_,b\))g(=)f(b)484 4431 y(fun)g(nth\(l,n\))j(=)c
(List.nth\(l,n\))484 4544 y(fun)h(member)i(\(x,l\))f(=)f(List.exists)j
(\(fn)e(y)e(=>)i(y)e(==)h(x\))g(l)484 4657 y(fun)g(dup)h(f\(a,a'\))h(=)
e(\(f)g(a,)g(f)f(a'\))345 4878 y FC(The)24 b(speci\002cation)f
(requires)h(se)n(v)o(eral)g(types)f(which)g(are)i(totally)e(ordered,)h
(so)g(we)g(be)o(gin)f(with)g(an)345 5038 y(EML)h(signature)g
(specifying)g(structures)g(including)g(a)h(totally)e(ordered)j(type)e
Ft(elt)p FC(:)p eop
%%Page: 36 42
36 41 bop 345 -28 a Fw(Chapter)24 b(3.)55 b(An)25 b(Example:)k(K)l(e)n
(y)c(W)m(ords)g(in)f(Conte)m(xt)1455 b FB(36)484 279
y Fu(signature)50 b(ORD)d(=)g(sig)94 b(\(*)47 b(Totally)i(ordered)g
(set)e(*\))669 392 y(type)h(elt)669 505 y(val)g(le:)f(elt*elt)i(->)e
(bool)809 618 y(axiom)h(forall)g(\(x,y,z\))h(=>)948 731
y(le\(x,x\))948 844 y(andalso)g(\()d(le\(x,y\))j(andalso)g(le\(y,x\))g
(implies)g(x==y)f(\))948 957 y(andalso)h(\()d(le\(x,y\))j(andalso)g
(le\(y,z\))g(implies)g(le\(x,z\))g(\))948 1070 y(andalso)g(\()d
(le\(x,y\))j(orelse)g(le\(y,x\))g(\))484 1183 y(end)345
1403 y FC(W)-8 b(e)25 b(ne)o(xt)f(require)h(a)g(speci\002cation)g(of)g
(a)g(type)f(of)h(w)o(ords,)f(which)h(are)g(totally)f(ordered.)484
1624 y Fu(signature)50 b(WRD)d(=)623 1737 y(sig)623 1850
y(structure)j(Ord:)e(ORD)623 1963 y(type)g(wrd)f(=)g(Ord.elt)623
2076 y(val)h(make_word:)i(string)e(->)f(wrd)484 2189
y(end)345 2410 y FC(Since)29 b(some)f(w)o(ords)g(are)i(to)e(be)h
(deemed)g(insigni\002cant)e(we)i(specify)f(a)h(class)g(of)g(k)o(e)o(yw)
o(ords)e(and)345 2570 y(use)e Ft(make_word)e FC(from)h(the)h(pre)n
(vious)f(speci\002cation)g(to)g(identify)g(non-k)o(e)o(yw)o(ords.)484
2791 y Fu(signature)50 b(KEYWRD)e(=)484 2903 y(sig)623
3016 y(structure)i(Wrd:)e(WRD)623 3129 y(val)g(is_keyword:)i(Wrd.wrd)f
(->)e(bool)623 3242 y(axiom)h(is_keyword)i(\(Wrd.make_word)i("at")c(\))
e(=)h(false)623 3355 y(axiom)h(is_keyword)i(\(Wrd.make_word)i("and"\))c
(=)f(false)623 3468 y(axiom)h(is_keyword)i(\(Wrd.make_word)i("of")c(\))
e(=)h(false)623 3581 y(axiom)h(is_keyword)i(\(Wrd.make_word)i("the"\))c
(=)f(false)484 3694 y(end)345 3915 y FC(W)-8 b(e)27 b(also)g(need)g(a)g
(means)f(of)h(identifying)f(w)o(ords)g(which)g(are)i(to)f(be)g
(emphasised)e(in)i(the)g(output.)345 4075 y(This)d(is)g(done)h(by)f(e)o
(xtending)g(the)g Ft(WRD)h FC(speci\002cation.)484 4296
y Fu(signature)50 b(EMPHWRD)f(=)484 4409 y(sig)623 4521
y(structure)h(Wrd:)e(WRD)623 4634 y(type)g(emphasis)623
4747 y(val)g(emphasised:)i(emphasis)623 4860 y(val)e(plain:)g(emphasis)
623 4973 y(type)g(ewrd)g(=)e(Wrd.wrd)j(*)e(emphasis)484
5086 y(end)p eop
%%Page: 37 43
37 42 bop 345 -28 a Fw(Chapter)24 b(3.)55 b(An)25 b(Example:)k(K)l(e)n
(y)c(W)m(ords)g(in)f(Conte)m(xt)1455 b FB(37)345 279
y FC(W)-8 b(e)32 b(ne)o(xt)f(ha)n(v)o(e)h(a)g(signature)f
Ft(TITLE)h FC(specifying)f(the)g(type)h(of)g(titles.)51
b(An)32 b(implementation)d(of)345 439 y Ft(TITLE)k FC(is)g(based)h(on)f
(an)h(implementation)d(of)j Ft(WRD)p FC(,)f(and)h(pro)o(vides)e
(functions)h(for)g(con)l(v)o(erting)345 599 y(back)25
b(and)g(forth)f(between)h(titles)f(and)h(list)e(of)i(w)o(ords.)484
813 y Fu(signature)50 b(TITLE)e(=)484 926 y(sig)623 1039
y(structure)i(Wrd:)e(WRD)623 1152 y(type)g(title)623
1265 y(val)g(words_of_title:)j(title)e(->)e(Wrd.wrd)i(list)623
1377 y(val)f(make_title:)i(Wrd.wrd)f(list)f(->)f(title)623
1490 y(axiom)h(forall)h(s)e(=>)g(words_of_title)k(\(make_title\(s\)\))h
(==)47 b(s)484 1603 y(end)345 1817 y FC(The)30 b(\002nal)f
(speci\002cation,)i Ft(EMPHTITLE)p FC(,)d(describes)h(emphasised)g
(titles.)44 b(These)30 b(are)g(similar)f(to)345 1977
y(titles,)d(b)n(ut)h(contain)g(emphasised)f(w)o(ords;)h(we)h(ha)n(v)o
(e)f(included)f(a)i(function)e Ft(output)g FC(which)h(will)345
2137 y(be)e(used)f(to)h(produce)g(a)g(readable)g(form)g(of)g(a)g(list)e
(of)i(emphasised)f(titles.)484 2350 y Fu(signature)50
b(EMPHTITLE)f(=)484 2463 y(sig)623 2576 y(structure)h(EmphWrd:)f
(EMPHWRD)623 2689 y(type)f(etitle)623 2802 y(val)g(words_of_title:)j
(etitle)e(->)e(EmphWrd.ewrd)k(list)623 2915 y(val)d(make_title:)i
(EmphWrd.ewrd)h(list)94 b(->)47 b(etitle)623 3028 y(val)h(output:)g
(etitle)h(list)f(->)f(unit)484 3141 y(end)491 3354 y
FC(W)-8 b(e)22 b(no)n(w)f(ha)n(v)o(e)g(the)g(main)g(speci\002cation)g
(of)h(the)f(program.)29 b(This)21 b(is)g(in)g(the)h(form)f(of)h(a)f
(higher)n(-)345 3514 y(order)h(functor)g Ft(Kwicfun)e
FC(which)i(tak)o(es)g(implementations)d(of)j(the)g(structures)f
Ft(WRD)p FC(,)g Ft(KEYWRD)g FC(and)345 3674 y Ft(TITLE)35
b FC(and)g(of)h(the)g(functors)f Ft(EmphWrdFun)f FC(and)h
Ft(EmphTitleFun)p FC(,)h(and)g(returns)f(a)h(structure)345
3834 y(containing)23 b(substructures)h Ft(EmphWrd)g FC(and)g
Ft(EmphTitle)p FC(,)f(and)i(a)g(function)484 4048 y Fu(make_kwic:)50
b(Title.title)g(list)e(->)f(EmphTitle.titlelis)q(t)345
4261 y FC(which)25 b(solv)o(es)f(the)i(main)f(problem.)32
b(The)26 b(speci\002cation)f(requires)g(se)n(v)o(eral)g(local)h
(functions)e(and)345 4421 y(axioms;)c(this)f(illustrates)f(why)h(we)i
(ha)n(v)o(e)e(reintroduced)h(the)f Ft(local)g FC(declaration.)29
b(The)20 b(local)g(def-)345 4581 y(initions)f(are)i(usually)f(just)g
(of)g(auxilliary)g(functions)g(which)g(are)h(used)g(to)f(mak)o(e)h(the)
f(o)o(v)o(erall)g(spec-)345 4741 y(i\002cation)h(more)g
(comprehensible;)g(the)g(implementation)e(of)i(these)g(functions)g(is)f
(usually)h(tri)n(vial.)345 4902 y(Instead)f(of)g(specifying)g
Ft(Kwicfun)f FC(directly)g(we)i(will)e(gi)n(v)o(e)g(a)i(functor)f
(signature)g Ft(KWICFUN)f FC(which)345 5062 y Ft(Kwicfun)24
b FC(will)g(be)h(required)g(to)g(satisfy)-6 b(,)23 b(because)j(we)f
(will)f(in)h(f)o(act)g(deli)n(v)o(er)f Ft(Kwicfun)g FC(as)h(the)f(re-)
345 5222 y(sult)g(of)h(a)g(higher)n(-order)g(functor)-5
b(.)30 b(Ideally)24 b(we)h(w)o(ould)f(lik)o(e)h(to)f(specify)h
Ft(Kwicfun)e FC(by)i(writing)p eop
%%Page: 38 44
38 43 bop 345 -28 a Fw(Chapter)24 b(3.)55 b(An)25 b(Example:)k(K)l(e)n
(y)c(W)m(ords)g(in)f(Conte)m(xt)1455 b FB(38)623 279
y Fu(functor)49 b(Kwicfun:)g(KWICFUN)g(=)e(?)345 491
y FC(b)n(ut)24 b(as)h(pointed)f(out)g(earlier)l(,)h(this)f(is)h
(syntactically)e(unacceptable.)491 652 y(The)g(functor)f
Ft(Kwicfun)f FC(tak)o(es)h(se)n(v)o(eral)g(other)g(structures)g(and)g
(functors)g(as)g(parameters,)h(and)345 812 y(we)30 b(use)f(the)h(e)o
(xpanded)e(syntax)h(for)h(parameters.)45 b(This)29 b(requires)g(a)h
(dummy)e(name)i(to)f(refer)i(to)345 972 y(the)25 b(input)f(signature;)g
(here)i(we)f(ha)n(v)o(e)g(chosen)g Ft(I)g FC(for)h(\223input\224.)31
b(W)l(ithin)24 b(the)h(body)f(of)h(the)g(functor)345
1132 y(we)k(must)e(refer)i(to)g(the)f(input)f(parameters)i(by)f
(pre\002xing)g(them)g(with)g Ft(I)p FC(.)g(This)g(complicates)f(the)345
1292 y(notation)f(slightly)-6 b(,)26 b(b)n(ut)g(the)i(alternati)n(v)o
(e)e(is)h(to)g(e)o(xpress)g Ft(Kwicfun)f FC(as)h(a)h(curried)g(functor)
l(,)g(which)345 1452 y(w)o(ould)d(mak)o(e)g(the)g(input)g(signature)g
(e)o(xtremely)f(comple)o(x;)h(note)g(ho)n(we)n(v)o(er)f(that)h(we)h(ha)
n(v)o(e)f(speci-)345 1612 y(\002ed)g(the)g(input)f(functor)h
Ft(EmphTitleFun)e FC(using)h(this)g(syntax.)31 b(W)-8
b(e)25 b(will)f(de\002ne)i(functors)f(which)345 1772
y(will)32 b(be)i(used)e(in)h(place)h(of)f Ft(EmphWrdFun)e
FC(and)j Ft(EmphTitleFun)d FC(later;)37 b(this)32 b(is)h(another)g
(place)345 1932 y(where)i(functor)g(signature)f(ascription)g(w)o(ould)g
(be)g(useful.)61 b(W)-8 b(e)35 b(could)f(ha)n(v)o(e)h(written)f(e)o
(xplicit)345 2092 y(functor)c(signatures)f(for)h(these)g(functors)g
(earlier)h(and)f(then)g(attached)g(them)f(to)h(the)g(formal)g(pa-)345
2253 y(rameters)25 b(in)f(the)g(signature)g Ft(KWICFUN)p
FC(;)f(unfortunately)-6 b(,)23 b(I)i(am)g(not)f(sure)g(if)h(it)f(w)o
(ould)g(be)h(possible)345 2413 y(to)f(get)h(the)g(type-sharing)f(to)g
(w)o(ork)h(properly)f(if)h(this)f(w)o(as)g(done.)345
2625 y Fu(signature)50 b(KWICFUN)e(=)f(functor)484 2738
y(\()g(I:)g(sig)623 2851 y(structure)j(Wrd1:)e(WRD)623
3077 y(structure)i(Keyword:)f(KEYWRD)809 3189 y(where)f(type)g
(Wrd.Ord.elt)i(=)d(Wrd1.Ord.elt)623 3415 y(functor)i(EmphWrdFun:)762
3528 y(functor)g(\(Wrd:)f(WRD)1179 3641 y(where)h(type)e(Ord.elt)i(=)e
(Wrd1.Ord.elt\))948 3754 y(->)g(EMPHWRD)1179 3867 y(where)i(type)e
(Wrd.Ord.elt)k(=)c(Wrd.Ord.elt)623 4093 y(structure)j(Title:)e(TITLE)
1179 4206 y(where)h(type)e(Wrd.Ord.elt)k(=)c(Wrd1.Ord.elt)623
4431 y(functor)i(EmphTitleFun:)762 4544 y(functor)809
4657 y(\(Wrd:)f(WRD)f(where)h(type)g(Ord.elt)h(=)e(Wrd1.Ord.elt\))k(->)
809 4770 y(functor)d(\(EmphWrd:)i(EMPHWRD)1319 4883 y(where)e(type)g
(Wrd.Ord.elt)i(=)d(Wrd.Ord.elt\))855 4996 y(->)g(EMPHTITLE)1179
5109 y(where)i(type)e(EmphWrd.Wrd.Ord.e)q(lt)53 b(=)46
b(Wrd.Ord.elt)1179 5222 y(and)i(type)g(EmphWrd.emphasis)k(=)47
b(EmphWrd.emphasis)p eop
%%Page: 39 45
39 44 bop 345 -28 a Fw(Chapter)24 b(3.)55 b(An)25 b(Example:)k(K)l(e)n
(y)c(W)m(ords)g(in)f(Conte)m(xt)1455 b FB(39)484 279
y Fu(end)47 b(\)->)391 505 y(sig)484 618 y(structure)j(EmphWrd:)669
731 y(EMPHWRD)855 844 y(where)e(type)g(Wrd.Ord.elt)i(=)d
(I.Wrd1.Ord.elt)484 957 y(structure)j(EmphTitle:)669
1070 y(EMPHTITLE)855 1183 y(where)e(type)g(EmphWrd.emphasis)k(=)47
b(EmphWrd.emphasis)855 1295 y(and)g(type)h(EmphWrd.Wrd.Ord.el)q(t)k(=)
47 b(EmphWrd.Wrd.Ord.el)q(t)484 1408 y(local)669 1521
y(val)h(words_of_emphtitle:)855 1634 y(EmphTitle.etitle)k(->)47
b(EmphTitle.EmphWrd.)q(Wrd)q(.w)q(rd)53 b(list)669 1747
y(axiom)c(forall)f(e:)f(EmphTitle.etitle)855 1860 y(=>)g
(words_of_emphtitle)53 b(e)47 b(==)1133 1973 y(map)h(fst)f
(\(EmphTitle.words_o)q(f_t)q(itl)q(e\(e)q(\)\))669 2086
y(\(*)h(Given)g(an)f(emphasised)j(title,)95 b(return)48
b(a)f(list)h(containing)i(the)809 2199 y(words)e(comprising)i(the)d
(title)h(*\))669 2425 y(val)g(emphasis_of_emphtit)q(le)q(:)855
2537 y(EmphTitle.etitle)k(->)47 b(EmphTitle.EmphWrd.)q(emp)q(ha)q(sis)
53 b(list)669 2650 y(axiom)c(forall)f(e:)f(EmphTitle.etitle)855
2763 y(=>)g(emphasis_of_emphti)q(tle)53 b(e)47 b(==)1133
2876 y(map)h(snd)f(\(EmphTitle.words_o)q(f_t)q(itl)q(e\(e)q(\)\))669
2989 y(\(*)h(Given)g(an)f(emphasised)j(title,)95 b(return)48
b(a)f(list)h(containing)i(the)809 3102 y(emphases)f(attached)g(to)e
(the)h(title)g(words*\))669 3328 y(val)g(keywords_of_emphtit)q(le)q(:)
855 3441 y(EmphTitle.etitle)k(->)47 b(EmphTitle.EmphWrd.)q(Wrd)q(.w)q
(rd)53 b(list)669 3554 y(axiom)c(forall)f(e:)f(EmphTitle.etitle)52
b(=>)855 3667 y(keywords_of_emphtit)q(le)h(e)47 b(==)994
3779 y(List.filter)j(I.Keyword.is_keyw)q(ord)j(\(words_of_emphtitl)q(e)
f(e\))669 3892 y(\(*)c(Given)g(an)f(emphasised)j(title,)95
b(return)48 b(a)f(list)h(containing)i(the)809 4005 y(keywords)f
(occurring)g(in)f(the)f(title)h(*\))669 4231 y(val)g
(title_of_emphtitle:)53 b(EmphTitle.etitle)f(->)47 b(I.Title.title)669
4344 y(axiom)i(forall)f(e:)f(EmphTitle.etitle)52 b(=>)855
4457 y(title_of_emphtitle)h(e)47 b(==)994 4570 y(I.Title.make_title)53
b(\(words_of_emphtitle)g(e\))669 4683 y(\(*)48 b(Discard)g(the)g
(emphasis)h(information)i(from)c(an)g(emphasised)j(title)f(*\))669
5021 y(val)f(single_keyword_emph)q(as)q(ise)q(d:)53 b(EmphTitle.etitle)
f(->)47 b(bool)669 5134 y(axiom)i(forall)f(e)f(=>)g(single_keyword_emp)
q(has)q(ise)q(d\(e)q(\))p eop
%%Page: 40 46
40 45 bop 345 -28 a Fw(Chapter)24 b(3.)55 b(An)25 b(Example:)k(K)l(e)n
(y)c(W)m(ords)g(in)f(Conte)m(xt)1455 b FB(40)855 279
y Fu(iff)47 b(\()g(exists_unique)k(k)c(=>)1087 392 y
(nth\(emphasis_of_emp)q(hti)q(tle)q(\(e)q(\),k)q(\))52
b(==)47 b(EmphWrd.emphasise)q(d)52 b(\))669 505 y(\(*)c(Does)f(the)h
(emphasised)i(title)e(contain)h(precisely)h(one)d(emphasised)809
618 y(keyword?)i(Assume)f(this)g(holds)g(for)g(the)f(next)h(two)g
(functions)h(*\))669 844 y(val)f(emph_word:)i(EmphTitle.etitle)i(->)47
b(EmphTitle.EmphWrd.)q(ewr)q(d)669 957 y(axiom)i(forall)f(\(e,n\))g(=>)
1133 1070 y(nth\(emphasis_of_em)q(pht)q(itl)q(e\()q(e\),)q(n\))53
b(==)47 b(EmphWrd.emphasised)1133 1183 y(implies)i(emph_word\(e\))i(==)
1272 1295 y(nth\(EmphTitle.word)q(s_o)q(f_)q(tit)q(le\()q(e\),)i(n\))
669 1408 y(\(*)48 b(Return)g(unique)h(emphasised)h(keyword)f(*\))669
1634 y(val)f(title_shift:)j(EmphTitle.etitle)h(->)47
b(EmphTitle.EmphWrd.e)q(wr)q(d)52 b(list)669 1747 y(axiom)d(forall)f
(\(e,l\))g(=>)f(\(l)h(==)f(title_shift)j(e\))d(implies)901
1860 y(\(exists)i(\(m,n\))f(=>)f(l)g(==)g([emph_word\(e\)])52
b(@)46 b(m)h(@)g(n)1087 1973 y(andalso)1179 2086 y(EmphTitle.words_o)q
(f_t)q(itl)q(e\()q(e\))53 b(==)47 b(n)f(@)h([emph_word)j(e])d(@)g(m\))
669 2199 y(\(*)h(Produce)g(a)f(list)h(of)f(words)h(in)f(the)h(title)g
(with)g(the)f(unique)809 2312 y(emphasised)j(one)d(rotated)i(tot)e(the)
h(front)g(*\))669 2537 y(val)g(ordered_by:)855 2650 y
(\(EmphTitle.etitle)k(*)47 b(EmphTitle.etitle)52 b(->)47
b(bool\))1040 2763 y(->)g(EmphTitle.etitle)53 b(list)47
b(->)h(bool)669 2876 y(axiom)h(forall)f(\(le,l\))h(=>)e(ordered_by)j
(le)d(l)g(implies)i(forall)f(n)f(=>)901 2989 y(\(0)g(<)g(n)g(andalso)i
(n)d(<)h(length\(l\)\))j(implies)1133 3102 y(le)d(\(nth\(l,n\),)j
(nth\(l,n+1\))g(\))669 3215 y(\(*)e(Is)f(the)g(list)h(ordered)h(by)e
(the)g(given)i(predicate?)h(*\))669 3554 y(val)e(lex_le:)h
(EmphTitle.EmphWrd.W)q(rd.)q(Or)q(d.e)q(lt)k(list)48
b(*)855 3667 y(EmphTitle.EmphWrd.W)q(rd)q(.Or)q(d.e)q(lt)53
b(list)48 b(->)f(bool)669 3892 y(axiom)i(forall)f(l)f(=>)g(lex_le)i
(\(nil,l\))762 4005 y(and)f(forall)g(l)f(=>)g(lex_le)i(\(l,nil\))f
(implies)h(l)e(==)g(nil)762 4118 y(and)h(forall)g(\(x,x',l\))h(=>)f
(lex_le)g(\(x::l,)h(x'::l\))f(iff)948 4231 y(EmphTitle.EmphWrd.W)q(rd.)
q(Ord)q(.le)q(\(x)q(,x')q(\))762 4344 y(and)g(forall)g(\(x,l,l'\))h(=>)
f(lex_le)g(\(x::l,)h(x::l'\))f(iff)g(lex_le\(l,)h(l'\))669
4457 y(\(*)f(Extension)h(of)e(word-ordering)k(to)c(lexicographic)52
b(ordering)809 4570 y(on)47 b(lists)h(*\))484 4683 y(in)669
4796 y(val)g(make_kwic:)i(I.Title.title)h(list)d(->)f(EmphTitle.etitle)
52 b(list)669 4909 y(\(*)c(The)f(main)h(function)h(*\))669
5134 y(axiom)g(forall)f(\(e,ts\))h(=>)p eop
%%Page: 41 47
41 46 bop 345 -28 a Fw(Chapter)24 b(3.)55 b(An)25 b(Example:)k(K)l(e)n
(y)c(W)m(ords)g(in)f(Conte)m(xt)1455 b FB(41)901 279
y Fu(member\(e,make_kwic)q(\(t)q(s\)\))1087 392 y(implies)49
b(\(\(single_keyword_em)q(pha)q(sis)q(ed\()q(e\))1087
505 y(andalso)g(member\(title_of_emp)q(hti)q(tle)q(\(e\))q(,)k
(ts\)\)\))669 618 y(\(*)48 b(All)f(titles)i(in)e(make_kwic\(ts\))k
(have)d(exactly)g(one)g(keyword)669 731 y(emphasised)i(*\))669
957 y(axiom)f(forall)f(\(t,k,ts\))h(=>)901 1070 y(member\(t,ts\))i
(implies)901 1183 y(\()c(I.Keyword.is_keywo)q(rd)53 b(\(nth)47
b(\(I.Title.words_of)q(_ti)q(tle)q(\(t)q(\),k)q(\)\))1087
1295 y(implies)1133 1408 y(exists_unique)k(e)c(=>)g(\()1319
1521 y(member\(e,make_kwic)52 b(ts\))1319 1634 y(andalso)c
(title_of_emphtitl)q(e\(e)q(\))k(==)c(t)1319 1747 y(andalso)g
(snd\(nth\(EmphTitle)q(.wo)q(rds)q(_o)q(f_t)q(itl)q(e\(e)q(\),)q(k\)\))
53 b(==)2060 1860 y(EmphWrd.emphasise)q(d)f(\))901 1973
y(\))669 2086 y(\(*)c(For)f(each)h(keyword)h(in)e(a)g(title,)94
b(the)48 b(title)g(appears)h(exactly)g(once)669 2199
y(in)f(the)f(output)i(with)e(that)h(keyword)h(emphasised)h(*\))669
2425 y(axiom)f(forall)f(ts)f(=>)855 2537 y(ordered_by)994
2650 y(\()g(lex_le)h(o)f(\(dup)h(\(\(map)g(fst\))g(o)f(title_shift\)\))
k(\))994 2763 y(\()c(make_kwic\(ts\))k(\))669 2876 y(\(*)d(The)f
(output)i(is)e(ordered)i(in)e(the)g(required)i(manner)g(*\))484
2989 y(end)345 3102 y(end)e(;)491 3549 y FC(The)29 b(v)n(arious)f
(parts)h(of)h(the)f(speci\002cation)g(abo)o(v)o(e)f(can)h(be)h(fed)f
(in)g(to)g(the)g(e)o(xtended)f(v)o(ersion)345 3709 y(of)d(the)f(Mosco)n
(w)g(ML)g(compiler)l(,)g(and)h(the)o(y)f(will)g(be)h(successfully)f
(parsed)h(and)f(typecheck)o(ed.)345 4109 y Fx(3.3)128
b(De)n(velopment:)44 b(Sta)o(g)q(e)35 b(1)345 4372 y
FC(W)-8 b(e)31 b(will)f(attempt)g(to)h(follo)n(w)f(a)h(bottom-up)e(de)n
(v)o(elopment)g(strate)o(gy)h(using)g(some)g(pre-de\002ned)345
4532 y(tools)20 b(which)h(may)g(be)g(useful)g(in)g(the)g
(implementation.)27 b(F)o(ollo)n(wing)19 b(Aspinall)h(\([Asp97,)i
(2.2.2]\),)345 4692 y(who)31 b(in)g(turn)h(follo)n(ws)e(P)o(arnas)i
(\([P)o(ar72]\),)i(we)d(will)g(use)h(tw)o(o)f(functors.)51
b(One)31 b(of)h(the)g(functors)345 4852 y(pro)o(vides)i(functions)h
(for)h(rotating)f(lists)f(and)i(forming)f(a)h(list)e(containing)h(all)g
(of)h(the)g(circular)345 5012 y(shifts)26 b(of)h(another)f(list,)h(and)
f(the)h(other)g(is)f(a)h(sorting)f(functor)-5 b(.)36
b(These)27 b(are)h(speci\002ed)f(by)f(functor)345 5172
y(signatures)e(as)h(follo)n(ws.)p eop
%%Page: 42 48
42 47 bop 345 -28 a Fw(Chapter)24 b(3.)55 b(An)25 b(Example:)k(K)l(e)n
(y)c(W)m(ords)g(in)f(Conte)m(xt)1455 b FB(42)438 392
y Fu(signature)49 b(CIRCSHIFTS)h(=)438 505 y(sig)530
618 y(type)e(t)530 731 y(val)g(rotate:)h(\()d(t)h(list)h(*)f(int\))h
(->)f(t)f(list)530 844 y(axiom)j(forall)f(\(l:)g(t)e(list,)i(n:)g
(int\))f(=>)716 957 y(0)g(<=)g(n)f(andalso)j(n)e(<=)g(length)i(l)d
(implies)855 1070 y(exists)i(\(f,b\))h(=>)e(l)f(==)i(f)e(@)h(b)1040
1183 y(andalso)i(length)g(f)e(=)f(n)1040 1295 y(andalso)j(rotate)g
(\(l,n\))f(==)f(b)g(@)g(f)530 1521 y(val)h(rotate':)h(\(t)e(list)h(*)f
(int\))h(->)f(t)f(list)530 1634 y(axiom)j(forall)f(\(l:)g(t)e(list,)i
(n:)g(int\))f(=>)716 1747 y(0)g(<=)g(n)f(andalso)j(n)e(<=)g(length)i(l)
d(implies)855 1860 y(rotate)95 b(\(rotate')49 b(\(l,n\),)g(n\))e(==)g
(l)g(andalso)855 1973 y(rotate')i(\(rotate)95 b(\(l,n\),)49
b(n\))e(==)g(l)530 2199 y(val)h(circ_shifts:)j(t)46 b(list)i(->)f
(\(\(t)h(list\)*int\))i(list)530 2312 y(axiom)f(forall)f(l)f(=>)g
(length)h(\(circ_shifts)j(l\))c(=)g(length)i(l)623 2425
y(and)f(forall)g(\(l,s,j\))h(=>)809 2537 y(member)f(\(\(s,j\),)h
(circ_shifts)h(l\))d(iff)h(s)f(==)g(rotate)h(\(l,j\))484
2650 y(end)438 2989 y(signature)h(CIRCSHIFTSFUN)i(=)530
3102 y(functor)e(\(X:sig)g(type)f(t)e(end\))i(->)f(CIRCSHIFTS)j(where)e
(type)g(t)f(=)g(X.t)438 3554 y(signature)i(SORT)f(=)438
3667 y(sig)530 3779 y(structure)i(X:)d(ORD)530 3892 y(local)716
4005 y(val)g(count:)i(X.elt)f(*)f(X.elt)h(list)g(->)f(int)901
4118 y(axiom)h(forall)h(x)e(=>)g(count\(x,nil\))k(=)46
b(0)901 4231 y(and)i(forall)g(\(x,t\))g(=>)g(count\(x,x::t\))j(=)46
b(1)h(+)g(count\(x,t\))901 4344 y(and)h(forall)g(\(x,y,t\))h(=>)e(x)g
(=/=)g(y)1040 4457 y(implies)i(count\(x,y::t\))i(=)c(count\(x,t\))716
4683 y(val)g(ordered_by:)901 4796 y(\(X.elt)i(*)e(X.elt)h(->)f(bool\))
1040 4909 y(->)g(X.elt)i(list)e(->)h(bool)901 5021 y(axiom)g(forall)h
(\(le,l\))g(=>)1040 5134 y(ordered_by)h(le)d(l)g(implies)i(forall)g(n)d
(=>)p eop
%%Page: 43 49
43 48 bop 345 -28 a Fw(Chapter)24 b(3.)55 b(An)25 b(Example:)k(K)l(e)n
(y)c(W)m(ords)g(in)f(Conte)m(xt)1455 b FB(43)1179 279
y Fu(\(0)48 b(<)e(n)h(andalso)i(n)e(<)f(List.length\(l\)\))52
b(implies)1319 392 y(le)47 b(\(nth\(l,n\),)j(nth\(l,n+1\))g(\))530
505 y(in)716 618 y(val)d(sort:)h(X.elt)h(list)e(->)h(X.elt)g(list)901
731 y(axiom)g(forall\(a,l\))j(=>)c(member)h(\(a,)g(l\))1875
844 y(iff)f(member)i(\(a,)e(sort\(l\)\))1087 957 y(andalso)i
(count\(a,l\))h(=)c(count\(a,)k(sort\(l\)\))901 1070
y(and)e(forall)g(l)f(=>)g(ordered_by)j(X.le)e(\(sort\(l\)\))530
1183 y(end)438 1295 y(end;)438 1521 y(signature)h(SORTFUN)g(=)e
(functor)i(\(X:)e(ORD\))h(->)f(SORT)1689 1634 y(where)i(type)e(X.elt)i
(=)d(X.elt)345 1968 y FC(Another)23 b(tool)g(which)g(will)g(be)h
(useful)f(is)g(a)h(functor)g(which)f(e)o(xtends)g(an)h(ordering)f(to)g
(the)h(le)o(xico-)345 2128 y(graphic)h(ordering)f(on)h(list)e(o)o(v)o
(er)h(the)h(base)g(type.)484 2349 y Fu(functor)49 b(Lex)e(\(X:)h(ORD\))
g(:>)f(sig)623 2462 y(include)i(ORD)e(where)i(type)e(elt)h(=)f(X.elt)h
(list)669 2575 y(axiom)h(forall)f(l)f(=>)g(le)g(\(nil,l\))762
2688 y(and)h(forall)g(l)f(=>)g(le)g(\(l,nil\))i(implies)g(l)e(==)g(nil)
762 2801 y(and)h(forall)g(\(x,x',l\))h(=>)1087 2913 y(lex_le)f(\(x::l,)
h(x'::l\))f(iff)g(X.le\(x,x'\))762 3026 y(and)g(forall)g(\(x,l,l'\))h
(=>)1087 3139 y(lex_le)f(\(x::l,)h(x::l'\))f(iff)g(lex_le\(l,)h(l'\))
484 3252 y(end)345 3473 y FC(Since)26 b(these)g(are)g(supposed)f(to)h
(be)f(pre-de\002ned)i(tools)e(we)h(will)f(pro)o(vide)g(implementations)
e(im-)345 3633 y(mediately)-6 b(.)438 3854 y Fu(functor)49
b(Circshifts)h(\(X:)d(sig)g(type)h(t)f(end\))530 3967
y(:>)g(CIRCSHIFTS)j(where)f(type)e(t)g(=)g(X.t)g(=)438
4080 y(struct)530 4193 y(type)h(t)f(=)g(X.t)530 4418
y(fun)h(rotate)95 b(\(l,n\))48 b(=)f(List.drop\(l,n\))k(@)c
(List.take\(l,n\))530 4531 y(fun)h(rotate')h(\(l,n\))f(=)f(rotate)h
(\(l,)g(length)g(l)f(-)g(n\))530 4757 y(fun)h(circ_shifts)i(\(l:)e(X.t)
f(list\))h(=)530 4870 y(let)g(fun)f(csh\(l,j\))j(=)c(if)h(j)g(=)g
(length)h(l)f(then)h([])809 4983 y(else)f(\(l,j\)::csh\(rotate)53
b(\(l,1\),)48 b(j+1\))530 5096 y(in)f(csh)h(\(l,0\))530
5209 y(end)p eop
%%Page: 44 50
44 49 bop 345 -28 a Fw(Chapter)24 b(3.)55 b(An)25 b(Example:)k(K)l(e)n
(y)c(W)m(ords)g(in)f(Conte)m(xt)1455 b FB(44)438 279
y Fu(end;)438 618 y(functor)49 b(Sort\(X)f(:)f(ORD\):>)h(SORT)g(where)g
(type)g(X.elt)g(=)f(X.elt)h(=)438 731 y(struct)530 844
y(structure)i(X)d(=)f(X)530 1070 y(fun)i(partition\(a,[]\))k(=)46
b(\([],[]\))623 1183 y(|)h(partition\(a,b::l\))52 b(=)901
1295 y(let)994 1408 y(val)47 b(\(l1,l2\))i(=)e(partition\(a,l\))901
1521 y(in)994 1634 y(if)g(X.le\(b,a\))j(then)e(\(b::l1,l2\))i(else)d
(\(l1,b::l2\))901 1747 y(end)530 1973 y(fun)h(sort)g([])f(=)f([])94
b(\(*)47 b(Quicksort)j(*\))623 2086 y(|)d(sort\(a::l\))j(=)d(let)1411
2199 y(val)h(\(l1,l2\))h(=)d(partition\(a,l\))1319 2312
y(in)1411 2425 y(\(sort)i(l1\)@\(a::\(sort)k(l2\)\))1319
2537 y(end)438 2650 y(end;)438 2989 y(functor)d(Lex)e(\(X:)g(ORD\))h
(:>)f(ORD)577 3102 y(where)h(type)g(elt)f(=)g(X.elt)h(list)g(=)438
3215 y(struct)530 3328 y(type)g(elt)g(=)e(X.elt)j(list)530
3441 y(fun)f(le\([],_\))h(=)e(true)623 3554 y(|)g(le\(_,[]\))i(=)e
(false)623 3667 y(|)g(le)g(\(x::t,)h(x'::t'\))h(=)855
3779 y(if)e(\(X.le\(x,x'\))j(andalso)f(X.le\(x',x\)\))1550
3892 y(then)f(le\(t,t'\))855 4005 y(else)g(X.le\(x,x'\))438
4118 y(end)345 4339 y FC(Unfortunately)30 b(we)i(cannot)f(directly)g
(ascribe)h(the)f(corresponding)g(functor)g(signatures)f(to)h(the)345
4499 y(functors)d(abo)o(v)o(e)g(\(which)g(w)o(ould)g(be)h(useful)f(as)h
(a)g(form)f(of)h(typechecking\);)h(ho)n(we)n(v)o(er)l(,)e(we)h(will)345
4659 y(subsequently)g(supply)g(these)i(functors)f(as)g(ar)n(guments)g
(to)g(a)h(higher)n(-order)g(functor)f(which)g(e)o(x-)345
4819 y(pects)h(ar)n(guments)g(satisfying)f(the)h(appropriate)g
(constraints,)g(and)h(at)f(this)f(point)h(the)g(compiler)345
4979 y(will)24 b(check)h(that)f(the)h(functors)f(satisfy)g(the)h
(signatures.)491 5140 y(W)-8 b(e)36 b(will)f(no)n(w)f(recast)i(our)f
(original)g(speci\002cation)g(to)g(include)g(these)g(tools:)50
b(we)36 b(will)e(do)p eop
%%Page: 45 51
45 50 bop 345 -28 a Fw(Chapter)24 b(3.)55 b(An)25 b(Example:)k(K)l(e)n
(y)c(W)m(ords)g(in)f(Conte)m(xt)1455 b FB(45)345 279
y FC(this)26 b(by)h(constructing)f(a)h(higher)n(-order)h(functor)f
(which)f(tak)o(es)h(functors)g(of)g(the)g(abo)o(v)o(e)g(types)f(as)345
439 y(parameters)f(and)g(returns)f(a)h(functor)g(satisfying)e
Ft(KWICFUN)p FC(.)484 660 y Fu(functor)49 b(Build_Kwic)623
773 y(\(CircShiftFun:)j(CIRCSHIFTSFUN\))623 886 y(\(LexFun:)d(LEXFUN\))
623 999 y(\(SortFun:)h(SORTFUN\))f(:>)e(KWICFUN)i(=)e(?)345
1459 y Fx(3.4)128 b(Implementation)35 b(of)g(the)h(Main)f(Functor)345
1723 y FC(W)-8 b(e)24 b(implement)e(the)i(follo)n(wing)e(algorithm)g
(for)i Ft(make_kwic)f FC(\(this)g(dif)n(fers)g(from)h(the)g(algorithm)
345 1883 y(gi)n(v)o(en)f(in)i([Asp97)o(,)g(2.2.4])f(as)h(that)f
(algorithm)g(does)g(not)g(appear)i(to)e(gi)n(v)o(e)g(a)h(correct)g
(solution\))490 2126 y Fm(\017)49 b FC(Gi)n(v)o(en)32
b(a)i(list)e(of)i(titles,)g(form)g(a)f(list)g(of)g(pairs)h
Ft(\(s,n\))e FC(where)i Ft(s)g FC(runs)f(o)o(v)o(er)g(all)g(circular)
589 2286 y(shifts)g(of)h(all)h(titles,)g(and)f Ft(n)h
FC(is)e(the)i(number)e(of)i(shifts)e(required)i(to)e(obtain)h
Ft(s)g FC(from)g(the)589 2446 y(original)24 b(title.)490
2606 y Fm(\017)49 b FC(Filter)37 b(out)g(the)g(members)g(of)h(this)e
(list)h(whose)g(\002rst)h(element)f(does)g(not)g(be)o(gin)f(with)h(a)
589 2766 y(k)o(e)o(yw)o(ord.)490 2926 y Fm(\017)49 b
FC(Sort)25 b(the)f(list)g(le)o(xicographically)f(by)i(the)f(\002rst)h
(element.)490 3087 y Fm(\017)49 b FC(Con)l(v)o(ert)24
b(the)g(\002rst)h(element)f(of)g(each)h(pair)g(into)e(a)i(list)e(of)i
(emphasised)e(w)o(ords)h(by)g(empha-)589 3247 y(sising)f(the)i(\002rst)
g(w)o(ord)f(and)h(making)f(all)g(the)h(others)g(plain.)490
3407 y Fm(\017)49 b FC(Return)25 b(the)g(w)o(ords)g(in)g(the)g(list)f
(to)h(their)g(original)f(order)i(by)f(\223unshifting\224)e(by)i(the)g
(second)589 3567 y(component)e(of)i(the)g(pair)-5 b(.)490
3727 y Fm(\017)49 b FC(Con)l(v)o(ert)24 b(the)h(lists)e(of)i
(emphasised)f(w)o(ords)g(into)g(emphasised)g(titles.)345
3970 y(Our)h(\002nal)g(implementation)d(of)j Ft(Build_kwic)e
FC(is)345 4191 y Fu(functor)49 b(Build_Kwic)530 4304
y(\(CircShiftFun:)j(CIRCSHIFTSFUN\))530 4417 y(\(LexFun:)e(LEXFUN\))530
4530 y(\(SortFun:)g(SORTFUN\))f(:>)e(KWICFUN)i(=)345
4643 y(functor)95 b(\()47 b(I:sig)438 4756 y(structure)i(Wrd1:)f(WRD)
438 4868 y(structure)h(Keyword:)h(KEYWRD)e(where)g(type)g(Wrd.Ord.elt)i
(=)d(Wrd1.Ord.elt)438 4981 y(functor)i(EmphWrdFun:)530
5094 y(functor)g(\(Wrd:)f(WRD)g(where)g(type)g(Ord.elt)h(=)e
(Wrd1.Ord.elt\))1179 5207 y(->)h(EMPHWRD)g(where)h(type)e(Wrd.Ord.elt)k
(=)c(Wrd.Ord.elt)p eop
%%Page: 46 52
46 51 bop 345 -28 a Fw(Chapter)24 b(3.)55 b(An)25 b(Example:)k(K)l(e)n
(y)c(W)m(ords)g(in)f(Conte)m(xt)1455 b FB(46)438 392
y Fu(structure)49 b(Title:)g(TITLE)f(where)g(type)g(Wrd.Ord.elt)i(=)d
(Wrd1.Ord.elt)438 618 y(functor)i(EmphTitleFun:)i(\(*)c(Very)h(hard)f
(to)g(get)h(sharing)h(right)f(here)g(*\))530 731 y(functor)h(\(Wrd:)f
(WRD)1179 844 y(where)h(type)e(Ord.elt)i(=)e(Wrd1.Ord.elt\))k(->)530
957 y(functor)e(\(EmphWrd:)h(EMPHWRD)1365 1070 y(where)e(type)g
(Wrd.Ord.elt)i(=)d(Wrd1.Ord.elt\))530 1183 y(->)g(EMPHTITLE)669
1295 y(where)i(type)e(EmphWrd.Wrd.Ord.e)q(lt)53 b(=)46
b(Wrd1.Ord.elt)669 1408 y(and)i(type)g(EmphWrd.emphasis)k(=)47
b(EmphWrd.emphasis)391 1634 y(end)h(\))e(=>)94 b(\(*)47
b(anonymous)j(functor)f(*\))391 1860 y(struct)484 1973
y(structure)h(EmphWrd)f(=)d(I.EmphWrdFun\(I.Wrd)q(1\))q(;)484
2086 y(structure)k(EmphTitle)f(=)669 2199 y(I.EmphTitleFun)j
(\(I.Wrd1\))d(\(EmphWrd\))484 2425 y(local)669 2537 y(\(*)f(The)f
(implementation)k(of)d(most)f(of)g(the)h(functions)i(below)e(is)669
2650 y(fairly)h(obvious.)96 b(The)47 b(proofs)i(that)e(they)h(satisfy)h
(the)669 2763 y(appropriate)i(axioms)d(is)f(the)h(signature)i(are)d
(straightforward)52 b(*\))669 2989 y(fun)c(words_of_emphtitle)53
b(e)47 b(=)855 3102 y(map)g(fst)h(\(EmphTitle.words_of)q(_ti)q(tl)q
(e\(e)q(\)\))669 3328 y(fun)g(emphasis_of_emphtit)q(le)53
b(e)47 b(=)855 3441 y(map)g(snd)h(\(EmphTitle.words_of)q(_ti)q(tl)q
(e\(e)q(\)\))669 3667 y(fun)g(keywords_of_emphtit)q(le)53
b(e)47 b(=)855 3779 y(List.filter)j(I.Keyword.is_keywo)q(rd)1411
3892 y(\(words_of_emphtitl)q(e)j(e\))669 4118 y(fun)48
b(title_of_emphtitle)53 b(e)47 b(=)855 4231 y(I.Title.make_title)53
b(\()47 b(words_of_emphtitle)52 b(e\))669 4457 y(fun)c
(single_keyword_emph)q(as)q(ise)q(d)k(e)47 b(=)669 4570
y(let)809 4683 y(fun)g(count_emphkeywords)53 b([])47
b(=)g(0)901 4796 y(|)g(count_emphkeywords)53 b(\(\(w,emph\)::l\))e(=)
1087 4909 y(count_emphkeywords)i(l)46 b(+)1179 5021 y(\(if)i
(I.Keyword.is_keywor)q(d)53 b(w)1226 5134 y(andalso)c(emph)f(=)e
(EmphWrd.emphasised)p eop
%%Page: 47 53
47 52 bop 345 -28 a Fw(Chapter)24 b(3.)55 b(An)25 b(Example:)k(K)l(e)n
(y)c(W)m(ords)g(in)f(Conte)m(xt)1455 b FB(47)1319 279
y Fu(then)47 b(1)g(else)h(0\))669 392 y(in)855 505 y
(count_emphkeywords)53 b(e)47 b(=)f(1)669 618 y(end)669
844 y(fun)i(emph_word)i(\(\(w,plain\)::l\))h(=)c(emph_word)i(l)762
957 y(|)e(emph_word)j(\(\(w,emphasised\)::_\))j(=)47
b(w;)669 1183 y(fun)h(title_shift)i(e)d(=)669 1295 y(let)855
1408 y(fun)g(emph_to_front)k(\(x::l\))e(=)1040 1521 y(if)e(snd)h(x)f(=)
f(EmphWrd.emphasise)q(d)52 b(then)c(x::l)1040 1634 y(else)g
(emph_to_front)j(\(l@[x]\))669 1747 y(in)855 1860 y(emph_to_front)g
(\(EmphTitle.words_o)q(f_t)q(itl)q(e)h(e\))669 1973 y(end)669
2199 y(fun)c(ordered_by)i(le)d(l)g(=)669 2312 y(let)809
2425 y(fun)g(ordered)i(nil)e(=)g(true)901 2537 y(|)g(ordered)i
(\(x::nil\))g(=)e(true)901 2650 y(|)g(ordered)i(\(x::y::l\))h(=)1040
2763 y(if)d(le\(x,y\))i(then)f(ordered)h(\(y::l\))1040
2876 y(else)f(false)669 2989 y(in)855 3102 y(ordered)h(l)669
3215 y(end)669 3441 y(structure)h(Lex)e(=)e(LexFun\(I.Title.Wrd)q(.O)q
(rd\))669 3554 y(val)i(lex_le)g(=)f(Lex.le)669 3779 y(structure)j
(PairOrd:)f(ORD)f(=)669 3892 y(struct)855 4005 y(type)g(elt)f(=)g
(I.Title.Wrd.Ord.elt)53 b(list)48 b(*)f(int)855 4118
y(fun)g(le)g(\(\(t,n\),\(t',n'\)\))52 b(=)47 b(Lex.le\(t,t'\))669
4231 y(end)669 4344 y(structure)j(PairSort)f(=)e(SortFun\(PairOrd\))669
4570 y(structure)j(CircShifts)g(=)809 4683 y(CircShiftFun)g(\()d(type)h
(t)f(=)f(I.Title.Wrd.wrd)52 b(\))669 4796 y(structure)e(EmphCircShifts)
i(=)809 4909 y(CircShiftFun)e(\()d(type)h(t)f(=)f(EmphWrd.ewrd)51
b(\))669 5021 y(\(*)d(Note)f(that)h(we've)g(used)g(an)f(input)h
(functor)h(twice)g(here)e(*\))484 5134 y(in)p eop
%%Page: 48 54
48 53 bop 345 -28 a Fw(Chapter)24 b(3.)55 b(An)25 b(Example:)k(K)l(e)n
(y)c(W)m(ords)g(in)f(Conte)m(xt)1455 b FB(48)669 279
y Fu(fun)48 b(make_kwic)i(ts)d(=)669 392 y(let)855 505
y(\(*)g(Implement)j(the)d(algorithm)j(above)e(in)f(easy)h(steps)g(*\))
855 731 y(val)f(titles_as_lists)52 b(=)1179 844 y(map)c
(I.Title.words_of_ti)q(tl)q(e)k(ts)855 957 y(val)47 b(shifted_titles)52
b(=)1179 1070 y(map)c(CircShifts.circ_shi)q(ft)q(s)k(titles_as_lists)
855 1183 y(val)47 b(all_shifted_title)q(s)52 b(=)47 b(List.concat)j
(shifted_titles)855 1295 y(val)d(admissible_titles)53
b(=)1040 1408 y(List.filter)e(\(fn)c(\(w::l,n\))i(=>)f
(I.Keyword.is_keyword)q(\(w)q(\)\))1179 1521 y(all_shifted_title)q(s)
855 1634 y(val)f(sorted_titles)k(=)c(PairSort.sort)k(admissible_titles)
855 1860 y(val)c(first_words_empha)q(sis)q(ed)53 b(=)855
1973 y(let)1040 2086 y(fun)48 b(emph_first_word)k(\(\(w::l\),)d(n\))
1226 2199 y(=)e(\(\(w,EmphWrd.emphasis)q(ed)q(\))52 b(::)1319
2312 y(\(map)47 b(\(fn)h(t)f(=>)g(\(t,EmphWrd.plain\)\))53
b(l\),)47 b(n\))855 2425 y(in)1040 2537 y(map)h(emph_first_word)k
(sorted_titles)855 2650 y(end)855 2763 y(val)47 b(unshifted_etitles)53
b(=)1040 2876 y(map)48 b(EmphCircShifts.rota)q(te')53
b(first_words_emphas)q(ise)q(d)855 2989 y(val)47 b(result)i(=)e(map)g
(EmphTitle.make_tit)q(le)53 b(unshifted_etitles)855 3102
y(val)47 b(_)g(=)g(EmphTitle.output)52 b(result)855 3215
y(\(*)47 b(Only)h(here)g(for)f(demonstration)k(purposes)e(*\))669
3328 y(in)855 3441 y(result)669 3554 y(end)484 3667 y(end)345
3779 y(end;)345 4000 y FC(W)-8 b(e)23 b(can)h(no)n(w)e(be)i(certain)f
(that)g(an)o(y)f(correct)i(implementations)c(of)k(the)f(v)n(arious)f
(input)g(structures)345 4160 y(and)29 b(functors)f(can)i(be)f(fed)g
(into)f(the)h(abo)o(v)o(e)f(functor)h(and)g(will)f(pro)o(vide)g(a)h
(correct)h(solution)d(for)345 4321 y(the)e(initial)e(problem.)345
4720 y Fx(3.5)128 b(Completing)35 b(the)h(Implementation)345
4984 y FC(It)26 b(is)g(no)n(w)f(f)o(airly)h(straightforw)o(ard)f(to)h
(complete)f(the)h(implementation.)33 b(W)-8 b(e)26 b(\002rstly)g
(implement)345 5144 y(structures)d(for)h(the)g(basic)g(data-types)f(in)
h(a)g(f)o(airly)g(simple-minded)e(w)o(ay)-6 b(.)30 b(T)-8
b(o)23 b(start)h(with,)f(we)h(use)p eop
%%Page: 49 55
49 54 bop 345 -28 a Fw(Chapter)24 b(3.)55 b(An)25 b(Example:)k(K)l(e)n
(y)c(W)m(ords)g(in)f(Conte)m(xt)1455 b FB(49)345 279
y FC(strings)23 b(to)i(represent)g(w)o(ords)f(\(a)i(f)o(airly)e(ob)o
(vious)f(choice\):)345 459 y Fu(structure)50 b(O:)d(ORD)g(=)345
571 y(struct)530 684 y(type)h(elt)g(=)e(string)530 797
y(fun)i(le)f(\(s:elt,t:elt\))k(=)c(s)f(<=)i(t)345 910
y(end)345 1136 y(structure)i(W:)d(WRD)g(=)345 1249 y(struct)530
1362 y(structure)j(Ord)d(=)g(O)530 1475 y(type)h(wrd)g(=)e(Ord.elt)530
1588 y(fun)i(make_word)h(\(s:)f(string\))h(=)e(s)345
1701 y(end)491 1880 y FC(The)30 b Ft(KEYWRD)e FC(structure)i(has)f(to)g
(pro)o(vide)g(a)h(means)f(of)h(distinguishing)c(k)o(e)o(yw)o(ords.)44
b(W)-8 b(e)30 b(do)345 2040 y(this)24 b(by)h(con)l(v)o(erting)f(w)o
(ords)h(to)f(lo)n(wer)h(case)h(and)f(then)g(comparing)f(them)h(with)f
(prototypes:)30 b(this)345 2200 y(ensures)25 b(the)f(the)h(case)g(of)g
(k)o(e)o(yw)o(ords)f(is)g(insigni\002cant)345 2379 y
Fu(structure)50 b(K:)d(KEYWRD)h(=)345 2492 y(struct)530
2605 y(structure)i(Wrd)d(=)g(W)530 2718 y(fun)h(is_keyword)i(w)d(=)530
2831 y(let)716 2944 y(val)g(w'=)h(implode)h(\(map)e(Char.toLower)k
(\(explode\(w\)\)\))901 3057 y(\(*)c(ouch)h(*\))530 3170
y(in)716 3283 y(case)g(w')f(of)g("at")h(=>)f(false)623
3395 y(|)g("and")h(=>)f(false)623 3508 y(|)g("of")h(=>)f(false)623
3621 y(|)g("the")h(=>)f(false)623 3734 y(|)g(_)g(=>)g(true)530
3847 y(end)345 3960 y(end)345 4139 y FC(T)m(itles)23
b(will)h(be)h(represented)g(as)g(strings)f(consisting)f(of)i(w)o(ord)f
(separated)h(by)g(single)f(spaces.)345 4319 y Fu(structure)50
b(T:)d(TITLE)h(=)345 4431 y(struct)530 4544 y(structure)i(Wrd)d(=)g(W)
530 4657 y(type)h(title)g(=)f(string)530 4770 y(fun)h(words_of_title)j
(t)c(=)g(String.tokens)k(\(fn)c(c)g(=>)g(c)g(=)g(#")g("\))g(t)530
4883 y(fun)h(make_title)i(nil)d(=)g("")623 4996 y(|)g(make_title)j
(\(x::nil\))f(=)e(x)623 5109 y(|)g(make_title)j(\(x::t\))e(=)f(x)g(^)g
(")f(")h(^)g(make_title\(t\))345 5222 y(end)p eop
%%Page: 50 56
50 55 bop 345 -28 a Fw(Chapter)24 b(3.)55 b(An)25 b(Example:)k(K)l(e)n
(y)c(W)m(ords)g(in)f(Conte)m(xt)1455 b FB(50)345 279
y FC(The)25 b(speci\002cation)f(for)h(emphasised)f(w)o(ords)g(is)h(tri)
n(vial)e(to)i(satisfy:)345 500 y Fu(functor)49 b(EWfun)f(\(Wrd:)g
(WRD\))g(=)345 613 y(struct)530 726 y(structure)i(Wrd)d(=)g(Wrd)530
839 y(datatype)j(emphasis)f(=)e(plain)h(|)f(emphasised)530
952 y(type)h(ewrd)g(=)f(Wrd.wrd)i(*)d(emphasis)345 1065
y(end)491 1285 y FC(Finally)-6 b(,)20 b(we)f(ha)n(v)o(e)g(a)h(functor)f
(to)g(produce)h(an)f(implementation)e(for)j(emphasised)e(titles)h(gi)n
(v)o(en)345 1446 y(implementations)31 b(of)j(w)o(ords)f(and)h
(emphasised)e(w)o(ords.)57 b(W)-8 b(e)34 b(simply)e(represent)i
(emphasised)345 1606 y(titles)21 b(as)g(lists)g(of)h(emphasised)f(w)o
(ords.)29 b(W)-8 b(e)22 b(also)f(gi)n(v)o(e)g(a)h(function)f(to)g
(print)g(a)i(list)d(of)i(emphasised)345 1766 y(titles)i(in)g(L)691
1752 y Fo(A)730 1766 y FC(T)774 1788 y(E)823 1766 y(X)g(format.)345
1987 y Fu(functor)49 b(ETfun)855 2100 y(\(Wrd:)f(WRD\))855
2212 y(\(EWrd:)g(EMPHWRD)h(where)g(type)e(Wrd.Ord.elt)k(=)46
b(string\))j(=)345 2325 y(struct)530 2438 y(structure)h(EmphWrd)f(=)e
(EWrd)530 2551 y(type)h(etitle)h(=)d(EmphWrd.ewrd)51
b(list)530 2664 y(fun)d(words_of_title)j(e)c(=)g(e)530
2777 y(fun)h(make_title)i(e)d(=)f(e)530 3003 y(fun)i(output)g(elist)h
(=)530 3116 y(let)716 3229 y(fun)e(emphstr)i(\(s,emph\))g(=)901
3342 y(if)e(emph)h(=)f(EmphWrd.plain)k(then)d(s)901 3454
y(else)g("\\\\textbf{)i(")d(^)g(s)f(^)h("}")716 3567
y(fun)g(make_str)j(nil)d(=)g("")809 3680 y(|)f(make_str)k(\(x::nil\))f
(=)e(emphstr\(x\))j(^)c("\\n")809 3793 y(|)g(make_str)k(\(x::t\))e(=)f
(emphstr\(x\))j(^)d(")f(")h(^)g(make_str\(t\))716 3906
y(fun)g(pr)g([])g(=)g(\(\))901 4019 y(|)g(pr)g(\(x::t\))i(=)d
(\(BasicIO.print)52 b(\(make_str)d(x\);)f(pr)f(t\))530
4132 y(in)669 4245 y(\(BasicIO.print)52 b("\\n";)669
4358 y(pr)c(elist;)669 4471 y(BasicIO.print)k("\\n")669
4584 y(\))530 4696 y(end)345 4809 y(end)345 5030 y FC(All)24
b(that)g(no)n(w)g(remains)h(is)f(to)h(put)f(the)g(pieces)h(together:)p
eop
%%Page: 51 57
51 56 bop 345 -28 a Fw(Chapter)24 b(3.)55 b(An)25 b(Example:)k(K)l(e)n
(y)c(W)m(ords)g(in)f(Conte)m(xt)1455 b FB(51)345 279
y Fu(functor)49 b(KwicFun)g(=)d(Build_Kwic)k(\(Circshifts\))h(\(Lex\))d
(\(Sort\);)345 505 y(structure)i(Kwic)d(=)g(KwicFun)i(\()484
618 y(structure)h(Wrd1=W)484 731 y(structure)g(Keyword)f(=)d(K)484
844 y(functor)j(EmphWrdFun)h(=)d(EWfun)484 957 y(structure)j(Title)e(=)
f(T)484 1070 y(functor)i(EmphTitleFun)i(=)46 b(ETfun)345
1183 y(\))345 1403 y FC(In)29 b(f)o(act,)i(there)f(is)f(no)g(need)h(to)
f(create)h(a)g(separate)g Ft(KwicFun)e FC(functor)-5
b(.)44 b(W)-8 b(e)30 b(could)f(simply)e(ha)n(v)o(e)345
1563 y(generated)i Ft(Kwic)g FC(in)g(one)g(step.)43 b(Ho)n(we)n(v)o(er)
l(,)29 b(it)g(is)g(possible)f(that)h(we)g(might)f(ha)n(v)o(e)h
(implemented)345 1724 y(the)d(utility)e(functors)i(b)n(ut)f(that)h(the)
g(implementation)e(of)i(the)g(rest)g(of)g Ft(Build_Kwic)f
FC(w)o(as)h(incom-)345 1884 y(plete.)34 b(In)26 b(this)g(situation)e
(the)i(intermediate)f(step)h(might)f(ha)n(v)o(e)g(been)i(useful)e(as)h
(a)h(typechecking)345 2044 y(procedure)e(for)g(the)g(utility)e
(functors.)491 2204 y(The)32 b(implementation)c(can)k(no)n(w)f(be)g
(fed)h(to)f(the)g(compiler:)43 b(e)n(v)o(erything)29
b(typechecks)i(suc-)345 2364 y(cessfully)24 b(and)h(we)g(can)g(test)f
(the)h(program.)484 2698 y Fu(bannocks)49 b(\045)e(emosml)484
2811 y(Moscow)i(ML)e(version)i(2.00)e(\(June)i(2000\))484
2924 y(EML)e(extensions)j(June)e(2001)484 3036 y(Enter)g(`quit\(\);')i
(to)d(quit.)484 3149 y(-)g(use)g("kw3.eml";)577 3375
y(.)577 3488 y(.)577 3714 y(\()p Fr(1361)25 b(lines)f(of)g(output)h
(deleted)p Fu(\))577 3827 y(.)577 3940 y(.)484 4053 y(>)47
b(New)g(type)h(names:)h(=emphasis,)h(etitle)623 4166
y(structure)g(Kwic)e(:)577 4279 y(structure)h(EmphTitle)h(:)716
4391 y(structure)f(EmphWrd)g(:)855 4504 y(structure)h(Wrd)d(:)994
4617 y(structure)j(Ord)d(:)1133 4730 y(type)h(elt)f(=)g(string,)1179
4843 y(val)h(le)f(:)g(string)h(*)f(string)i(->)e(bool,)1040
4956 y(type)h(wrd)g(=)e(string,)1040 5069 y(val)i(make_word)h(:)e
(string)i(->)e(string,)901 5182 y(type)h(emphasis)h(=)e(emphasis,)p
eop
%%Page: 52 58
52 57 bop 345 -28 a Fw(Chapter)24 b(3.)55 b(An)25 b(Example:)k(K)l(e)n
(y)c(W)m(ords)g(in)f(Conte)m(xt)1455 b FB(52)901 279
y Fu(type)48 b(ewrd)g(=)f(string)h(*)f(emphasis,)901
392 y(val)h(emphasised)i(:)c(emphasis,)901 505 y(val)i(plain)g(:)f
(emphasis,)762 618 y(type)h(etitle)h(=)d(etitle,)762
731 y(val)i(make_title)i(:)c(\(string)j(*)e(emphasis\))j(list)d(->)h
(etitle,)762 844 y(val)g(output)g(:)f(etitle)h(list)g(->)f(unit,)762
957 y(val)h(words_of_title)j(:)c(etitle)h(->)f(\(string)i(*)e
(emphasis\))j(list,)577 1070 y(structure)f(EmphWrd)g(:)716
1183 y(structure)g(Wrd)f(:)855 1295 y(structure)i(Ord)d(:)g(type)h(elt)
f(=)g(string,)1921 1408 y(val)h(le)f(:)g(string)h(*)f(string)h(->)f
(bool,)901 1521 y(type)h(wrd)g(=)e(string,)901 1634 y(val)i(make_word)h
(:)e(string)i(->)e(string,)762 1747 y(type)h(emphasis)h(=)e(emphasis,)
762 1860 y(type)h(ewrd)g(=)f(string)h(*)f(emphasis,)762
1973 y(val)h(emphasised)i(:)c(emphasis,)762 2086 y(val)i(plain)g(:)f
(emphasis,)623 2199 y(val)h(make_kwic)h(:)e(string)h(list)g(->)f
(etitle)i(list)484 2312 y([closing)g(file)f("kw3.eml"])484
2425 y(>)f(val)g(it)g(=)g(\(\))g(:)g(unit)484 2650 y(-)g(val)g(titles)i
(=)d([)484 2763 y("ML)h(for)h(the)f(Working)i(Programmer",)484
2876 y("The)f(Definition)i(of)d(Standard)i(ML",)484 2989
y("Commentary)h(on)d(Standard)j(ML")484 3102 y(];)484
3215 y(>)d(val)g(titles)i(=)669 3328 y(["ML)f(for)g(the)f(Working)i
(Programmer",)716 3441 y("The)f(Definition)i(of)d(Standard)i(ML",)716
3554 y("Commentary)h(on)d(Standard)j(ML"])d(:)g(string)i(list)484
3779 y(-)e(val)g(etitles)i(=)e(Kwic.make_kwic)k(titles;)484
4005 y Fa(Commentary)42 b Fu(on)47 b(Standard)i(ML)484
4118 y(The)e Fa(Definition)42 b Fu(of)47 b(Standard)j(ML)484
4231 y(Commentary)g(on)d(Standard)i Fa(ML)484 4344 y
Fu(The)e(Definition)j(of)e(Standard)h Fa(ML)484 4457
y(ML)c Fu(for)j(the)f(Working)i(Programmer)484 4570 y(ML)e(for)h(the)f
(Working)i Fa(Programmer)484 4683 y Fu(Commentary)h(on)d
Fa(Standard)c Fu(ML)484 4796 y(The)k(Definition)j(of)e
Fa(Standard)42 b Fu(ML)484 4909 y(ML)47 b(for)h(the)f
Fa(Working)c Fu(Programmer)484 5021 y(ML)k Fa(for)e Fu(the)j(Working)g
(Programmer)484 5134 y(Commentary)i Fa(on)45 b Fu(Standard)50
b(ML)p eop
%%Page: 53 59
53 58 bop 345 -28 a Fw(Chapter)24 b(3.)55 b(An)25 b(Example:)k(K)l(e)n
(y)c(W)m(ords)g(in)f(Conte)m(xt)1455 b FB(53)484 392
y Fu(>)47 b(val)g(etitles)i(=)669 505 y([<etitle>,)h(<etitle>,)g
(<etitle>,)g(<etitle>,)716 618 y(<etitle>,)f(<etitle>,)h(<etitle>,)g
(<etitle>,)762 731 y(<etitle>,)g(<etitle>,)f(<etitle>])h(:)d(etitle)h
(list)484 844 y(-)345 1065 y FC(F)o(ortunately)24 b(we)h(get)f(a)i
(correct)f(response.)345 1464 y Fx(3.6)128 b(Comments)345
1766 y Fv(3.6.1)107 b(Pr)n(oofs)345 1994 y FC(Lack)32
b(of)f(time)g(has)g(precluded)h(the)f(inclusion)f(of)i(a)g(formal)f
(proof)g(of)h(correctness.)51 b(It)31 b(should)345 2154
y(be)c(clear)g(that)f(the)g(proofs)g(that)g(the)g(v)n(arious)g
(structures)g(and)g(functors)g(satisfy)g(their)g(signatures)345
2314 y(w)o(ould)19 b(be)i(straightforw)o(ard,)f(as)g(w)o(ould)g(be)g(a)
h(proof)f(that)g(the)g(implementations)d(of)k(the)f(auxliiary)345
2474 y(functions)26 b(in)g(the)h(main)f(functor)h(de\002nitions)e(are)j
(correct.)37 b(The)27 b(most)f(dif)n(\002cult)g(task)g(w)o(ould)g(be)
345 2634 y(to)g(pro)o(v)o(e)g(that)g(the)h(main)f(algorithm)g(is)g
(correct,)i(since)f(the)f(axioms)g(specifying)g(the)h(beha)n(viour)345
2794 y(of)e Ft(make_kwic)e FC(are)j(comple)o(x)d(and)i(refer)h(to)e
(man)o(y)g(other)h(functions.)345 3139 y Fv(3.6.2)107
b(Inadequac)o(y)28 b(of)h(Functor)f(Speci\002cations)345
3366 y FC(There)h(is)f(a)h(de\002cienc)o(y)g(in)f(the)g(abo)o(v)o(e)g
(de)n(v)o(elopment)e(which)j(seems)f(to)g(be)h(una)n(v)n(oidable:)37
b(con-)345 3526 y(sider)24 b(the)h(speci\002cation)g(of)g
Ft(KWICFUN)345 3747 y Fu(signature)50 b(KWICFUN)e(=)f(functor)484
3860 y(\()g(I:)g(sig)623 3973 y(structure)j(Wrd1:)e(WRD)623
4199 y(structure)i(Keyword:)f(KEYWRD)809 4312 y(where)f(type)g
(Wrd.Ord.elt)i(=)d(Wrd1.Ord.elt)623 4537 y(functor)i(EmphWrdFun:)762
4650 y(functor)g(\(Wrd:)f(WRD)g(where)g(type)g(Ord.elt)h(=)d
(Wrd1.Ord.elt\))948 4763 y(->)h(EMPHWRD)i(where)f(type)g(Wrd.Ord.elt)i
(=)d(Wrd.Ord.elt)623 4989 y(structure)j(Title:)e(TITLE)762
5102 y(where)g(type)g(Wrd.Ord.elt)j(=)46 b(Wrd1.Ord.elt)p
eop
%%Page: 54 60
54 59 bop 345 -28 a Fw(Chapter)24 b(3.)55 b(An)25 b(Example:)k(K)l(e)n
(y)c(W)m(ords)g(in)f(Conte)m(xt)1455 b FB(54)623 392
y Fu(functor)49 b(EmphTitleFun:)762 505 y(functor)809
618 y(\(Wrd:)f(WRD)f(where)h(type)g(Ord.elt)h(=)e(Wrd1.Ord.elt\))k(->)
809 731 y(functor)d(\(EmphWrd:)i(EMPHWRD)1643 844 y(where)e(type)g
(Wrd.Ord.elt)i(=)d(Wrd.Ord.elt\))855 957 y(->)g(EMPHTITLE)j(where)e
(type)g(EmphWrd.Wrd.Ord.elt)53 b(=)47 b(Wrd.Ord.elt)1458
1070 y(and)g(type)h(EmphWrd.emphasis)k(=)47 b(EmphWrd.emphasis)484
1183 y(end)g(\)->)391 1408 y(sig)484 1521 y(structure)j(EmphWrd:)669
1634 y(EMPHWRD)f(where)g(type)e(Wrd.Ord.elt)k(=)46 b(I.Wrd1.Ord.elt)484
1747 y(structure)k(EmphTitle:)669 1860 y(EMPHTITLE)809
1973 y(where)e(type)g(EmphWrd.emphasis)k(=)46 b(EmphWrd.emphasis)809
2086 y(and)h(type)h(EmphWrd.Wrd.Ord.elt)53 b(=)47 b
(EmphWrd.Wrd.Ord.elt)438 2312 y(.)438 2425 y(.)438 2537
y(.)345 2758 y FC(In)33 b(order)f(to)h(write)f(do)n(wn)g(the)g(axioms)g
(we)h(ha)n(v)o(e)f(had)g(to)h(introduce)f(tw)o(o)g(internal)g
(structures,)345 2918 y Ft(EmphWrd)e FC(and)h Ft(EmphTitle)p
FC(;)i(the)e(intention)f(is)g(that)h(these)g(will)g(be)g(obtained)g(as)
g(the)g(result)g(of)345 3079 y(applying)h(apporpriate)h(input)f
(functors)h(to)g(input)f(structures,)j(b)n(ut)d(it)h(is)g(impossible)e
(for)j(us)f(to)345 3239 y(e)o(xpress)k(this)f(in)h(a)g(fully)g
(abstract)g(w)o(ay)g(in)g(a)h(signature.)67 b(\(This)37
b(is)g(similar)f(to)h(the)g(situation)345 3399 y(encountered)25
b(four)g(structure)f(signatures)g(in)g(2.4.2\).)31 b(F)o(or)24
b(e)o(xample)g(we)h(ha)n(v)o(e)g(to)f(write)484 3620
y Fu(structure)50 b(EmphWrd:)669 3732 y(EMPHWRD)f(where)g(type)e
(Wrd.Ord.elt)k(=)46 b(I.Wrd1.Ord.elt)484 3845 y(structure)k(EmphTitle:)
669 3958 y(EMPHTITLE)809 4071 y(where)e(type)g(EmphWrd.emphasis)k(=)46
b(EmphWrd.emphasis)809 4184 y(and)h(type)h(EmphWrd.Wrd.Ord.elt)53
b(=)47 b(EmphWrd.Wrd.Ord.elt)484 4297 y(.)484 4410 y(.)484
4523 y(.)669 4749 y(val)h(words_of_emphtitle:)855 4862
y(EmphTitle.etitle)k(->)47 b(EmphTitle.EmphWrd.)q(Wrd)q(.w)q(rd)53
b(list)345 5082 y FC(b)n(ut)24 b(ideally)g(we)h(w)o(ould)f(lik)o(e)h
(to)f(write)h(something)e(lik)o(e)p eop
%%Page: 55 61
55 60 bop 345 -28 a Fw(Chapter)24 b(3.)55 b(An)25 b(Example:)k(K)l(e)n
(y)c(W)m(ords)g(in)f(Conte)m(xt)1455 b FB(55)484 279
y Fu(val)47 b(words_of_emphtitl)q(e:)623 392 y(I.EmphTitleFun)52
b(\(I.Wrd1\))d(\(EmphWrd\).etitle)j(->)762 505 y(I.EmphTitleFun)g
(\(I.Wrd1\))d(\(EmphWrd\).EmphWrd.W)q(rd)q(.wr)q(d)j(list)345
715 y FC(This)29 b(is)f(unpleasant,)i(b)n(ut)f(it)g(does)g(re)n(v)o
(eal)g(where)h(the)f(structures)g(come)g(from,)h(whereas)g(in)f(the)345
875 y(original)h(speci\002cation)h(this)f(is)h(not)g(mentioned)f(at)h
(all.)50 b(Unfortuantely)-6 b(,)31 b(the)g(syntax)f(abo)o(v)o(e)h(is)
345 1035 y(unacceptable)h(at)g(a)g(fundamental)f(le)n(v)o(el)f(since)i
(the)g(functors)f(in)l(v)n(olv)o(ed)f(are)j(generati)n(v)o(e:)44
b(each)345 1195 y(application)26 b(of)i Ft(EmphTitleFun)e
FC(\(e)n(v)o(en)h(to)g(the)h(same)f(ar)n(guments\))h(produces)f(a)h(ne)
n(w)f(structure)345 1355 y(with)j(ne)n(w)h(types.)49
b(It)31 b(might)f(be)h(possible)f(to)g(o)o(v)o(ercome)g(this)g(by)h
(using)f(applicati)n(v)o(e)g(functors,)345 1515 y(b)n(ut)24
b(this)g(will)g(not)g(al)o(w)o(ays)h(be)g(acceptable.)491
1675 y(The)38 b(problem)f(disappears)g(at)h(a)g(lo)n(wer)f(le)n(v)o(el)
g(of)h(speci\002cation.)69 b(Once)38 b(we)g(ha)n(v)o(e)g(partly)345
1836 y(implemented)23 b(the)i(main)f(functor)g(we)i(can)f(write)345
2045 y Fu(functor)49 b(Build_Kwic)530 2158 y(\(CircShiftFun:)j
(CIRCSHIFTSFUN\))530 2271 y(\(LexFun:)e(LEXFUN\))530
2384 y(\(SortFun:)g(SORTFUN\))f(:>)e(KWICFUN)i(=)345
2497 y(functor)95 b(\()47 b(\(*)g(arguments)j(omitted)f(*\))e(\))391
2610 y(end)h(\))e(=>)391 2836 y(struct)484 2949 y(structure)k(EmphWrd)f
(=)d(I.EmphWrdFun\(I.Wrd)q(1\))q(;)484 3061 y(structure)k(EmphTitle)f
(=)669 3174 y(I.EmphTitleFun)j(\(I.Wrd1\))d(\(EmphWrd\))484
3400 y(\(*)e(Rest)h(of)f(specification)k(as)c(before)i(*\))345
3723 y FC(It)20 b(might)g(be)h(possible)e(to)h(add)h(e)o(xtra)f(EML)g
(syntax)g(to)g(indicate)g(the)h(origin)e(of)i(internally)f(de\002ned)
345 3883 y(structures,)k(say)345 4093 y Fu(signature)50
b(KWICFUN)e(=)f(functor)484 4206 y(\()g(\(*)g(arguments)i(*\))f(\)->)
391 4319 y(sig)484 4431 y(structure)i(EmphWrd:)669 4544
y(EMPHWRD)f(where)g(type)e(Wrd.Ord.elt)k(=)46 b(I.Wrd1.Ord.elt)484
4657 y(structure)k(EmphTitle:)669 4770 y(EMPHTITLE)g(where)e(type)g
(EmphWrd.emphasis)k(=)47 b(EmphWrd.emphasis)1226 4883
y(and)g(type)h(EmphWrd.Wrd.Ord.el)q(t)k(=)47 b(EmphWrd.Wrd.Ord.el)q(t)
484 5109 y(\(*)g(rest)h(of)f(body)h(*\))484 5222 y(.)p
eop
%%Page: 56 62
56 61 bop 345 -28 a Fw(Chapter)24 b(3.)55 b(An)25 b(Example:)k(K)l(e)n
(y)c(W)m(ords)g(in)f(Conte)m(xt)1455 b FB(56)484 279
y Fu(.)484 392 y(.)391 505 y(end)48 b(where)577 618 y(structure)h
(EmphWrd)g(=)e(I.EmphWrdFun\(I.Wrd)q(1\);)577 731 y(and)g(structure)j
(EmphTitle)f(=)669 844 y(I.EmphTitleFun)j(\(I.Wrd1\))d(\(EmphWrd\);)345
1065 y FC(This)32 b(is)h(still)f(not)h(v)o(ery)g(good)g(since)g(the)g
(ne)n(w)g(information)f(appears)h(right)g(at)g(the)h(end)f(of)g(the)345
1225 y(\(lar)n(ge\))e(functor)f(signature;)i(the)e(syntax)f(could)h(be)
g(modi\002ed)g(to)g(put)g(the)g(ne)n(w)f(information)g(at)345
1385 y(the)c(top,)f(b)n(ut)g(this)g(seems)g(rather)h(unsatisf)o(actory)
-6 b(.)491 1545 y(The)26 b(original)e(SML)i(structure-sharing)f
(mechanism)f(might)h(ha)n(v)o(e)g(been)h(useful)f(in)g(this)g(sit-)345
1705 y(uation,)f(b)n(ut)g(this)g(is)g(not)g(a)n(v)n(ailable)h(in)f
(SML97.)491 1865 y(The)29 b(fundamental)f(problem)g(seems)h(to)f(be)h
(that)f(the)h(SML)g(mechanisms)f(for)h(propagating)345
2025 y(information)e(across)i(functor)f(boundaries)g(are)i(inadequate.)
42 b(It)29 b(is)f(noticeable)g(in)g(the)h(e)o(xample)345
2185 y(abo)o(v)o(e)j(that)g(the)g(type-sharing)g(information)g(becomes)
g(v)o(ery)g(lengthy)g(\(and)g(took)g(a)h(consider)n(-)345
2346 y(able)d(amount)f(of)h(time)g(to)f(get)h(right\),)h(and)f(it)g
(seems)g(that)f(issues)g(lik)o(e)h(this)f(ha)n(v)o(e)h(al)o(w)o(ays)g
(been)345 2506 y(problematic.)f(The)22 b(majority)g(of)g(the)h(changes)
f(between)h(SML90)f(and)h(SML97)f(were)h(related)g(to)345
2666 y(structures,)g(signatures)h(and)g(sharing,)f(and)h(seem)g(to)g
(ha)n(v)o(e)f(impro)o(v)o(ed)f(the)i(situation)f(some)n(what.)345
2826 y(Ho)n(we)n(v)o(er)l(,)29 b(the)g(e)o(xtended)g(features)g(in)g
(Mosco)n(w)f(ML)h(seem)g(to)g(introduce)g(a)h(whole)e(ne)n(w)h(le)n(v)o
(el)345 2986 y(of)c(comple)o(xity)-6 b(,)22 b(and)j(the)f(sharing)h
(mechanisms)e(ha)n(v)o(e)i(become)f(v)o(ery)h(unwieldy)-6
b(.)p eop
%%Page: 57 63
57 62 bop 1629 1026 a Fz(Chapter)52 b(4)1553 1523 y(Conc)l(lusion)345
2098 y Fx(4.1)128 b(Directions)36 b(f)m(or)g(Fur)s(ther)g(Resear)m(c)o
(h)345 2361 y FC(There)25 b(are)h(se)n(v)o(eral)e(possibilities)e(for)j
(further)g(research)h(in)e(this)g(area.)490 2604 y Fm(\017)49
b FC(It)32 b(w)o(ould)f(be)g(w)o(orthwhile)g(to)h(carry)g(out)f(more)h
(case)g(studies)f(to)h(gain)e(a)j(deeper)f(under)n(-)589
2764 y(standing)23 b(of)i(the)g(ef)n(fect)g(of)g(higher)n(-order)g
(functors)f(on)h(EML.)490 2924 y Fm(\017)49 b FC(In)19
b(this)f(document)g(we)h(ha)n(v)o(e)g(only)f(used)h(the)g(ne)n(w)g
(features)g(of)g(the)g(Mosco)n(w)f(ML)g(modules)589 3085
y(language)27 b(as)g(a)h(means)f(of)g(or)n(ganising)f(program)h(de)n(v)
o(elopment.)36 b(In)28 b([Oka98])f(there)h(is)f(a)589
3245 y(presentation)d(of)h(certain)g(no)o(v)o(el)f(functional)g
(data-structures)h(for)g(which)g(the)f(most)g(natu-)589
3405 y(ral)c(implementation)e(is)h(in)h(terms)f(of)i(higher)n(-order)f
(functors)f(and)h(\002rst-class)g(modules.)28 b(It)589
3565 y(w)o(ould)d(be)h(interesting)f(to)g(use)h(our)g(e)o(xtended)f(v)o
(ersion)g(of)h(EML)g(in)f(the)h(de)n(v)o(elopment)e(of)589
3725 y(programs)29 b(in)l(v)n(olving)g(such)h(data-structures)f(to)h
(see)h(if)f(an)o(y)g(interesting)e(features)j(arise.)589
3885 y(\(In)i(f)o(act,)i(it)d(w)o(as)h(originally)e(intended)h(that)h
(such)f(an)h(in)l(v)o(estigation)d(w)o(ould)i(ha)n(v)o(e)g(been)589
4045 y(included)24 b(in)g(the)h(present)f(document,)g(b)n(ut)g
(pressure)h(of)g(time)f(pre)n(v)o(ented)g(this\).)490
4205 y Fm(\017)49 b FC(As)24 b(we)g(ha)n(v)o(e)g(seen,)h(the)f(sharing)
g(capabilities)f(of)h(our)g(v)o(ersion)g(of)g(EML)g(\(inherited)f(from)
589 4365 y(SML97\))36 b(seem)g(to)f(be)i(inadequate)f(for)g(pro)o
(viding)e(proper)i(speci\002cations)g(of)g(higher)n(-)589
4526 y(order)d(functors.)54 b(It)33 b(w)o(ould)f(be)h(useful)g(to)f(o)o
(v)o(ercome)g(this)g(problem.)54 b(In)33 b(particular)l(,)i(in)589
4686 y(connection)i(with)g(EML,)h(more)g(research)h(is)f(required)g
(into)f(the)h(problem)f(of)h(ho)n(w)g(to)589 4846 y(indicate)24
b(the)h(origin)f(of)h(ne)n(wly-generated)f(structures)g(within)g
(functor)g(bodies.)490 5006 y Fm(\017)49 b FC(T)-8 b(o)26
b(pro)o(vide)e(a)j(proper)f(formal)f(underpinning)g(for)h(an)g(e)o
(xtended)f(v)o(ersion)g(of)h(EML)f(a)i(full)589 5166
y(semantics)d(w)o(ould)g(be)h(required.)2008 5471 y FB(57)p
eop
%%Page: 58 64
58 63 bop 345 -28 a Fw(Chapter)24 b(4.)55 b(Conclusion)2406
b FB(58)490 279 y Fm(\017)49 b FC(An)24 b(easier)h(task)f(than)g(the)g
(pre)n(vious)f(one)h(w)o(ould)g(be)g(to)g(pro)o(vide)f(an)i(Emacs)f
(mode)g(which)589 439 y(w)o(ould)g(handle)g(the)h(ne)n(w)f(syntax)g(of)
h(our)g(e)o(xtended)f(v)o(ersion)g(of)h(EML.)345 839
y Fx(4.2)128 b(Final)36 b(Comments)345 1102 y FC(It)23
b(appears)h(that)f(the)g(inclusion)f(in)h(EML)g(of)g(the)h(e)o(xtended)
e(features)i(of)f(the)h(Mosco)n(w)e(ML)h(mod-)345 1263
y(ules)k(language)g(leads)g(to)g(a)h(signi\002cant)f(enhancement)g(of)g
(the)h(EML)e(de)n(v)o(elopment)g(methodol-)345 1423 y(ogy)-6
b(.)33 b(In)26 b(order)g(to)g(use)g(this)f(it)g(is)h(necessary)g(to)g
(comes)f(to)h(grips)f(with)h(syntax)f(which)g(can)i(attain)345
1583 y(high)f(le)n(v)o(els)g(of)h(comple)o(xity)-6 b(.)35
b(The)27 b(syntax)g(does)f(become)h(more)g(natural)g(with)g(e)o
(xperience)g(\(al-)345 1743 y(though)e(it)h(may)g(be)g(easier)h(to)f
(write)g(than)g(to)g(read\),)h(b)n(ut)f(it)g(is)g(ne)n(v)o(ertheless)e
(essential)i(to)g(ha)n(v)o(e)g(a)345 1903 y(w)o(orking)e(compiler)g(to)
g(ensure)h(that)g(programs)f(and)h(speci\002cations)f(are)h
(syntactically)f(correct.)p eop
%%Page: 59 65
59 64 bop 1492 1026 a Fz(Bib)n(liograph)l(y)494 1518
y FC([Asp97])49 b(D.)27 b(Aspinall.)41 b FA(T)-7 b(ype)28
b(Systems)e(for)h(Modular)f(Pr)l(o)o(gr)o(amming)e(and)j
(Speci\002cation)p FC(.)870 1678 y(PhD)e(thesis,)e(LFCS,)j(Uni)n(v)o
(ersity)d(of)i(Edinb)n(ur)n(gh,)e(1997.)489 1921 y([Kah95])49
b(Stef)o(an)24 b(Kahrs.)33 b(On)23 b(the)g(static)g(analysis)g(of)g(e)o
(xtended)g(ML.)32 b(Report,)24 b(Laboratory)870 2081
y(for)h(F)o(oundations)e(of)i(Computer)f(Science,)i(Uni)n(v)o(ersity)c
(of)j(Edinb)n(ur)n(gh,)f(1995.)489 2324 y([Kah97])49
b(Stef)o(an)36 b(Kahrs.)72 b(Lecture)36 b(notes)g(on)f(formal)h
(program)g(de)n(v)o(elopment.)69 b(Report)870 2484 y(ECS-LFCS-97-372,)
26 b(Uni)n(v)o(ersity)c(of)j(Edinb)n(ur)n(gh,)f(No)o(v)o(ember)f(1997.)
467 2728 y([KST94])49 b(Stef)o(an)40 b(Kahrs,)k(Donald)39
b(Sannella,)44 b(and)c(Andrzej)g(T)-8 b(arlecki.)84 b(The)40
b(de\002nition)870 2888 y(of)32 b(Extended)g(ML.)61 b(Report)33
b(ECS-LFCS-94-300,)j(Uni)n(v)o(ersity)31 b(of)h(Edinb)n(ur)n(gh,)870
3048 y(1994.)467 3291 y([KST97])49 b(Stef)o(an)40 b(Kahrs,)k(Donald)39
b(Sannella,)44 b(and)c(Andrzej)g(T)-8 b(arlecki.)84 b(The)40
b(de\002nition)870 3451 y(of)29 b(Extended)f(ML:)g(A)h(gentle)g
(introduction.)47 b FA(Theor)l(etical)29 b(Computer)g(Science)p
FC(,)870 3611 y(173:445\226484,)22 b(1997.)505 3854 y([MT91])49
b(R.)23 b(Milner)e(and)i(M.)f(T)-8 b(ofte.)31 b FA(Commentary)22
b(on)h(Standar)l(d)e(ML)p FC(.)31 b(MIT)23 b(Press,)g(1991.)433
4097 y([MTH90])49 b(R.)26 b(Milner)l(,)f(M.)g(T)-8 b(ofte,)25
b(and)h(R.)g(Harper)-5 b(.)39 b FA(The)26 b(De\002nition)e(of)h
(Standar)l(d)f(ML)p FC(.)39 b(The)870 4257 y(MIT)24 b(Press,)h(1990.)
345 4501 y([MTHM97])48 b(R.)30 b(Milner)l(,)h(M.)f(T)-8
b(ofte,)32 b(R.)f(Harper)l(,)h(and)e(D.B.)h(MacQueen.)54
b FA(The)31 b(De\002nition)e(of)870 4661 y(Standar)l(d)23
b(ML)i(\(Re)o(vised\))p FC(.)36 b(MIT)24 b(Press,)i(1997.)489
4904 y([Oka98])49 b(Chris)19 b(Okasaki.)k FA(Pur)l(ely)c(Functional)f
(Data)h(Structur)l(es)p FC(.)j(Cambridge)d(Uni)n(v)o(ersity)870
5064 y(Press,)25 b(1998.)2008 5471 y FB(59)p eop
%%Page: 60 66
60 65 bop 345 -28 a Fw(Bib)n(liog)o(r)o(aph)m(y)2837
b FB(60)524 279 y FC([P)o(ar72])49 b(D.L.)38 b(P)o(arnas.)81
b(On)38 b(the)h(criteria)g(to)g(be)f(used)h(in)f(decomposing)g(systems)
f(into)870 439 y(modules.)d FA(Communications)23 b(of)i(the)f(A)m(CM)p
FC(,)h(15\(12\):1053\2261058,)e(1972.)507 682 y([P)o(au96])49
b(L.C.)30 b(P)o(aulson.)50 b FA(ML)30 b(for)f(the)h(W)-9
b(orking)29 b(Pr)l(o)o(gr)o(ammer)p FC(.)49 b(Cambridge)29
b(Uni)n(v)o(ersity)870 843 y(Press,)c(second)f(edition,)g(1996.)422
1086 y([RRS00a])51 b(S.)71 b(Romanenk)o(o,)83 b(C.)72
b(Russo,)83 b(and)71 b(P)-11 b(.)72 b(Sestoft.)185 b
FA(Moscow)72 b(ML)g(Lan-)870 1246 y(gua)o(g)o(e)86 b(Overvie)o(w)-7
b(,)103 b(ver)o(sion)87 b(2.00)p FC(,)102 b(June)87 b(2000.)236
b(A)-7 b(v)n(ailable)85 b(from)870 1406 y
(ftp://ftp.dina.kvl.dk/pub/mosml)o(/doc/m)o(osm)o(lref.pdf.)417
1649 y([RRS00b])50 b(S.)96 b(Romanenk)o(o,)113 b(C.)96
b(Russo,)113 b(and)96 b(P)-11 b(.)96 b(Sestoft.)263 b
FA(Moscow)96 b(ML)870 1809 y(Owner')l(s)84 b(Manual,)97
b(ver)o(sion)83 b(2.00)p FC(,)98 b(June)83 b(2000.)224
b(A)-7 b(v)n(ailable)82 b(from)870 1969 y
(ftp://ftp.dina.kvl.dk/pub/mosml)o(/doc/m)o(anual.pd)o(f.)500
2212 y([Rus98])49 b(C.)33 b(Russo.)63 b FA(T)-7 b(ypes)33
b(F)-10 b(or)33 b(Modules)p FC(.)62 b(PhD)33 b(thesis,)i(LFCS,)f(Uni)n
(v)o(ersity)d(of)j(Edin-)870 2373 y(b)n(ur)n(gh,)24 b(1998.)500
2616 y([Rus00])49 b(C.)20 b(Russo.)25 b(First-class)19
b(structures)h(for)g(standard)f(ML.)25 b(In)20 b FA(Eur)l(opean)e
(Symposium)870 2776 y(on)24 b(Pr)l(o)o(gr)o(amming)e(\(ESOP\))p
FC(,)j(2000.)505 3019 y([San91])50 b(Donald)26 b(Sannella.)44
b(F)o(ormal)27 b(program)g(de)n(v)o(elopment)e(in)i(Extended)g(ML)g
(for)g(the)870 3179 y(w)o(orking)f(programmer)-5 b(.)43
b(In)27 b FA(Pr)l(oc.)f(3r)l(d)i(BCS/F)-11 b(A)m(CS)26
b(W)-9 b(orkshop)27 b(on)g(Re\002nement)p FC(,)870 3339
y(W)-8 b(orkshops)23 b(in)i(Computing,)e(pages)i(99\226130.)e(Springer)
l(,)i(1991.)483 3582 y([SST92])50 b(D.)35 b(Sannella,)k(S.)e(Sok)o(olo)
n(wski,)f(and)g(A.)g(T)-8 b(arlecki.)71 b(T)-8 b(o)n(w)o(ard)36
b(formal)f(de)n(v)o(elop-)870 3742 y(ment)29 b(of)i(programs)e(from)i
(algebraic)f(speci\002cations:)41 b(parameterisation)30
b(re)n(vis-)870 3902 y(ited.)35 b FA(Acta)24 b(Informatica)p
FC(,)g(29:689\226736,)e(1992.)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
