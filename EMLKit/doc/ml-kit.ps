%!PS-Adobe-2.0
%%Creator: dvips, version 5.41 (C) 1986-90 Radical Eye Software
%%Title: root.dvi
%%Pages: 119 -1
%%BoundingBox: 0 0 596 843
%%EndComments
%%BeginProcSet: tex.pro
/TeXDict 200 dict def TeXDict begin /N /def load def /B{bind def}N /S /exch
load def /X{S N}B /TR /translate load N /isls false N /vsize 10 N /@rigin{
isls{[0 1 -1 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
Resolution VResolution vsize neg mul TR matrix currentmatrix dup dup 4 get
round 4 exch put dup dup 5 get round 5 exch put setmatrix}B /@letter{/vsize 10
N}B /@landscape{/isls true N /vsize -1 N}B /@a4{/vsize 10.6929133858 N}B /@a3{
/vsize 15.5531 N}B /@ledger{/vsize 16 N}B /@legal{/vsize 13 N}B /@manualfeed{
statusdict /manualfeed true put}B /@copies{/#copies X}B /FMat[1 0 0 -1 0 0]N
/FBB[0 0 0 0]N /df{/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0
0 sf neg 0 0]N df-tail}B /df-tail{/nn 8 dict N nn begin /FontType 3 N
/FontMatrix fntrx N /FontBBox FBB N string /base X array /BitMaps X /BuildChar
{CharBuilder}N /Encoding IE N end dup{/foo setfont}2 array copy cvx N load 0
nn put /ctr 0 N[}B /E{pop nn dup definefont setfont}B /ch-image{ch-data dup
type /stringtype ne{ctr get /ctr ctr 1 add N}if}B /ch-width{ch-data dup length
5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{128 ch-data dup
length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub get 127 sub}B /ch-dx{
ch-data dup length 1 sub get}B /ctr 0 N /CharBuilder{save 3 1 roll S dup /base
get 2 index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx 0 ch-xoff
ch-yoff ch-height sub ch-xoff ch-width add ch-yoff setcachedevice ch-width
ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff .1 add]{ch-image}imagemask
restore}B /D{/cc X dup type /stringtype ne{]}if nn /base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{dup dup length 1 sub dup 2 index S get sf div put
}if put /ctr ctr 1 add N}B /I{cc 1 add D}B /bop{userdict /bop-hook known{
bop-hook}if /SI save N @rigin 0 0 moveto}B /eop{clear SI restore showpage
userdict /eop-hook known{eop-hook}if}B /@start{userdict /start-hook known{
start-hook}if /VResolution X /Resolution X 1000 div /DVImag X /IE 256 array N
0 1 255{IE S 1 string dup 0 3 index put cvn put}for}B /p /show load N /RMat[1
0 0 -1 0 0]N /BDot 260 string N /v{/ruley X /rulex X V}B /V{gsave TR -.1 -.1
TR 1 ruley scale rulex 1 false RMat{BDot}imagemask grestore}B /a{moveto}B
/delta 0 N /tail{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}
B /c{-4 M}B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B
/k{4 M}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{p 1 w}B /r{p 2 w}
B /s{p 3 w}B /t{p 4 w}B /w{0 rmoveto}B /x{0 S rmoveto}B /y{3 2 roll p a}B /bos
{/SS save N}B /eos{clear SS restore}B end
%%EndProcSet
TeXDict begin 1000 300 300 @start /Fa 3 118 df<001FE000007FFC0001FFFE0003FFFF
0007F03F800FC00FC01F8003E03F0003F03E0001F07C0001F07C0001F8FC0000F8F80000F8FFFF
FFF8FFFFFFF8FFFFFFF8FFFFFFF0F8000000F8000000FC0000007C0000007E0000003E0000703F
0000F81F8001F80FE003F007F80FF003FFFFE001FFFFC0007FFF00000FF8001D1F7C9E26>101
D<00FFE30007FFFF801FFFFF803FFFFF807F807F807C001F80F8000F80F0000F80F0000F80F000
0700FC0000007F8000003FFE00001FFFF0000FFFFC0001FFFE00001FFF0000007F8000000FC070
0003E0F80001E0F80001E0FC0001E0FC0001E0FE0003E0FF0007C0FFC03F80FFFFFF00FFFFFE00
F3FFFC00607FE0001B1F7B9E26>115 D<7FC01FF000FFE03FF800FFE03FF8007FE01FF80003E0
00F80003E000F80003E000F80003E000F80003E000F80003E000F80003E000F80003E000F80003
E000F80003E000F80003E000F80003E000F80003E000F80003E000F80003E000F80003E000F800
03E000F80003E000F80003E000F80003E001F80003E001F80003F007F80001F81FF80001FFFFFF
C000FFFFFFE0007FFCFFE0000FF07FC0231F7F9E26>117 D E /Fb 4 92
df<400020C000606000C03001801803000C0600060C0003180001B00000E00000E00001B00003
1800060C000C06001803003001806000C0C0006040002013147A9320>2
D<01800180018001804182F18F399C0FF003C003C00FF0399CF18F418201800180018001801012
7E9215>I<000000040000000002000000000200000000010000000000800000000040FFFFFFFF
F8FFFFFFFFF8000000004000000000800000000100000000020000000002000000000400250E7E
902A>33 D<400002C00006C00006C00006C00006C00006C00006C00006C00006C00006C00006C0
0006C00006C00006C00006C00006C00006C00006C0000660000C60000C3000181C00700F01E003
FF8000FE00171A7E981C>91 D E /Fc 7 110 df<00F000030C000E06041C0704380708300708
700790700790E003A0E003A0E003C0E00380E00380E00380600780601B883061900F80E016127E
911B>11 D<0001F000061800080C00100C00200E00400E00800E00801C01001C01001801003802
0FF00210C0020FE00200300400300400300400380400380800700800700800700800E01800E018
00C0140180140300230E0020F80020000020000040000040000040000040000080000080000017
257F9C17>I<60F0F0701010101020204080040C7C830C>59 D<01FFFF00003C01C0003800E000
3800F0003800700038007000700070007000F0007000F0007001E000E003C000E0078000E01F00
00FFFC0001C00F0001C0078001C003C001C003C0038003C0038003C0038003C0038003C0070007
800700070007000E0007001C000E007800FFFFC0001C1C7E9B1F>66 D<01FFFFF8003C00780038
00180038001000380010003800100070001000700010007010100070100000E0200000E0200000
E0600000FFE00001C0400001C0400001C0400001C0400003808040038000400380008003800080
070001000700010007000300070006000E003E00FFFFFC001D1C7E9B1F>69
D<01FC00FF80001C001C00002E001800002E001000002E00100000270010000047002000004300
2000004380200000438020000081C040000081C040000081C040000080E040000100E080000100
7080000100708000010070800002003900000200390000020039000002001D000004001E000004
000E000004000E00000C000E00001C00040000FF80040000211C7E9B21>78
D<381F81F04E20C6184640E81C4680F01C8F00F01C8E00E01C0E00E01C0E00E01C1C01C0381C01
C0381C01C0381C01C0703803807138038071380380E1380380E2700700643003003820127E9124
>109 D E /Fd 16 121 df<03CC063C0C3C181C3838303870387038E070E070E070E070E0E2C0
E2C0E261E462643C380F127B9115>97 D<3F00070007000E000E000E000E001C001C001C001C00
39C03E60383038307038703870387038E070E070E070E060E0E0C0C0C1C0618063003C000D1D7B
9C13>I<01F007080C08181C3838300070007000E000E000E000E000E000E008E010602030C01F
000E127B9113>I<001F80000380000380000700000700000700000700000E00000E00000E0000
0E0003DC00063C000C3C00181C00383800303800703800703800E07000E07000E07000E07000E0
E200C0E200C0E20061E4006264003C3800111D7B9C15>I<01E007100C1018083810701070607F
80E000E000E000E000E000E0086010602030C01F000D127B9113>I<00F3018F030F06070E0E0C
0E1C0E1C0E381C381C381C381C383830383038187818F00F700070007000E000E0C0C0E1C0C300
7E00101A7D9113>103 D<01800380010000000000000000000000000000001C00260047004700
8E008E000E001C001C001C0038003800710071007100720072003C00091C7C9B0D>105
D<1F800380038007000700070007000E000E000E000E001C001C001C001C003800380038003800
7000700070007000E400E400E400E40068003800091D7C9C0B>108 D<3C1E0780266318C04683
A0E04703C0E08E0380E08E0380E00E0380E00E0380E01C0701C01C0701C01C0701C01C07038038
0E0388380E0388380E0708380E0710701C0320300C01C01D127C9122>I<3C3C00264600468700
4707008E07008E07000E07000E07001C0E001C0E001C0E001C1C00381C40381C40383840383880
701900300E0012127C9117>I<01E007180C0C180C380C300E700E700EE01CE01CE01CE018E038
E030E06060C031801E000F127B9115>I<3C3C26C2468747078E068E000E000E001C001C001C00
1C0038003800380038007000300010127C9112>114 D<01F006080C080C1C18181C001F001FC0
0FF007F0007800386030E030C030806060C01F000E127D9111>I<00C001C001C001C003800380
03800380FFE00700070007000E000E000E000E001C001C001C001C00384038403840388019000E
000B1A7D990E>I<1E06270E470E4706870287020E020E021C041C041C041C0818083808181018
200C4007800F127C9113>118 D<070E0019910010E38020E38041C30041C00001C00001C00003
8000038000038000038000070200670200E70400CB04008B080070F00011127D9113>120
D E /Fe 16 119 df<07F0001C18001E0C001C0E00180E00000E00000E0001FE000F0E001C1C00
301C00701C00E01C40E01C40E03C40E05C80709D803F0E0012127D9115>97
D<3F00000F00000E00000E00000E00000E00000E00000E00001C00001C00001C00001C78001D86
001E03003C03803801803801803801C03801C03801C0700380700380700380700300700700700E
00F00C00CC300083C000121D7C9C17>I<01F8071C0C1E181C38183000700070007000E000E000
E000600060047008301018200FC00F127D9112>I<01F8070C0C061C073803300370037FFF7000
E000E000E00060006002300430081C3007C010127E9112>101 D<07E00001E00001C00001C000
01C00001C00001C00001C000038000038000038000038F8003B0C003C0E00780E00780E00700E0
0700E00700E00700E00E01C00E01C00E01C00E01C00E01C00E01C01C03801E03C0FF9FF0141D7F
9C17>104 D<00C001C001C0018000000000000000000000000000001F80078003800700070007
000700070007000E000E000E000E000E000E001C001E00FF800A1D7F9C0C>I<07E001E001C001
C001C001C001C001C00380038003800380038003800700070007000700070007000E000E000E00
0E000E000E001C001E00FF800B1D7F9C0C>108 D<1F8FC0FC00079061060003E0760700078078
0700078078070007007007000700700700070070070007007007000E00E00E000E00E00E000E00
E00E000E00E00E000E00E00E000E00E00E001C01C01C001E01E01E00FF8FF8FF8021127F9124>
I<1F8F8007B0C003C0E00780E00780E00700E00700E00700E00700E00E01C00E01C00E01C00E01
C00E01C00E01C01C03801E03C0FF9FF014127F9117>I<00FC000307000E01801C01C03800C030
00C07000E07000E07000E0E001C0E001C0E001C0600180600380700700380E001C180007E00013
127E9115>I<0FC78003D86001E03003C03803803803801803801C03801C03801C070038070038
0700380700700700700700E00F01C00EC3000E3C000E00000E00000E00001C00001C00001C0000
1C0000FF8000161A809117>I<1F9C07EE03CF078E078C07000700070007000E000E000E000E00
0E000E001C001E00FFC010127F9110>114 D<03F20C0E18061004300438043E001FE00FF007F8
003C401C400C400C6018E010D0608FC00F127F9110>I<020002000200060006000C001C003C00
FFE01C001C00380038003800380038003800700070407040704070407080708031001E000B1A7C
9910>I<FC1F803C07801C0380380700380700380700380700380700380700700E00700E00700E
00700E00701E00701E00703C00305E001F9F8011127C9117>I<FF0FE03C03801C03001C02001C
06001C04001E08000E08000E10000E10000E200007200007400007C00007800007000003000002
000013127C9116>I E /Ff 44 122 df<01C00001C00001C00001C00071C700F9CF807FFF001F
FC0007F00007F0001FFC007FFF00F9CF8071C70001C00001C00001C00001C00011127E9516>42
D<FFFF80FFFF80FFFF8011037E8D16>45 D<70F8F8F8700505788416>I<000180000380000380
000700000700000E00000E00001C00001C0000380000380000700000700000E00000E00001C000
01C0000380000380000700000700000E00000E00001C00001C0000380000380000700000700000
E00000E00000C0000011207E9C16>I<03E0000FF8001FFC001E3C00380E00780F007007007007
00E00380E00380E00380E00380E00380E00380E00380E00380F00780700700700700780F003C1E
001E3C001FFC000FF80003E00011197E9816>I<7FFF00FFFF80FFFF8000000000000000000000
0000000000FFFF80FFFF807FFF00110B7E9116>61 D<C00000F00000FC00003E00000F800007C0
0001F00000F800003E00001F80000780001F80003E0000F80001F00007C0000F80003E0000FC00
00F00000C0000011157E9616>I<00E00001F00001F00001B00001B00003B80003B80003B80003
1800071C00071C00071C00071C00071C000E0E000E0E000FFE000FFE001FFF001C07001C07001C
07007F1FC0FF1FE07F1FC013197F9816>65 D<7FF800FFFE007FFF001C0F001C07801C03801C03
801C03801C07801C07001FFF001FFE001FFE001C1F001C03801C03C01C01C01C01C01C01C01C01
C01C03C01C07807FFF80FFFF007FFC0012197F9816>I<01F18007FB800FFF801F0F803C078038
0380700380700380F00000E00000E00000E00000E00000E00000E00000E00000F0000070038070
03803803803C07001F0F000FFE0007FC0001F00011197E9816>I<7FF800FFFE007FFF001C0F00
1C07801C03C01C01C01C01C01C01E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E0
1C01C01C01C01C03C01C07801C0F807FFF00FFFE007FF8001319809816>I<7FFFC0FFFFC07FFF
C01C01C01C01C01C01C01C01C01C00001C00001C1C001C1C001FFC001FFC001FFC001C1C001C1C
001C00001C00E01C00E01C00E01C00E01C00E07FFFE0FFFFE07FFFE013197F9816>I<FFFFE0FF
FFE0FFFFE01C00E01C00E01C00E01C00E01C00001C00001C1C001C1C001FFC001FFC001FFC001C
1C001C1C001C00001C00001C00001C00001C00001C0000FF8000FFC000FF800013197F9816>I<
03E30007FF000FFF001E1F003C0F00380700700700700700F00000E00000E00000E00000E00000
E03F80E07FC0E03F80F00700700700700700380F003C0F001E1F000FFF0007F70003E70012197E
9816>I<FFFEFFFEFFFE0380038003800380038003800380038003800380038003800380038003
800380038003800380FFFEFFFEFFFE0F197D9816>73 D<FFC000FFC000FFC0001C00001C00001C
00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00401C
00E01C00E01C00E01C00E0FFFFE0FFFFE0FFFFE013197F9816>76 D<FC07E0FE0FE0FE0FE03A0B
803B1B803B1B803B1B803B1B803B1B803BBB8039B38039B38039B38039B38039F38038E38038E3
80380380380380380380380380380380FE0FE0FE0FE0FE0FE013197F9816>I<7E1FC0FF3FE07F
1FC01D07001D87001D87001D87001DC7001DC7001CC7001CC7001CE7001CE7001CE7001C67001C
67001C77001C77001C37001C37001C37001C17007F1F00FF9F007F0F0013197F9816>I<7FF800
FFFE007FFF001C0F801C03801C03C01C01C01C01C01C01C01C03C01C03801C0F801FFF001FFE00
1FF8001C00001C00001C00001C00001C00001C00001C00007F0000FF80007F000012197F9816>
80 D<7FE000FFF8007FFC001C1E001C0F001C07001C07001C07001C07001C0F001C1E001FFC00
1FF8001FFC001C1C001C0E001C0E001C0E001C0E001C0E201C0E701C0E707F07E0FF87E07F03C0
14197F9816>82 D<7FFFE0FFFFE0FFFFE0E0E0E0E0E0E0E0E0E0E0E0E000E00000E00000E00000
E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00007FC000F
FE0007FC0013197F9816>84 D<FE0FE0FF1FE0FE0FE03803801C07001C07001C07001C07000E0E
000E0E000E0E000E0E00060C00071C00071C00071C00071C0003180003B80003B80003B80001B0
0001F00001F00000E00013197F9816>86 D<1FE0003FF0007FF800783C00300E00000E00000E00
03FE001FFE003E0E00700E00E00E00E00E00E00E00783E007FFFE03FE7E00F83E013127E9116>
97 D<7E0000FE00007E00000E00000E00000E00000E00000E3E000EFF000FFF800F83C00F00E0
0E00E00E00700E00700E00700E00700E00700E00700E00E00F01E00F83C00FFF800EFF00063C00
1419809816>I<03F80FFC1FFE3C1E780C7000E000E000E000E000E000F000700778073E0E1FFC
0FF803F010127D9116>I<003F00007F00003F0000070000070000070000070003C7000FF7001F
FF003C1F00780F00700700E00700E00700E00700E00700E00700E00700700F00700F003C1F001F
FFE00FE7F007C7E014197F9816>I<03E00FF81FFC3C1E780E7007E007FFFFFFFFFFFFE000E000
700778073C0F1FFE0FFC03F010127D9116>I<001F00007F8000FF8001E78001C30001C00001C0
007FFF00FFFF00FFFF0001C00001C00001C00001C00001C00001C00001C00001C00001C00001C0
0001C00001C0003FFE007FFF003FFE0011197F9816>I<03E3C007F7E00FFFE01C1CC0380E0038
0E00380E00380E00380E001C1C000FF8001FF0001BE0003800001800001FFC001FFF003FFF8078
03C0E000E0E000E0E000E0E000E07001C07C07C03FFF800FFE0003F800131C7F9116>I<7E0000
FE00007E00000E00000E00000E00000E00000E3C000EFE000FFF000F87800F03800E03800E0380
0E03800E03800E03800E03800E03800E03800E03800E03807FC7F0FFE7F87FC7F01519809816>
I<018003C003C0018000000000000000007FC07FC07FC001C001C001C001C001C001C001C001C0
01C001C001C001C07FFFFFFF7FFF101A7D9916>I<7E0000FE00007E00000E00000E00000E0000
0E00000E7FE00E7FE00E7FE00E0F000E1E000E3C000E78000EF0000FF0000FF8000FBC000F1E00
0E0E000E07000E07807F87F0FFCFF07F87F01419809816>107 D<FFC000FFC000FFC00001C000
01C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C000
01C00001C00001C00001C00001C000FFFF80FFFF80FFFF8011197E9816>I<F9C380FFEFC0FFFF
E03C78E03C78E03870E03870E03870E03870E03870E03870E03870E03870E03870E03870E0FE7C
F8FE7CF8FE3C781512809116>I<7E3C00FEFE007FFF000F87800F03800E03800E03800E03800E
03800E03800E03800E03800E03800E03800E03807FC7F0FFE7F87FC7F01512809116>I<03E000
0FF8001FFC003C1E00780F00700700E00380E00380E00380E00380E00380F00780700700780F00
3C1E001FFC000FF80003E00011127E9116>I<7E3E00FEFF007FFF800F83C00F00E00E00E00E00
700E00700E00700E00700E00700E00700E00E00F01E00F83C00FFF800EFF000E3C000E00000E00
000E00000E00000E00000E00007FC000FFE0007FC000141B809116>I<FF0FC0FF3FE0FF7FE007
F04007C000078000078000070000070000070000070000070000070000070000070000FFFC00FF
FC00FFFC0013127F9116>114 D<0FEC3FFC7FFCF03CE01CE01C70007F801FF007F8003C600EE0
0EF00EF81EFFFCFFF8C7E00F127D9116>I<0300000700000700000700000700007FFF00FFFF00
FFFF00070000070000070000070000070000070000070000070100070380070380070380078700
03FE0001FC0000F80011177F9616>I<7E1F80FE3F807E1F800E03800E03800E03800E03800E03
800E03800E03800E03800E03800E03800E03800E0F800FFFF007FBF803E3F01512809116>I<7F
1FC0FF1FE07F1FC01C07001E0F000E0E000E0E000E0E00071C00071C00071C00071C0003B80003
B80003B80001F00001F00000E00013127F9116>I<7F1FC07F3FC07F1FC00F1C00073C0003B800
03F00001F00000E00001E00001F00003B800073C00071C000E0E007F1FC0FF3FE07F1FC013127F
9116>120 D<7F1FC0FF9FE07F1FC01C07000E07000E0E000E0E00070E00071C00071C00039C00
039C0003980001B80001B80000F00000F00000F00000E00000E00000E00001C00079C0007BC000
7F80003F00003C0000131B7F9116>I E /Fg 2 111 df<000E0013003700360060006000600060
006007FC00C000C000C000C000C001800180018001800180018003000300030003006600E600CC
007800101D7E9611>102 D<383C0044C6004702004602008E06000C06000C06000C0C00180C00
180C40181840181880300880300F00120E7F8D15>110 D E /Fh 68 125
df<007E1F0001C1B1800303E3C00703C3C00E03C1800E01C0000E01C0000E01C0000E01C0000E
01C0000E01C000FFFFFC000E01C0000E01C0000E01C0000E01C0000E01C0000E01C0000E01C000
0E01C0000E01C0000E01C0000E01C0000E01C0000E01C0000E01C0000E01C0000E01C0007F87FC
001A1D809C18>11 D<007E0001C1800301800703C00E03C00E01800E00000E00000E00000E0000
0E0000FFFFC00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C0
0E01C00E01C00E01C00E01C00E01C07F87F8151D809C17>I<007FC001C1C00303C00703C00E01
C00E01C00E01C00E01C00E01C00E01C00E01C0FFFFC00E01C00E01C00E01C00E01C00E01C00E01
C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C07FCFF8151D809C17
>I<003F07E00001C09C18000380F018000701F03C000E01E03C000E00E018000E00E000000E00
E000000E00E000000E00E000000E00E00000FFFFFFFC000E00E01C000E00E01C000E00E01C000E
00E01C000E00E01C000E00E01C000E00E01C000E00E01C000E00E01C000E00E01C000E00E01C00
0E00E01C000E00E01C000E00E01C000E00E01C000E00E01C007FC7FCFF80211D809C23>I<6060
F0F0F8F86868080808080808101010102020404080800D0C7F9C15>34 D<004000800100020006
000C000C0018001800300030007000600060006000E000E000E000E000E000E000E000E000E000
E000E000E000600060006000700030003000180018000C000C00060002000100008000400A2A7D
9E10>40 D<800040002000100018000C000C000600060003000300038001800180018001C001C0
01C001C001C001C001C001C001C001C001C001C0018001800180038003000300060006000C000C
00180010002000400080000A2A7E9E10>I<000600000006000000060000000600000006000000
06000000060000000600000006000000060000000600000006000000060000FFFFFFE0FFFFFFE0
000600000006000000060000000600000006000000060000000600000006000000060000000600
000006000000060000000600001B1C7E9720>43 D<60F0F0701010101020204080040C7C830C>
I<FFE0FFE00B0280890E>I<60F0F06004047C830C>I<03C00C301818300C300C700E60066006E0
07E007E007E007E007E007E007E007E007E007E007E007E00760066006700E300C300C18180C30
07E0101D7E9B15>48 D<030007003F00C700070007000700070007000700070007000700070007
00070007000700070007000700070007000700070007000F80FFF80D1C7C9B15>I<07E0183020
1C201C781E780E781E381E001C001C00180030006007E00030001C001C000E000F000F700FF80F
F80FF80FF00E401C201C183007E0101D7E9B15>51 D<000C00000C00001C00003C00003C00005C
0000DC00009C00011C00031C00021C00041C000C1C00081C00101C00301C00201C00401C00C01C
00FFFFC0001C00001C00001C00001C00001C00001C00001C0001FFC0121C7F9B15>I<00F0030C
06040C0E181E301E300C700070006000E3E0E430E818F00CF00EE006E007E007E007E007E00760
0760077006300E300C18180C3003E0101D7E9B15>54 D<4000007FFF807FFF007FFF0040020080
040080040080080000100000100000200000600000400000C00000C00001C00001800001800003
8000038000038000038000078000078000078000078000078000078000030000111D7E9B15>I<
03C00C301818300C700C600EE006E006E007E007E007E007E0076007700F300F18170C2707C700
060006000E300C780C78187010203030C00F80101D7E9B15>57 D<60F0F0600000000000000000
000060F0F06004127C910C>I<60F0F0600000000000000000000060F0F0701010101020204080
041A7C910C>I<0FE03038401CE00EF00EF00EF00E000C001C0030006000C00080018001000100
01000100010001000000000000000000000003000780078003000F1D7E9C14>63
D<000600000006000000060000000F0000000F0000000F00000017800000178000001780000023
C0000023C0000023C0000041E0000041E0000041E0000080F0000080F0000180F8000100780001
FFF80003007C0002003C0002003C0006003E0004001E0004001E000C001F001E001F00FF80FFF0
1C1D7F9C1F>65 D<001F808000E0618001801980070007800E0003801C0003801C000180380001
80780000807800008070000080F0000000F0000000F0000000F0000000F0000000F0000000F000
0000F0000000700000807800008078000080380000801C0001001C0001000E0002000700040001
80080000E03000001FC000191E7E9C1E>67 D<FFFFC0000F00F0000F003C000F000E000F000700
0F0007000F0003800F0003C00F0001C00F0001C00F0001E00F0001E00F0001E00F0001E00F0001
E00F0001E00F0001E00F0001E00F0001C00F0001C00F0003C00F0003800F0007800F0007000F00
0E000F001C000F007000FFFFC0001B1C7E9B20>I<FFFFFC0F003C0F000C0F00040F00040F0006
0F00020F00020F02020F02000F02000F02000F06000FFE000F06000F02000F02000F02000F0201
0F00010F00020F00020F00020F00060F00060F000C0F003CFFFFFC181C7E9B1C>I<FFFFF80F00
780F00180F00080F00080F000C0F00040F00040F02040F02000F02000F02000F06000FFE000F06
000F02000F02000F02000F02000F00000F00000F00000F00000F00000F00000F00000F8000FFF8
00161C7E9B1B>I<FFF3FFC00F003C000F003C000F003C000F003C000F003C000F003C000F003C
000F003C000F003C000F003C000F003C000F003C000FFFFC000F003C000F003C000F003C000F00
3C000F003C000F003C000F003C000F003C000F003C000F003C000F003C000F003C000F003C00FF
F3FFC01A1C7E9B1F>72 D<FFF00F000F000F000F000F000F000F000F000F000F000F000F000F00
0F000F000F000F000F000F000F000F000F000F000F000F000F00FFF00C1C7F9B0F>I<1FFF00F8
007800780078007800780078007800780078007800780078007800780078007800780078007870
78F878F878F878F0F040E021C01F00101D7F9B15>I<FFF03FE00F000F000F000C000F0008000F
0010000F0020000F0040000F0080000F0100000F0200000F0400000F0E00000F1F00000F2F0000
0F2780000F4780000F83C0000F01E0000F01E0000F00F0000F00F8000F0078000F003C000F003C
000F001E000F001F000F001F80FFF07FF01C1C7E9B20>I<FFF8000F80000F00000F00000F0000
0F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F0000
0F00080F00080F00080F00180F00180F00100F00300F00700F01F0FFFFF0151C7E9B1A>I<FF80
00FF800F8000F8000F8000F8000BC00178000BC00178000BC001780009E002780009E002780008
F004780008F004780008F0047800087808780008780878000878087800083C107800083C107800
083C107800081E207800081E207800081E207800080F407800080F407800080780780008078078
00080780780008030078001C03007800FF8307FF80211C7E9B26>I<FF007FC00F800E000F8004
000BC0040009E0040009E0040008F0040008F8040008780400083C0400083C0400081E0400080F
0400080F0400080784000807C4000803C4000801E4000801E4000800F40008007C0008007C0008
003C0008003C0008001C0008000C001C000C00FF8004001A1C7E9B1F>I<FFFF00000F01E0000F
0078000F003C000F001C000F001E000F001E000F001E000F001E000F001C000F003C000F007800
0F01E0000FFF00000F03C0000F00E0000F00F0000F0078000F0078000F0078000F0078000F0078
000F0078000F0078100F0078100F0038100F003C20FFF01C20000007C01C1D7E9B1F>82
D<07E0801C1980300580700380600180E00180E00080E00080E00080F00000F800007C00007FC0
003FF8001FFE0007FF0000FF80000F800007C00003C00001C08001C08001C08001C0C00180C001
80E00300D00200CC0C0083F800121E7E9C17>I<7FFFFFC0700F01C0600F00C0400F0040400F00
40C00F0020800F0020800F0020800F0020000F0000000F0000000F0000000F0000000F0000000F
0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F000000
0F0000000F0000001F800003FFFC001B1C7F9B1E>I<FFE0FFE0FF1F001F003C1E001E00180F00
1F00100F001F00100F001F001007801F00200780278020078027802003C027804003C043C04003
C043C04003E043C04001E081E08001E081E08001E081E08000F100F10000F100F10000F100F100
007900FA00007A007A00007A007A00003E007C00003C003C00003C003C00003C003C0000180018
0000180018000018001800281D7F9B2B>87 D<FFF007FC0F8001E00780008007C0018003C00100
03E0020001F0020000F0040000F8040000780800007C1800003C1000001E2000001F2000000F40
00000FC00000078000000780000007800000078000000780000007800000078000000780000007
80000007800000078000007FF8001E1C809B1F>89 D<FEFEC0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0FEFE07297C9E0C>91
D<08081010202040404040808080808080B0B0F8F8787830300D0C7A9C15>I<FEFE0606060606
0606060606060606060606060606060606060606060606060606060606060606FEFE0729809E0C
>I<1FC000307000783800781C00301C00001C00001C0001FC000F1C00381C00701C00601C00E0
1C40E01C40E01C40603C40304E801F870012127E9115>97 D<FC00001C00001C00001C00001C00
001C00001C00001C00001C00001C00001C00001C7C001D86001E03001C01801C01C01C00C01C00
E01C00E01C00E01C00E01C00E01C00E01C00C01C01C01C01801E030019060010F800131D7F9C17
>I<07E00C301878307870306000E000E000E000E000E000E00060007004300418080C3007C00E
127E9112>I<003F00000700000700000700000700000700000700000700000700000700000700
03E7000C1700180F00300700700700600700E00700E00700E00700E00700E00700E00700600700
700700300700180F000C370007C7E0131D7E9C17>I<03E00C301818300C700E6006E006FFFEE0
00E000E000E00060007002300218040C1803E00F127F9112>I<00F8018C071E061E0E0C0E000E
000E000E000E000E00FFE00E000E000E000E000E000E000E000E000E000E000E000E000E000E00
0E000E007FE00F1D809C0D>I<00038003C4C00C38C01C3880181800381C00381C00381C00381C
001818001C38000C300013C0001000003000001800001FF8001FFF001FFF803003806001C0C000
C0C000C0C000C06001803003001C0E0007F800121C7F9215>I<FC00001C00001C00001C00001C
00001C00001C00001C00001C00001C00001C00001C7C001C87001D03001E03801C03801C03801C
03801C03801C03801C03801C03801C03801C03801C03801C03801C03801C0380FF9FF0141D7F9C
17>I<18003C003C0018000000000000000000000000000000FC001C001C001C001C001C001C00
1C001C001C001C001C001C001C001C001C001C00FF80091D7F9C0C>I<00C001E001E000C00000
0000000000000000000000000FE000E000E000E000E000E000E000E000E000E000E000E000E000
E000E000E000E000E000E000E000E060E0F0C0F1C061803E000B25839C0D>I<FC00001C00001C
00001C00001C00001C00001C00001C00001C00001C00001C00001C3FC01C0F001C0C001C08001C
10001C20001C40001CE0001DE0001E70001C78001C38001C3C001C1C001C0E001C0F001C0F80FF
9FE0131D7F9C16>I<FC001C001C001C001C001C001C001C001C001C001C001C001C001C001C00
1C001C001C001C001C001C001C001C001C001C001C001C001C00FF80091D7F9C0C>I<FC7E07E0
001C838838001D019018001E01E01C001C01C01C001C01C01C001C01C01C001C01C01C001C01C0
1C001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C001C01
C01C00FF8FF8FF8021127F9124>I<FC7C001C87001D03001E03801C03801C03801C03801C0380
1C03801C03801C03801C03801C03801C03801C03801C03801C0380FF9FF014127F9117>I<03F0
000E1C00180600300300700380600180E001C0E001C0E001C0E001C0E001C0E001C06001807003
803003001806000E1C0003F00012127F9115>I<FC7C001D86001E03001C01801C01C01C00C01C
00E01C00E01C00E01C00E01C00E01C00E01C01C01C01C01C01801E03001D06001CF8001C00001C
00001C00001C00001C00001C00001C0000FF8000131A7F9117>I<03C1000C3300180B00300F00
700700700700E00700E00700E00700E00700E00700E00700600700700700300F00180F000C3700
07C700000700000700000700000700000700000700000700003FE0131A7E9116>I<FCE01D301E
781E781C301C001C001C001C001C001C001C001C001C001C001C001C00FFC00D127F9110>I<1F
9030704030C010C010E010F8007F803FE00FF000F880388018C018C018E010D0608FC00D127F91
10>I<04000400040004000C000C001C003C00FFE01C001C001C001C001C001C001C001C001C00
1C101C101C101C101C100C100E2003C00C1A7F9910>I<FC1F801C03801C03801C03801C03801C
03801C03801C03801C03801C03801C03801C03801C03801C03801C07800C07800E1B8003E3F014
127F9117>I<FF07E03C03801C01001C01000E02000E0200070400070400070400038800038800
03D80001D00001D00000E00000E00000E00000400013127F9116>I<FF3FCFE03C0F03801C0701
801C0701001C0B01000E0B82000E0B82000E1182000711C4000711C4000720C40003A0E80003A0
E80003C0680001C0700001C0700001803000008020001B127F911E>I<7F8FF00F03800F030007
020003840001C80001D80000F00000700000780000F800009C00010E00020E000607000403801E
07C0FF0FF81512809116>I<FF07E03C03801C01001C01000E02000E0200070400070400070400
03880003880003D80001D00001D00000E00000E00000E000004000004000008000008000F08000
F10000F300006600003C0000131A7F9116>I<7FFC70386038407040F040E041C003C003800700
0F040E041C043C0C380870087038FFF80E127F9112>I<FFFFFFFFFF802901808B2A>124
D E /Fi 11 62 df<0F0030C0606060604020C030C030C030C030C030C030C030C030C0304020
6060606030C00F000C137E9211>48 D<0C001C00EC000C000C000C000C000C000C000C000C000C
000C000C000C000C000C000C00FFC00A137D9211>I<1F0060C06060F070F03060300070007000
6000C001C00180020004000810101020207FE0FFE00C137E9211>I<0FC0307070387038703800
38003000E00FC0007000380018001C601CF01CF018E03860701FC00E137F9211>I<006000E000
E00160026006600C600860106020606060C060FFFC0060006000600060006003FC0E137F9211>
I<60607FC07F8044004000400040004F0070C040E0006000700070E070E070E06040E021C01F00
0C137E9211>I<07C00C201070207060006000C000CF00D0C0E060C020C030C030C03040306020
206010C00F000C137E9211>I<40007FFC7FF84010801080200040008001000100030002000600
06000E000E000E000E000E0004000E147E9311>I<0FC0107020186018601870183C303F600F80
0FE031F06078C01CC00CC00CC00C601830300FC00E137F9211>I<0F00308060404060C020C030
C030C0304030607030B00F30003000200060E040E08041003E000C137E9211>I<7FFFE0FFFFF0
000000000000000000000000000000000000FFFFF07FFFE0140A7E8B19>61
D E /Fj 11 114 df<8000F000FC00FF00FFE0FFFEFFFEFFE0FF00FC00F00080000F0C67852A>
45 D<06000600060006000F000F000F001F801F803FC03FC07FE07FE07FE0FFF00C0F86A72A>
54 D<FFF07FE07FE07FE03FC03FC01F801F800F000F000F0006000600060006000C0F86902A>
63 D<800000000000C000000000006000000000003000000000001800000000000C0000000000
06000000000003000000000001800000000000C000000000006000000000003000000000001800
000000000C000000000006000000000003000000000001800000000000C0000000000060000000
00003000000000001800000000000C000000000006000000000003000000000001800000000000
C000000000006000000000003000000000001800000000000C0000000000060000000000030000
00000001800000000000C000000000006000000000003000000000001800000000000C00000000
0006000000000003000000000001800000000000C00000000000600000000000202B2C80AA2A>
I<400000C000006000006000003000003000001800001800000C00000C00000600000600000300
0003000001800001800000C00000C000006000006000003000003000001800001800000C00000C
000006000006000003000003000001800001800000C00000C00000600000600000300000300000
1800001800000C00000C000006000002172C81AA15>I<800000000000E0000000000078000000
00001E000000000007800000000001E000000000007800000000001E0000000000078000000000
01E000000000007800000000001E000000000007800000000001E000000000007800000000001E
000000000007800000000001E000000000007800000000001E000000000007800000000001E000
00000000602B1780952A>72 D<800000000000F000000000007E00000000000FC00000000001F8
00000000003F000000000007E00000000000FC00000000001F800000000003F000000000007E00
000000000FC00000000001F800000000003F000000000007E00000000000E02B10808E2A>80
D<0080018003C007C00FC01FE03FE07FE0FFF03FF007F800F8003C000E000600011010668F2A>
82 D<00C003C00FC03FC0FFC0FFC07FC03FC00FE007E003E001E000E00060002000100C107790
15>85 D<0C000E001F001F003F803FC07FE07FF0FFF8FFFC00FE0001100C678B2A>106
D<0800000C00001E00001F00001F80003FC0003FF0003FF8007FFC007FFF007FFF80C00000110C
688A2A>113 D E /Fk 52 122 df<00000FE0000030180000E01C0001C03C0001803C00038038
00038000000380000007000000070000000700000007000000070000000E000000FFFFE0000E00
E0000E00E0000E01C0001C01C0001C01C0001C01C0001C0380001C038000380380003803800038
070000380700003807000070070800700E1000700E1000700E1000700E2000E0062000E003C000
E0000000E0000000C0000001C0000001C0000071800000F1800000F3000000620000003C000000
1E2D82A21B>12 D<00008000010000020000040000080000100000300000600000C00000C00001
80000300000300000600000600000E00000C00001C000018000018000038000030000030000070
0000700000600000600000E00000E00000E00000C00000C00000C00000C00000C00000C00000C0
0000C00000C00000C00000C00000C00000C0000040000060000060000020000030000010000008
0000113278A414>40 D<0008000004000006000002000003000003000001000001800001800001
800001800001800001800001800001800001800001800001800001800001800003800003800003
80000300000300000700000700000600000600000E00000C00000C00001C000018000038000030
0000300000600000600000C0000180000180000300000600000400000800001000002000004000
00800000113280A414>I<0E1E1E1E1E02020404080810204080070F7D840F>44
D<FFF0FFF0FFE00C037C8B11>I<70F8F8F0E005057A840F>I<0000000800000018000000300000
003000000060000000C0000000C0000001800000018000000300000006000000060000000C0000
000C0000001800000030000000300000006000000060000000C000000180000001800000030000
000300000006000000060000000C0000001800000018000000300000003000000060000000C000
0000C0000001800000018000000300000006000000060000000C0000000C000000180000003000
0000300000006000000060000000C0000000C0000000800000001D317FA419>I<000018000038
0000380000700000700000700000E00000E00000E00000C00001C0000180000380000300000300
000600000600000C00000C000018000010000031800061C0004380008380018380030380020700
0407000807003FC700403E00800FF0000E00000E00001C00001C00001C00001C00003800003800
003800003000152B7EA019>52 D<000FC000306000401000801801000803000C03000C06001807
001807001007003007C06007E0C003F18001FE0000FC0000FE00033F00061F800C07C01803C030
01C06001C06000C0C000C0C000C0C00080C00180C00100C00200C006006008003030000FC00016
227BA019>56 D<000FC000386000703000E03001C0380380380780380700380F00380F00380F00
381E00781E00781E00781E00F81E00F01C00F00E01F00E02F00605E00309E001F1E00003C00003
C0000380000700000700600E00F00C00F01800E0300080600041C0003F000015227BA019>I<07
000F800F800F000E00000000000000000000000000000000000000000000007000F800F800F000
E00009157A940F>I<0000030000000300000007000000070000000F0000000F0000001F000000
2F0000002F0000004F0000004F8000008780000087800001078000020780000207800004078000
0407800008078000080780001007800030078000200780007FFF80004007C0008007C0008003C0
010003C0030003C0020003C0040003C0040003C00C0003C03C0007C0FF003FFC1E237DA224>65
D<00007F00800003808100000E00630000380027000070001F0000E0000E0001C0000E00038000
0E000700000E000F000004000E000004001E000004003C000004003C0000080078000000007800
0000007800000000F000000000F000000000F000000000F000000000F000000000E000000000E0
00002000E000002000E000004000E000004000F000008000700000800070000100003800020000
18000400001C0008000006003000000381C0000000FE000000212479A223>67
D<00FFFFF000000F003C00000F000E00000F000700001E000380001E000380001E0001C0001E00
01C0003C0001C0003C0001E0003C0001E0003C0001E000780001E000780001E000780001E00078
0001E000F00003C000F00003C000F00003C000F00003C001E000078001E000078001E000070001
E0000F0003C0000E0003C0001C0003C0003C0003C00038000780007000078000E000078001C000
07800700000F801C0000FFFFF0000023227DA125>I<00FFFFFF80000F000780000F000180000F
000180001E000180001E000180001E000100001E000100003C000100003C000100003C01010000
3C01000000780200000078020000007806000000780E000000FFFC000000F00C000000F00C0000
00F00C000001E008000001E008000001E008040001E000080003C000080003C000080003C00010
0003C000100007800020000780006000078000C000078001C0000F8007C000FFFFFF800021227D
A121>I<00FFFFFF000F000F000F0003000F0003001E0003001E0003001E0002001E0002003C00
02003C0002003C0102003C010000780200007802000078060000780E0000FFFC0000F00C0000F0
0C0000F00C0001E0080001E0080001E0080001E0000003C0000003C0000003C0000003C0000007
8000000780000007800000078000000F800000FFFC000020227DA120>I<00FFF8000F00000F00
000F00001E00001E00001E00001E00003C00003C00003C00003C00007800007800007800007800
00F00000F00000F00000F00001E00001E00001E00001E00003C00003C00003C00003C000078000
0780000780000780000F8000FFF80015227DA113>73 D<00FFFC00000F8000000F0000000F0000
001E0000001E0000001E0000001E0000003C0000003C0000003C0000003C000000780000007800
00007800000078000000F0000000F0000000F0000000F0000001E0000001E0000001E0002001E0
002003C0004003C0004003C0008003C0008007800180078001000780030007800F000F803E00FF
FFFE001B227DA11F>76 D<00FF800007FC000F80000F80000F80001780000F8000178000178000
2F000013C0002F000013C0004F000013C0008F000023C0009E000023C0011E000023C0011E0000
23C0021E000043C0043C000043C0043C000043C0083C000041E0083C000081E01078000081E020
78000081E02078000081E04078000101E040F0000101E080F0000101E100F0000101E100F00002
00F201E0000200F201E0000200F401E0000200F801E0000400F803C0000400F003C0000400F003
C0000C00E003C0001E00C007C000FFC0C07FFC002E227DA12C>I<0000FE0000078380000C00E0
003800700070003800E0003801C0001C0380001C0700001C0F00001E1E00001E1C00001E3C0000
1E3C00001E7800001E7800001E7800001EF000003CF000003CF000003CF0000078F0000078E000
0078E00000F0E00000F0E00001E0E00001C0F00003C0F00007807000070078000E0038001C001C
0038000E00E0000703800001FC00001F2479A225>79 D<00FFFFE0000F0038000F001E000F000E
001E0007001E0007001E0007001E0007003C000F003C000F003C000F003C001E0078001E007800
3C00780078007800E000F003C000FFFE0000F0000000F0000001E0000001E0000001E0000001E0
000003C0000003C0000003C0000003C00000078000000780000007800000078000000F800000FF
F8000020227DA121>I<0000FE0000078380000C00E0003800700070003800E0003801C0003C03
80001C0700001C0F00001E1E00001E1E00001E3C00001E3C00001E7800001E7800001E7800001E
F000003CF000003CF000003CF0000038F0000078E0000078E00000F0E00000F0E00001E0E00001
C0E00003C0F01E03807061070070810E0038811C001C8138000E81E0000783804001FD00400001
0040000180800001818000018100000387000001FE000001FE000001FC000000F0001F2D79A225
>I<00FFFFC0000F0070000F003C000F001C001E000E001E000E001E000F001E000F003C001E00
3C001E003C001E003C003C0078003800780070007801E00078078000FFFC0000F00E0000F00700
00F0038001E003C001E003C001E003C001E003C003C0078003C0078003C0078003C0078007800F
0007800F0107800F01078007020F800702FFF8038C000000F020237DA124>I<0001F020000E0C
40001802C0003001C0006001C000E0018000C0018001C0018001C0018003C0010003C0010003C0
000003C0000003E0000001F8000001FF000000FFE000007FF000001FF8000003FC0000007C0000
003C0000001E0000001E0000001E0020001C0020001C0020001C00200018006000380060003000
700060007000C000C8018000C607000081FC00001B247DA21B>I<1FFFFFF81E03C0381803C018
3003C01820078018200780184007801040078010400F0010800F0010800F0010000F0000001E00
00001E0000001E0000001E0000003C0000003C0000003C0000003C000000780000007800000078
00000078000000F0000000F0000000F0000000F0000001E0000001E0000001E0000001E0000003
E00000FFFF00001D2277A123>I<3FFE03FF03C0007803C0006003C00020078000400780004007
800040078000400F0000800F0000800F0000800F0000801E0001001E0001001E0001001E000100
3C0002003C0002003C0002003C0002007800040078000400780004007800040070000800F00008
00F00010007000100070002000700040003000400038018000180200000E0C000003F000002023
77A124>I<FFF001FF1F8000780F0000600F0000600F0000400F0000800F0000800F0001000F00
03000F0002000F8004000F80040007800800078008000780100007802000078020000780400007
804000078080000781000007C1000003C2000003C2000003C4000003C8000003C8000003D00000
03D0000003E0000003C0000003C00000038000000180000001000000202376A124>I<FFF03FF8
0FF81F0007C003C01E00078001801E00078001001E00078002001E000F8002001E000F8004001F
00178004001F00178008000F00278008000F00278010000F00478010000F00C78020000F008780
20000F01078040000F010780C0000F02078080000F02078100000F04078100000F0407C200000F
0807C200000F0803C400000F1003C400000F1003C800000F2003C800000F2003D000000F4003D0
00000FC003E000000F8003E000000F0003C000000F00038000000E00038000000E00030000000C
00030000000C00020000002D2376A131>I<00F8C00185C00705C00E03800E03801C03803C0380
380700780700780700780700F00E00F00E00F00E00F00E10F01C20701C20703C20305C40308C40
0F078014157B9419>97 D<03C03F8003800380038007000700070007000E000E000E000E001C00
1CF81D0C1E0E3C0638073807380F700F700F700F700FE01EE01EE01EE03CE038E038607060E031
C01F0010237BA216>I<007E0001C1000301800703800E07801C07803C00003800007800007800
00780000F00000F00000F00000F00000F00100700100700200300C001830000FC00011157B9416
>I<00003C0003F80000380000380000380000700000700000700000700000E00000E00000E000
00E00001C000F9C00185C00705C00E03800E03801C03803C0380380700780700780700780700F0
0E00F00E00F00E00F00E10F01C20701C20703C20305C40308C400F078016237BA219>I<00F803
840E021C023C0238027804F018FFE0F000F000E000E000E000E000E002E0026004701830600F80
0F157A9416>I<00003E0000470000CF00018F0001860003800003800003800007000007000007
00000700000700000E0000FFF0000E00000E00000E00001C00001C00001C00001C00001C000038
0000380000380000380000380000700000700000700000700000700000E00000E00000E00000E0
0000C00001C00001C000718000F18000F300006200003C0000182D82A20F>I<001F180030B800
E0B801C07001C0700380700780700700E00F00E00F00E00F00E01E01C01E01C01E01C01E01C01E
03800E03800E0780060B8006170001E700000700000700000E00000E00000E00701C00F01800F0
300060E0003F8000151F7E9416>I<00F0000FE00000E00000E00000E00001C00001C00001C000
01C000038000038000038000038000070000071F0007218007C0C00F00E00F00E00E00E00E00E0
1C01C01C01C01C01C01C01C0380380380380380380380704700708700E08700E10700610E00620
6003C016237DA219>I<00C001E001C001C0000000000000000000000000000000001C00230043
0043008700870087000E000E001C001C001C00380038003840708070807080710032001C000B21
7BA00F>I<00F0000FE00000E00000E00000E00001C00001C00001C00001C00003800003800003
80000380000700000701E0070210070C700E10F00E10F00E20600E40001D80001E00001FC0001C
7000383800383800381C00381C20703840703840703840701880E01880600F0014237DA216>
107 D<01E01FC001C001C001C0038003800380038007000700070007000E000E000E000E001C00
1C001C001C0038003800380038007000700070007100E200E200E200E200640038000B237CA20C
>I<1C0F80F8002610C10C00476066060087807807008780780700870070070087007007000E00
E00E000E00E00E000E00E00E000E00E00E001C01C01C001C01C01C001C01C01C001C01C0382038
0380384038038070403803807080380380308070070031003003001E0023157B9428>I<1C0F00
2631C04740C08780E08780E08700E08700E00E01C00E01C00E01C00E01C01C03801C03801C0380
1C0704380708380E08380E103806107006203003C016157B941B>I<007E0001C3000381800701
C00E01C01C01E03C01E03801E07801E07801E07801E0F003C0F003C0F00380F00780700700700E
00700C0030180018700007C00013157B9419>I<01C1F002621804741C08780C08700E08700E08
701E00E01E00E01E00E01E00E01E01C03C01C03C01C03C01C07803807003807003C0E003C1C007
2380071E000700000700000E00000E00000E00000E00001C00001C00001C0000FFC000171F7F94
19>I<00F8400184C00705C00E03800E03801C03803C0380380700780700780700780700F00E00
F00E00F00E00F00E00F01C00701C00703C00305C0030B8000F3800003800003800007000007000
00700000700000E00000E00000E0000FFE00121F7B9416>I<1C1F002620804741C08783C08703
C08701808700000E00000E00000E00000E00001C00001C00001C00001C00003800003800003800
0038000070000030000012157B9415>I<00FC000183000200800401800C03800C03000C00000F
00000FF00007FC0003FE00003E00000F00000700700700F00600F00600E004004008002030001F
C00011157D9414>I<00C001C001C001C001C003800380038003800700FFF8070007000E000E00
0E000E001C001C001C001C003800380038003810702070207040708031001E000D1F7C9E10>I<
1E00602300E04380E04381C08381C08701C08701C00703800E03800E03800E03801C07001C0700
1C07001C07081C0E10180E101C0E101C1E200C262007C3C015157B941A>I<1E03802307C04387
C04383C08381C08700C08700C00700800E00800E00800E00801C01001C01001C01001C02001C02
001C04001C08001C08000C300003C00012157B9416>I<1E0060E02300E1F04380E1F04381C0F0
8381C0708701C0308701C030070380200E0380200E0380200E0380201C0700401C0700401C0700
401C0700801C0700801C0701001C0F01000C0F020006138C0003E0F0001C157B9420>I<03C1E0
046210083470103CF02038F020386020380000700000700000700000700000E00000E00000E000
00E02061C040F1C040F1C080E2C100446200383C0014157D9416>I<1E00302300704380704380
E08380E08700E08700E00701C00E01C00E01C00E01C01C03801C03801C03801C03801C07001C07
001C07001C0F000C3E0003CE00000E00000E00001C00601C00F03800F03000E0600080C0004380
003E0000141F7B9418>I E /Fl 2 49 df<020002000200C218F2783AE00F800F803AE0F278C2
180200020002000D0E7E8E12>3 D<060F0F0E1E1E1C3C383830707060E0C04008117F910A>48
D E /Fm 22 116 df<003000003000003000003000003000003000003000003000003000003000
003000FFFFFCFFFFFC003000003000003000003000003000003000003000003000003000003000
00300016187E931B>43 D<07C018303018701C600C600CE00EE00EE00EE00EE00EE00EE00EE00E
E00E600C600C701C30181C7007C00F157F9412>48 D<03000700FF000700070007000700070007
00070007000700070007000700070007000700070007007FF00C157E9412>I<0F8030E0407080
30C038E0384038003800700070006000C00180030006000C08080810183FF07FF0FFF00D157E94
12>I<0FE030306018701C701C001C00180038006007E000300018000C000E000EE00EE00EC00C
401830300FE00F157F9412>I<00300030007000F001F001700270047008701870107020704070
C070FFFE0070007000700070007003FE0F157F9412>I<20303FE03FC024002000200020002000
2F8030E020700030003800384038E038E0388030406020C01F000D157E9412>I<01F00608080C
181C301C70006000E000E3E0EC30F018F00CE00EE00EE00E600E600E300C3018183007C00F157F
9412>I<40007FFE7FFC7FF8C008801080200040008000800100010003000200060006000E000E
000E000E000E0004000F167E9512>I<07E018302018600C600C700C78183E101F600FC00FF018
F8607C601EC00EC006C006C004600C38300FE00F157F9412>I<07C0183030186018E00CE00CE0
0EE00EE00E601E301E186E0F8E000E000C001C70187018603020C01F800F157F9412>I<FFFFFC
FFFFFC000000000000000000000000000000000000FFFFFCFFFFFC160A7E8C1B>61
D<1F8060E08070E070E070407000E001C001800300020002000200020002000000000000000000
06000F000F0006000C177E9611>63 D<001000003800003800003800005C00005C00005C00008E
00008E00008E0001070001070003078002038002038007FFC00401C00401C00800E00800E01800
E03800F0FE03FE17177F961A>65 D<FFFF001C01C01C00E01C00301C00381C00181C001C1C000C
1C000E1C000E1C000E1C000E1C000E1C000E1C000E1C000C1C001C1C001C1C00381C00301C0060
1C01C0FFFF0017177F961B>68 D<FC00FE1E00381F001017001013801011C01011C01010E01010
7010103810103810101C10100E10100F101007101003901001D01001D01000F010007010003038
0030FE001017177F961A>78 D<0FC4302C601C400CC004C004C004E00070007F003FE00FF801FC
001C000E0006800680068006C004E008D81087E00F177E9614>83 D<7FFFF86038184038084038
088038048038048038040038000038000038000038000038000038000038000038000038000038
0000380000380000380000380000380007FFC016177F9619>I<FFC03F801E001C000F00080007
001000078030000380200001C0400001E0400000E0800000F1800000710000003A0000003E0000
001C0000001C0000001C0000001C0000001C0000001C0000001C0000001C0000001C000000FF80
00191780961A>89 D<0F9E18E33060707070707070306018C02F80200060003FE03FF83FFC600E
C006C006C006600C38380FE010157F8D12>103 D<183C3C1800000000007C1C1C1C1C1C1C1C1C
1C1C1C1CFF081780960A>105 D<1F4060C0C040C040E000FF007F801FC001E080608060C060E0
C09F000B0E7F8D0E>115 D E /Fn 19 122 df<FFC0FFC00A027D8A0F>45
D<07F8000C0C001E06001E07001C070000070000070000070000FF0007C7001E07003C0E00780E
00F00E10F00E10F00E10F01E10F02E20784F401F878014147D9317>97 D<0700003F00000F0000
0700000700000E00000E00000E00000E00000E00000E00001C00001C7C001D87001E03801C01C0
1C01C03801C03801E03801E03801E03801E03801E07003C07003C0700380700780700700700E00
E81C00C4380083E00013207B9F19>I<01FC07060E0F1C0F380E78007000F000F000F000F000E0
00E000E000E000F0027004300818300FC010147C9314>I<0000700003F00000F0000070000070
0000E00000E00000E00000E00000E00000E00001C000F9C00305C00E03C01C03C03801C0780380
700380F00380F00380F00380F00380E00700E00700E00700E00700E00700700F00301E00186F00
0F8FE014207C9F19>I<00F800070E000E07001C0700380380780380700380F00380F00380FFFF
80F00000E00000E00000E00000E00000F001007002003004001C180007E00011147D9314>I<00
000E003E1100E1A301C1C20381E00780E00701E00F01E00F01E00F01E00703C007038007870004
FC000800000800001800001C00000FFF000FFFC007FFE01800F0300030600030C00030C00030C0
00306000603000C01C070007FC00181F809417>103 D<01C003E003E003E001C0000000000000
00000000000003801F800780038003800700070007000700070007000E000E000E000E000E000E
001C001E00FF800B1F7F9E0C>105 D<00E007E001E000E000E001C001C001C001C001C001C003
80038003800380038003800700070007000700070007000E000E000E000E000E000E001C001E00
FFC00B207F9F0C>108 D<0387C07C001F9861860007A072070003C03403000380380300078078
0700070070070007007007000700700700070070070007007007000E00E00E000E00E00E000E00
E00E000E00E00E000E00E00E000E00E00E001C01C01C001E01E01E00FFCFFCFFC022147E9326>
I<038F801F90E007A0E003C0600380600780E00700E00700E00700E00700E00700E00E01C00E01
C00E01C00E01C00E01C00E01C01C03801E03C0FFCFF815147E9319>I<00FC000387000E01801C
00C03800E03800E07000F0F000F0F000F0F000F0F000F0E001E0E001E0E001C0E003C0F0038070
0700380E001C1C0007E00014147D9317>I<00E3E007EC3800F01C00E01E00E00E01C00E01C00F
01C00F01C00F01C00F01C00F03801E03801E03801C03803C0380380380700740E00721C0071F00
0700000700000700000E00000E00000E00000E00001E0000FFC000181D809319>I<038E001FB3
8007C78003C7800383000780000700000700000700000700000700000E00000E00000E00000E00
000E00000E00001C00001E0000FFE00011147E9312>114 D<01F2060E08061806180238043800
1E001FE00FF003F8003C401C400C400C600C6018E010D0608FC00F147E9312>I<008001000100
0100030007000F001E00FFF80E000E000E000E001C001C001C001C001C001C0038003820382038
2038203840384018800F000D1C7C9B12>I<1C0380FC1F803C07801C03801C0380380700380700
380700380700380700380700700E00700E00700E00700E00701E00701E00703C00305E001F9FC0
12147B9319>I<FF83F81E00E01C00C01C00800E00800E01000E02000E02000F04000704000708
0007080007100003900003A00003E00003C00003800001800001000015147C9318>I<0FF83F80
01E00E0001C00C0001C0080000E0180000E0100000E0200000E0200000F0400000704000007080
00007080000071000000390000003A0000003E0000003C00000038000000180000001000000010
000000200000002000000040000070C00000F0800000F1000000E20000007C000000191D809318
>121 D E /Fo 63 122 df<003F0000E0C001C0C00381E00701E00701E0070000070000070000
070000070000070000FFFFE00700E00700E00700E00700E00700E00700E00700E00700E00700E0
0700E00700E00700E00700E00700E00700E00700E00700E00700E07FC3FE1720809F19>12
D<0020004000800100020006000C000C00180018003000300030007000600060006000E000E000
E000E000E000E000E000E000E000E000E000E0006000600060007000300030003000180018000C
000C000600020001000080004000200B2E7DA112>40 D<800040002000100008000C0006000600
0300030001800180018001C000C000C000C000E000E000E000E000E000E000E000E000E000E000
E000E000C000C000C001C001800180018003000300060006000C00080010002000400080000B2E
7DA112>I<70F8FCFC74040404080810102040060E7C840D>44 D<FFC0FFC00A027F8A0F>I<70F8
F8F87005057C840D>I<000100030003000600060006000C000C000C0018001800180030003000
3000600060006000C000C000C00180018001800300030003000600060006000C000C000C001800
18001800300030003000600060006000C000C000C000102D7DA117>I<03F0000E1C001C0E0018
0600380700700380700380700380700380F003C0F003C0F003C0F003C0F003C0F003C0F003C0F0
03C0F003C0F003C0F003C0F003C0F003C07003807003807003807807803807001806001C0E000E
1C0003F000121F7E9D17>I<018003800F80F38003800380038003800380038003800380038003
800380038003800380038003800380038003800380038003800380038007C0FFFE0F1E7C9D17>
I<03F0000C1C00100E00200700400780800780F007C0F803C0F803C0F803C02007C00007C00007
80000780000F00000E00001C0000380000700000600000C0000180000300000600400C00401800
401000803FFF807FFF80FFFF80121E7E9D17>I<03F0000C1C00100E00200F00780F8078078078
0780380F80000F80000F00000F00000E00001C0000380003F000003C00000E00000F0000078000
07800007C02007C0F807C0F807C0F807C0F00780400780400F00200E001C3C0003F000121F7E9D
17>I<1803001FFE001FFC001FF8001FE00010000010000010000010000010000010000011F000
161C00180E001007001007800003800003800003C00003C00003C07003C0F003C0F003C0E00380
400380400700200600100E000C380003E000121F7E9D17>53 D<007C000182000701000E03800C
07801C0780380300380000780000700000700000F1F000F21C00F40600F80700F80380F80380F0
03C0F003C0F003C0F003C0F003C07003C07003C07003803803803807001807000C0E00061C0001
F000121F7E9D17>I<4000007FFFC07FFF807FFF80400100800200800200800400000800000800
00100000200000200000400000400000C00000C00001C000018000038000038000038000038000
078000078000078000078000078000078000078000030000121F7D9D17>I<03F0000E18001C0C
00380600380700700700700380F00380F00380F003C0F003C0F003C0F003C0F003C07007C07007
C03807C0180BC00E13C003E3C0000380000380000380000700300700780600780E00700C002018
001070000FC000121F7E9D17>57 D<70F8F8F8700000000000000000000070F8F8F87005147C93
0D>I<70F8F8F8700000000000000000000070F0F8F878080808101010202040051D7C930D>I<00
1F800000E0700001000800060006000800010008000100100F00802030C0402060404040C02020
41C01C2041C01C2081801C1083801C1083801C1083801C1083801C1083801C1083801C1081801C
1041C01C1041C01C1040C03C2020605C202030CC40100F07800800000008000000060000700100
01C000E01F00001FF0001C207D9F23>64 D<000100000003800000038000000380000007C00000
07C0000007C0000009E0000009E0000009E0000010F0000010F0000010F0000020780000207800
0020780000403C0000403C0000403C0000801E0000801E0000FFFE0001000F0001000F0001000F
00020007800200078002000780040003C00E0003C01F0007E0FFC03FFE1F207F9F22>I<FFFFE0
000F80380007801E0007801F0007800F0007800F8007800F8007800F8007800F8007800F800780
0F0007801F0007801E0007803C0007FFF00007803C0007801E0007800F0007800F800780078007
8007C0078007C0078007C0078007C0078007C00780078007800F8007800F0007801F000F803C00
FFFFF0001A1F7E9E20>I<000FC040007030C001C009C0038005C0070003C00E0001C01E0000C0
1C0000C03C0000C07C0000407C00004078000040F8000000F8000000F8000000F8000000F80000
00F8000000F8000000F8000000F8000000780000007C0000407C0000403C0000401C0000401E00
00800E000080070001000380020001C0040000703800000FC0001A217D9F21>I<FFFFE0000F80
3C0007801E000780070007800380078003C0078001E0078001E0078001F0078000F0078000F007
8000F8078000F8078000F8078000F8078000F8078000F8078000F8078000F8078000F8078000F0
078000F0078000F0078001E0078001E0078003C0078003800780070007800E000F803C00FFFFE0
001D1F7E9E23>I<FFFFFF000F800F000780030007800300078001000780018007800080078000
8007800080078080800780800007808000078080000781800007FF800007818000078080000780
80000780800007808000078000200780002007800020078000400780004007800040078000C007
8000C0078001800F800F80FFFFFF801B1F7E9E1F>I<FFFFFF000F800F00078003000780030007
800100078001800780008007800080078000800780008007808000078080000780800007808000
0781800007FF800007818000078080000780800007808000078080000780000007800000078000
0007800000078000000780000007800000078000000FC00000FFFE0000191F7E9E1E>I<000FE0
200078186000E004E0038002E0070001E00F0000E01E0000601E0000603C0000603C0000207C00
002078000020F8000000F8000000F8000000F8000000F8000000F8000000F8000000F8007FFCF8
0003E0780001E07C0001E03C0001E03C0001E01E0001E01E0001E00F0001E0070001E0038002E0
00E0046000781820000FE0001E217D9F24>I<FFF8FFF80F800F8007800F0007800F0007800F00
07800F0007800F0007800F0007800F0007800F0007800F0007800F0007800F0007800F0007FFFF
0007800F0007800F0007800F0007800F0007800F0007800F0007800F0007800F0007800F000780
0F0007800F0007800F0007800F0007800F000F800F80FFF8FFF81D1F7E9E22>I<FFFC0FC00780
078007800780078007800780078007800780078007800780078007800780078007800780078007
800780078007800780078007800FC0FFFC0E1F7F9E10>I<FFFC0FFC0FC003E007800180078001
000780020007800400078008000780100007802000078040000780800007810000078300000787
8000078F80000793C0000791E00007A1E00007C0F0000780F0000780780007803C0007803C0007
801E0007801E0007800F000780078007800780078007C00FC007E0FFFC3FFC1E1F7E9E23>75
D<FFFE000FC0000780000780000780000780000780000780000780000780000780000780000780
000780000780000780000780000780000780000780000780020780020780020780020780060780
0407800407800C07801C0F807CFFFFFC171F7E9E1C>I<FF80001FF80F80001F800780001F0005
C0002F0005C0002F0005C0002F0004E0004F0004E0004F000470008F000470008F000470008F00
0438010F000438010F000438010F00041C020F00041C020F00041C020F00040E040F00040E040F
00040E040F000407080F000407080F000407080F000403900F000403900F000401E00F000401E0
0F000401E00F000E00C00F001F00C01F80FFE0C1FFF8251F7E9E2A>I<FF803FF807C007C007C0
038005E0010005E0010004F001000478010004780100043C0100043C0100041E0100040F010004
0F010004078100040781000403C1000401E1000401E1000400F1000400F1000400790004003D00
04003D0004001F0004001F0004000F0004000700040007000E0003001F000300FFE001001D1F7E
9E22>I<001F800000F0F00001C0380007801E000F000F000E0007001E0007803C0003C03C0003
C07C0003E0780001E0780001E0F80001F0F80001F0F80001F0F80001F0F80001F0F80001F0F800
01F0F80001F0F80001F0780001E07C0003E07C0003E03C0003C03C0003C01E0007800E0007000F
000F0007801E0001C0380000F0F000001F80001C217D9F23>I<FFFFE0000F80780007801C0007
801E0007800F0007800F8007800F8007800F8007800F8007800F8007800F8007800F0007801E00
07801C000780780007FFE000078000000780000007800000078000000780000007800000078000
000780000007800000078000000780000007800000078000000FC00000FFFC0000191F7E9E1F>
I<FFFF80000F80F0000780780007803C0007801E0007801E0007801F0007801F0007801F000780
1F0007801E0007801E0007803C00078078000780F00007FF80000781C0000780E0000780F00007
80700007807800078078000780780007807C0007807C0007807C0007807C0407807E0407803E04
0FC01E08FFFC0F10000003E01E207E9E21>82 D<07E0800C1980100780300380600180600180E0
0180E00080E00080E00080F00000F000007800007F00003FF0001FFC000FFE0003FF00001F8000
07800003C00003C00001C08001C08001C08001C08001C0C00180C00380E00300F00600CE0C0081
F80012217D9F19>I<7FFFFFE0780F01E0600F0060400F0020400F0020C00F0030800F0010800F
0010800F0010800F0010000F0000000F0000000F0000000F0000000F0000000F0000000F000000
0F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000
000F0000000F0000001F800007FFFE001C1F7E9E21>I<FFFC3FF80FC007C00780038007800100
078001000780010007800100078001000780010007800100078001000780010007800100078001
000780010007800100078001000780010007800100078001000780010007800100078001000780
0100038002000380020001C0020001C0040000E008000070180000382000000FC0001D207E9E22
>I<FFF07FF81FF01F800FC007C00F00078003800F00078001000F0007C00100078007C0020007
8007C00200078007C0020003C009E0040003C009E0040003C009E0040003E010F00C0001E010F0
080001E010F0080001F02078080000F02078100000F02078100000F0403C10000078403C200000
78403C20000078C03E2000003C801E4000003C801E4000003C801E4000001F000F8000001F000F
8000001F000F8000001E00078000000E00070000000E00070000000C000300000004000200002C
207F9E2F>87 D<FFF003FF1F8000F80F8000600780004007C0004003E0008001E0008001F00100
00F0030000F80200007C0400003C0400003E0800001E0800001F1000000FB0000007A0000007C0
000003C0000003C0000003C0000003C0000003C0000003C0000003C0000003C0000003C0000003
C0000003C0000007C000007FFE00201F7F9E22>89 D<1FE000303000781800781C00300E00000E
00000E00000E0000FE00078E001E0E00380E00780E00F00E10F00E10F00E10F01E10781E103867
200F83C014147E9317>97 D<0E0000FE00000E00000E00000E00000E00000E00000E00000E0000
0E00000E00000E00000E3E000EC3800F01C00F00E00E00E00E00700E00700E00780E00780E0078
0E00780E00780E00780E00700E00700E00E00F00E00D01C00CC300083E0015207F9F19>I<03F8
0E0C1C1E381E380C70007000F000F000F000F000F000F00070007000380138011C020E0C03F010
147E9314>I<000380003F80000380000380000380000380000380000380000380000380000380
00038003E380061B801C0780380380380380700380700380F00380F00380F00380F00380F00380
F003807003807003803803803807801C07800E1B8003E3F815207E9F19>I<03F0000E1C001C0E
00380700380700700700700380F00380F00380FFFF80F00000F00000F000007000007000003800
801800800C010007060001F80011147F9314>I<007C00C6018F038F0706070007000700070007
0007000700FFF00700070007000700070007000700070007000700070007000700070007000700
070007007FF01020809F0E>I<0000E003E3300E3C301C1C30380E00780F00780F00780F00780F
00780F00380E001C1C001E380033E0002000002000003000003000003FFE001FFF800FFFC03001
E0600070C00030C00030C00030C000306000603000C01C038003FC00141F7F9417>I<0E0000FE
00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E3E000E43000E
81800F01C00F01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E
01C00E01C00E01C00E01C0FFE7FC16207F9F19>I<1C001E003E001E001C000000000000000000
000000000E007E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E
000E00FFC00A1F809E0C>I<0E0000FE00000E00000E00000E00000E00000E00000E00000E0000
0E00000E00000E00000E0FF00E03C00E03000E02000E04000E08000E10000E30000E70000EF800
0F38000E1C000E1E000E0E000E07000E07800E03800E03C00E03E0FFCFF815207F9F18>107
D<0E00FE000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E00
0E000E000E000E000E000E000E000E000E000E000E000E00FFE00B20809F0C>I<0E1F01F000FE
618618000E81C81C000F00F00E000F00F00E000E00E00E000E00E00E000E00E00E000E00E00E00
0E00E00E000E00E00E000E00E00E000E00E00E000E00E00E000E00E00E000E00E00E000E00E00E
000E00E00E000E00E00E00FFE7FE7FE023147F9326>I<0E3E00FE43000E81800F01C00F01C00E
01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E
01C0FFE7FC16147F9319>I<01F800070E001C03803801C03801C07000E07000E0F000F0F000F0
F000F0F000F0F000F0F000F07000E07000E03801C03801C01C0380070E0001F80014147F9317>
I<0E3E00FEC3800F01C00F00E00E00E00E00F00E00700E00780E00780E00780E00780E00780E00
780E00700E00F00E00E00F01E00F01C00EC3000E3E000E00000E00000E00000E00000E00000E00
000E00000E0000FFE000151D7F9319>I<03E0800619801C05803C0780380380780380700380F0
0380F00380F00380F00380F00380F003807003807803803803803807801C0B800E138003E38000
0380000380000380000380000380000380000380000380003FF8151D7E9318>I<0E78FE8C0F1E
0F1E0F0C0E000E000E000E000E000E000E000E000E000E000E000E000E000E00FFE00F147F9312
>I<1F9030704030C010C010C010E00078007F803FE00FF00070803880188018C018C018E030D0
608F800D147E9312>I<020002000200060006000E000E003E00FFF80E000E000E000E000E000E
000E000E000E000E000E000E080E080E080E080E080610031001E00D1C7F9B12>I<0E01C0FE1F
C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01
C00E01C00E03C00603C0030DC001F1FC16147F9319>I<FF83F81E01E01C00C00E00800E00800E
008007010007010003820003820003820001C40001C40001EC0000E80000E80000700000700000
700000200015147F9318>I<FF9FE1FC3C0780701C0300601C0380200E0380400E0380400E03C0
400707C0800704C0800704E080038861000388710003C8730001D0320001D03A0000F03C0000E0
1C0000E01C0000601800004008001E147F9321>I<7FC3FC0F01E00701C007018003810001C200
00E40000EC00007800003800003C00007C00004E000087000107000303800201C00601E01E01E0
FF07FE1714809318>I<FF83F81E01E01C00C00E00800E00800E00800701000701000382000382
0003820001C40001C40001EC0000E80000E8000070000070000070000020000020000040000040
00004000F08000F08000F100006200003C0000151D7F9318>I E /Fp 26
107 df<FFFFFFFCFFFFFFFC1E027C8C27>0 D<70F8F8F87005057C8E0E>I<800002C000066000
0C3000181800300C00600600C003018001830000C600006C00003800003800006C0000C6000183
000301800600C00C006018003030001860000CC000068000021718789727>I<000FF00000708E
000180818002008040040080200800801010008008100080082000800420008004400080024000
800240008002800080018000800180008001FFFFFFFF8000800180008001800080018000800140
008002400080024000800220008004200080041000800810008008080080100400802002008040
0180818000708E00000FF00020227D9C27>8 D<03F0000FFC001C0E00300300600180600180C0
00C0C000C0C000C0C000C0C000C0C000C0C000C0C000C06001806001803003001C0E000FFC0003
F00012147D9519>14 D<03F0000FFC001FFE003FFF007FFF807FFF80FFFFC0FFFFC0FFFFC0FFFF
C0FFFFC0FFFFC0FFFFC0FFFFC07FFF807FFF803FFF001FFE000FFC0003F00012147D9519>I<FF
FFFFFF7FFFFFFF0000000000000000000000000000000000000000000000000000000000000000
FFFFFFFFFFFFFFFF00000000000000000000000000000000000000000000000000000000000000
007FFFFFFFFFFFFFFF20167D9627>17 D<C0000000F00000003C0000000F00000003C0000000F0
0000003C0000000F80000003E0000000780000001E0000000780000001E0000000780000001C00
000078000001E00000078000001E00000078000003E000000F8000003C000000F0000003C00000
0F0000003C00000070000000C00000000000000000000000000000000000000000000000000000
0000000000000000007FFFFFF8FFFFFFFC1E277C9F27>21 D<07E000010FF800011FFC0001381E
0003700780036003C006C001E00EC000781C80003FF880001FF0800007E0200B7D9127>24
D<0180000000000300000000000300000000000600000000000600000000000C00000000001800
00000000700000000000FFFFFFFFFFC0FFFFFFFFFFC07000000000001800000000000C00000000
000600000000000600000000000300000000000300000000000180000000002A127C9432>32
D<000000006000000000003000000000003000000000001800000000001800000000000C000000
00000600000000000380FFFFFFFFFFE0FFFFFFFFFFC0000000000380000000000600000000000C
000000000018000000000018000000000030000000000030000000000060002B127D9432>I<00
C00000C00000C00000C00000C00000C00000C00000C00000C00000C00000C00000C00000C00000
C00000C00000C00000C00000C00000C00000C00000C00000C00000C00000C00000C00000C00000
C00000C00000C00000C00000C00000C00000C00000C00000C000C0C0C0F0C3C038C7001CCE0006
D80003F00001E00001E00000C000004000122D7DA219>35 D<0000006000000000006000000000
003000000000001800000000001800000000000C0000000000060000000000030000FFFFFFFF80
00FFFFFFFFC000000000007000000000001C00000000000F800000000003E00000000007800000
00001E00000000003800000000006000FFFFFFFFC000FFFFFFFF80000000000700000000000600
000000000C00000000001800000000003000000000003000000000006000000000006000002B1C
7D9932>41 D<001FFF007FFF01E0000380000600000C0000180000300000300000600000600000
600000C00000C00000FFFFFFFFFFFFC00000C00000600000600000600000300000300000180000
0C000006000003800001E000007FFF001FFF181E7C9A21>50 D<C0C0C0C0C0C0C0C0E0E0C0C0C0
C0C0C0C0C003127D9400>55 D<40000010C0000030600000606000006060000060300000C03000
00C0300000C018000180180001800C0003000C0003000C00030007FFFE0007FFFE0003000C0003
000C0003000C0001801800018018000180180000C0300000C03000006060000060600000606000
0030C0000030C000001980000019800000198000000F0000000F0000000F000000060000000600
001C2480A21D>I<00020000060001E600061C000C0C00180E00300F00301B00301B00701B8060
1980603180603180E031C0E031C0E061C0E061C0E061C0E061C0E0C1C0E0C1C0E0C1C0E0C1C0E1
81C0E181C0E181C0E181C0E301C0E301C06301806301807603807603803603003E07001C06000C
0C000E18000FF000180000180000180000122A7DA519>59 D<000FFFF800007FFFFF0001FFFFFF
800387803FC00C078007E018078003E038070001E070070001E0600F0001E0C00F0001C0000F00
01C0000F000380000E000300000E000600001E000C00001E001800001E00E000001C1FC000001C
3F0000003C7F000000381F000000380F800000780F8000007007C000007007C00000F003E00000
E003E00000E001F00001E001F00301C000F80601C000F80C03C0007C180380007FE00300003FC0
0400001F0028237FA12A>82 D<40000040C00000C0C00000C0C00000C0C00000C0C00000C0C000
00C0C00000C0C00000C0C00000C0C00000C0C00000C0C00000C0C00000C0C00000C0C00000C0C0
0000C0C00000C0C00000C0C00000C0C00000C0C00000C0C00000C0600001806000018030000300
180006000E001C000780780001FFE000007F80001A1F7D9D21>91 D<007F800001FFE000078078
000E001C0018000600300003006000018060000180C00000C0C00000C0C00000C0C00000C0C000
00C0C00000C0C00000C0C00000C0C00000C0C00000C0C00000C0C00000C0C00000C0C00000C0C0
0000C0C00000C0C00000C0C00000C0C00000C0C00000C0C00000C0C00000C0400000401A1F7D9D
21>I<400000C00000C00000C00000C00000C00000C00000C00000C00000C00000C00000C00000
C00000C00000C00000C00000FFFFFCFFFFFEC00000C00000C00000C00000C00000C00000C00000
C00000C00000C00000C00000C00000C00000C00000C00000C0000040000017237DA21E>96
D<000F0038007000E001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C0
01C001C0038007001E00F0001E000700038001C001C001C001C001C001C001C001C001C001C001
C001C001C001C001C001C001C000E000700038000F10317CA419>102 D<F0001E000700038001
C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C000E000700038
000F0038007000E001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001
C001C0038007001E00F00010317CA419>I<004000C000C0018001800180030003000300060006
000C000C000C00180018001800300030003000600060006000C000C000C000C000600060006000
3000300030001800180018000C000C000C000600060003000300030001800180018000C000C000
400A327BA413>I<C000C000C000600060006000300030003000180018000C000C000C00060006
00060003000300030001800180018000C000C000C000C001800180018003000300030006000600
06000C000C000C0018001800300030003000600060006000C000C000C0000A327DA413>I<C0C0
C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
C0C0C0C0C0C0C0C002317AA40E>I E /Fq 3 117 df<00300000780000FC0000FC000078000030
000000000000000000000000000000000000007FFC007FFC007FFC007FFC00003C00003C00003C
00003C00003C00003C00003C00003C00003C00003C00003C00003C00003C00003C00003C00003C
00003C00003C007FFFFCFFFFFEFFFFFE7FFFFC17267CA51F>105 D<FF000000FF000000FF0000
00FF00000007000000070000000700000007000000070000000700000007000000070FFF80070F
FF80070FFF80070FFF800700F0000701E0000703C00007078000070F0000071E0000073C000007
7E0000077F000007E7800007E3800007C1C0000781E0000700E000070070000700780007003800
07001C00FFF8FFE0FFF8FFE0FFF8FFE0FFF8FFE01B257EA41F>107 D<0070000000F0000000F0
000000F0000000F0000000F0000000F000007FFFFE00FFFFFE00FFFFFE00FFFFFE0000F0000000
F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F00000
00F0000000F0078000F0078000F0078000F0078000F80F00007C1F00007FFE00003FFC00001FF8
000007E00019217FA01F>116 D E /Fr 60 125 df<0001FF81FE00001FFFEFFF80007F80FF87
C000FC00FE0FE001F801FE0FE003F801FC0FE007F001FC0FE007F001FC07C007F001FC000007F0
01FC000007F001FC000007F001FC000007F001FC000007F001FC000007F001FC0000FFFFFFFFF8
00FFFFFFFFF800FFFFFFFFF80007F001FC000007F001FC000007F001FC000007F001FC000007F0
01FC000007F001FC000007F001FC000007F001FC000007F001FC000007F001FC000007F001FC00
0007F001FC000007F001FC000007F001FC000007F001FC000007F001FC000007F001FC000007F0
01FC000007F001FC000007F001FC000007F001FC00007FFF1FFFE0007FFF1FFFE0007FFF1FFFE0
002B2A7FA928>11 D<0001FF0000001FFFC000007F80F00000FC00F80001F801F80003F803FC00
07F003FC0007F003FC0007F003FC0007F001F80007F000F00007F000000007F000000007F00000
0007F0000000FFFFFFFC00FFFFFFFC00FFFFFFFC0007F001FC0007F001FC0007F001FC0007F001
FC0007F001FC0007F001FC0007F001FC0007F001FC0007F001FC0007F001FC0007F001FC0007F0
01FC0007F001FC0007F001FC0007F001FC0007F001FC0007F001FC0007F001FC0007F001FC0007
F001FC0007F001FC007FFF1FFFC07FFF1FFFC07FFF1FFFC0222A7FA926>I<FFFF80FFFF80FFFF
80FFFF80FFFF80FFFF8011067F9017>45 D<1C003E007F00FF80FF80FF807F003E001C0009097B
8813>I<00000300000007800000078000000F8000000F0000000F0000001F0000001E0000003E
0000003C0000003C0000007C0000007800000078000000F8000000F0000001F0000001E0000001
E0000003E0000003C0000003C0000007C00000078000000F8000000F0000000F0000001F000000
1E0000003E0000003C0000003C0000007C0000007800000078000000F8000000F0000001F00000
01E0000001E0000003E0000003C0000003C0000007C00000078000000F8000000F0000000F0000
001F0000001E0000001E0000003E0000003C0000007C0000007800000078000000F8000000F000
0000F000000060000000193C7CAC22>I<003F800001FFF00007E0FC000FC07E001F803F001F80
3F003F001F803F001F807F001FC07F001FC07F001FC07F001FC0FF001FE0FF001FE0FF001FE0FF
001FE0FF001FE0FF001FE0FF001FE0FF001FE0FF001FE0FF001FE0FF001FE0FF001FE0FF001FE0
FF001FE0FF001FE07F001FC07F001FC07F001FC07F001FC03F001F803F001F801F803F001F803F
000FC07E0007E0FC0001FFF000003F80001B277DA622>I<000E00001E00007E0007FE00FFFE00
FFFE00F8FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE00
00FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE00
00FE0000FE0000FE0000FE0000FE007FFFFE7FFFFE7FFFFE17277BA622>I<00FF800003FFF000
0FFFFC001F03FE003800FF007C007F80FE003FC0FF003FC0FF003FE0FF001FE0FF001FE07E001F
E03C003FE000003FE000003FC000003FC000007F8000007F000000FE000000FC000001F8000003
F0000003E00000078000000F0000001E0000003C00E0007000E000E000E001C001C0038001C007
0001C00FFFFFC01FFFFFC03FFFFFC07FFFFFC0FFFFFF80FFFFFF80FFFFFF801B277DA622>I<00
7F800003FFF00007FFFC000F81FE001F00FF003F80FF003F807F803F807F803F807F801F807F80
0F007F800000FF000000FF000000FE000001FC000001F8000007F00000FFC00000FFF0000001FC
0000007E0000007F0000007F8000003FC000003FC000003FE000003FE03C003FE07E003FE0FF00
3FE0FF003FE0FF003FC0FF007FC07E007F807C007F003F01FE001FFFFC0007FFF00000FF80001B
277DA622>I<00000E0000001E0000003E0000007E000000FE000000FE000001FE000003FE0000
077E00000E7E00000E7E00001C7E0000387E0000707E0000E07E0000E07E0001C07E0003807E00
07007E000E007E000E007E001C007E0038007E0070007E00E0007E00FFFFFFF8FFFFFFF8FFFFFF
F80000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE00007FFFF8007F
FFF8007FFFF81D277EA622>I<0C0003000F803F000FFFFE000FFFFC000FFFF8000FFFF0000FFF
E0000FFFC0000FFE00000E0000000E0000000E0000000E0000000E0000000E0000000E7FC0000F
FFF8000F80FC000E003E000C003F0000001F8000001FC000001FC000001FE000001FE018001FE0
7C001FE0FE001FE0FE001FE0FE001FE0FE001FC0FC001FC078003F8078003F803C007F001F01FE
000FFFF80003FFF00000FF80001B277DA622>I<0007F000003FFC0000FFFE0001FC0F0003F01F
8007E03F800FC03F801FC03F801F803F803F801F003F8000007F0000007F0000007F000000FF00
0000FF0FC000FF3FF800FF707C00FFC03E00FFC03F00FF801F80FF801FC0FF001FC0FF001FE0FF
001FE0FF001FE07F001FE07F001FE07F001FE07F001FE03F001FE03F001FC01F801FC01F803F80
0FC03F0007E07E0003FFFC0000FFF000003FC0001B277DA622>I<380000003E0000003FFFFFF0
3FFFFFF03FFFFFF07FFFFFE07FFFFFC07FFFFF807FFFFF0070000E0070000E0070001C00E00038
00E0007000E000E0000000E0000001C000000380000007800000078000000F0000000F0000001F
0000001F0000003F0000003E0000003E0000007E0000007E0000007E0000007E000000FE000000
FE000000FE000000FE000000FE000000FE000000FE000000FE0000007C0000003800001C297CA8
22>I<003FC00001FFF00003FFFC0007C07E000F003F001E001F001E000F803E000F803E000F80
3F000F803F000F803FC00F003FF01F001FFC1E001FFE3C000FFFF80007FFE00003FFF80001FFFC
0001FFFE0007FFFF000F0FFF801E03FFC03C01FFC07C007FE078001FE0F80007E0F80007E0F800
03E0F80003E0F80003E0F80003C07C0003C07C0007803F000F001FC03E000FFFFC0003FFF80000
7FC0001B277DA622>I<007F800001FFF00007FFF8000FE0FC001F807E003F803F007F003F007F
001F80FF001F80FF001FC0FF001FC0FF001FC0FF001FE0FF001FE0FF001FE0FF001FE07F001FE0
7F003FE03F003FE01F807FE00F807FE007C1DFE003FF9FE0007E1FE000001FE000001FC000001F
C000001FC000003F801F003F803F803F003F803F003F807E003F807C001F01F8001E03F0000FFF
E00007FF800001FE00001B277DA622>I<000003800000000007C00000000007C0000000000FE0
000000000FE0000000000FE0000000001FF0000000001FF0000000003FF8000000003FF8000000
003FF80000000073FC0000000073FC00000000F3FE00000000E1FE00000000E1FE00000001C0FF
00000001C0FF00000003C0FF80000003807F80000007807FC0000007003FC0000007003FC00000
0E003FE000000E001FE000001E001FF000001C000FF000001FFFFFF000003FFFFFF800003FFFFF
F80000780007FC0000700003FC0000700003FC0000E00001FE0000E00001FE0001E00001FF0001
C00000FF0001C00000FF00FFFE001FFFFEFFFE001FFFFEFFFE001FFFFE2F297EA834>65
D<FFFFFFF80000FFFFFFFF8000FFFFFFFFC00003F8001FF00003F8000FF80003F80007FC0003F8
0003FC0003F80003FC0003F80003FE0003F80001FE0003F80001FE0003F80001FE0003F80003FE
0003F80003FC0003F80003FC0003F80007F80003F8000FF00003F8001FE00003F800FFC00003FF
FFFE000003FFFFFFE00003F80007F00003F80003FC0003F80001FE0003F80001FE0003F80000FF
0003F80000FF0003F80000FF8003F80000FF8003F80000FF8003F80000FF8003F80000FF8003F8
0000FF8003F80000FF0003F80001FF0003F80003FE0003F80007FC0003F8001FF800FFFFFFFFF0
00FFFFFFFFC000FFFFFFFE000029297DA831>I<00003FF001800003FFFE0380000FFFFF878000
3FF007DF8000FF8001FF8001FE00007F8003FC00003F8007F000001F800FF000000F801FE00000
07801FE0000007803FC0000007803FC0000003807FC0000003807F80000003807F8000000000FF
8000000000FF8000000000FF8000000000FF8000000000FF8000000000FF8000000000FF800000
0000FF8000000000FF80000000007F80000000007F80000000007FC0000003803FC0000003803F
C0000003801FE0000003801FE0000007000FF00000070007F000000E0003FC00001E0001FE0000
3C0000FF8000F800003FF007E000000FFFFFC0000003FFFF000000003FF8000029297CA832>I<
FFFFFFF80000FFFFFFFF8000FFFFFFFFE00003FC001FF80003FC0007FC0003FC0001FE0003FC00
00FF0003FC00007F8003FC00003FC003FC00001FC003FC00001FE003FC00001FE003FC00000FF0
03FC00000FF003FC00000FF003FC00000FF003FC00000FF803FC00000FF803FC00000FF803FC00
000FF803FC00000FF803FC00000FF803FC00000FF803FC00000FF803FC00000FF803FC00000FF8
03FC00000FF003FC00000FF003FC00000FF003FC00001FE003FC00001FE003FC00001FC003FC00
003FC003FC00007F8003FC00007F0003FC0001FE0003FC0003FC0003FC001FF800FFFFFFFFE000
FFFFFFFF8000FFFFFFFC00002D297DA835>I<FFFFFFFFE0FFFFFFFFE0FFFFFFFFE003FC001FE0
03FC0007F003FC0001F003FC0001F003FC0000F003FC00007003FC00007003FC00007003FC01C0
7803FC01C03803FC01C03803FC01C03803FC03C00003FC03C00003FC0FC00003FFFFC00003FFFF
C00003FFFFC00003FC0FC00003FC03C00003FC03C00003FC01C00E03FC01C00E03FC01C00E03FC
01C01C03FC00001C03FC00001C03FC00001C03FC00003C03FC00003803FC00007803FC0000F803
FC0001F803FC0003F803FC001FF8FFFFFFFFF0FFFFFFFFF0FFFFFFFFF027297DA82D>I<FFFFFC
FFFFFCFFFFFC01FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE00
01FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE00
01FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE00FFFFFCFFFFFC
FFFFFC16297EA81A>73 D<01FFFFF001FFFFF001FFFFF00001FE000001FE000001FE000001FE00
0001FE000001FE000001FE000001FE000001FE000001FE000001FE000001FE000001FE000001FE
000001FE000001FE000001FE000001FE000001FE000001FE000001FE000001FE000001FE000001
FE000001FE000001FE000001FE001801FE007E01FE00FF01FE00FF01FE00FF01FE00FF01FC007E
03F8007C03F0003E0FE0000FFFC00003FE00001C297DA824>I<FFFFF001FFFCFFFFF001FFFCFF
FFF001FFFC03FC00001E0003FC00003C0003FC0000780003FC0000F00003FC0001E00003FC0003
C00003FC0007000003FC001E000003FC003C000003FC0078000003FC00F0000003FC01E0000003
FC0380000003FC07C0000003FC1FC0000003FC3FE0000003FC7FF0000003FCFFF8000003FDE7F8
000003FF83FC000003FF01FE000003FE01FF000003FC00FF000003FC007F800003FC003FC00003
FC003FC00003FC001FE00003FC000FF00003FC000FF80003FC0007F80003FC0003FC0003FC0001
FE0003FC0001FF0003FC0000FF0003FC00007F80FFFFF00FFFFEFFFFF00FFFFEFFFFF00FFFFE2F
297DA836>I<FFFFFC0000FFFFFC0000FFFFFC000003FC00000003FC00000003FC00000003FC00
000003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC
00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003
FC00000003FC00000003FC0001C003FC0001C003FC0001C003FC0001C003FC0003C003FC000380
03FC00038003FC00078003FC00078003FC000F8003FC000F8003FC001F8003FC007F8003FC01FF
00FFFFFFFF00FFFFFFFF00FFFFFFFF0022297DA829>I<FFFE0000001FFFC0FFFE0000001FFFC0
FFFF0000003FFFC003FF0000003FF00003FF0000003FF00003BF80000077F00003BF80000077F0
00039FC00000E7F000039FC00000E7F000038FE00001C7F000038FE00001C7F0000387F0000387
F0000387F0000387F0000387F0000387F0000383F8000707F0000383F8000707F0000381FC000E
07F0000381FC000E07F0000380FE001C07F0000380FE001C07F0000380FF003807F00003807F00
3807F00003807F003807F00003803F807007F00003803F807007F00003801FC0E007F00003801F
C0E007F00003800FE1C007F00003800FE1C007F00003800FE1C007F000038007F38007F0000380
07F38007F000038003FF0007F000038003FF0007F000038001FE0007F000038001FE0007F00003
8000FC0007F000038000FC0007F000FFFE00FC01FFFFC0FFFE007801FFFFC0FFFE007801FFFFC0
3A297DA841>I<FFFC0000FFFEFFFE0000FFFEFFFF0000FFFE03FF8000038003FF8000038003BF
C0000380039FE0000380039FF0000380038FF80003800387F80003800383FC0003800381FE0003
800381FF0003800380FF80038003807FC0038003803FC0038003801FE0038003800FF003800380
0FF80380038007FC0380038003FC0380038001FE0380038000FF0380038000FF83800380007FC3
800380003FE3800380001FE3800380000FF38003800007FB8003800007FF8003800003FF800380
0001FF8003800000FF80038000007F80038000007F80038000003F80038000001F80038000000F
80FFFE00000780FFFE00000380FFFE000003802F297DA836>I<0000FFE000000007FFFC000000
3FC07F8000007F001FC00001FC0007F00003F80003F80007F00001FC000FF00001FE001FE00000
FF001FE00000FF003FC000007F803FC000007F807FC000007FC07F8000003FC07F8000003FC07F
8000003FC0FF8000003FE0FF8000003FE0FF8000003FE0FF8000003FE0FF8000003FE0FF800000
3FE0FF8000003FE0FF8000003FE0FF8000003FE0FF8000003FE07F8000003FC07FC000007FC07F
C000007FC03FC000007F803FC000007F801FE00000FF001FE00000FF000FF00001FE0007F00001
FC0003F80003F80001FC0007F00000FF001FE000003FC07F8000000FFFFE00000000FFE000002B
297CA834>I<FFFFFFF800FFFFFFFF00FFFFFFFFC003FC003FE003FC000FF003FC0007F803FC00
07FC03FC0003FC03FC0003FE03FC0003FE03FC0003FE03FC0003FE03FC0003FE03FC0003FE03FC
0003FE03FC0003FC03FC0007FC03FC0007F803FC000FF003FC003FE003FFFFFF8003FFFFFE0003
FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC000000
03FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC0000
00FFFFF00000FFFFF00000FFFFF0000027297DA82F>I<FFFFFFE00000FFFFFFFE0000FFFFFFFF
800003FC007FE00003FC000FF00003FC0007F80003FC0007FC0003FC0003FC0003FC0003FE0003
FC0003FE0003FC0003FE0003FC0003FE0003FC0003FE0003FC0003FE0003FC0003FC0003FC0007
F80003FC0007F80003FC001FE00003FC007FC00003FFFFFE000003FFFFF0000003FC00FC000003
FC007F000003FC003F800003FC003F800003FC001FC00003FC001FE00003FC001FE00003FC001F
E00003FC001FE00003FC001FE00003FC001FF00003FC001FF00003FC001FF00003FC001FF00703
FC001FF80703FC000FF80703FC0007F80EFFFFF003FE1CFFFFF001FFF8FFFFF0003FF030297DA8
34>82 D<007F806003FFF0E007FFF9E00F807FE01F001FE03E0007E07C0003E07C0001E0FC0001
E0FC0001E0FC0000E0FE0000E0FE0000E0FF000000FFC000007FFE00007FFFE0003FFFFC001FFF
FE000FFFFF8007FFFFC003FFFFE000FFFFE00007FFF000007FF000000FF8000007F8000003F860
0001F8E00001F8E00001F8E00001F8F00001F0F00001F0F80003F0FC0003E0FF0007C0FFE01F80
F3FFFF00E0FFFE00C01FF0001D297CA826>I<7FFFFFFFFFC07FFFFFFFFFC07FFFFFFFFFC07F80
3FC03FC07E003FC007C078003FC003C078003FC003C070003FC001C0F0003FC001E0F0003FC001
E0E0003FC000E0E0003FC000E0E0003FC000E0E0003FC000E0E0003FC000E000003FC000000000
3FC0000000003FC0000000003FC0000000003FC0000000003FC0000000003FC0000000003FC000
0000003FC0000000003FC0000000003FC0000000003FC0000000003FC0000000003FC000000000
3FC0000000003FC0000000003FC0000000003FC0000000003FC0000000003FC0000000003FC000
0000003FC00000007FFFFFE000007FFFFFE000007FFFFFE0002B287EA730>I<FFFFF001FFFCFF
FFF001FFFCFFFFF001FFFC03FC0000070003FC0000070003FC0000070003FC0000070003FC0000
070003FC0000070003FC0000070003FC0000070003FC0000070003FC0000070003FC0000070003
FC0000070003FC0000070003FC0000070003FC0000070003FC0000070003FC0000070003FC0000
070003FC0000070003FC0000070003FC0000070003FC0000070003FC0000070003FC0000070003
FC0000070003FC0000070003FC0000070003FC0000070001FC00000E0001FE00000E0000FE0000
1C00007E00001C00007F00003800003FC000F000000FF007E0000007FFFFC0000001FFFF000000
001FF800002E297DA835>I<FFFFF0003FFF80FFFFF0003FFF80FFFFF0003FFF8003FE000001E0
0001FE000001C00001FF000003C00000FF000003800000FF0000038000007F8000070000007F80
00070000007FC0000F0000003FC0000E0000003FE0001E0000001FE0001C0000001FF0001C0000
000FF000380000000FF0003800000007F8007000000007F8007000000007FC00F000000003FC00
E000000003FE01E000000001FE01C000000001FF01C000000000FF038000000000FF0380000000
00FF8780000000007F8700000000007FCF00000000003FCE00000000003FFE00000000001FFC00
000000001FFC00000000000FF800000000000FF800000000000FF8000000000007F00000000000
07F0000000000003E0000000000003E0000000000001C000000031297FA834>I<FFFFE07FFFF0
07FFF0FFFFE07FFFF007FFF0FFFFE07FFFF007FFF003FC0001FE00001C0003FC0001FE00001C00
01FE0001FF0000380001FE0000FF0000380001FF0000FF0000780000FF0000FF8000700000FF00
00FF8000700000FF8000FF8000F000007F8001FFC000E000007F8001FFC000E000003FC003FFE0
01C000003FC0039FE001C000003FE0039FE003C000001FE0070FF0038000001FE0070FF0038000
001FF00F0FF0078000000FF00E07F8070000000FF00E07F80700000007F81E07FC0E00000007F8
1C03FC0E00000007FC1C03FC1E00000003FC3801FE1C00000003FC3801FE1C00000001FE7801FF
3800000001FE7000FF3800000001FE7000FF3800000000FFF000FFF000000000FFE0007FF00000
0000FFE0007FF0000000007FC0003FE0000000007FC0003FE0000000003FC0003FC0000000003F
80001FC0000000003F80001FC0000000001F80001F80000000001F00000F80000000001F00000F
80000000000E00000700000044297FA847>I<01FF800007FFF0000F81F8001FC07E001FC07E00
1FC03F000F803F8007003F8000003F8000003F8000003F80000FFF8000FFFF8007FC3F800FE03F
803F803F803F003F807F003F80FE003F80FE003F80FE003F80FE003F807E007F807F00DF803F83
9FFC0FFF0FFC01FC03FC1E1B7E9A21>97 D<FFE0000000FFE0000000FFE00000000FE00000000F
E00000000FE00000000FE00000000FE00000000FE00000000FE00000000FE00000000FE0000000
0FE00000000FE00000000FE00000000FE1FE00000FE7FF80000FFE07E0000FF801F0000FF000F8
000FE000FC000FE000FE000FE0007F000FE0007F000FE0007F000FE0007F800FE0007F800FE000
7F800FE0007F800FE0007F800FE0007F800FE0007F800FE0007F000FE0007F000FE0007F000FE0
00FE000FE000FC000FF001F8000FF803F0000F9E07E0000F07FF80000E01FC0000212A7EA926>
I<001FF80000FFFE0003F01F0007E03F800FC03F801F803F803F801F007F800E007F0000007F00
0000FF000000FF000000FF000000FF000000FF000000FF000000FF0000007F0000007F0000007F
8000003F8001C01F8001C00FC0038007E0070003F01E0000FFFC00001FE0001A1B7E9A1F>I<00
003FF80000003FF80000003FF800000003F800000003F800000003F800000003F800000003F800
000003F800000003F800000003F800000003F800000003F800000003F800000003F800001FE3F8
0000FFFBF80003F03FF80007E00FF8000FC007F8001F8003F8003F8003F8007F0003F8007F0003
F8007F0003F800FF0003F800FF0003F800FF0003F800FF0003F800FF0003F800FF0003F800FF00
03F8007F0003F8007F0003F8007F0003F8003F8003F8001F8003F8000F8007F80007C00FF80003
F03BFF8000FFF3FF80003FC3FF80212A7EA926>I<003FE00001FFF80003F07E0007C01F000F80
1F801F800F803F800FC07F000FC07F0007C07F0007E0FF0007E0FF0007E0FFFFFFE0FFFFFFE0FF
000000FF000000FF0000007F0000007F0000007F0000003F8000E01F8000E00FC001C007E00380
03F81F0000FFFE00001FF0001B1B7E9A20>I<0007F0003FFC00FE3E01F87F03F87F03F07F07F0
7F07F03E07F00007F00007F00007F00007F00007F00007F000FFFFC0FFFFC0FFFFC007F00007F0
0007F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007F0
0007F00007F00007F00007F00007F00007F0007FFF807FFF807FFF80182A7EA915>I<00FF81F0
03FFE7F80FC1FE7C1F80FC7C1F007C383F007E107F007F007F007F007F007F007F007F007F007F
007F007F003F007E001F007C001F80FC000FC1F8001FFFE00018FF800038000000380000003C00
00003E0000003FFFF8001FFFFF001FFFFF800FFFFFC007FFFFE01FFFFFF03E0007F07C0001F8F8
0000F8F80000F8F80000F8F80000F87C0001F03C0001E01F0007C00FC01F8003FFFE00007FF000
1E287E9A22>I<FFE0000000FFE0000000FFE00000000FE00000000FE00000000FE00000000FE0
0000000FE00000000FE00000000FE00000000FE00000000FE00000000FE00000000FE00000000F
E00000000FE07F00000FE1FFC0000FE787E0000FEE03F0000FF803F0000FF803F8000FF003F800
0FF003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8
000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003
F8000FE003F800FFFE3FFF80FFFE3FFF80FFFE3FFF80212A7DA926>I<07000FC01FE03FE03FE0
3FE01FE00FC007000000000000000000000000000000FFE0FFE0FFE00FE00FE00FE00FE00FE00F
E00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE0FFFEFFFEFFFE0F2B
7DAA14>I<FFE00000FFE00000FFE000000FE000000FE000000FE000000FE000000FE000000FE0
00000FE000000FE000000FE000000FE000000FE000000FE000000FE01FFC0FE01FFC0FE01FFC0F
E007800FE00F000FE01E000FE03C000FE078000FE0E0000FE3C0000FE7C0000FEFE0000FFFE000
0FFFF0000FF3F8000FE3F8000FC1FC000FC0FE000FC07F000FC07F000FC03F800FC01FC00FC00F
C00FC00FE0FFFC3FFEFFFC3FFEFFFC3FFE1F2A7EA924>107 D<FFE0FFE0FFE00FE00FE00FE00F
E00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE0
0FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE0FFFEFFFEFFFE0F2A7DA914>I<
FFC07F800FF000FFC1FFE03FFC00FFC383F0707E000FC603F8C07F000FCC01F9803F000FD801FF
003F800FF001FE003F800FF001FE003F800FE001FC003F800FE001FC003F800FE001FC003F800F
E001FC003F800FE001FC003F800FE001FC003F800FE001FC003F800FE001FC003F800FE001FC00
3F800FE001FC003F800FE001FC003F800FE001FC003F800FE001FC003F800FE001FC003F800FE0
01FC003F800FE001FC003F80FFFE1FFFC3FFF8FFFE1FFFC3FFF8FFFE1FFFC3FFF8351B7D9A3A>
I<FFC07F0000FFC1FFC000FFC787E0000FCE03F0000FD803F0000FD803F8000FF003F8000FF003
F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE0
03F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000F
E003F800FFFE3FFF80FFFE3FFF80FFFE3FFF80211B7D9A26>I<003FE00001FFFC0003F07E000F
C01F801F800FC03F800FE03F0007E07F0007F07F0007F07F0007F0FF0007F8FF0007F8FF0007F8
FF0007F8FF0007F8FF0007F8FF0007F8FF0007F87F0007F07F0007F03F800FE03F800FE01F800F
C00FC01F8007F07F0001FFFC00003FE0001D1B7E9A22>I<FFE1FE0000FFE7FF8000FFFE07E000
0FF803F0000FF001F8000FE000FC000FE000FE000FE000FF000FE0007F000FE0007F000FE0007F
800FE0007F800FE0007F800FE0007F800FE0007F800FE0007F800FE0007F800FE0007F000FE000
FF000FE000FF000FE000FE000FE001FC000FF001F8000FF803F0000FFE0FE0000FE7FF80000FE1
FC00000FE00000000FE00000000FE00000000FE00000000FE00000000FE00000000FE00000000F
E00000000FE0000000FFFE000000FFFE000000FFFE00000021277E9A26>I<001FC0380000FFF0
780003F838F80007E00DF8000FC007F8001FC007F8003F8003F8007F8003F8007F8003F8007F00
03F800FF0003F800FF0003F800FF0003F800FF0003F800FF0003F800FF0003F800FF0003F8007F
0003F8007F0003F8007F8003F8003F8003F8001F8007F8000FC007F80007E01FF80003F07BF800
00FFF3F800003FC3F800000003F800000003F800000003F800000003F800000003F800000003F8
00000003F800000003F800000003F80000003FFF8000003FFF8000003FFF8021277E9A24>I<FF
C1F0FFC7FCFFCE3E0FD87F0FD87F0FF07F0FF03E0FF01C0FE0000FE0000FE0000FE0000FE0000F
E0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE000FFFF00FFFF00FF
FF00181B7E9A1C>I<03FE300FFFF01E03F03800F0700070F00070F00070F80070FC0000FFE000
7FFE007FFF803FFFE01FFFF007FFF800FFF80003FC0000FC60007CE0003CF0003CF00038F80038
FC0070FF01E0F7FFC0C1FF00161B7E9A1B>I<00700000700000700000700000F00000F00000F0
0001F00003F00003F00007F0001FFFF0FFFFF0FFFFF007F00007F00007F00007F00007F00007F0
0007F00007F00007F00007F00007F00007F00007F00007F03807F03807F03807F03807F03807F0
3803F03803F87001F86000FFC0001F8015267FA51B>I<FFE03FF800FFE03FF800FFE03FF8000F
E003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F800
0FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8
000FE003F8000FE003F8000FE007F80007E007F80007E00FF80003F03BFF8001FFF3FF80003FC3
FF80211B7D9A26>I<FFFE03FF80FFFE03FF80FFFE03FF8007F000700007F000700007F800F000
03F800E00003FC01E00001FC01C00001FC01C00000FE03800000FE038000007F070000007F0700
00007F8F0000003F8E0000003FDE0000001FDC0000001FDC0000000FF80000000FF80000000FF8
00000007F000000007F000000003E000000003E000000001C00000211B7F9A24>I<FFFE7FFC0F
FEFFFE7FFC0FFEFFFE7FFC0FFE0FE007E000E007F003F001C007F003F001C007F807F803C003F8
07F8038003F807F8038001FC0EFC070001FC0EFC070001FE1EFC0F0000FE1C7E0E0000FE1C7E0E
0000FF383F1E00007F383F1C00007F783F3C00003FF01FB800003FF01FB800003FF01FF800001F
E00FF000001FE00FF000000FC007E000000FC007E000000FC007E00000078003C00000078003C0
002F1B7F9A32>I<FFFC0FFF00FFFC0FFF00FFFC0FFF0007F003C00003F807800001FC07800000
FE0F000000FF1E0000007F3C0000003FF80000001FF00000000FF00000000FF000000007F00000
0007F80000000FFC0000001FFE0000001EFE0000003C7F000000783F800000F01FC00001E01FE0
0001C00FE00003C007F000FFF01FFF80FFF01FFF80FFF01FFF80211B7F9A24>I<FFFE03FF80FF
FE03FF80FFFE03FF8007F000700007F000700007F800F00003F800E00003FC01E00001FC01C000
01FC01C00000FE03800000FE038000007F070000007F070000007F8F0000003F8E0000003FDE00
00001FDC0000001FDC0000000FF80000000FF80000000FF800000007F000000007F000000003E0
00000003E000000001C000000001C000000003800000000380000038078000007C07000000FE0F
000000FE0E000000FE1E000000FE3C0000007C780000003FE00000000FC000000021277F9A24>
I<FFFFFFFF80FFFFFFFF802102809122>123 D<FFFFFFFFFFFFFFFFF0FFFFFFFFFFFFFFFFF044
02809145>I E /Fs 57 122 df<0000FC0000038300000E0080001C0380003807800070078000
7003000070000000E0000000E0000000E0000000E0000000E0000000E000003FFFFE0001C00E00
01C00E0001C00E0001C00E0001C00E0003801C0003801C0003801C0003801C0003801C0003801C
000700380007003800070038000700380007003800070038000E0070000F007800FFC3FF001923
7FA21B>12 D<FFE0FFE00B027D8B10>45 D<3078F8787005057C840E>I<0004000C007C079C00
1C001C00380038003800380038003800700070007000700070007000E000E000E000E000E000E0
01C001C001C001C001C001C003C003C0FFFE0F217CA018>49 D<001FC000607000803801003C02
003C04001E04001E0F001E0F801E0F801E0F003E06003C00003C0000780000780000F00001E000
01C0000380000700000E0000180000300000600000C0000180100300100400100800201000203F
FFE07FFFC0FFFFC017217EA018>I<001F8000E0E00100700200780400780780780F80780F8078
0700F80000F00000F00001E00001C0000380000E0000FC000007000003800003C00001E00001E0
0001E00001F03001F07803E0F803E0F803E0F003C08007C0400780400F00200E00183C0007E000
15227DA018>I<0000400000C00001C00001C00003C00005C0000F80000B800013800023800043
8000C380008700010700020700060700040700080700100E00300E00200E00400E00800E00FFFF
F8001C00001C00001C00001C00001C00001C00003800003C0007FFC015217DA018>I<00800801
E03801FFF001FFE001FF80017E00010000020000020000020000020000020000023E0004C38005
01C00600C00400E00000E00000F00000F00000F00000F00000F07000F0F801E0F001E0E001E080
01C0400380400780400700200C0018380007E00015227DA018>I<0007C000183000601000C038
0180780380780700700E00000E00001C00001C00003C00003C7C003987007A03807C01807C01C0
7801C0F801E0F801E0F001E0F001E0F001E0F001E0F003C0F003C0E003C0E00380700700700700
300E00381C001C300007C00015227CA018>I<1000003800003FFFF03FFFE03FFFE06000404000
8040010080020080020000040000080000100000200000200000400000C00000C0000180000180
000380000300000700000700000F00000F00000E00001E00001E00001E00001E00003C00003C00
003C0000180000142379A118>I<0000040000000006000000000E000000001E000000001E0000
00003E000000003F000000004F000000004F000000008F000000008F000000010F000000010780
000002078000000207800000040780000004078000000807C000000803C000001003C000001003
C000002003C000003FFFE000004001E000004001E000008001E000008001E000010001E0000100
00F000020000F000060000F000040000F0000C0000F0003E0001F800FF800FFF8021237EA225>
65 D<03FFFFE0003E0078003C003C003C001E003C001F003C000F003C000F0078000F0078001F
0078001F0078001F0078003E0078003C00F0007800F001F000F007C000FFFFC000F001F000F000
F801E0007801E0007C01E0003C01E0003E01E0003E01E0003E03C0003C03C0007C03C0007C03C0
00F803C000F003C001E0078003C007C00F80FFFFFC0020227EA123>I<0001FC02000F0306003C
008C0070005C00E0003C01C0003C0380001C0700001C0F0000181E0000181E0000083E0000083C
0000087C0000087C000000F8000000F8000000F8000000F8000000F8000000F0000000F0000000
F0000000F0000020F0000020F0000040F80000407800004078000080380001003C0001001C0002
000E000C000700100001C0E000003F00001F247AA223>I<03FFFFC000003E00F000003C003C00
003C001E00003C000E00003C000F00003C0007800078000780007800078000780007C000780003
C000780003C000780007C000F00007C000F00007C000F00007C000F00007C000F00007C000F000
07C001E0000F8001E0000F8001E0000F8001E0000F0001E0001F0001E0001E0003C0001E0003C0
003C0003C000780003C000700003C000E00003C001C000078007800007C01E0000FFFFF8000022
227EA125>I<03FFFFFF003E001F003C000E003C0006003C0002003C0002003C00020078000200
7800020078000200780202007802000078060000F0040000F0040000F01C0000FFFC0000F01C00
00F00C0001E0080001E0080001E0080001E0080201E0000401E0000403C0000403C0000803C000
0803C0001803C0001003C00030078000F007C003E0FFFFFFE020227EA121>I<03FFFFFF003E00
1F003C000E003C0006003C0002003C0002003C0002007800020078000200780002007802020078
02000078060000F0040000F0040000F01C0000FFFC0000F01C0000F00C0001E0080001E0080001
E0080001E0080001E0000001E0000003C0000003C0000003C0000003C0000003C0000003C00000
07C0000007C00000FFFE000020227EA120>I<0000FE0100070183001C00460070002E00E0001E
01C0001E0380000E0780000E0F00000C1E00000C1E0000043E0000043C0000047C0000047C0000
00F8000000F8000000F8000000F8000000F8000000F0000000F0003FFFF00001F0F00000F0F000
00F0F00000F0F80001E0780001E0780001E0380001E01C0001E00E0003E0060004C0038008C001
E07040003F800020247AA226>I<03FFE0FFF8003E000F80003C000F00003C000F00003C000F00
003C000F00003C000F000078001E000078001E000078001E000078001E000078001E000078001E
0000F0003C0000F0003C0000F0003C0000FFFFFC0000F0003C0000F0003C0001E000780001E000
780001E000780001E000780001E000780001E000780003C000F00003C000F00003C000F00003C0
00F00003C000F00003C000F000078001E00007C001F000FFFC3FFF0025227EA125>I<03FFF000
3E00003C00003C00003C00003C00003C0000780000780000780000780000780000780000F00000
F00000F00000F00000F00000F00001E00001E00001E00001E00001E00001E00003C00003C00003
C00003C00003C00003C00007800007C000FFFC0014227EA112>I<03FFE00FF8003E0007E0003C
000380003C000200003C000400003C000800003C00100000780020000078008000007801000000
780200000078040000007808000000F018000000F038000000F07C000000F13C000000F23E0000
00F41E000001E81F000001F00F000001E00F000001E007800001E007800001E003C00003C003C0
0003C001E00003C001E00003C000F00003C000F00003C000F800078000F80007C000FC00FFFC07
FF8025227EA126>75 D<03FFF000003E0000003C0000003C0000003C0000003C0000003C000000
780000007800000078000000780000007800000078000000F0000000F0000000F0000000F00000
00F0000000F0000001E0000001E0000001E0000001E0002001E0002001E0004003C0004003C000
4003C000C003C0008003C0018003C003800780078007C01F00FFFFFF001B227EA11E>I<03FE00
000FF8003E00001F80002F00001F00002F00002F00002F00002F00002F00004F00002F00004F00
004780009E00004780009E00004780011E00004780011E00004780021E000043C0041E000083C0
043C000083C0083C000083C0083C000083C0103C000081E0103C000081E0203C000101E0207800
0101E04078000101E04078000100F08078000100F08078000100F10078000200F100F0000200F2
00F00002007C00F00002007C00F00002007800F00006007800F00006007001E0001F003001F000
FFE0203FFF002D227EA12D>I<03FE001FF8003E0003C0003F000180002F000100002F80010000
278001000027C001000043C002000043C002000041E002000041E002000040F002000040F00200
0080780400008078040000803C040000803C040000801E040000801E040001000F080001000F08
0001000F88000100078800010007C800010003C800020003D000020001F000020001F000020000
F000020000F000060000700006000060001F00002000FFE000200025227EA125>I<0001FC0000
0E0700003801C0007000E001E000F003C00078078000780700003C0F00003C1E00003C1E00003E
3C00003E3C00003E7C00003E7C00003EF800003EF800003EF800003EF800003EF800003EF80000
7CF000007CF000007CF00000F8F00000F8F80000F0F80001F0780001E0780003C0780007803C00
07001C000E000E001C000700780003C1E000007F00001F247AA226>I<03FFFFC0003E00F0003C
0078003C003C003C003E003C001E003C003E0078003E0078003E0078003E0078003E0078003C00
78007C00F0007800F000F000F001E000F0078000FFFE0000F0000001E0000001E0000001E00000
01E0000001E0000001E0000003C0000003C0000003C0000003C0000003C0000003C00000078000
0007C00000FFFC00001F227EA121>I<03FFFF0000003E01E000003C007800003C003C00003C00
3C00003C003E00003C003E000078003E000078003E000078003E000078003E000078007C000078
00780000F000F00000F001E00000F007800000FFFC000000F00C000000F007000001E007000001
E003800001E003800001E003C00001E003C00001E003C00003C007C00003C007C00003C007C000
03C007C00003C007C04003C007C080078007C08007C003E100FFFC01E3000000007C0022237EA1
24>82 D<000FC0800030318000C00B0001800700038007000300030007000300070003000E0002
000E0002000F0002000F0000000F0000000F80000007E0000007FE000003FFC00001FFE000007F
F000000FF8000000F8000000780000003C0000003C0000003C0020003C00400038004000380040
003800600030006000700060006000F000C000E8018000C607000081FC000019247DA21B>I<1F
FFFFFE3C03E03E3803C00C3003C0042003C0046003C0044003C00440078004C007800480078004
800780040007800000078000000F0000000F0000000F0000000F0000000F0000000F0000001E00
00001E0000001E0000001E0000001E0000001E0000003C0000003C0000003C0000003C0000003C
0000003C0000007C000000FC00003FFFF0001F227AA123>I<FFF807FE0F8000F00F0000600F00
00400F0000400F0000400F0000401E0000801E0000801E0000801E0000801E0000801E0000803C
0001003C0001003C0001003C0001003C0001003C00010078000200780002007800020078000200
78000200780004007800040078000400780008007800080038001000380020001C0040000E0080
000703000000FC00001F2378A125>I<FFF8007FE00FC0001F000F80000E000780000C00078000
08000780001000078000100007C000200003C000200003C000400003C000400003C000800001E0
00800001E001000001E003000001E002000001F004000000F004000000F008000000F008000000
F010000000F81000000078200000007820000000784000000078C00000007C800000003D000000
003D000000003E000000003E000000001C000000001C0000000018000000001800000023237AA1
25>I<FFF83FFC03FF1F8007E000F80F0003C000700F0003C000200F0003C000600F8003E00040
078001E00040078003E00080078003E00080078005E00100078005E00100078009E0020007C009
F0020003C010F0040003C010F0040003C020F0080003C020F0080003C040F0100003C040F01000
01E08078200001E08078200001E10078400001E10078400001E20078800001E20078800001E400
79000000F4003D000000F8003E000000F8003E000000F8003C000000F0003C000000F0003C0000
00E00038000000600018000000400010000030237AA132>I<03FFE01FF8003F800FC0001F0007
00001F000600000F000400000F80080000078010000007C020000003C060000003E040000001E0
80000001F100000000F200000000FC000000007C000000007C000000003C000000003E00000000
5E000000009F000000010F000000030F80000002078000000407C000000803C000001003E00000
2001E000006001F000004000F000008000F80001000078000300007C001F8000FC00FFE007FFC0
25227FA125>I<FFF8003FE00FC0001F000F80000C00078000080007C000100003C000100003E0
00200001E000400001F000800000F001800000F001000000F80200000078040000007C0C000000
3C080000003E100000001E200000001F400000001FC00000000F800000000F000000000F000000
000F000000000F000000000E000000001E000000001E000000001E000000001E000000001E0000
00001C000000003C000000003E00000007FFE0000023227AA125>I<03FC000606000F03000F03
800601800001C0000380000380007F8003E3800F03801C0380380700780700F00708F00708F00F
08F00F08F017107867A01F83C015157D9418>97 D<0780003F8000070000070000070000070000
0700000700000E00000E00000E00000E00000E00000E00001C3F001CC1801D00C01E00601C0070
1C00703800783800783800783800783800783800787000F07000F07000E07001E07001C0700380
E80700C61C0081F00015237BA21B>I<00FF000381C00603C00C03C01C01803800007800007000
00F00000F00000F00000F00000F00000E00000F00000F000807001007001003806001C180007E0
0012157C9416>I<00001E0000FE00001C00001C00001C00001C00001C00001C00003800003800
003800003800003800003800FC700383700700F00C00F01C00703800707800E07000E0F000E0F0
00E0F000E0F000E0E001C0E001C0E001C0E001C07003C07003C0380F801C33C007C3F817237CA2
1B>I<00FE000383800701C00C00E01C00E03800E07800E07000E0FFFFE0F00000F00000F00000
F00000E00000E00000F000407000803000801803000E0C0003F00013157D9416>I<0003E0000E
30001C700038F000307000700000700000700000E00000E00000E00000E00000E00000E0003FFE
0001C00001C00001C00001C00001C0000380000380000380000380000380000380000700000700
000700000700000700000700000E00000F0000FFF00014237FA20F>I<00000780001F88800070
D18000E0E18001C0700003C0700003C070000780F0000780F0000780F0000780E0000381E00001
81C00002C30000027E00000400000004000000040000000600000007FF800007FFE00007FFF000
1C007800300018006000180060001800C0001800C0001800C0003000600060003000C0001C0780
0003FC00001921809518>I<00780003F80000700000700000700000700000700000700000E000
00E00000E00000E00000E00000E00001C3F001CC1801D00C01E00E01E00E01C00E03C01C03801C
03801C03801C03801C03801C0700380700380700380700380700380700380E00700F0078FFE7FF
18237FA21B>I<007000F001F000F000E00000000000000000000000000000000001C00FC001C0
01C001C001C00380038003800380038003800700070007000700070007000E000F00FFE00C227F
A10E>I<000300000780000F80000F800007000000000000000000000000000000000000000000
00000000000E0000FE00001E00000E00000E00000E00001C00001C00001C00001C00001C00001C
0000380000380000380000380000380000380000700000700000700000700000700000700000E0
0000E00060E000F1C000F18000E300003E0000112C83A10F>I<0078000003F800000070000000
7000000070000000700000007000000070000000E0000000E0000000E0000000E0000000E00000
00E0000001C07FC001C03E0001C0380001C0300001C0400001C080000383000003840000038E00
0003BE000003CF00000387000007078000070380000701C0000701C0000700E0000700F0000E00
F0000F00F800FFE3FE001A237FA21A>I<007803F800700070007000700070007000E000E000E0
00E000E000E001C001C001C001C001C001C0038003800380038003800380070007000700070007
0007000E000F00FFE00D237FA20E>I<01C1F807E01FC60C183001D80E603801E007801C01E007
801C01C007001C03C00F003803800E003803800E003803800E003803800E003803800E00380700
1C007007001C007007001C007007001C007007001C007007001C00700E003800E00F003C00F0FF
E3FF8FFE27157F942A>I<01C3F01FCC1801D00C01E00E01E00E01C00E03C01C03801C03801C03
801C03801C03801C0700380700380700380700380700380700380E00700F0078FFE7FF18157F94
1B>I<007E000383800600C00C00E01C0070380070780078700078F00078F00078F00078F00078
E000F0E000F0E000E0F001E07001C07003803807001C1C0007F00015157D9418>I<00E1F8000F
E60C0000E8060000F0070000E0038000E0038001C003C001C003C001C003C001C003C001C003C0
01C003C003800780038007800380070003800F0003801E0003801C00074038000730E000070F80
000700000007000000070000000E0000000E0000000E0000000E0000000E0000001E000000FFC0
00001A1F80941B>I<01C7C01FC8E001D1E001E1E001E0C001C00003C000038000038000038000
0380000380000700000700000700000700000700000700000E00000F0000FFF00013157F9413>
114 D<01F906070C0318031801180118021C001FE00FF807FC007E000E4006400640066006600C
E008D83087C010157E9413>I<008000800080018001000300030007000F001F00FFF80E000E00
0E000E000E001C001C001C001C001C001C0038103810381038103810382038201C4007800D1F7C
9E13>I<0E0070FE07F00E00F00E00700E00700E00701C00E01C00E01C00E01C00E01C00E01C00
E03801C03801C03801C03801C03803C03805C0380B801C13C007E3F815157C941B>I<FFC0FE1E
00780E00300E00200E00400E004007008007008007010007030007820003840003840003880003
C80001D00001D00001E00001C00000C00000800017157C941A>I<FFC7FC7F801E01E03E001C00
C018001C01C010000E01E010000E02E020000E02E020000E04E040000E046040000E0860800007
087080000710710000071071000007207200000720320000074034000003C03C00000380380000
03803800000300300000030010000021157C9423>I<1FF83FC003E01E0001C0180000E0100000
E02000007040000078800000390000001E0000001C0000000E0000001F00000037000000638000
00C380000181C0000101E0000200E0000E00F0003E00F800FF03FF001A157F941A>I<0FFC0FE0
01E0078000E0030000E0020000E0040000E0040000700800007008000070100000703000007820
00003840000038400000388000003C8000001D0000001D0000001E0000001C0000000C00000008
00000008000000100000001000000020000000400000F0400000F0800000F1000000C20000003C
0000001B1F80941A>I E /Ft 58 122 df<00001FFC00000001FFFF00000007FFFF8000001FF8
07C000007FC003E00000FF0007F00000FE000FF00001FE000FF00003FC000FF00003FC000FF000
03FC000FF00003FC0007E00003FC0001800003FC0000000003FC0000000003FC0000000003FC00
00000003FC00FFF800FFFFFFFFF800FFFFFFFFF800FFFFFFFFF80003FC0007F80003FC0007F800
03FC0007F80003FC0007F80003FC0007F80003FC0007F80003FC0007F80003FC0007F80003FC00
07F80003FC0007F80003FC0007F80003FC0007F80003FC0007F80003FC0007F80003FC0007F800
03FC0007F80003FC0007F80003FC0007F80003FC0007F80003FC0007F80003FC0007F80003FC00
07F80003FC0007F80003FC0007F80003FC0007F80003FC0007F8007FFFE0FFFFC07FFFE0FFFFC0
7FFFE0FFFFC02A327FB12E>12 D<1F003F807FC0FFE0FFE0FFF0FFF0FFF07FF03FF01F70007000
7000E000E000E001C001C00380038007000E001C00380010000C197A8A17>44
D<FFFFF0FFFFF0FFFFF0FFFFF0FFFFF0FFFFF0FFFFF014077F921B>I<1F003F807FC0FFE0FFE0
FFE0FFE0FFE07FC03F801F000B0B7A8A17>I<000FFC0000007FFF800001FFFFE00003FC0FF000
07F003F8000FE001FC000FE001FC001FC000FE003FC000FF003FC000FF003F80007F007F80007F
807F80007F807F80007F807F80007F80FF80007FC0FF80007FC0FF80007FC0FF80007FC0FF8000
7FC0FF80007FC0FF80007FC0FF80007FC0FF80007FC0FF80007FC0FF80007FC0FF80007FC0FF80
007FC0FF80007FC0FF80007FC0FF80007FC07F80007F807F80007F807F80007F807F80007F803F
80007F003FC000FF003FC000FF001FC000FE001FE001FE000FE001FC0007F807F80003FC0FF000
01FFFFE000007FFF8000000FFC0000222E7DAD29>48 D<0001E0000003E000000FE000007FE000
1FFFE000FFFFE000FFBFE000E03FE000003FE000003FE000003FE000003FE000003FE000003FE0
00003FE000003FE000003FE000003FE000003FE000003FE000003FE000003FE000003FE000003F
E000003FE000003FE000003FE000003FE000003FE000003FE000003FE000003FE000003FE00000
3FE000003FE000003FE000003FE000003FE000003FE000003FE000003FE000003FE000003FE000
7FFFFFF07FFFFFF07FFFFFF01C2E7AAD29>I<003FF00001FFFE0007FFFF800FC07FE01E001FF0
3C000FF87F0007FC7F8007FEFFC007FEFFC003FEFFC003FFFFC003FF7F8003FF7F8003FF3F0003
FF000003FF000003FE000003FE000007FC000007FC00000FF800000FF000001FE000001FC00000
3F8000007F000000FE000001F8000001F0000003E00000078007000F0007001E0007003C000F00
78000E00F0000E01C0001E03FFFFFE07FFFFFE0FFFFFFE1FFFFFFE3FFFFFFE7FFFFFFCFFFFFFFC
FFFFFFFCFFFFFFFC202E7CAD29>I<000FFC0000007FFF800001F01FE00003C00FF000070007F8
000FE007FC000FF007FC001FF007FE001FF807FE001FF807FE001FF807FE001FF807FE000FF007
FC0007E007FC00018007FC0000000FF80000000FF00000001FE00000001FC00000007F8000001F
FE0000001FFC0000001FFF800000001FF000000007F800000003FC00000003FE00000003FF0000
0001FF80000001FF800E0001FFC03F8001FFC07FC001FFC07FC001FFC0FFE001FFC0FFE001FFC0
FFE001FF80FFE001FF80FFC003FF007F8003FF003F0003FE001F0007FC000FE01FF80007FFFFE0
0001FFFF8000001FFC0000222E7DAD29>I<0000007800000000F800000001F800000003F80000
0007F800000007F80000000FF80000001FF80000003FF80000007FF800000077F8000000F7F800
0001E7F8000003C7F800000787F800000707F800000F07F800001E07F800003C07F800007807F8
00007007F80000F007F80001E007F80003C007F800078007F8000F0007F8000F0007F8001E0007
F8003C0007F800780007F800F00007F800FFFFFFFFF0FFFFFFFFF0FFFFFFFFF000000FF8000000
0FF80000000FF80000000FF80000000FF80000000FF80000000FF80000000FF80000000FF80000
0FFFFFF0000FFFFFF0000FFFFFF0242E7EAD29>I<0C0000380FC003F80FFFFFF80FFFFFF00FFF
FFE00FFFFFC00FFFFF800FFFFE000FFFFC000FFFF0000FFF00000F0000000F0000000F0000000F
0000000F0000000F0000000F0000000F0FF8000F7FFF000FFFFFC00FF01FE00F800FF00F0007F8
0E0007FC000003FC000003FE000003FE000003FF000003FF1E0003FF3F0003FF7F8003FFFF8003
FFFFC003FFFFC003FEFF8003FEFF8003FE7F0007FC7C0007F83C000FF01E001FE00FC07FC007FF
FF8001FFFE00003FE000202E7CAD29>I<00007F80000007FFF000001FC07800007F001C0000FC
001E0001F8007E0003F800FF0007F001FF000FF001FF000FE001FF001FE001FF003FE000FE003F
E0007C003FC00000007FC00000007FC00000007FC0000000FFC3FF8000FFC7FFE000FFCFBFF000
FFDC03F800FFF801FC00FFF001FE00FFF000FF00FFE000FF80FFE000FF80FFE000FF80FFC000FF
C0FFC000FFC0FFC000FFC07FC000FFC07FC000FFC07FC000FFC07FC000FFC03FC000FFC03FC000
FF803FC000FF801FE000FF801FE000FF000FE001FE0007F001FC0003F803F80001FC0FF00000FF
FFE000003FFF80000007FC0000222E7DAD29>I<38000000003E000000003FFFFFFFC03FFFFFFF
C03FFFFFFFC03FFFFFFF807FFFFFFF007FFFFFFE007FFFFFFC007FFFFFF8007FFFFFF000780001
F000700003E000700007C000F0000F8000E0000F0000E0001E0000E0003E000000007C00000000
F800000000F800000001F000000001F000000003F000000003E000000007E000000007E0000000
0FE00000000FE00000001FC00000001FC00000001FC00000003FC00000003FC00000003FC00000
003FC00000003FC00000007FC00000007FC00000007FC00000007FC00000007FC00000007FC000
00007FC00000007FC00000003F800000003F800000000E00000022307BAF29>I<0007FC000000
3FFF800000F80FE00001E003F00003C001F800078000FC000F8000FC000F80007E000F80007E00
1F80007E001FC0007E001FC0007E001FE0007E001FF800FC001FFE00FC000FFF81F8000FFFE1F0
000FFFF7E00007FFFFC00003FFFF800001FFFFC00000FFFFE000007FFFF80001FFFFFC0003F7FF
FE000FE1FFFF001F807FFF003F003FFF803F000FFF807E0003FFC07E0000FFC0FC00007FC0FC00
001FC0FC00001FC0FC00000FC0FC00000FC0FC00000F807E00000F807E00000F007F00001F003F
00001E001FC0007C000FF803F80003FFFFE00000FFFF8000001FFC0000222E7DAD29>I<000FFC
0000007FFF000001FC0FC00003F003E00007E003F0000FE001F8001FE001FC003FC001FE007FC0
00FE007FC000FF00FFC000FF00FFC000FF80FFC000FF80FFC000FF80FFC000FF80FFC000FFC0FF
C000FFC0FFC000FFC0FFC000FFC07FC001FFC07FC001FFC03FC001FFC03FC003FFC01FE003FFC0
0FE007FFC007F00EFFC003FF7CFFC001FFF8FFC0007FF0FF80000000FF80000000FF80000000FF
80000000FF000F8001FF001FC001FF003FE001FE003FE001FC003FE003FC003FE003F8003FC007
F0001F800FE0001E001FC0000F807F800007FFFE000001FFF80000007FC00000222E7DAD29>I<
00FFE00003FFFC000FFFFF001F007F803C003FC07E001FE07F001FE0FF801FF0FF801FF0FF801F
F0FF801FF07F001FF03E003FE01C003FC000007F800000FF000001FE000001F8000003F0000007
E0000007C000000F8000000F0000000E0000000E0000001E0000001C0000001C0000001C000000
1C0000001C0000001C0000001C0000000000000000000000000000000000000000000000000000
001C0000007F000000FF800000FF800001FFC00001FFC00001FFC00000FF800000FF8000007F00
00001C00001C327BB127>63 D<0000007C0000000000007C000000000000FE000000000000FE00
0000000000FE000000000001FF000000000001FF000000000003FF800000000003FF8000000000
07FFC00000000007FFC00000000007FFC0000000000FFFE0000000000F7FE0000000001F7FF000
0000001E3FF0000000001E3FF0000000003E3FF8000000003C1FF8000000007C1FFC0000000078
0FFC00000000780FFC00000000F80FFE00000000F007FE00000001F007FF00000001E003FF0000
0001E003FF00000003E003FF80000003C001FF80000007C001FFC00000078000FFC00000078000
FFC000000FFFFFFFE000000FFFFFFFE000001FFFFFFFF000001E00003FF000001E00003FF00000
3C00003FF800003C00001FF800007C00001FFC00007800000FFC00007800000FFC0000F0000007
FE0000F0000007FE0001F0000007FF0003F8000003FF00FFFFC001FFFFFEFFFFC001FFFFFEFFFF
C001FFFFFE37317DB03E>65 D<000003FF80018000003FFFF003800001FFFFFC0F800007FF007F
1F80001FF8000FBF80003FE00003FF8000FF800000FF8001FF0000007F8003FE0000003F8007FC
0000003F8007FC0000001F800FF80000001F801FF80000000F801FF00000000F803FF000000007
803FF000000007807FF000000007807FE000000007807FE000000000007FE00000000000FFE000
00000000FFE00000000000FFE00000000000FFE00000000000FFE00000000000FFE00000000000
FFE00000000000FFE00000000000FFE000000000007FE000000000007FE000000000007FE00000
0000007FF000000003803FF000000003803FF000000003801FF000000003801FF800000007800F
F8000000070007FC000000070007FC0000000E0003FE0000001E0001FF0000003C0000FF800000
7800003FE00000F000001FF80003E0000007FF003F80000001FFFFFE000000003FFFF800000000
03FF80000031317BB03C>67 D<FFFFFFFFF00000FFFFFFFFFF0000FFFFFFFFFFC00000FFC000FF
F00000FFC0000FFC0000FFC00007FE0000FFC00001FF0000FFC00000FF8000FFC000007FC000FF
C000003FE000FFC000003FE000FFC000001FF000FFC000001FF000FFC000001FF800FFC000000F
F800FFC000000FFC00FFC000000FFC00FFC000000FFC00FFC000000FFC00FFC000000FFE00FFC0
00000FFE00FFC000000FFE00FFC000000FFE00FFC000000FFE00FFC000000FFE00FFC000000FFE
00FFC000000FFE00FFC000000FFE00FFC000000FFE00FFC000000FFE00FFC000000FFC00FFC000
000FFC00FFC000000FFC00FFC000000FFC00FFC000000FF800FFC000001FF800FFC000001FF800
FFC000001FF000FFC000003FE000FFC000003FE000FFC000007FC000FFC00000FF8000FFC00001
FF0000FFC00003FE0000FFC0000FFC0000FFC0007FF000FFFFFFFFFFE000FFFFFFFFFF0000FFFF
FFFFF0000037317EB03F>I<FFFFFFFFFFF000FFFFFFFFFFF000FFFFFFFFFFF00000FFC0003FF0
0000FFC00007F80000FFC00003F80000FFC00000F80000FFC00000F80000FFC00000780000FFC0
0000780000FFC00000380000FFC00000380000FFC00000380000FFC000001C0000FFC007001C00
00FFC007001C0000FFC007001C0000FFC00700000000FFC00700000000FFC00F00000000FFC01F
00000000FFC03F00000000FFFFFF00000000FFFFFF00000000FFFFFF00000000FFC03F00000000
FFC01F00000000FFC00F00000000FFC00700000000FFC00700000000FFC00700038000FFC00700
038000FFC00700038000FFC00000070000FFC00000070000FFC00000070000FFC00000070000FF
C000000F0000FFC000000F0000FFC000001E0000FFC000001E0000FFC000003E0000FFC000007E
0000FFC00000FE0000FFC00003FE0000FFC0001FFE00FFFFFFFFFFFC00FFFFFFFFFFFC00FFFFFF
FFFFFC0031317EB036>I<FFFFFFFFFFF0FFFFFFFFFFF0FFFFFFFFFFF000FFC0003FF000FFC000
07F800FFC00003F800FFC00000F800FFC00000F800FFC000007800FFC000007800FFC000003800
FFC000003800FFC000003800FFC000001C00FFC000001C00FFC007001C00FFC007001C00FFC007
000000FFC007000000FFC007000000FFC00F000000FFC01F000000FFC03F000000FFFFFF000000
FFFFFF000000FFFFFF000000FFC03F000000FFC01F000000FFC00F000000FFC007000000FFC007
000000FFC007000000FFC007000000FFC007000000FFC000000000FFC000000000FFC000000000
FFC000000000FFC000000000FFC000000000FFC000000000FFC000000000FFC000000000FFC000
000000FFC000000000FFC0000000FFFFFFF00000FFFFFFF00000FFFFFFF000002E317EB034>I<
000003FF80018000003FFFF003800001FFFFFC0F800007FF007F1F80001FF8000FBF80003FE000
03FF8000FF800000FF8001FF0000007F8003FE0000003F8007FC0000003F8007FC0000001F800F
F80000001F801FF80000000F801FF00000000F803FF000000007803FF000000007807FF0000000
07807FE000000007807FE000000000007FE00000000000FFE00000000000FFE00000000000FFE0
0000000000FFE00000000000FFE00000000000FFE00000000000FFE00000000000FFE000000000
00FFE00007FFFFFE7FE00007FFFFFE7FE00007FFFFFE7FE0000001FF807FF0000001FF803FF000
0001FF803FF0000001FF801FF0000001FF801FF8000001FF800FF8000001FF8007FC000001FF80
07FC000001FF8003FE000001FF8001FF000001FF8000FF800001FF80003FE00003FF80001FF800
07FF800007FF803F3F800001FFFFFE1F8000003FFFF80780000003FFC0018037317BB041>I<FF
FFFFC03FFFFFF0FFFFFFC03FFFFFF0FFFFFFC03FFFFFF000FFC000003FF00000FFC000003FF000
00FFC000003FF00000FFC000003FF00000FFC000003FF00000FFC000003FF00000FFC000003FF0
0000FFC000003FF00000FFC000003FF00000FFC000003FF00000FFC000003FF00000FFC000003F
F00000FFC000003FF00000FFC000003FF00000FFC000003FF00000FFC000003FF00000FFC00000
3FF00000FFC000003FF00000FFC000003FF00000FFFFFFFFFFF00000FFFFFFFFFFF00000FFFFFF
FFFFF00000FFC000003FF00000FFC000003FF00000FFC000003FF00000FFC000003FF00000FFC0
00003FF00000FFC000003FF00000FFC000003FF00000FFC000003FF00000FFC000003FF00000FF
C000003FF00000FFC000003FF00000FFC000003FF00000FFC000003FF00000FFC000003FF00000
FFC000003FF00000FFC000003FF00000FFC000003FF00000FFC000003FF00000FFC000003FF000
00FFC000003FF00000FFC000003FF000FFFFFFC03FFFFFF0FFFFFFC03FFFFFF0FFFFFFC03FFFFF
F03C317EB041>I<FFFFFFC0FFFFFFC0FFFFFFC000FFC00000FFC00000FFC00000FFC00000FFC0
0000FFC00000FFC00000FFC00000FFC00000FFC00000FFC00000FFC00000FFC00000FFC00000FF
C00000FFC00000FFC00000FFC00000FFC00000FFC00000FFC00000FFC00000FFC00000FFC00000
FFC00000FFC00000FFC00000FFC00000FFC00000FFC00000FFC00000FFC00000FFC00000FFC000
00FFC00000FFC00000FFC00000FFC00000FFC00000FFC00000FFC00000FFC00000FFC000FFFFFF
C0FFFFFFC0FFFFFFC01A317EB01F>I<FFFFFFC0007FFFC0FFFFFFC0007FFFC0FFFFFFC0007FFF
C000FFC0000007F00000FFC0000003C00000FFC000000F800000FFC000001F000000FFC000003C
000000FFC0000078000000FFC00001F0000000FFC00003E0000000FFC0000780000000FFC0000F
00000000FFC0003E00000000FFC0007C00000000FFC000F000000000FFC001E000000000FFC007
C000000000FFC00F8000000000FFC01F0000000000FFC03F8000000000FFC07FC000000000FFC1
FFE000000000FFC3FFF000000000FFC7FFF000000000FFCF3FF800000000FFFE1FFC00000000FF
FC0FFE00000000FFF007FE00000000FFE007FF00000000FFC003FF80000000FFC001FFC0000000
FFC000FFE0000000FFC000FFE0000000FFC0007FF0000000FFC0003FF8000000FFC0001FFC0000
00FFC0000FFC000000FFC0000FFE000000FFC00007FF000000FFC00003FF800000FFC00001FFC0
0000FFC00001FFC00000FFC00000FFE00000FFC000007FF00000FFC000007FF800FFFFFFC00FFF
FFE0FFFFFFC00FFFFFE0FFFFFFC00FFFFFE03B317EB041>75 D<FFFFFFF00000FFFFFFF00000FF
FFFFF0000000FFC000000000FFC000000000FFC000000000FFC000000000FFC000000000FFC000
000000FFC000000000FFC000000000FFC000000000FFC000000000FFC000000000FFC000000000
FFC000000000FFC000000000FFC000000000FFC000000000FFC000000000FFC000000000FFC000
000000FFC000000000FFC000000000FFC000000000FFC000000000FFC000000000FFC000000000
FFC000000000FFC000000000FFC000007000FFC000007000FFC000007000FFC00000F000FFC000
00F000FFC00000E000FFC00000E000FFC00001E000FFC00001E000FFC00003E000FFC00003E000
FFC00007E000FFC0000FE000FFC0001FE000FFC0007FC000FFC003FFC0FFFFFFFFFFC0FFFFFFFF
FFC0FFFFFFFFFFC02C317EB032>I<FFFF8000000001FFFF80FFFFC000000003FFFF80FFFFE000
000007FFFF8000FFE000000007FF800000EFF00000000EFF800000EFF00000000EFF800000EFF0
0000000EFF800000E7F80000001CFF800000E7F80000001CFF800000E3FC00000038FF800000E3
FC00000038FF800000E1FE00000070FF800000E1FE00000070FF800000E0FF000000E0FF800000
E0FF000000E0FF800000E07F800001C0FF800000E07F800001C0FF800000E03FC0000380FF8000
00E03FC0000380FF800000E03FC0000380FF800000E01FE0000700FF800000E01FE0000700FF80
0000E00FF0000E00FF800000E00FF0000E00FF800000E007F8001C00FF800000E007F8001C00FF
800000E003FC003800FF800000E003FC003800FF800000E001FE007000FF800000E001FE007000
FF800000E000FF00E000FF800000E000FF00E000FF800000E000FF00E000FF800000E0007F81C0
00FF800000E0007F81C000FF800000E0003FC38000FF800000E0003FC38000FF800000E0001FE7
0000FF800000E0001FE70000FF800000E0000FFE0000FF800000E0000FFE0000FF800000E00007
FC0000FF800000E00007FC0000FF800000E00007FC0000FF800000E00003F80000FF800001F000
03F80000FF8000FFFFE001F000FFFFFF80FFFFE001F000FFFFFF80FFFFE000E000FFFFFF804931
7EB04E>I<FFFFC000007FFFF0FFFFE000007FFFF0FFFFF000007FFFF000FFF8000000F80000FF
FC000000700000FFFE000000700000EFFF000000700000E7FF800000700000E3FF800000700000
E1FFC00000700000E0FFE00000700000E07FF00000700000E07FF80000700000E03FFC00007000
00E01FFE0000700000E00FFF0000700000E007FF8000700000E003FF8000700000E001FFC00070
0000E000FFE000700000E0007FF000700000E0007FF800700000E0003FFC00700000E0001FFE00
700000E0000FFF00700000E00007FF80700000E00003FF80700000E00001FFC0700000E00000FF
E0700000E000007FF0700000E000007FF8700000E000003FFC700000E000001FFE700000E00000
0FFF700000E0000007FFF00000E0000003FFF00000E0000001FFF00000E0000000FFF00000E000
00007FF00000E00000007FF00000E00000003FF00000E00000001FF00000E00000000FF00000E0
00000007F00000E000000003F00001F000000001F000FFFFE0000000F000FFFFE00000007000FF
FFE000000070003C317EB041>I<00000FFE0000000000FFFFE000000007FFFFFC0000001FFC07
FF0000003FE000FF800000FF80003FE00001FF00001FF00003FE00000FF80007FC000007FC0007
FC000007FC000FF8000003FE001FF8000003FF001FF0000001FF003FF0000001FF803FF0000001
FF803FF0000001FF807FE0000000FFC07FE0000000FFC07FE0000000FFC0FFE0000000FFE0FFE0
000000FFE0FFE0000000FFE0FFE0000000FFE0FFE0000000FFE0FFE0000000FFE0FFE0000000FF
E0FFE0000000FFE0FFE0000000FFE0FFE0000000FFE0FFE0000000FFE07FE0000000FFC07FE000
0000FFC07FF0000001FFC07FF0000001FFC03FF0000001FF803FF0000001FF801FF8000003FF00
1FF8000003FF000FFC000007FE000FFC000007FE0007FE00000FFC0003FF00001FF80001FF8000
3FF00000FFC0007FE000003FE000FF8000001FFC07FF00000007FFFFFC00000000FFFFE0000000
000FFE00000033317BB03E>I<FFFFFFFFE000FFFFFFFFFE00FFFFFFFFFF8000FFC001FFE000FF
C0003FF000FFC0001FF800FFC0000FFC00FFC0000FFC00FFC00007FE00FFC00007FE00FFC00007
FF00FFC00007FF00FFC00007FF00FFC00007FF00FFC00007FF00FFC00007FF00FFC00007FF00FF
C00007FE00FFC00007FE00FFC0000FFC00FFC0000FFC00FFC0001FF800FFC0003FF000FFC001FF
E000FFFFFFFF8000FFFFFFFE0000FFFFFFE00000FFC000000000FFC000000000FFC000000000FF
C000000000FFC000000000FFC000000000FFC000000000FFC000000000FFC000000000FFC00000
0000FFC000000000FFC000000000FFC000000000FFC000000000FFC000000000FFC000000000FF
C000000000FFC000000000FFC0000000FFFFFFC00000FFFFFFC00000FFFFFFC0000030317EB038
>I<FFFFFFFFC0000000FFFFFFFFFC000000FFFFFFFFFF80000000FFC001FFE0000000FFC0003F
F0000000FFC0000FFC000000FFC00007FC000000FFC00007FE000000FFC00003FF000000FFC000
03FF000000FFC00003FF800000FFC00003FF800000FFC00003FF800000FFC00003FF800000FFC0
0003FF800000FFC00003FF800000FFC00003FF000000FFC00003FF000000FFC00007FE000000FF
C00007FC000000FFC0000FFC000000FFC0003FF0000000FFC001FFE0000000FFFFFFFF80000000
FFFFFFFC00000000FFFFFFFE00000000FFC003FF00000000FFC000FFC0000000FFC0007FE00000
00FFC0003FE0000000FFC0003FF0000000FFC0001FF0000000FFC0001FF8000000FFC0001FF800
0000FFC0001FF8000000FFC0001FF8000000FFC0001FF8000000FFC0001FFC000000FFC0001FFC
000000FFC0001FFC000000FFC0001FFC004000FFC0001FFC00E000FFC0001FFE00E000FFC0000F
FE00E000FFC0000FFF01C000FFC00007FF83C0FFFFFFC003FFFF80FFFFFFC000FFFF00FFFFFFC0
000FFC003B317EB03E>82 D<001FF0018000FFFF038003FFFFC78007F00FFF800F8001FF801F00
007F803F00001F803E00000F807E00000F807E00000780FE00000780FE00000780FE00000380FF
00000380FF00000380FF80000000FFE00000007FFC0000007FFFE000007FFFFE00003FFFFFC000
1FFFFFF0001FFFFFF8000FFFFFFC0003FFFFFE0001FFFFFF00007FFFFF80001FFFFF800000FFFF
C0000007FFC0000000FFE00000003FE00000003FE00000001FE06000001FE0E000000FE0E00000
0FE0E000000FE0E000000FC0F000000FC0F000000FC0F800001F80FC00001F80FF00003F00FFC0
007E00FFFC01FC00F1FFFFF800E03FFFE000C007FF000023317BB02E>I<3FFFFFFFFFFF003FFF
FFFFFFFF003FFFFFFFFFFF003FE00FFC01FF007F000FFC003F807E000FFC001F807C000FFC000F
8078000FFC00078078000FFC00078070000FFC00038070000FFC00038070000FFC00038070000F
FC000380E0000FFC0001C0E0000FFC0001C0E0000FFC0001C0E0000FFC0001C000000FFC000000
00000FFC00000000000FFC00000000000FFC00000000000FFC00000000000FFC00000000000FFC
00000000000FFC00000000000FFC00000000000FFC00000000000FFC00000000000FFC00000000
000FFC00000000000FFC00000000000FFC00000000000FFC00000000000FFC00000000000FFC00
000000000FFC00000000000FFC00000000000FFC00000000000FFC00000000000FFC0000000000
0FFC00000000000FFC00000000000FFC00000000000FFC00000000000FFC000000007FFFFFFF80
00007FFFFFFF8000007FFFFFFF800032307DAF39>I<FFFFFF0001FFFF80FFFFFF0001FFFF80FF
FFFF0001FFFF8003FF8000000FE00001FF80000003C00001FFC0000007C00000FFC00000078000
00FFE000000F8000007FE000000F0000007FF000000F0000003FF000001E0000003FF000001E00
00003FF800003E0000001FF800003C0000001FFC00007C0000000FFC0000780000000FFE0000F8
00000007FE0000F000000007FF0000F000000007FF0001F000000003FF0001E000000003FF8003
E000000001FF8003C000000001FFC007C000000000FFC0078000000000FFE00780000000007FE0
0F00000000007FE00F00000000007FF01F00000000003FF01E00000000003FF83E00000000001F
F83C00000000001FFC3C00000000000FFC7800000000000FFC7800000000000FFEF80000000000
07FEF0000000000007FFF0000000000003FFE0000000000003FFE0000000000001FFC000000000
0001FFC0000000000001FFC0000000000000FF80000000000000FF800000000000007F00000000
0000007F000000000000003E000000000000003E0000000039317EB03E>86
D<FFFFFE07FFFFF801FFFFFFFFFE07FFFFF801FFFFFFFFFE07FFFFF801FFFF03FF00000FFC0000
07E003FF80000FFC000003C001FF80000FFE0000038001FF800007FE0000038001FFC00007FE00
00078000FFC00007FF0000070000FFE00003FF00000700007FE00003FF80000E00007FE00003FF
80000E00007FF00003FF80001E00003FF00007FFC0001C00003FF80007FFC0001C00001FF80007
FFE0003800001FF8000E7FE0003800001FFC000E7FE0007800000FFC001E7FF0007000000FFC00
1C3FF00070000007FE001C3FF000E0000007FE00381FF800E0000007FF00381FF801E0000003FF
00781FFC01C0000003FF00700FFC01C0000003FF80700FFC03C0000001FF80F00FFE0380000001
FFC0E007FE0380000000FFC0E007FF0700000000FFC1C003FF0700000000FFE1C003FF0F000000
007FE3C003FF8E000000007FE38001FF8E000000003FF38001FF9C000000003FF70000FFDC0000
00003FFF0000FFFC000000001FFF0000FFF8000000001FFE00007FF8000000000FFE00007FF000
0000000FFC00003FF0000000000FFC00003FF00000000007FC00003FE00000000007F800001FE0
0000000007F800001FE00000000003F800001FC00000000003F000000FC00000000001F000000F
800000000001E0000007800000000000E000000700000050317EB055>I<007FF8000003FFFF00
0007FFFFC0000FE01FE0001FF007F0001FF003F8001FF003FC001FF001FE000FE001FE0007C001
FE00010001FE00000001FE00000001FE000001FFFE00003FFFFE0001FFF1FE0007FE01FE000FF0
01FE001FC001FE003F8001FE007F8001FE00FF0001FE00FF0001FE00FF0001FE00FF0001FE00FF
0003FE007F8003FE007FC00EFE003FF03CFF000FFFF87FF807FFF03FF800FF800FF825207E9F28
>97 D<01F8000000FFF8000000FFF8000000FFF80000000FF800000007F800000007F800000007
F800000007F800000007F800000007F800000007F800000007F800000007F800000007F8000000
07F800000007F800000007F800000007F80FF00007F87FFE0007F9FFFF8007FFE03FC007FF000F
E007FE0007F007F80003F807F80003FC07F80003FC07F80001FE07F80001FE07F80001FE07F800
01FF07F80001FF07F80001FF07F80001FF07F80001FF07F80001FF07F80001FF07F80001FF07F8
0001FE07F80001FE07F80001FE07F80003FC07F80003FC07FC0007F807FE0007F007F7001FE007
E3E07FC007C1FFFF0007807FFE0007001FE00028327EB12E>I<0007FF00007FFFE000FFFFF003
FC03F807F007FC0FE007FC1FE007FC3FC007FC3FC003F87FC001F07F8000407F800000FF800000
FF800000FF800000FF800000FF800000FF800000FF800000FF8000007F8000007FC000007FC000
003FC0000E3FE0000E1FE0001C0FF0001C07F8007803FF01F000FFFFE0007FFF800007FC001F20
7D9F25>I<00000007E0000003FFE0000003FFE0000003FFE00000003FE00000001FE00000001F
E00000001FE00000001FE00000001FE00000001FE00000001FE00000001FE00000001FE0000000
1FE00000001FE00000001FE00000001FE0000FF81FE0007FFF1FE001FFFFDFE003FE03FFE007F8
00FFE00FE0003FE01FE0001FE03FC0001FE03FC0001FE07F80001FE07F80001FE07F80001FE0FF
80001FE0FF80001FE0FF80001FE0FF80001FE0FF80001FE0FF80001FE0FF80001FE0FF80001FE0
7F80001FE07F80001FE07F80001FE03FC0001FE03FC0001FE01FC0003FE00FE0007FE007F001FF
E003FC07DFF001FFFF9FFF007FFE1FFF000FF01FFF28327DB12E>I<0007FC0000003FFF800000
FFFFE00003FC07F00007F801F8000FE000FC001FE0007E003FC0007E003FC0003F007FC0003F00
7F80003F007F80003F80FF80003F80FF80003F80FFFFFFFF80FFFFFFFF80FFFFFFFF80FF800000
00FF80000000FF800000007F800000007F800000003FC00000003FC00003801FC00003801FE000
07800FF0000F0007F8001E0003FE00FC0000FFFFF800003FFFE0000003FF000021207E9F26>I<
0000FF000007FFC0001FFFE0003FC7F0007F0FF800FE0FF801FE0FF801FC0FF803FC07F003FC03
E003FC01C003FC000003FC000003FC000003FC000003FC000003FC000003FC0000FFFFF800FFFF
F800FFFFF80003FC000003FC000003FC000003FC000003FC000003FC000003FC000003FC000003
FC000003FC000003FC000003FC000003FC000003FC000003FC000003FC000003FC000003FC0000
03FC000003FC000003FC000003FC000003FC000003FC000003FC000003FC00007FFFF0007FFFF0
007FFFF0001D327EB119>I<001FF007E000FFFE3FF001FFFF7FF807F83FF1F80FE00FE1F80FE0
0FE0F01FC007F0601FC007F0003FC007F8003FC007F8003FC007F8003FC007F8003FC007F8001F
C007F0001FC007F0000FE00FE0000FE00FE00007F83FC00007FFFF000006FFFE00000E1FF00000
0E000000001E000000001E000000001F000000001F800000001FFFFFC0000FFFFFF8000FFFFFFE
0007FFFFFF0003FFFFFF8007FFFFFFC01FFFFFFFE03F00007FE07E00000FF0FC000007F0FC0000
03F0FC000003F0FC000003F0FC000003F07E000007E03F00000FC01FC0003F800FF801FF0007FF
FFFE0000FFFFF000001FFF8000252F7E9F29>I<01F800000000FFF800000000FFF800000000FF
F8000000000FF80000000007F80000000007F80000000007F80000000007F80000000007F80000
000007F80000000007F80000000007F80000000007F80000000007F80000000007F80000000007
F80000000007F80000000007F807F8000007F83FFF000007F87FFF800007F8F03FC00007F9C01F
E00007FB000FE00007FE000FF00007FE000FF00007FC000FF00007FC000FF00007F8000FF00007
F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000F
F00007F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000FF00007
F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000FF000FFFFC1FFFF80FFFFC1FF
FF80FFFFC1FFFF8029327DB12E>I<03C0000FF0000FF0001FF8001FF8001FFC001FF8001FF800
0FF0000FF00003C00000000000000000000000000000000000000000000000000001F800FFF800
FFF800FFF8000FF80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F800
07F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F800
07F800FFFF80FFFF80FFFF8011337DB217>I<0000E00003F80007FC0007FC000FFE000FFE000F
FE0007FC0007FC0003F80000E00000000000000000000000000000000000000000000000000000
FE003FFE003FFE003FFE0003FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001
FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001
FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE1C01FE3E01FE7F01FEFF81FCFF83
FCFF83F8FF87F87F0FF03FFFC01FFF0003FC00174184B219>I<01F8000000FFF8000000FFF800
0000FFF80000000FF800000007F800000007F800000007F800000007F800000007F800000007F8
00000007F800000007F800000007F800000007F800000007F800000007F800000007F800000007
F8007FFC07F8007FFC07F8007FFC07F8001FC007F8001F0007F8003E0007F800780007F801F000
07F803E00007F807800007F81F000007F83E000007F87C000007F9FE000007FBFF000007FFFF80
0007FF7FC00007FE3FE00007F81FE00007F01FF00007F00FF80007F007FC0007F003FE0007F001
FF0007F000FF0007F000FF8007F0007FC007F0003FE007F0003FF0FFFF80FFFFFFFF80FFFFFFFF
80FFFF28327EB12C>I<01F800FFF800FFF800FFF8000FF80007F80007F80007F80007F80007F8
0007F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F8
0007F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F8
0007F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F800FFFFC0FFFF
C0FFFFC012327DB117>I<03F007F8000FF000FFF03FFF007FFE00FFF07FFF80FFFF00FFF0F03F
C1E07F800FF1C01FE3803FC007F3000FE6001FC007F6000FFC001FE007FE000FFC001FE007FC00
0FF8001FE007FC000FF8001FE007F8000FF0001FE007F8000FF0001FE007F8000FF0001FE007F8
000FF0001FE007F8000FF0001FE007F8000FF0001FE007F8000FF0001FE007F8000FF0001FE007
F8000FF0001FE007F8000FF0001FE007F8000FF0001FE007F8000FF0001FE007F8000FF0001FE0
07F8000FF0001FE007F8000FF0001FE007F8000FF0001FE007F8000FF0001FE007F8000FF0001F
E007F8000FF0001FE0FFFFC1FFFF83FFFFFFFFC1FFFF83FFFFFFFFC1FFFF83FFFF40207D9F45>
I<03F007F80000FFF03FFF0000FFF07FFF8000FFF0F03FC0000FF1C01FE00007F3000FE00007F6
000FF00007FE000FF00007FC000FF00007FC000FF00007F8000FF00007F8000FF00007F8000FF0
0007F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8
000FF00007F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000FF0
0007F8000FF00007F8000FF00007F8000FF000FFFFC1FFFF80FFFFC1FFFF80FFFFC1FFFF802920
7D9F2E>I<0007FE0000003FFFC00000FFFFF00003FC03FC0007F000FE000FE0007F001FC0003F
803FC0003FC03FC0003FC07F80001FE07F80001FE07F80001FE0FF80001FF0FF80001FF0FF8000
1FF0FF80001FF0FF80001FF0FF80001FF0FF80001FF0FF80001FF07F80001FE07F80001FE07F80
001FE03FC0003FC03FC0003FC01FE0007F800FE0007F0007F801FE0003FE07FC0001FFFFF80000
3FFFC0000007FE000024207E9F29>I<01F80FF000FFF87FFE00FFF9FFFF80FFFFE07FC00FFF00
1FE007FE000FF007F80007F807F80007FC07F80003FC07F80003FE07F80003FE07F80001FE07F8
0001FF07F80001FF07F80001FF07F80001FF07F80001FF07F80001FF07F80001FF07F80001FF07
F80001FE07F80003FE07F80003FE07F80003FC07F80007FC07FC0007F807FE000FF007FF001FE0
07FBE07FC007F9FFFF0007F87FFE0007F81FE00007F800000007F800000007F800000007F80000
0007F800000007F800000007F800000007F800000007F800000007F800000007F8000000FFFFC0
0000FFFFC00000FFFFC00000282E7E9F2E>I<03F03F00FFF07FC0FFF1FFE0FFF3C7F00FF38FF8
07F70FF807F60FF807FE0FF807FC07F007FC03E007FC008007F8000007F8000007F8000007F800
0007F8000007F8000007F8000007F8000007F8000007F8000007F8000007F8000007F8000007F8
000007F8000007F8000007F8000007F80000FFFFE000FFFFE000FFFFE0001D207E9F22>114
D<00FF870007FFEF001FFFFF003F007F003C001F0078000F00F8000700F8000700F8000700FC00
0700FF000000FFF800007FFFC0003FFFF0003FFFFC000FFFFE0007FFFF0001FFFF80001FFF8000
00FFC000001FC060000FC0E00007C0E00007C0F00007C0F8000780F8000F80FE000F00FF803E00
FFFFFC00F3FFF800C07FC0001A207D9F21>I<0038000038000038000038000038000078000078
0000780000F80000F80001F80003F80007F8001FF800FFFFFEFFFFFEFFFFFE07F80007F80007F8
0007F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F8
0007F80707F80707F80707F80707F80707F80707F80703F80E03FC0E01FE1C00FFF8007FF0000F
E0182E7EAD20>I<01F80003F000FFF801FFF000FFF801FFF000FFF801FFF0000FF8001FF00007
F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000F
F00007F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000FF00007
F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8001F
F00007F8001FF00003F8003FF00003F8006FF00001FE03CFF80000FFFF8FFF80007FFF0FFF8000
0FFC0FFF8029207D9F2E>I<FFFF801FFEFFFF801FFEFFFF801FFE07F80003E007F80001C007FC
0003C003FC00038003FE00078001FE00070001FF000F0000FF000E0000FF801E00007F801C0000
7FC03C00003FC03800003FE03800001FE07000001FE07000000FF0E000000FF0E000000FF9E000
0007F9C0000007FFC0000003FF80000003FF80000001FF00000001FF00000000FE00000000FE00
0000007C000000007C0000000038000027207E9F2C>I<FFFF0FFFF01FFEFFFF0FFFF01FFEFFFF
0FFFF01FFE0FF0007E0001F00FF8007F0001E007F8007F0001C007F8003F8003C003FC003F8003
8003FC007FC0038003FE007FC0078001FE00FFC0070001FF00EFE00F0000FF00EFE00E0000FF01
C7F00E00007F81C7F01C00007F83C7F01C00007FC383F83C00003FC383F83800003FC701FC3800
001FE701FC7000001FEF01FC7000001FFE00FEF000000FFE00FEE000000FFC007FE0000007FC00
7FC0000007FC007FC0000007F8003FC0000003F8003F80000003F0001F80000001F0001F000000
01E0000F00000000E0000E000037207E9F3C>I<FFFF00FFFCFFFF00FFFCFFFF00FFFC07F8001F
8003FC001E0001FE003C0000FF00780000FF80F000007FC1E000003FC1E000001FE3C000000FF7
80000007FF00000007FE00000003FE00000001FE00000000FF00000001FF80000001FFC0000003
FFE00000079FF000000F0FF000001E07F800003C03FC00007801FE0000F001FF0001E000FF8001
E0007FC007E0003FC0FFF801FFFEFFF801FFFEFFF801FFFE27207E9F2C>I<FFFF801FFEFFFF80
1FFEFFFF801FFE07F80003E007F80001C007FC0003C003FC00038003FE00078001FE00070001FF
000F0000FF000E0000FF801E00007F801C00007FC03C00003FC03800003FE03800001FE0700000
1FE07000000FF0E000000FF0E000000FF9E0000007F9C0000007FFC0000003FF80000003FF8000
0001FF00000001FF00000000FE00000000FE000000007C000000007C0000000038000000003800
00000070000000007000000000F000003C00E000007E01E00000FF01C00000FF03800000FF0780
0000FF0F0000007A3E0000007FFC0000003FF80000000FC0000000272E7E9F2C>I
E /Fu 93 127 df<60F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F06000000000000060F0F06004
1E759D1A>33 D<701CF01EF01EF01EF01EF01EF01EF01E701C701C701C701C701C600C0F0E7B9D
1A>I<01818003C3C003C3C003C3C003C3C003C3C003C3C07FFFF0FFFFF8FFFFF8FFFFF8078780
0787800787800F8F800F0F000F0F000F0F000F0F00FFFFF8FFFFF8FFFFF87FFFF01E1E001E1E00
1E1E001E1E001E1E001E1E000C0C00151E7E9D1A>I<00600000E00000E00000E00000E00003F8
000FFE001FFF803CE7C078E1C070E0E0E0E0E0E0E1E0E0E1E0E0E0C070E00078E0003FE0001FF0
0007FC0000FF0000EF8000E3C000E1C000E0E0F0E0E0F0E0E0F0E0E0E0E0E070E1C078E3C03CEF
801FFF000FFE0003F00000E00000E00000E00000600013277DA21A>I<1800C03C01E07E01E07E
03E0E703C0E703C0E707C0E70780E70F80E70F00E70F007E1F007E1E003C1E00183E00003C0000
7C0000780000780000F80000F00000F00001F00001E00003E00003C00003C0C007C3F00783F007
87380F87380F07381F07381E07381E07383E07383C03F03C03F01800C015277EA21A>I<183C3E
1E0E0E0E0E0E1C3C38F0F0C0070F779D1A>39 D<0038007800F001E003C007800F000E001C001C
0038003800700070007000E000E000E000E000E000E000E000E000E000E0007000700070003800
38001C001C000E000F00078003C001E000F8007800380D2878A21A>I<6000F00078003C001E00
0F000780038001C001C000E000E000700070007000380038003800380038003800380038003800
3800700070007000E000E001C001C0038007800F001E003C007800F00060000D287CA21A>I<00
E00000E00000E00000E00040E040F0E1E0F8E3E07EEFC01FFF0007FC0003F80007FC001FFF007E
EFC0F8E3E0F0E1E040E04000E00000E00000E00000E00013157D991A>I<003000007800007800
0078000078000078000078000078000078007FFFF0FFFFF8FFFFF87FFFF0007800007800007800
00780000780000780000780000780000300015167E991A>I<183E7E7F3F1F070E0E1CFCF8E008
0D77851A>I<7FFFC0FFFFE0FFFFE07FFFC013047D901A>I<3078FCFC7830060676851A>I<0000
C00001E00001E00003E00003C00007C0000780000F80000F00000F00001F00001E00003E00003C
00007C0000780000780000F80000F00001F00001E00003E00003C00003C00007C0000780000F80
000F00001F00001E00001E00003E00003C00007C0000780000F80000F00000F000006000001327
7DA21A>I<01F00007FC000FFE001F1F001C07003803803803807001C07001C07001C0E000E0E0
00E0E000E0E000E0E000E0E000E0E000E0E000E0E000E0F001E07001C07001C07803C03803803C
07801C07001F1F000FFE0007FC0001F000131E7D9D1A>I<00C001C001C003C007C00FC07FC0FD
C071C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C0
7FFF7FFF7FFF101E7B9D1A>I<03F0000FFC001FFF003C0F807803C07001C0E000E0F000E0F000
E06000E00000E00000E00001C00001C0000380000780000F00000E00003C00007C0000F00001E0
0003C0000780000F00001E00E03C00E07FFFE0FFFFE07FFFE0131E7D9D1A>I<01FC0007FF001F
FF801E03C03C01C03C00E03C00E00000E00000E00001C00003C000078001FF0001FF0001FFC000
03E00000F0000070000078000038000038600038F00038F00078E000707000F07E03E03FFFC00F
FF0001FC00151E7E9D1A>I<000F80001F80003B80003B8000738000F38000E38001C38003C380
0383800783800F03800E03801E03803C0380380380780380F00380FFFFFEFFFFFEFFFFFE000380
000380000380000380000380000380003FF8007FFC003FF8171E7F9D1A>I<3FFFC07FFFC07FFF
C070000070000070000070000070000070000070000070000071F8007FFE007FFF007E07807803
C03001C00001C00000E00000E00000E06000E0F000E0F001C0E001C07003807C0F803FFF000FFC
0003F000131E7D9D1A>I<007E0001FF8003FFC00781E00F01E01E01E03C00C038000070000070
0000700000E1F800E7FE00FFFF00FE0780F803C0F001C0F000E0F000E0E000E0F000E07000E070
00E07001C03801C03C03801E0F800FFF0007FC0001F000131E7D9D1A>I<E00000FFFFF8FFFFF8
FFFFF0E000E0E001C00003C0000780000F00000E00001C00001C00003800003800007000007000
00E00000E00000E00001C00001C00001C00001C000038000038000038000038000038000038000
038000038000151F7E9E1A>I<01FC0007FF001FFFC01F07C03C01E07800F07000707000707000
707800F03800E01E03C00FFF8003FE0007FF001F8FC03C01E07800F0700070E00038E00038E000
38E00038F000787000707800F03E03E01FFFC007FF0001FC00151E7E9D1A>I<01F00007FC001F
FE003E0F003807807003807001C0E001C0E001C0E001E0E000E0E000E0E001E07001E07803E03C
0FE01FFFE00FFCE003F0E00001C00001C00001C0000380600380F00700F00F00F03E007FFC003F
F0000FC000131E7D9D1A>I<3078FCFC78300000000000000000003078FCFC7830061576941A>I<
183C7E7E3C18000000000000000000183C7E7E3E1E0E0E1C3CF8F0C0071C77941A>I<0000C000
03E00007E0000FC0003F80007E0000FC0003F80007E0000FC0003F80007E0000FC0000FC00007E
00003F80000FC00007E00003F80000FC00007E00003F80000FC00007E00003E00000C0131A7D9B
1A>I<7FFFF0FFFFF8FFFFF87FFFF00000000000000000000000007FFFF0FFFFF8FFFFF87FFFF0
150C7E941A>I<600000F80000FC00007E00003F80000FC00007E00003F80000FC00007E00003F
80000FC00007E00007E0000FC0003F80007E0000FC0003F80007E0000FC0003F80007E0000FC00
00F80000600000131A7D9B1A>I<07FC001FFF007FFF807803C0E001E0F000E0F000E06001E000
03C0000F80001F00003C0000780000700000E00000E00000E00000E00000E00000C00000000000
000000000000000000000000000000C00001E00001E00000C000131E7D9D1A>I<003E0001FF80
03FFC007C1E00F00E01E0F703C3FF0387FF07070F870E07870E078E1C038E1C038E1C038E1C038
E1C038E1C038E1C038E1C03870E07070E0707070E0387FE03C3FC01E0F000F003807C0F803FFF0
01FFE0003F00151E7E9D1A>I<003800007C00007C00006C0000EE0000EE0000EE0000C60000C6
0001C70001C70001C70001C7000383800383800383800383800701C00701C007FFC007FFC00FFF
E00E00E00E00E00E00E00E00E01C00707F01FCFF83FE7F01FC171E7F9D1A>I<FFFE00FFFF80FF
FFC01C03E01C00E01C00F01C00701C00701C00701C00701C00E01C01E01C07C01FFF801FFF801F
FFC01C01E01C00F01C00701C00381C00381C00381C00381C00381C00781C00F01C01F0FFFFE0FF
FFC0FFFF00151E7E9D1A>I<007C3801FF3807FFF80F83F81E00F81C0078380078380038700038
700038700000E00000E00000E00000E00000E00000E00000E00000E00000700000700038700038
3800383800381C00701E00F00F83E007FFC001FF80007C00151E7E9D1A>I<7FFE00FFFF007FFF
801C07C01C01E01C00F01C00701C00781C00381C00381C003C1C001C1C001C1C001C1C001C1C00
1C1C001C1C001C1C001C1C003C1C00381C00381C00781C00701C00F01C01E01C07C07FFFC0FFFF
007FFE00161E7F9D1A>I<FFFFF8FFFFF8FFFFF81C00381C00381C00381C00381C00001C00001C
00001C0E001C0E001C0E001FFE001FFE001FFE001C0E001C0E001C0E001C00001C00001C00001C
001C1C001C1C001C1C001C1C001CFFFFFCFFFFFCFFFFFC161E7E9D1A>I<7FFFFCFFFFFC7FFFFC
0E001C0E001C0E001C0E001C0E00000E00000E00000E03800E03800E03800FFF800FFF800FFF80
0E03800E03800E03800E00000E00000E00000E00000E00000E00000E00000E00007FE000FFE000
7FE000161E7F9D1A>I<00F8E003FEE007FFE00F07E01E03E03C01E03800E07000E07000E07000
E0E00000E00000E00000E00000E00000E00000E00FF8E00FF8E00FF8E000E07000E07000E07001
E03801E03C03E01E03E00F07E007FFE003FEE000F8E0151E7E9D1A>I<FF83FEFF83FEFF83FE1C
00701C00701C00701C00701C00701C00701C00701C00701C00701C00701FFFF01FFFF01FFFF01C
00701C00701C00701C00701C00701C00701C00701C00701C00701C00701C0070FF83FEFF83FEFF
83FE171E7F9D1A>I<FFFF80FFFF80FFFF8001C00001C00001C00001C00001C00001C00001C000
01C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C000
01C00001C00001C00001C000FFFF80FFFF80FFFF80111E7C9D1A>I<01FFC003FFC001FFC0000E
00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E
00000E00000E00000E00000E00000E00000E00600E00F00E00F01E00F03C007FF8003FF0000FC0
00121E7C9D1A>I<7F03F8FF87FC7F03F81C01E01C03C01C03801C07001C0F001C1E001C1C001C
38001C78001CF0001CF8001DF8001FDC001F9C001F0E001E0F001E07001C07801C03801C01C01C
01C01C00E01C00E01C00707F00FCFF81FE7F00FC171E7F9D1A>I<7FE000FFF0007FE0000E0000
0E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E0000
0E00000E00000E00000E00000E00000E001C0E001C0E001C0E001C0E001C7FFFFCFFFFFC7FFFFC
161E7F9D1A>I<7E003F00FF007F807F007F001D80DC001D80DC001D80DC001DC1DC001DC1DC00
1CC19C001CC19C001CE39C001CE39C001C631C001C771C001C771C001C361C001C361C001C3E1C
001C1C1C001C1C1C001C001C001C001C001C001C001C001C001C001C001C001C001C001C007F00
7F00FF80FF807F007F00191E809D1A>I<FE03FEFF03FEFF03FE1D80701D80701DC0701CC0701C
C0701CE0701CE0701C60701C70701C70701C30701C38701C38701C18701C1C701C1C701C0C701C
0E701C0E701C06701C06701C07701C03701C0370FF81F0FF81F0FF80F0171E7F9D1A>I<0FFE00
3FFF807FFFC07C07C07001C0F001E0E000E0E000E0E000E0E000E0E000E0E000E0E000E0E000E0
E000E0E000E0E000E0E000E0E000E0E000E0E000E0E000E0E000E0F001E0F001E07001C07C07C0
7FFFC03FFF800FFE00131E7D9D1A>I<FFFE00FFFF80FFFFC01C03E01C00F01C00701C00781C00
381C00381C00381C00381C00781C00701C00F01C03E01FFFC01FFF801FFE001C00001C00001C00
001C00001C00001C00001C00001C00001C0000FF8000FF8000FF8000151E7E9D1A>I<0FFE003F
FF807FFFC07C07C07001C0F001E0E000E0E000E0E000E0E000E0E000E0E000E0E000E0E000E0E0
00E0E000E0E000E0E000E0E000E0E000E0E000E0E000E0E070E0E0F0E0F079E07079C07C3FC07F
FFC03FFF800FFE00000F000007000007800003800003C00001C00001C013257D9D1A>I<FFFC00
FFFF00FFFF801C07C01C01E01C00F01C00701C00701C00701C00701C00F01C01E01C07C01FFF80
1FFF001FFF801C07C01C01C01C00E01C00E01C00E01C00E01C00E01C00E21C00E71C00E71C00E7
FF807EFF807EFF8038181E7F9D1A>I<03F1C00FFDC03FFFC07C0FC07003C0E003C0E001C0E001
C0E001C0E000007000007800003F00001FF00007FE0000FF00000F800003C00001C00000E00000
E06000E0E000E0E000E0E001C0F001C0FC0780FFFF80EFFE00E3F800131E7D9D1A>I<7FFFFEFF
FFFEFFFFFEE0380EE0380EE0380EE0380E00380000380000380000380000380000380000380000
380000380000380000380000380000380000380000380000380000380000380000380000380003
FF8003FF8003FF80171E7F9D1A>I<FF83FEFF83FEFF83FE1C00701C00701C00701C00701C0070
1C00701C00701C00701C00701C00701C00701C00701C00701C00701C00701C00701C00701C0070
1C00701C00700E00E00E00E00701C00783C003FF8001FF00007C00171E7F9D1A>I<FF01FEFF01
FEFF01FE1C00701C00701C00701E00F00E00E00E00E00E00E00701C00701C00701C00701C00383
8003838003838003838001C70001C70001C70001C70000C60000EE0000EE0000EE00006C00007C
00007C00003800171E7F9D1A>I<FE00FEFF01FEFE00FE70001C78003C38003838003838003838
0038380038380038380038387C381C7C701CEE701CEE701CEE701CEE701CEE701CC6701CC6700D
C7600DC7600DC7600D83600D83600D83600F83E00F83E00701C0171E7F9D1A>I<7F87F87F87F8
7F87F80F01C007038007838003870003C70001CE0001EE0000FC0000FC00007800007800007800
007C00007C0000FE0000EE0001CF0001C7000387800383800703C00701C00E00E00E00E07F01FC
FF83FE7F01FC171E7F9D1A>I<FF01FEFF01FEFF01FE1C00700E00E00E00E00701C00701C00783
C003838003C78001C70001C70000EE0000EE00007C00007C000038000038000038000038000038
0000380000380000380000380000380001FF0001FF0001FF00171E7F9D1A>I<3FFFF87FFFF87F
FFF87000707000E07001E07001C0000380000780000700000E00001E00001C0000380000780000
F00000E00001C00003C0000380000700000F00000E00381C00383C0038380038700038FFFFF8FF
FFF8FFFFF8151E7E9D1A>I<FFF8FFF8FFF8E000E000E000E000E000E000E000E000E000E000E0
00E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000
E000E000E000FFF8FFF8FFF80D2776A21A>I<600000F00000F00000F800007800007C00003C00
003E00001E00001E00001F00000F00000F800007800007C00003C00003C00003E00001E00001F0
0000F00000F800007800007800007C00003C00003E00001E00001F00000F00000F00000F800007
800007C00003C00003E00001E00001E00000C013277DA21A>I<FFF8FFF8FFF800380038003800
380038003800380038003800380038003800380038003800380038003800380038003800380038
0038003800380038003800380038003800380038FFF8FFF8FFF80D277EA21A>I<018007C01FF0
3EF8F83EF01E40040F077B9D1A>I<7FFFC0FFFFE0FFFFE07FFFC013047D7E1A>I<061E1E387870
E0E0E0E0E0F0F87830070F76A11A>I<1FF0003FFC007FFE00780F00300700000380000380007F
8007FF801FFF803F8380780380700380E00380E00380E00380700780780F803FFFFC1FFDFC07F0
FC16157D941A>I<FE0000FE0000FE00000E00000E00000E00000E00000E00000E00000E3E000E
FF800FFFE00FC1F00F80700F00380E00380E001C0E001C0E001C0E001C0E001C0E001C0E001C0F
00380F00780F80F00FC1E00FFFC00EFF80063E00161E7F9D1A>I<00FF8003FFC00FFFE01F01E0
3C00C0780000700000700000E00000E00000E00000E00000E000007000007000007800703C0070
1F01F00FFFE003FFC000FE0014157D941A>I<001FC0001FC0001FC00001C00001C00001C00001
C00001C00001C001F1C007FDC00FFFC01E0FC03C07C07803C07001C0E001C0E001C0E001C0E001
C0E001C0E001C0E001C07003C07003C03807C03E0FC01FFFFC07FDFC01F1FC161E7E9D1A>I<01
F80007FF000FFF801E07C03C01C07800E07000E0E00070E00070FFFFF0FFFFF0FFFFF0E0000070
00007000007800703C00701F01F00FFFE003FFC000FE0014157D941A>I<0007E0001FF0003FF8
00787800F03000E00000E00000E00000E0007FFFF0FFFFF0FFFFF000E00000E00000E00000E000
00E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E0003FFF807FFFC0
3FFF80151E7F9D1A>I<01F87C07FFFE0FFFFE1E078C1C03803801C03801C03801C03801C03801
C01C03801E07801FFF001FFE0039F8003800003800001C00001FFF801FFFE03FFFF878007C7000
1CE0000EE0000EE0000EE0000E70001C78003C3E00F81FFFF007FFC001FF0017217F941A>I<FE
0000FE0000FE00000E00000E00000E00000E00000E00000E00000E3E000EFF800FFFC00FC1C00F
80E00F00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E
00E0FFE3FEFFE7FEFFE3FE171E7F9D1A>I<00C00001E00001E00000C000000000000000000000
0000000000000000007FE0007FE0007FE00000E00000E00000E00000E00000E00000E00000E000
00E00000E00000E00000E00000E00000E00000E00000E0007FFF80FFFFC07FFF80121F7C9E1A>
I<000C001E001E000C0000000000000000000000000FFE0FFE0FFE000E000E000E000E000E000E
000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E001C601CF0
38FFF87FF01FC00F2A7E9E1A>I<FE0000FE0000FE00000E00000E00000E00000E00000E00000E
00000E0FFC0E1FFE0E0FFC0E03C00E07800E0F000E1E000E3C000E78000EFC000FFC000FDE000F
8F000E07800E03800E01C00E01E00E00F0FFE3FEFFE3FFFFE3FE181E7F9D1A>I<FFE000FFE000
FFE00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E000
00E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E000FFFFE0
FFFFE0FFFFE0131E7D9D1A>I<7CE0E000FFFBF8007FFFF8001F1F1C001E1E1C001E1E1C001C1C
1C001C1C1C001C1C1C001C1C1C001C1C1C001C1C1C001C1C1C001C1C1C001C1C1C001C1C1C001C
1C1C001C1C1C007F1F1F00FF9F9F807F1F1F00191580941A>I<FE3E00FEFF80FFFFC00FC1C00F
80E00F00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E
00E0FFE3FEFFE7FEFFE3FE17157F941A>I<01F00007FC001FFF003E0F803C07807803C07001C0
E000E0E000E0E000E0E000E0E000E0E000E0F001E07001C07803C03C07803E0F801FFF0007FC00
01F00013157D941A>I<FE3E00FEFF80FFFFE00FC1F00F80700F00380E00380E001C0E001C0E00
1C0E001C0E001C0E001C0E001C0F00380F00780F80F00FC1E00FFFC00EFF800E3E000E00000E00
000E00000E00000E00000E00000E00000E0000FFE000FFE000FFE00016207F941A>I<01F8E007
FEE00FFFE01E07E03C03E07801E07001E0E000E0E000E0E000E0E000E0E000E0E000E0E001E070
01E07803E03C03E01E0FE00FFFE007FCE001F0E00000E00000E00000E00000E00000E00000E000
00E00000E0000FFE000FFE000FFE17207E941A>I<7F83F0FF8FF87FBFFC03FC3C03F01803E000
03C00003C0000380000380000380000380000380000380000380000380000380000380007FFF00
FFFF007FFF0016157E941A>I<07FB801FFF807FFF80780780E00380E00380E003807800007FC0
003FFC0007FE00003F800007806001C0E001C0E001C0F003C0FC0780FFFF00EFFE00E3F8001215
7C941A>I<00C00001C00001C00001C00001C00001C00001C0007FFFE0FFFFE0FFFFE001C00001
C00001C00001C00001C00001C00001C00001C00001C00001C00001C07001C07001C07001C07000
E0E000FFE0007FC0001F00141C7F9B1A>I<FE0FE0FE0FE0FE0FE00E00E00E00E00E00E00E00E0
0E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E01E00F03E007FFFE03FFFE
00FCFE17157F941A>I<7F83FCFFC7FE7F83FC0E00E00E00E00E00E00701C00701C00701C00383
8003838003838001C70001C70001C70000EE0000EE0000EE00007C00007C0000380017157F941A
>I<FF83FEFFC7FEFF83FE3800383800381C00701C00701C00701C38701C7C701C7C700E6CE00E
6CE00EEEE00EEEE00EEEE00EC6E006C6C007C7C007C7C003838017157F941A>I<7FC7F87FCFFC
7FC7F80703C003838003C70001EF0000FE00007C00007800003800007C0000EE0001EE0001C700
0383800783C00F01C07FC7FCFFC7FE7FC7FC17157F941A>I<7FC3FCFFC7FE7FC3FC0E00E00E00
E00700E00701C00781C00381C003838003C38001C38001C70000E70000E70000E600006600006E
00003C00003C00003C0000380000380000380000700000700030700078E00071E0007FC0003F80
001E000017207F941A>I<7FFFF0FFFFF0FFFFF0E001E0E003C0E00780000F00001E00003C0000
780000F00001E00003C0000780000F00381E00383C0038780038FFFFF8FFFFF8FFFFF815157E94
1A>I<0007E0001FE0003FE000780000F00000E00000E00000E00000E00000E00000E00000E000
00E00000E00000E00000E00001E00003C000FF8000FF0000FF800003C00001E00000E00000E000
00E00000E00000E00000E00000E00000E00000E00000E00000E00000F000007800003FE0001FE0
0007E013277DA21A>I<60F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0
F0F0F0F0F0F0F0F0F060042775A21A>I<7C0000FF0000FF800003C00001E00000E00000E00000
E00000E00000E00000E00000E00000E00000E00000E00000E00000F000007800003FE0001FE000
3FE000780000F00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000
E00001E00003C000FF8000FF00007C000013277DA21A>I<0703001F87803FCF80F9FE00F0FC00
60700011067C9D1A>I E /Fv 39 121 df<003F000000E180000380C020070060400E0070401C
0070403C0070803C003880780039007800390078003A00F0003A00F0003C00F0003800F0003800
70003800700078003000B800380338401C1C188007E00F001B157E941F>11
D<00007C00000183000002018000040180000801C0001001C0002001C0002001C0004001C00040
038000800380008003000080070001000E000107FC0001083800010FDC0002000E0002000E0002
000F0002000F0004000F0004000F0004000F0004000F0008001E0008001E0008001C0008003C00
14003800140070001400E0001201C00021838000207C0000200000002000000040000000400000
004000000040000000800000008000000080000000800000001A2D7EA21C>I<000F0000318000
60C000E0C001C0E00180E00380E00700E00700E00F00E00E00E01E00E01E00E01C01E03C01E03C
01E03C01E07FFFC07803C07803C07803C0700780F00780F00700F00F00F00E00F00E00E01C0060
1C0060380070300070600030C0001180000F000013237EA217>18 D<03800000E00000F0000070
00007000007800003800003800003C00001C00001C00001C00001E00000E00000E00000F000007
00000700000780000780000F80001B800031C00021C00041C000C1E00180E00300E00600F00C00
701C0070380078700038E00038C0001C16237DA21C>21 D<000F800018E000707000E07000C038
0180380380780380780700780700780700780E00F00E00F00E00F00E01E01C01C01C01C01E0380
1E0700390C0038F000380000380000700000700000700000700000E00000E00000E00000E00000
C0000015207E9419>26 D<07FFF81FFFF83FFFF830200040200080200080600000600000600000
C00000C00000C00000C00001C00001800001800003800003800003800007000003000015157E94
15>28 D<1F0000402380008021C0010001C0010001E0020000E0040000F0080000701000007020
00007820000038400000388000003D0000001E0000001C0000001E0000000E0000001E0000002E
0000004F000000870000010700000207800002038000040380000803C0001001C0002001E00040
00E1008000720080003C001A1F7E941F>31 D<003E0000638001C1C00381C00300E00600E00E01
E00E01E01C01E01C01E01C01E03803C03803C03803C0380780780700580700580E004C1C004C30
0083C000800000800000800000800000800000C00000FFF0007FF8003FF800000800131F7C9419
>37 D<08001F0010003F8010007FC02000E0E04001806040030020400200208004002080040020
800800208008006080000040801000C080100080C01003006020060038201C003F20F8000FFFF0
0007FFC00000FF000000C0000000C0000000C0000001C0000001C0000001800000018000000380
00000380000003800000030000001B207E9420>39 D<70F8F8F87005057C840E>58
D<70F8FCFC7404040404080810102040060F7C840E>I<0000001800000078000001E000000780
00001E00000078000003E000000F8000003C000000F0000003C000000F0000003C000000F00000
00F00000003C0000000F00000003C0000000F00000003C0000000F80000003E000000078000000
1E0000000780000001E000000078000000181D1C7C9926>I<0000800001800001800003000003
00000300000600000600000600000C00000C00000C000018000018000018000030000030000030
0000600000600000600000C00000C00000C0000180000180000180000180000300000300000300
000600000600000600000C00000C00000C00001800001800001800003000003000003000006000
00600000600000C00000C00000C0000011317DA418>I<C0000000F00000003C0000000F000000
03C0000000F00000003E0000000F80000001E0000000780000001E0000000780000001E0000000
7800000078000001E00000078000001E00000078000001E000000F8000003E000000F0000003C0
00000F0000003C000000F0000000C00000001D1C7C9926>I<00000080000000018000000001C0
00000003C000000003C000000007C00000000BC00000000BC000000013C000000033C000000023
C000000043C000000043E000000081E000000181E000000101E000000201E000000201E0000004
01E000000C01E000000801E000001001E000001FFFF000002000F000006000F000004000F00000
8000F000008000F000010000F000030000F000020000F000040000F8000C0000F8001E0000F800
FF800FFF8021237EA225>65 D<007FFFF8000007800F00000780078000078003C0000F0001C000
0F0001C0000F0001E0000F0001E0001E0001C0001E0003C0001E0003C0001E000780003C000F00
003C001E00003C003C00003C01F000007FFFE00000780078000078003C000078001E0000F0001E
0000F0000E0000F0000F0000F0000F0001E0001E0001E0001E0001E0001E0001E0003C0003C000
3C0003C000780003C000F00003C001C00007C00F8000FFFFFC000023227EA125>I<00007F0080
0003808100000E00630000380027000070001F0000E0000E0001C0000E000380000E000700000E
000F000004000E000004001E000004003C000004003C0000080078000000007800000000780000
0000F000000000F000000000F000000000F000000000F000000000E000000000E000002000E000
002000E000004000E000004000F00000800070000080007000010000380002000018000400001C
0008000006003000000381C0000000FE00000021247DA223>I<007FFFFFC000078003C0000780
00C000078000C0000F0000C0000F0000C0000F000080000F000080001E000080001E000080001E
008080001E008000003C010000003C010000003C030000003C070000007FFE0000007806000000
78060000007806000000F004000000F004000000F004010000F000020001E000020001E0000200
01E000040001E0000C0003C000080003C000180003C000300003C000700007C003F000FFFFFFE0
0022227EA124>69 D<007FFFFFC000078003C000078000C000078000C0000F0000C0000F0000C0
000F000080000F000080001E000080001E000080001E008080001E008000003C010000003C0100
00003C030000003C070000007FFE000000780600000078060000007806000000F004000000F004
000000F004000000F000000001E000000001E000000001E000000001E000000003C000000003C0
00000003C000000003C000000007C0000000FFFE00000022227EA120>I<00007F00400003C0C0
80000E002180001C0013800070000F8000E000070001C0000700038000070007000007000F0000
02000E000002001E000002003C000002003C00000400780000000078000000007800000000F000
000000F000000000F000000000F000000000F0003FFF00E00000F000E00000F000E00000F000E0
0001E000F00001E000F00001E000700001E000700003C000380003C000180007C0000C0009C000
06001180000380E08000007F00000022247DA226>I<007FC00001FF0007C00003E00007C00005
E00007C00005E00009E0000BC00009E0000BC00009E00013C00009E00023C00011E00027800011
E00047800011E00047800011E00087800021E0010F000020F0010F000020F0020F000020F0040F
000040F0041E000040F0081E000040F0081E000040F0101E000080F0203C00008078203C000080
78403C00008078803C0001007880780001007900780001007900780001007A00780002007C00F0
0002007C00F00002003800F00006003800F0000F003001F000FFE0203FFF0030227EA12F>77
D<007FC003FF0007C000780007C000600005E000200009E000400009E000400008F000400008F0
00400010F800800010780080001078008000103C008000203C010000203E010000201E01000020
1E010000400F020000400F020000400F020000400782000080078400008007C400008003C40000
8003C400010001E800010001E800010001F800010000F800020000F00002000070000200007000
06000070000F00002000FFE000200028227EA127>I<0003F010000E0C2000180260002001E000
4000E000C000C0008000C0018000C0018000C00380008003800080038000000380000003C00000
01F0000001FE000000FFE000007FF000001FF8000001FC0000003C0000001C0000000E0000000E
0000000E0020000C0020000C0020000C002000080060001800600010007000200070004000C800
8000C603000081FC00001C247DA21E>83 D<1FFFFFFE1E01E00E1801E0063001E0062003C00620
03C0064003C0044003C00440078004800780048007800400078000000F0000000F0000000F0000
000F0000001E0000001E0000001E0000001E0000003C0000003C0000003C0000003C0000007800
0000780000007800000078000000F0000000F0000000F0000000F0000001F00000FFFFC0001F22
7EA11D>I<FFF8007FC00F80000F000F00000C000F000008000F000010000F8000100007800020
0007800060000780004000078000800007800080000780010000078002000007C002000003C004
000003C00C000003C008000003C010000003C010000003C020000003E040000003E040000001E0
80000001E180000001E100000001E200000001E200000001E400000001F800000000F800000000
F000000000E000000000E000000000C000000000C000000022237DA11C>86
D<FFF03FFC03FF1F8007E000780F0003C000600F0003C000600F0003C000400F0003C000800F00
03C000800F0007C001000F0007C001000F000BC002000F000BC002000F0013C004000F0023C008
000F0023C008000F0043C010000F8043E01000078081E02000078081E02000078101E040000783
01E0C000078201E08000078401E10000078401E10000078801E20000078801E20000079001E400
00079001E4000007A001E8000007C001F0000007C001F00000078001E00000038001E000000300
00C00000030000C0000002000080000030237DA12E>I<003F0000E0800380C00701C00E03C01C
03C03C00003C0000780000780000780000F00000F00000F00000F0000070004070004030018038
02001C1C0007E00012157E9415>99 D<007C000382000701000E01001C01003801007802007004
00FFF800F00000F00000E00000E00000E00000E00000E00080E000807003003004001838000FC0
0011157D9417>101 D<00001E00000063800000C7800001C7800001C300000180000003800000
03800000038000000380000007000000070000000700000007000000FFF800000E0000000E0000
000E0000000E0000000E0000000E0000001C0000001C0000001C0000001C0000001C0000003800
0000380000003800000038000000380000007000000070000000700000007000000060000000E0
000000E0000000E0000000C0000070C00000F1800000F1000000620000003C000000192D7EA218
>I<00E000E001E000C00000000000000000000000000000000000001E00230043804380838083
80870007000E000E000E001C001C0038003820384070407040308031001E000B227EA111>105
D<01E01FC001C001C001C0038003800380038007000700070007000E000E000E000E001C001C00
1C001C0038003800380038007000700070007100E200E200E200620064001C000B237DA20F>
108 D<3C07E01F00461830618047201880C087401D00E087801E00E087801C00E087001C00E00E
003801C00E003801C00E003801C00E003801C01C007003801C007003801C007007001C00700704
3800E007083800E00E083800E00E083800E006107001C006203000C003C026157E942B>I<3C07
C04618604720308740388780388700388700380E00700E00700E00700E00701C00E01C00E01C01
C01C01C13801C23803823803823801847001883000F018157E941D>I<003E0000C1800380C007
00E00E00E01C00F03C00F03C00F07800F07800F07800F0F001E0F001E0F001C0F003C070038070
0700700600381C001C380007E00014157E9417>I<03C0F004631C04740E08780E087007087007
08700F00E00F00E00F00E00F00E00F01C01E01C01E01C01E01C03C03803803803803C07003C0E0
072180071E000700000700000E00000E00000E00000E00001C00001C00001C0000FFC000181F81
9418>I<3C0F004630C04741C08783C08783C08701808700000E00000E00000E00000E00001C00
001C00001C00001C000038000038000038000038000070000030000012157E9416>114
D<006000E000E000E000E001C001C001C001C00380FFFC0380038007000700070007000E000E00
0E000E001C001C001C001C08381038103820182018C007000E1F7F9E12>116
D<1E00C02301E04381F04380F08380708380308700300700200E00200E00200E00201C00401C00
401C00801C00801C01001C01001C02000C040006080003F00014157E9418>118
D<01E0F006310C081A1C101A3C201C3C201C18201C000038000038000038000038000070000070
0000700000700860E010F0E010F0E020E170404230803C1F0016157E941C>120
D E /Fw 88 125 df<001F83E000706E3000C07C780180F8780380F07807007000070070000700
7000070070000700700007007000070070000700700007007000FFFFFFC0070070000700700007
007000070070000700700007007000070070000700700007007000070070000700700007007000
070070000700700007007000070070000700700007007000070078007FE3FF801D2380A21C>11
D<001FC0000070200000C010000180380003807800070078000700300007000000070000000700
000007000000070000000700000007000000FFFFF8000700780007003800070038000700380007
003800070038000700380007003800070038000700380007003800070038000700380007003800
07003800070038000700380007003800070038007FE1FF80192380A21B>I<001FD80000703800
00C078000180780003807800070038000700380007003800070038000700380007003800070038
000700380007003800FFFFF8000700380007003800070038000700380007003800070038000700
380007003800070038000700380007003800070038000700380007003800070038000700380007
00380007003800070038007FF3FF80192380A21B>I<000FC07F00007031C08000E00B00400180
1E00E003803E01E007003C01E007001C00C007001C000007001C000007001C000007001C000007
001C000007001C000007001C0000FFFFFFFFE007001C01E007001C00E007001C00E007001C00E0
07001C00E007001C00E007001C00E007001C00E007001C00E007001C00E007001C00E007001C00
E007001C00E007001C00E007001C00E007001C00E007001C00E007001C00E007001C00E07FF1FF
CFFE272380A229>I<07070F1E1C38604080080976A218>19 D<70F8F8F8F8F8F8F87070707070
70707070707070202020202020000000000070F8F8F87005247CA30E>33
D<7038F87CFC7EFC7E743A04020402040204020804080410081008201040200F0F7EA218>I<70
F8FCFC7404040404080810102040060F7CA20E>39 D<00200040008001000300060004000C000C
00180018003000300030007000600060006000E000E000E000E000E000E000E000E000E000E000
E000E000E000E0006000600060007000300030003000180018000C000C00040006000300010000
80004000200B327CA413>I<800040002000100018000C00040006000600030003000180018001
8001C000C000C000C000E000E000E000E000E000E000E000E000E000E000E000E000E000E000C0
00C000C001C0018001800180030003000600060004000C00180010002000400080000B327DA413
>I<008000008000008000008000008000C08180E08380388E000C980003E00001C00003E0000C
9800388E00E08380C0818000800000800000800000800000800011157DA418>I<000180000001
800000018000000180000001800000018000000180000001800000018000000180000001800000
01800000018000000180000001800000018000FFFFFFFEFFFFFFFE000180000001800000018000
000180000001800000018000000180000001800000018000000180000001800000018000000180
000001800000018000000180001F227D9C26>I<70F8FCFC7404040404080810102040060F7C84
0E>I<FFE0FFE00B027F8B10>I<70F8F8F87005057C840E>I<0000800001800001800003000003
00000300000600000600000600000C00000C00000C000018000018000018000030000030000030
0000600000600000600000C00000C00000C0000180000180000180000180000300000300000300
000600000600000600000C00000C00000C00001800001800001800003000003000003000006000
00600000600000C00000C00000C0000011317DA418>I<01F000071C000C060018030038038038
03807001C07001C07001C07001C0F001E0F001E0F001E0F001E0F001E0F001E0F001E0F001E0F0
01E0F001E0F001E0F001E0F001E0F001E07001C07001C07001C07803C03803803803801C07000C
0600071C0001F00013227EA018>I<008003800F80F38003800380038003800380038003800380
038003800380038003800380038003800380038003800380038003800380038003800380038007
C0FFFE0F217CA018>I<03F0000C1C001007002007804003C04003C08003E0F003E0F801E0F801
E0F801E02003E00003E00003C00003C0000780000700000E00001C0000180000300000600000C0
000180000100000200200400200800201800603000403FFFC07FFFC0FFFFC013217EA018>I<03
F8000C1E001007002007804007C07807C07803C07807C03807C0000780000780000700000F0000
0E0000380003F000001C00000F000007800007800003C00003C00003E02003E07003E0F803E0F8
03E0F003C04003C0400780200780100F000C1C0003F00013227EA018>I<000200000600000E00
000E00001E00001E00002E00004E00004E00008E00008E00010E00020E00020E00040E00040E00
080E00100E00100E00200E00200E00400E00800E00FFFFF8000E00000E00000E00000E00000E00
000E00000E00001F0001FFF015217FA018>I<1000801E07001FFF001FFE001FF80013E0001000
0010000010000010000010000010000010F800130E001407001803801003800001C00001C00001
E00001E00001E00001E07001E0F001E0F001E0E001C08001C04003C04003802007001006000C1C
0003F00013227EA018>I<007E0001C1000300800601C00E03C01C03C018018038000038000078
0000700000700000F0F800F30C00F40600F40300F80380F801C0F001C0F001E0F001E0F001E0F0
01E0F001E07001E07001E07001E03801C03801C01803801C03000C0600070C0001F00013227EA0
18>I<4000006000007FFFE07FFFC07FFFC0400080C00100800100800200800200000400000800
00080000100000300000200000600000600000600000E00000C00000C00001C00001C00001C000
01C00003C00003C00003C00003C00003C00003C00003C00003C00001800013237DA118>I<01F8
00060E000803001001802001802000C06000C06000C06000C07000C07801803E01003F02001FC4
000FF80003F80003FC00067F00083F80100F803007C06001C06000E0C000E0C00060C00060C000
60C000606000406000C03000801803000E0E0003F00013227EA018>I<01F000060C000C060018
0700380380700380700380F001C0F001C0F001C0F001E0F001E0F001E0F001E0F001E07001E070
03E03803E01805E00C05E00619E003E1E00001C00001C00001C000038000038030030078070078
0600700C002018001030000FC00013227EA018>I<70F8F8F870000000000000000000000070F8
F8F87005157C940E>I<70F8F8F870000000000000000000000070F8F8F8780808080810101020
4040051F7C940E>I<FFFFFFFEFFFFFFFE00000000000000000000000000000000000000000000
00000000000000000000FFFFFFFEFFFFFFFE1F0C7D9126>61 D<07E01838201C400E800FF00FF0
0FF00F000F000E001C00380030006000C000C00080008001800100010001000100010001000000
0000000000000000038007C007C007C0038010237DA217>63 D<00018000000180000001800000
03C0000003C0000003C0000005E0000005E000000DF0000008F0000008F0000010F80000107800
0010780000203C0000203C0000203C0000401E0000401E0000401E0000800F0000800F0000FFFF
000100078001000780030007C0020003C0020003C0040003E0040001E0040001E00C0000F00C00
00F03E0001F8FF800FFF20237EA225>65 D<FFFFF8000F800E0007800780078003C0078003E007
8001E0078001F0078001F0078001F0078001F0078001F0078001E0078003E0078007C007800F80
07803E0007FFFE0007800780078003C0078001E0078001F0078000F0078000F8078000F8078000
F8078000F8078000F8078000F8078001F0078001F0078003E0078007C00F800F00FFFFFC001D22
7EA123>I<0007E0100038183000E0063001C00170038000F0070000F00E0000701E0000701C00
00303C0000303C0000307C0000107800001078000010F8000000F8000000F8000000F8000000F8
000000F8000000F8000000F800000078000000780000107C0000103C0000103C0000101C000020
1E0000200E000040070000400380008001C0010000E0020000381C000007E0001C247DA223>I<
FFFFF0000F801E0007800700078003C0078001C0078000E0078000F00780007807800078078000
7C0780003C0780003C0780003C0780003E0780003E0780003E0780003E0780003E0780003E0780
003E0780003E0780003E0780003C0780003C0780007C0780007807800078078000F0078000E007
8001E0078003C0078007000F801E00FFFFF8001F227EA125>I<FFFFFFC00F8007C0078001C007
8000C0078000400780004007800060078000200780002007800020078020200780200007802000
07802000078060000780E00007FFE0000780E00007806000078020000780200007802000078020
080780000807800008078000100780001007800010078000300780003007800070078000E00F80
03E0FFFFFFE01D227EA121>I<FFFFFFC00F8007C0078001C0078000C007800040078000400780
006007800020078000200780002007802020078020000780200007802000078060000780E00007
FFE0000780E0000780600007802000078020000780200007802000078000000780000007800000
0780000007800000078000000780000007800000078000000FC00000FFFE00001B227EA120>I<
0007F008003C0C1800E0021801C001B8038000F8070000780F0000381E0000381E0000183C0000
183C0000187C0000087800000878000008F8000000F8000000F8000000F8000000F8000000F800
0000F8000000F8001FFF780000F8780000787C0000783C0000783C0000781E0000781E0000780F
00007807000078038000B801C000B800E00318003C0C080007F00020247DA226>I<FFFC3FFF0F
C003F0078001E0078001E0078001E0078001E0078001E0078001E0078001E0078001E0078001E0
078001E0078001E0078001E0078001E0078001E007FFFFE0078001E0078001E0078001E0078001
E0078001E0078001E0078001E0078001E0078001E0078001E0078001E0078001E0078001E00780
01E0078001E00FC003F0FFFC3FFF20227EA125>I<FFFC0FC00780078007800780078007800780
078007800780078007800780078007800780078007800780078007800780078007800780078007
800780078007800FC0FFFC0E227EA112>I<03FFF0001F00000F00000F00000F00000F00000F00
000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00
000F00000F00000F00000F00000F00000F00700F00F80F00F80F00F80E00F01E00401C00203800
18700007C00014237EA119>I<FFFC03FF000FC000F80007800060000780004000078000800007
800100000780020000078004000007800800000780100000078020000007804000000780800000
07818000000783C000000787E000000789E000000788F000000790F0000007A078000007C03C00
0007803C000007801E000007800F000007800F00000780078000078007C000078003C000078001
E000078001E000078000F000078000F8000FC000FC00FFFC07FF8021227EA126>I<FFFE00000F
C00000078000000780000007800000078000000780000007800000078000000780000007800000
078000000780000007800000078000000780000007800000078000000780000007800000078000
000780000007800080078000800780008007800080078001800780018007800100078003000780
030007800F000F803F00FFFFFF0019227EA11E>I<FFC00003FF0FC00003F007C00003E005E000
05E005E00005E004F00009E004F00009E004F00009E004780011E004780011E004780011E0043C
0021E0043C0021E0043C0021E0041E0041E0041E0041E0040F0081E0040F0081E0040F0081E004
078101E004078101E004078101E00403C201E00403C201E00401E401E00401E401E00401E401E0
0400F801E00400F801E00400F801E004007001E00E007001E01F007003F0FFE0203FFF28227EA1
2D>I<FF8007FF07C000F807C0007005E0002004F0002004F0002004780020047C0020043C0020
041E0020041F0020040F002004078020040780200403C0200401E0200401E0200400F0200400F8
200400782004003C2004003E2004001E2004000F2004000F20040007A0040003E0040003E00400
01E0040001E0040000E00E0000601F000060FFE0002020227EA125>I<000FE00000783C0000E0
0E0003C00780078003C00F0001E00E0000E01E0000F03C0000783C0000787C00007C7C00007C78
00003C7800003CF800003EF800003EF800003EF800003EF800003EF800003EF800003EF800003E
F800003E7800003C7C00007C7C00007C3C0000783E0000F81E0000F00F0001E00F0001E0078003
C003C0078000E00E0000783C00000FE0001F247DA226>I<FFFFF0000F803C0007800F00078007
80078007C0078003C0078003E0078003E0078003E0078003E0078003E0078003E0078003C00780
07C00780078007800F0007803C0007FFF000078000000780000007800000078000000780000007
80000007800000078000000780000007800000078000000780000007800000078000000FC00000
FFFC00001B227EA121>I<000FE00000783C0000E00E0003C00780078003C00F0001E00E0000E0
1E0000F03E0000F83C0000787C00007C7C00007C7800003C7800003CF800003EF800003EF80000
3EF800003EF800003EF800003EF800003EF800003EF800003E7800003C7C00007C7C00007C3C00
00783C0000781E0380F00E0420E00F0831E0078833C003C83F8000E83E00007C3C02000FFC0200
001C0200001C0200001E0600000F0E00000FFC000007FC000007F8000003F8000001E01F2D7DA2
26>I<FFFFE000000F803C000007800E00000780078000078007C000078003C000078003E00007
8003E000078003E000078003E000078003E000078003C000078007C000078007800007800E0000
07803C000007FFE000000780700000078038000007801C000007801E000007800E000007800F00
0007800F000007800F000007800F000007800F800007800F800007800F800007800F808007800F
C080078007C0800FC003C100FFFC01E2000000007C0021237EA124>I<03F0200C0C6018026030
01E07000E0600060E00060E00060E00020E00020E00020F00000F000007800007F00003FF0001F
FE000FFF0003FF80003FC00007E00001E00000F00000F0000070800070800070800070800070C0
0060C00060E000C0F000C0C80180C6070081FC0014247DA21B>I<7FFFFFF87807807860078018
400780084007800840078008C007800C8007800480078004800780048007800400078000000780
000007800000078000000780000007800000078000000780000007800000078000000780000007
800000078000000780000007800000078000000780000007800000078000000780000007800000
0FC00003FFFF001E227EA123>I<FFFC07FF0FC000F80780007007800020078000200780002007
800020078000200780002007800020078000200780002007800020078000200780002007800020
078000200780002007800020078000200780002007800020078000200780002007800020078000
200380004003C0004003C0004001C0008000E000800060010000300600001C08000003F0002023
7EA125>I<FFF0007FC01F80001F000F00000C000780000C000780000800078000080003C00010
0003C000100003E000300001E000200001E000200000F000400000F000400000F0004000007800
80000078008000007C018000003C010000003C010000001E020000001E020000001F020000000F
040000000F040000000F8C0000000788000000078800000003D000000003D000000003F0000000
01E000000001E000000000C000000000C000000000C0000022237FA125>I<FFF03FFC03FE1F80
07E000F80F0003C000700F0003C000200F0003C00020078001E00040078001E00040078001E000
4003C002F0008003C002F0008003C002F0008001E00478010001E00478010001E00478010000F0
083C020000F0083C020000F0083C020000F8183E06000078101E04000078101E0400007C101E04
00003C200F0800003C200F0800003C200F0800001E40079000001E40079000001E40079000000F
8003E000000F8003E000000F8003E00000070001C00000070001C00000070001C0000003000180
000002000080002F237FA132>I<7FF807FF0007E001F80003C000E00003E000C00001E0008000
00F001000000F80300000078020000007C040000003E0C0000001E080000001F100000000FB000
000007A000000007C000000003E000000001E000000001F000000003F80000000278000000047C
0000000C3E000000081E000000101F000000300F80000020078000004007C00000C003E0000080
01E000010001F000030000F000070000F8001F8001FC00FFE007FFC022227FA125>I<FFF0007F
C01F80001F000F80000C00078000080007C000180003E000100001E000200001F000200000F000
400000F800C000007C008000003C010000003E010000001E020000001F040000000F8400000007
8800000007D800000003D000000003E000000001E000000001E000000001E000000001E0000000
01E000000001E000000001E000000001E000000001E000000001E000000001E000000001E00000
0003E00000003FFF000022227FA125>I<FEFEC0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0FEFE07317BA40E>91
D<0804100820102010402040208040804080408040B85CFC7EFC7E7C3E381C0F0F7AA218>I<FE
FE0606060606060606060606060606060606060606060606060606060606060606060606060606
06060606060606FEFE07317FA40E>I<04000E001F001B00318060C0C06080200B087AA218>I<08
102020404080808080B8FCFC7C38060F7DA20E>96 D<0FE0001838003C0C003C0E001807000007
0000070000070000FF0007C7001E07003C0700780700700700F00708F00708F00708F00F087817
083C23900FC1E015157E9418>I<0E0000FE00001E00000E00000E00000E00000E00000E00000E
00000E00000E00000E00000E00000E00000E1F000E61C00E80600F00300E00380E003C0E001C0E
001E0E001E0E001E0E001E0E001E0E001E0E001E0E001C0E003C0E00380F00700C80600C41C008
3F0017237FA21B>I<01FE000703000C07801C0780380300780000700000F00000F00000F00000
F00000F00000F00000F000007000007800403800401C00800C010007060001F80012157E9416>
I<0000E0000FE00001E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000
E00000E001F8E00704E00C02E01C01E03800E07800E07000E0F000E0F000E0F000E0F000E0F000
E0F000E0F000E07000E07800E03800E01801E00C02E0070CF001F0FE17237EA21B>I<01FC0007
07000C03801C01C03801C07801E07000E0F000E0FFFFE0F00000F00000F00000F00000F0000070
00007800203800201C00400E008007030000FC0013157F9416>I<003C00C6018F038F030F0700
07000700070007000700070007000700FFF8070007000700070007000700070007000700070007
00070007000700070007000700070007807FF8102380A20F>I<00007001F198071E180E0E181C
07001C07003C07803C07803C07803C07801C07001C07000E0E000F1C0019F00010000010000018
00001800001FFE000FFFC00FFFE03800F0600030400018C00018C00018C0001860003060003038
00E00E038003FE0015217F9518>I<0E0000FE00001E00000E00000E00000E00000E00000E0000
0E00000E00000E00000E00000E00000E00000E1F800E60C00E80E00F00700F00700E00700E0070
0E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E0070
FFE7FF18237FA21B>I<1C001E003E001E001C00000000000000000000000000000000000E00FE
001E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E00FFC0
0A227FA10E>I<01C003E003E003E001C00000000000000000000000000000000001E00FE001E0
00E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000
E000E000E000E060E0F0C0F18061803E000B2C82A10F>I<0E0000FE00001E00000E00000E0000
0E00000E00000E00000E00000E00000E00000E00000E00000E00000E03FC0E01F00E01C00E0180
0E02000E04000E08000E10000E38000EF8000F1C000E1E000E0E000E07000E07800E03C00E01C0
0E01E00E00F00E00F8FFE3FE17237FA21A>I<0E00FE001E000E000E000E000E000E000E000E00
0E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E
000E000E000E000E00FFE00B237FA20E>I<0E1FC07F00FE60E183801E807201C00F003C00E00F
003C00E00E003800E00E003800E00E003800E00E003800E00E003800E00E003800E00E003800E0
0E003800E00E003800E00E003800E00E003800E00E003800E00E003800E00E003800E00E003800
E0FFE3FF8FFE27157F942A>I<0E1F80FE60C01E80E00F00700F00700E00700E00700E00700E00
700E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E0070FFE7FF1815
7F941B>I<01FC000707000C01801800C03800E0700070700070F00078F00078F00078F00078F0
0078F00078F000787000707800F03800E01C01C00E038007070001FC0015157F9418>I<0E1F00
FE61C00E80600F00700E00380E003C0E001C0E001E0E001E0E001E0E001E0E001E0E001E0E001E
0E003C0E003C0E00380F00700E80E00E41C00E3F000E00000E00000E00000E00000E00000E0000
0E00000E00000E0000FFE000171F7F941B>I<01F8200704600E02601C01603801E07800E07800
E0F000E0F000E0F000E0F000E0F000E0F000E0F000E07000E07800E03801E01C01E00C02E0070C
E001F0E00000E00000E00000E00000E00000E00000E00000E00000E00000E0000FFE171F7E941A
>I<0E3CFE461E8F0F0F0F060F000E000E000E000E000E000E000E000E000E000E000E000E000E
000F00FFF010157F9413>I<0F8830786018C018C008C008E008F0007F803FE00FF001F8003C80
1C800C800CC00CC008E018D0308FC00E157E9413>I<02000200020002000600060006000E001E
003E00FFF80E000E000E000E000E000E000E000E000E000E000E000E040E040E040E040E040E04
0708030801F00E1F7F9E13>I<0E0070FE07F01E00F00E00700E00700E00700E00700E00700E00
700E00700E00700E00700E00700E00700E00700E00700E00F00E00F006017003827800FC7F1815
7F941B>I<FFC1FE1E00780E00300E00200E002007004007004003808003808003808001C10001
C10000E20000E20000E20000740000740000380000380000380000100017157F941A>I<FF8FF8
FF1E01E03C1C01C0180E01C0180E01E0100E01E010070260200702702007027020038430400384
38400384384001C8188001C81C8001C81C8000F00D0000F00F0000F00F00006006000060060000
60060020157F9423>I<FF83FE1F01F00E00C007008003810003830001C20000E4000078000078
00003800003C00004E00008E000187000103800201C00401E00C00E03E01F0FF03FE17157F941A
>I<FFC1FE1E00780E00300E00200E002007004007004003808003808003808001C10001C10000
E20000E20000E20000740000740000380000380000380000100000100000200000200000200000
4000F04000F08000F180004300003C0000171F7F941A>I<3FFFC0380380300780200700600E00
401C00403C0040380000700000E00001E00001C0000380400700400F00400E00C01C0080380080
780180700780FFFF8012157F9416>I<FFFFFE1701808C18>I<FFFFFFFFFFFF3001808C31>I
E /Fx 60 122 df<000FF000007FFC0001F80E0003E01F0007C03F000F803F000F803F000F801E
000F800C000F8000000F8000000F8000000F800000FFFFFF00FFFFFF000F801F000F801F000F80
1F000F801F000F801F000F801F000F801F000F801F000F801F000F801F000F801F000F801F000F
801F000F801F000F801F000F801F000F801F000F801F007FF0FFE07FF0FFE01B237FA21F>12
D<000FFF00007FFF0001F83F0003E03F0007C03F000F803F000F801F000F801F000F801F000F80
1F000F801F000F801F000F801F00FFFFFF00FFFFFF000F801F000F801F000F801F000F801F000F
801F000F801F000F801F000F801F000F801F000F801F000F801F000F801F000F801F000F801F00
0F801F000F801F000F801F000F801F007FF0FFE07FF0FFE01B237FA21F>I<03C007C00FC00FC0
1F803E007C00F00060000A0975A21C>19 D<3803807C07C0FE0FE0FF0FF0FF0FF07F07F03B03B0
0300300300300700700600600600600C00C01C01C018018070070020020014117EA21D>34
D<387CFEFFFF7F3B03030706060C1C18702008117CA210>39 D<387CFEFFFF7F3B03030706060C
1C18702008117C8610>44 D<387CFEFEFE7C3807077C8610>46 D<00FE0007FFC00F83E01F01F0
3E00F83E00F87C007C7C007C7C007CFC007CFC007EFC007EFC007EFC007EFC007EFC007EFC007E
FC007EFC007EFC007EFC007EFC007EFC007E7C007C7C007C7C007C3E00F83E00F81F01F00F83E0
07FFC000FE0017207E9F1C>48 D<00180000780001F800FFF800FFF80001F80001F80001F80001
F80001F80001F80001F80001F80001F80001F80001F80001F80001F80001F80001F80001F80001
F80001F80001F80001F80001F80001F80001F80001F80001F8007FFFE07FFFE013207C9F1C>I<
03FC000FFF003C1FC07007E07C07F0FE03F0FE03F8FE03F8FE01F87C01F83803F80003F80003F0
0003F00007E00007C0000F80001F00003E0000380000700000E01801C0180380180700180E0038
0FFFF01FFFF03FFFF07FFFF0FFFFF0FFFFF015207D9F1C>I<00FE0007FFC00F07E01E03F03F03
F03F81F83F81F83F81F81F03F81F03F00003F00003E00007C0001F8001FE0001FF000007C00001
F00001F80000FC0000FC3C00FE7E00FEFF00FEFF00FEFF00FEFF00FC7E01FC7801F81E07F00FFF
C001FE0017207E9F1C>I<0000E00001E00003E00003E00007E0000FE0001FE0001FE00037E000
77E000E7E001C7E00187E00307E00707E00E07E00C07E01807E03807E07007E0E007E0FFFFFEFF
FFFE0007E00007E00007E00007E00007E00007E00007E000FFFE00FFFE17207E9F1C>I<100020
1E01E01FFFC01FFF801FFF001FFE001FF8001BC00018000018000018000018000019FC001FFF00
1E0FC01807E01803E00003F00003F00003F80003F83803F87C03F8FE03F8FE03F8FC03F0FC03F0
7007E03007C01C1F800FFF0003F80015207D9F1C>I<001F8000FFE003F07007C0F00F01F81F01
F83E01F83E01F87E00F07C00007C0000FC0800FC7FC0FCFFE0FD80F0FF00F8FE007CFE007CFC00
7EFC007EFC007EFC007E7C007E7C007E7C007E3C007C3E007C1E00F80F00F00783E003FFC000FF
0017207E9F1C>I<6000007800007FFFFE7FFFFE7FFFFC7FFFF87FFFF87FFFF0E00060E000C0C0
0180C00300C00300000600000C00001C0000180000380000780000780000F00000F00000F00001
F00001F00001F00003F00003F00003F00003F00003F00003F00003F00001E00017227DA11C>I<
01FE0007FF800F83E01E01F03E00F07C00F87C0078FC007CFC007CFC007CFC007EFC007EFC007E
FC007E7C00FE7C00FE3E01FE1E037E0FFE7E07FC7E00207E00007C00007C1E007C3F00F83F00F8
3F00F03F01E01E03C01C0F800FFE0003F80017207E9F1C>57 D<387CFEFEFE7C38000000000000
0000387CFEFEFE7C3807167C9510>I<000070000000007000000000F800000000F800000000F8
00000001FC00000001FC00000003FE00000003FE00000003FE00000006FF000000067F0000000E
7F8000000C3F8000000C3F800000183FC00000181FC00000381FE00000300FE00000300FE00000
600FF000006007F00000E007F80000FFFFF80000FFFFF800018001FC00018001FC00038001FE00
030000FE00030000FE000600007F000600007F00FFE00FFFF8FFE00FFFF825227EA12A>65
D<FFFFFF8000FFFFFFE00007F001F80007F000FC0007F0007E0007F0007E0007F0007F0007F000
7F0007F0007F0007F0007F0007F0007F0007F0007E0007F000FE0007F000FC0007F003F80007FF
FFF00007FFFFF00007F001FC0007F0007E0007F0003F0007F0003F8007F0001F8007F0001FC007
F0001FC007F0001FC007F0001FC007F0001FC007F0001FC007F0003F8007F0003F8007F0007F00
07F001FE00FFFFFFF800FFFFFFC00022227EA128>I<0003FE0080001FFF818000FF01E38001F8
003F8003E0001F8007C0000F800F800007801F800007803F000003803F000003807F000001807E
000001807E00000180FE00000000FE00000000FE00000000FE00000000FE00000000FE00000000
FE00000000FE000000007E000000007E000001807F000001803F000001803F000003801F800003
000F8000030007C000060003F0000C0001F800380000FF00F000001FFFC0000003FE000021227D
A128>I<FFFFFF8000FFFFFFF00007F003FC0007F0007E0007F0003F0007F0001F8007F0000FC0
07F00007E007F00007E007F00007F007F00003F007F00003F007F00003F007F00003F807F00003
F807F00003F807F00003F807F00003F807F00003F807F00003F807F00003F807F00003F807F000
03F007F00003F007F00003F007F00007E007F00007E007F0000FC007F0001F8007F0003F0007F0
007E0007F003FC00FFFFFFF000FFFFFF800025227EA12B>I<FFFFFFFCFFFFFFFC07F000FC07F0
003C07F0001C07F0000C07F0000E07F0000E07F0000607F0180607F0180607F0180607F0180007
F0380007F0780007FFF80007FFF80007F0780007F0380007F0180007F0180007F0180307F01803
07F0000307F0000607F0000607F0000607F0000E07F0000E07F0001E07F0003E07F001FCFFFFFF
FCFFFFFFFC20227EA125>I<FFFFFFF8FFFFFFF807F001F807F0007807F0003807F0001807F000
1C07F0001C07F0000C07F0000C07F0180C07F0180C07F0180007F0180007F0380007F0780007FF
F80007FFF80007F0780007F0380007F0180007F0180007F0180007F0180007F0000007F0000007
F0000007F0000007F0000007F0000007F0000007F00000FFFFE000FFFFE0001E227EA123>I<FF
FF83FFFEFFFF83FFFE07F0001FC007F0001FC007F0001FC007F0001FC007F0001FC007F0001FC0
07F0001FC007F0001FC007F0001FC007F0001FC007F0001FC007F0001FC007F0001FC007FFFFFF
C007FFFFFFC007F0001FC007F0001FC007F0001FC007F0001FC007F0001FC007F0001FC007F000
1FC007F0001FC007F0001FC007F0001FC007F0001FC007F0001FC007F0001FC007F0001FC007F0
001FC0FFFF83FFFEFFFF83FFFE27227EA12C>72 D<FFFFE0FFFFE003F80003F80003F80003F800
03F80003F80003F80003F80003F80003F80003F80003F80003F80003F80003F80003F80003F800
03F80003F80003F80003F80003F80003F80003F80003F80003F80003F80003F80003F80003F800
FFFFE0FFFFE013227FA115>I<FFFF803FFCFFFF803FFC07F000038007F000070007F0000E0007
F000180007F000300007F000E00007F001C00007F003800007F007000007F00E000007F0180000
07F038000007F0FC000007F1FE000007F3FE000007F77F000007FE7F800007F83F800007F01FC0
0007F01FE00007F00FE00007F007F00007F007F80007F003F80007F001FC0007F001FE0007F000
FF0007F0007F0007F0007F8007F0003FC0FFFF83FFFCFFFF83FFFC26227EA12C>75
D<FFFFE000FFFFE00007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F0
000007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F0000007
F0000007F0000007F0001807F0001807F0001807F0001807F0003807F0003807F0007007F00070
07F000F007F001F007F007F0FFFFFFF0FFFFFFF01D227EA122>I<FFF000000FFFFFF800001FFF
07F800001FE006FC000037E006FC000037E006FC000037E0067E000067E0067E000067E0063F00
00C7E0063F0000C7E0061F800187E0061F800187E0060FC00307E0060FC00307E0060FC00307E0
0607E00607E00607E00607E00603F00C07E00603F00C07E00601F81807E00601F81807E00601F8
1807E00600FC3007E00600FC3007E006007E6007E006007E6007E006003FC007E006003FC007E0
06001F8007E006001F8007E006001F8007E006000F0007E0FFF00F00FFFFFFF00600FFFF30227E
A135>I<FFF8001FFEFFFC001FFE07FC0000C007FE0000C006FF0000C0067F8000C0063FC000C0
061FE000C0060FE000C0060FF000C00607F800C00603FC00C00601FE00C00600FE00C00600FF00
C006007F80C006003FC0C006001FE0C006000FF0C0060007F0C0060007F8C0060003FCC0060001
FEC0060000FFC00600007FC00600007FC00600003FC00600001FC00600000FC006000007C00600
0003C006000003C0FFF00001C0FFF00000C027227EA12C>I<0007FC0000003FFF800000FC07E0
0003F001F80007E000FC000FC0007E001F80003F001F80003F003F00001F803F00001F807F0000
1FC07E00000FC07E00000FC0FE00000FE0FE00000FE0FE00000FE0FE00000FE0FE00000FE0FE00
000FE0FE00000FE0FE00000FE0FE00000FE07E00000FC07F00001FC07F00001FC03F00001F803F
80003F801F80003F000FC0007E0007E000FC0003F001F80000FC07E000003FFF80000007FC0000
23227DA12A>I<FFFFFF00FFFFFFE007F007F007F001FC07F000FC07F0007E07F0007E07F0007F
07F0007F07F0007F07F0007F07F0007F07F0007E07F0007E07F000FC07F001FC07F007F007FFFF
E007FFFF0007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F0
000007F0000007F0000007F0000007F00000FFFF8000FFFF800020227EA126>I<FFFFFE0000FF
FFFFC00007F007F00007F001F80007F000FC0007F0007E0007F0007F0007F0007F0007F0007F00
07F0007F0007F0007F0007F0007F0007F0007E0007F000FC0007F001F80007F007F00007FFFFC0
0007FFFF800007F00FE00007F007F00007F003F80007F001FC0007F001FC0007F001FC0007F001
FC0007F001FC0007F001FC0007F001FC0007F001FC0007F001FC0607F000FE0607F000FF0CFFFF
803FF8FFFF800FF027227EA12A>82 D<01FC0407FF8C1F03FC3C007C7C003C78001C78001CF800
0CF8000CFC000CFC0000FF0000FFE0007FFF007FFFC03FFFF01FFFF80FFFFC03FFFE003FFE0003
FF00007F00003F00003FC0001FC0001FC0001FE0001EE0001EF0003CFC003CFF00F8C7FFE080FF
8018227DA11F>I<7FFFFFFF807FFFFFFF807E03F80F807803F807807003F803806003F80180E0
03F801C0E003F801C0C003F800C0C003F800C0C003F800C0C003F800C00003F800000003F80000
0003F800000003F800000003F800000003F800000003F800000003F800000003F800000003F800
000003F800000003F800000003F800000003F800000003F800000003F800000003F800000003F8
00000003F800000003F8000003FFFFF80003FFFFF80022227EA127>I<FFFF803FFCFFFF803FFC
07F000018007F000018007F000018007F000018007F000018007F000018007F000018007F00001
8007F000018007F000018007F000018007F000018007F000018007F000018007F000018007F000
018007F000018007F000018007F000018007F000018007F000018007F000018007F000018007F0
00018003F000030003F800030001F800060000FC000E00007E001C00003F80F800000FFFE00000
01FF000026227EA12B>I<FFFF0FFFF01FFEFFFF0FFFF01FFE0FF000FF0000E007F0007F0000C0
07F0007F0000C003F8007F80018003F8003F80018003FC003F80038001FC003FC0030001FC003F
C0030000FE007FE0060000FE006FE0060000FF006FE00600007F00C7F00C00007F00C7F00C0000
7F80C7F81C00003F8183F81800003F8183F81800001FC383FC3000001FC301FC3000001FE301FC
3000000FE600FE6000000FE600FE6000000FF600FFE0000007FC007FC0000007FC007FC0000003
FC007F80000003F8003F80000003F8003F80000001F0001F00000001F0001F00000000F0001E00
000000E0000E00000000E0000E000037227FA13A>87 D<7FFFC1FFF07FFFC1FFF003FC000C0001
FE00180000FE00380000FF007000007F806000003F80C000003FC1C000001FE38000000FE30000
000FF700000007FE00000003FC00000003FC00000001FE00000000FE00000000FF00000000FF80
000001FFC0000001BFC00000031FE00000070FF000000E0FF000000C07F800001803FC00003803
FC00003001FE00006000FF0000E000FF0001C0007F800180003FC0FFFC03FFFEFFFC03FFFE2722
7FA12A>I<0400400E00E0180180380380300300600600600600E00E00C00C00C00C00DC0DC0FE
0FE0FF0FF0FF0FF07F07F03E03E01C01C014117AA21D>92 D<07FC001FFF803F07C03F03E03F01
E03F01F01E01F00001F00001F0003FF003FDF01FC1F03F01F07E01F0FC01F0FC01F0FC01F0FC01
F07E02F07E0CF81FF87F07E03F18167E951B>97 D<FF000000FF0000001F0000001F0000001F00
00001F0000001F0000001F0000001F0000001F0000001F0000001F0000001F0000001F0FE0001F
3FF8001FF07C001F801E001F001F001F000F801F000F801F000FC01F000FC01F000FC01F000FC0
1F000FC01F000FC01F000FC01F000FC01F000F801F001F801F801F001FC03E001EE07C001C3FF8
00180FC0001A237EA21F>I<00FF8007FFE00F83F01F03F03E03F07E03F07C01E07C0000FC0000
FC0000FC0000FC0000FC0000FC00007C00007E00007E00003E00301F00600FC0E007FF8000FE00
14167E9519>I<0001FE000001FE0000003E0000003E0000003E0000003E0000003E0000003E00
00003E0000003E0000003E0000003E0000003E0001FC3E0007FFBE000F81FE001F007E003E003E
007E003E007C003E00FC003E00FC003E00FC003E00FC003E00FC003E00FC003E00FC003E00FC00
3E007C003E007C003E003E007E001E00FE000F83BE0007FF3FC001FC3FC01A237EA21F>I<00FE
0007FF800F87C01E01E03E01F07C00F07C00F8FC00F8FC00F8FFFFF8FFFFF8FC0000FC0000FC00
007C00007C00007E00003E00181F00300FC07003FFC000FF0015167E951A>I<003F8000FFC001
E3E003C7E007C7E00F87E00F83C00F80000F80000F80000F80000F80000F8000FFFC00FFFC000F
80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F
80000F80000F80000F80000F80007FF8007FF80013237FA211>I<03FC1E0FFF7F1F0F8F3E07CF
3C03C07C03E07C03E07C03E07C03E07C03E03C03C03E07C01F0F801FFF0013FC00300000300000
3800003FFF801FFFF00FFFF81FFFFC3800FC70003EF0001EF0001EF0001EF0001E78003C7C007C
3F01F80FFFE001FF0018217E951C>I<FF000000FF0000001F0000001F0000001F0000001F0000
001F0000001F0000001F0000001F0000001F0000001F0000001F0000001F07E0001F1FF8001F30
7C001F403C001F803E001F803E001F003E001F003E001F003E001F003E001F003E001F003E001F
003E001F003E001F003E001F003E001F003E001F003E001F003E001F003E00FFE1FFC0FFE1FFC0
1A237EA21F>I<1C003F007F007F007F003F001C000000000000000000000000000000FF00FF00
1F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F00FFE0FF
E00B247EA310>I<FF00FF001F001F001F001F001F001F001F001F001F001F001F001F001F001F
001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F00FFE0FFE0
0B237EA210>108 D<FF07F007F000FF1FFC1FFC001F303E303E001F403E403E001F801F801F00
1F801F801F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F
001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F00
1F001F001F001F001F001F00FFE0FFE0FFE0FFE0FFE0FFE02B167E9530>I<FF07E000FF1FF800
1F307C001F403C001F803E001F803E001F003E001F003E001F003E001F003E001F003E001F003E
001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F003E00FFE1FFC0FFE1
FFC01A167E951F>I<00FE0007FFC00F83E01E00F03E00F87C007C7C007C7C007CFC007EFC007E
FC007EFC007EFC007EFC007EFC007E7C007C7C007C3E00F81F01F00F83E007FFC000FE0017167E
951C>I<FF0FE000FF3FF8001FF07C001F803E001F001F001F001F801F001F801F000FC01F000F
C01F000FC01F000FC01F000FC01F000FC01F000FC01F000FC01F001F801F001F801F803F001FC0
3E001FE0FC001F3FF8001F0FC0001F0000001F0000001F0000001F0000001F0000001F0000001F
0000001F000000FFE00000FFE000001A207E951F>I<FE1F00FE3FC01E67E01EC7E01E87E01E87
E01F83C01F00001F00001F00001F00001F00001F00001F00001F00001F00001F00001F00001F00
001F0000FFF000FFF00013167E9517>114 D<0FF3003FFF00781F00600700E00300E00300F003
00FC00007FE0007FF8003FFE000FFF0001FF00000F80C00780C00380E00380E00380F00700FC0E
00EFFC00C7F00011167E9516>I<0180000180000180000180000380000380000780000780000F
80003F8000FFFF00FFFF000F80000F80000F80000F80000F80000F80000F80000F80000F80000F
80000F80000F81800F81800F81800F81800F81800F830007C30003FE0000F80011207F9F16>I<
FF01FE00FF01FE001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F003E
001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F007E001F00FE000F81
BE0007FF3FC001FC3FC01A167E951F>I<FFE01FE0FFE01FE00F8006000F8006000FC00E0007C0
0C0007E01C0003E0180003E0180001F0300001F0300000F8600000F86000007CC000007CC00000
7FC000003F8000003F8000001F0000001F0000000E0000000E00001B167F951E>I<FFE7FF07F8
FFE7FF07F81F007800C00F807801800F807C01800F807C018007C07E030007C0DE030007E0DE07
0003E0DF060003E18F060001F18F0C0001F38F8C0001FB079C0000FB07D80000FE03D800007E03
F000007E03F000007C01F000003C01E000003800E000001800C00025167F9528>I<FFE07FC0FF
E07FC00F801C0007C0380003E0700003F0600001F8C00000F98000007F8000003F0000001F0000
001F8000003FC0000037C0000063E00000C1F00001C0F8000380FC0007007E000E003E00FF80FF
E0FF80FFE01B167F951E>I<FFE01FE0FFE01FE00F8006000F8006000FC00E0007C00C0007E01C
0003E0180003E0180001F0300001F0300000F8600000F86000007CC000007CC000007FC000003F
8000003F8000001F0000001F0000000E0000000E0000000C0000000C00000018000078180000FC
380000FC300000FC60000069C000007F8000001F0000001B207F951E>I
E /Fy 43 122 df<00000007FF800000000001FFFFF0000000000FFFFFFC000000003FFFFFFE00
000000FFFC00FF00000001FFC0003F80000007FF00007FC000000FFE0001FFC000001FFC0001FF
E000001FF80003FFE000003FF00003FFE000003FF00003FFE000007FE00003FFE000007FE00003
FFE000007FE00003FFE000007FE00003FFE000007FE00001FFC000007FE00000FF8000007FE000
003E0000007FE00000000000007FE00000000000007FE00000000000007FE00000000000007FE0
0000000000007FE00000000000007FE0003FFFF000FFFFFFFFFFFFF000FFFFFFFFFFFFF000FFFF
FFFFFFFFF000FFFFFFFFFFFFF000FFFFFFFFFFFFF000007FF00000FFF000007FF000007FF00000
7FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF000
007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF0
00007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF000007F
F000007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF00000
7FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF000
007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF0
00007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF000007FF0003FFF
FFE03FFFFFE03FFFFFE03FFFFFE03FFFFFE03FFFFFE03FFFFFE03FFFFFE03FFFFFE03FFFFFE03B
487EC742>12 D<000001E00000000003F0000000000FF0000000003FF000000000FFF00000000F
FFF0000003FFFFF00000FFFFFFF00000FFFFFFF00000FFFFFFF00000FFF0FFF00000FC00FFF000
000000FFF000000000FFF000000000FFF000000000FFF000000000FFF000000000FFF000000000
FFF000000000FFF000000000FFF000000000FFF000000000FFF000000000FFF000000000FFF000
000000FFF000000000FFF000000000FFF000000000FFF000000000FFF000000000FFF000000000
FFF000000000FFF000000000FFF000000000FFF000000000FFF000000000FFF000000000FFF000
000000FFF000000000FFF000000000FFF000000000FFF000000000FFF000000000FFF000000000
FFF000000000FFF000000000FFF000000000FFF000000000FFF000000000FFF000000000FFF000
000000FFF000000000FFF000000000FFF000000000FFF000000000FFF000000000FFF000000000
FFF000000000FFF000000000FFF000000000FFF000000000FFF000000000FFF000003FFFFFFFFF
C03FFFFFFFFFC03FFFFFFFFFC03FFFFFFFFFC03FFFFFFFFFC02A4478C33B>49
D<0000FFE00000000FFFFE0000003FFFFFC00000FFFFFFF00003FFFFFFFC0007FC01FFFE000FE0
007FFF001FC0001FFF803F80000FFFC03FE00007FFE07FF80007FFE07FFC0003FFF0FFFC0003FF
F0FFFE0001FFF8FFFE0001FFF8FFFE0001FFF8FFFE0000FFFCFFFE0000FFFC7FFC0000FFFC7FFC
0000FFFC3FF80000FFFC1FF00000FFFC0FE00000FFFC00000001FFFC00000001FFF800000001FF
F800000001FFF000000003FFF000000003FFE000000003FFE000000007FFC000000007FF800000
000FFF800000001FFF000000001FFE000000003FFC000000007FF8000000007FE000000000FFC0
00000001FF8000000003FF0000000007FC000000000FF8000000001FF0000000003FC000000000
7F80007C0000FF00007C0000FE00007C0001FC00007C0003F00000F80007E00000F8000FC00000
F8001F800000F8003F000001F8007C000003F800FFFFFFFFF801FFFFFFFFF003FFFFFFFFF007FF
FFFFFFF00FFFFFFFFFF01FFFFFFFFFF03FFFFFFFFFF07FFFFFFFFFF07FFFFFFFFFF0FFFFFFFFFF
E0FFFFFFFFFFE0FFFFFFFFFFE0FFFFFFFFFFE02E447AC33B>I<00007FF800000003FFFF800000
0FFFFFF000003FFFFFFC0000FFC03FFF0001FE000FFF8003F80007FFC003F00003FFE007F80003
FFE00FFE0003FFF00FFF0001FFF00FFF8001FFF81FFF8001FFF81FFF8001FFF81FFF8001FFF81F
FF8001FFF81FFF8001FFF80FFF8001FFF80FFF0003FFF007FF0003FFF003FE0003FFF001F80003
FFE000000003FFE000000007FFC000000007FF800000000FFF000000001FFE000000001FFC0000
00007FF800000001FFE0000001FFFF80000001FFFE00000001FFFFC0000001FFFFF0000000003F
FC000000000FFF0000000007FFC000000003FFE000000003FFF000000001FFF800000001FFF800
000001FFFC00000000FFFC00000000FFFE00000000FFFE03C00000FFFF0FF00000FFFF3FFC0000
FFFF3FFC0000FFFF7FFE0000FFFF7FFE0000FFFFFFFF0000FFFFFFFF0000FFFFFFFF0000FFFEFF
FF0000FFFEFFFF0000FFFEFFFE0001FFFC7FFE0001FFFC7FFC0001FFF83FF80003FFF83FE00003
FFF01FC00007FFE00FF8000FFFC007FF803FFF8003FFFFFFFE0000FFFFFFFC00003FFFFFF00000
07FFFF800000007FF8000030457BC33B>I<000000000F8000000000001FC000000000003FC000
000000003FC000000000007FC00000000000FFC00000000001FFC00000000003FFC00000000003
FFC00000000007FFC0000000000FFFC0000000001FFFC0000000001FFFC0000000003FFFC00000
00007FFFC000000000FFFFC000000001FBFFC000000001F3FFC000000003E3FFC000000007E3FF
C00000000FC3FFC00000001F83FFC00000001F03FFC00000003E03FFC00000007E03FFC0000000
FC03FFC0000001F803FFC0000001F003FFC0000003E003FFC0000007E003FFC000000FC003FFC0
00001F8003FFC000001F0003FFC000003E0003FFC000007E0003FFC00000FC0003FFC00000F800
03FFC00001F00003FFC00003F00003FFC00007E00003FFC0000FC00003FFC0000F800003FFC000
1F000003FFC0003F000003FFC0007E000003FFC000FC000003FFC000FFFFFFFFFFFFF0FFFFFFFF
FFFFF0FFFFFFFFFFFFF0FFFFFFFFFFFFF0FFFFFFFFFFFFF000000007FFC00000000007FFC00000
000007FFC00000000007FFC00000000007FFC00000000007FFC00000000007FFC00000000007FF
C00000000007FFC00000000007FFC00000000007FFC00000000007FFC00000007FFFFFFFF00000
7FFFFFFFF000007FFFFFFFF000007FFFFFFFF000007FFFFFFFF034447DC33B>I<030000000380
07F000001F8007FF0003FF8007FFFFFFFF8007FFFFFFFF0007FFFFFFFE0007FFFFFFFC0007FFFF
FFF80007FFFFFFF00007FFFFFFE00007FFFFFFC00007FFFFFF000007FFFFFE000007FFFFF80000
07FFFFC0000007DFFC00000007C00000000007C00000000007C00000000007C00000000007C000
00000007C00000000007C00000000007C00000000007C00000000007C00000000007C07FF80000
07C3FFFF000007CFFFFFE00007FFFFFFF00007FFC03FFC0007FE000FFE0007F80007FF0007E000
07FF8007C00003FFC003800003FFE000000003FFE000000001FFF000000001FFF000000001FFF8
00000001FFF800000001FFF800000001FFF800000001FFFC07800001FFFC1FE00001FFFC3FF000
01FFFC7FF80001FFFC7FF80001FFFCFFFC0001FFFCFFFC0001FFFCFFFC0001FFFCFFFC0001FFF8
FFF80001FFF8FFF80001FFF87FF00001FFF07FE00003FFF07F800003FFE03F000003FFE03F0000
07FFC01F80000FFF800FE0001FFF0007F0003FFE0003FE00FFFC0001FFFFFFF80000FFFFFFE000
003FFFFF8000000FFFFC00000001FFC000002E457AC33B>I<0000007FE000000007FFFC000000
3FFFFF000000FFFFFF800003FFE03FC00007FF0007E0000FFC0003E0003FF8001FF0007FF0003F
F000FFE0007FF800FFC0007FF801FF8000FFF803FF8000FFF807FF0000FFF807FF0000FFF80FFF
00007FF00FFE00007FF01FFE00003FE01FFE00001FC01FFE000000003FFE000000003FFC000000
003FFC000000007FFC000000007FFC004000007FFC07FF80007FFC1FFFF000FFFC3FFFFC00FFFC
7FFFFE00FFFCF003FF80FFFDE001FFC0FFFFC000FFE0FFFF80007FE0FFFF80007FF0FFFF00007F
F8FFFF00003FF8FFFE00003FFCFFFE00003FFCFFFE00003FFEFFFE00003FFEFFFC00003FFEFFFC
00003FFFFFFC00003FFFFFFC00003FFF7FFC00003FFF7FFC00003FFF7FFC00003FFF7FFC00003F
FF7FFC00003FFF7FFC00003FFF3FFC00003FFF3FFC00003FFF3FFC00003FFE1FFE00003FFE1FFE
00003FFE0FFE00003FFC0FFE00003FFC07FE00007FF807FF00007FF803FF00007FF003FF8000FF
E001FFC001FFE000FFE003FFC0007FF80FFF80003FFFFFFE00000FFFFFFC000003FFFFF0000000
FFFFC00000001FFC000030457BC33B>I<1F0000000000001F8000000000001FFF00000000001F
FFFFFFFFFF801FFFFFFFFFFF801FFFFFFFFFFF801FFFFFFFFFFF803FFFFFFFFFFF003FFFFFFFFF
FE003FFFFFFFFFFE003FFFFFFFFFFC003FFFFFFFFFF8003FFFFFFFFFF0003FFFFFFFFFE0003FFF
FFFFFFC0007FFFFFFFFFC0007F0000001F80007E0000003F00007C0000007E00007C000000FC00
007C000000F800007C000001F80000FC000003F00000F8000007E00000F800000FC00000F80000
1F8000000000001F0000000000003F0000000000007E000000000000FE000000000000FC000000
000001FC000000000003F8000000000003F8000000000007F8000000000007F000000000000FF0
00000000000FF000000000001FF000000000001FE000000000003FE000000000003FE000000000
007FE000000000007FE000000000007FE00000000000FFE00000000000FFE00000000000FFC000
00000001FFC00000000001FFC00000000001FFC00000000003FFC00000000003FFC00000000003
FFC00000000003FFC00000000003FFC00000000003FFC00000000007FFC00000000007FFC00000
000007FFC00000000007FFC00000000007FFC00000000007FFC00000000007FFC00000000007FF
C00000000007FFC00000000007FFC00000000003FF800000000001FF000000000000FE00000000
00007C00000000314779C53B>I<0000000003E000000000000000000007F00000000000000000
0007F00000000000000000000FF80000000000000000000FF80000000000000000000FF8000000
0000000000001FFC0000000000000000001FFC0000000000000000003FFE000000000000000000
3FFE0000000000000000007FFF0000000000000000007FFF0000000000000000007FFF00000000
0000000000FFFF800000000000000000FFFF800000000000000001FFFFC00000000000000001FF
FFC00000000000000001FFFFC00000000000000003FFFFE00000000000000003EFFFE000000000
00000007EFFFF00000000000000007CFFFF00000000000000007C7FFF0000000000000000FC7FF
F8000000000000000F83FFF8000000000000001F83FFFC000000000000001F03FFFC0000000000
00001F01FFFC000000000000003F01FFFE000000000000003E00FFFE000000000000007E00FFFF
000000000000007C007FFF00000000000000FC007FFF80000000000000F8007FFF800000000000
00F8003FFF80000000000001F8003FFFC0000000000001F0001FFFC0000000000003F0001FFFE0
000000000003E0001FFFE0000000000003E0000FFFE0000000000007E0000FFFF0000000000007
C00007FFF000000000000FC00007FFF800000000000F800007FFF800000000000F800003FFF800
000000001F800003FFFC00000000001F000001FFFC00000000003FFFFFFFFFFE00000000003FFF
FFFFFFFE00000000007FFFFFFFFFFF00000000007FFFFFFFFFFF00000000007FFFFFFFFFFF0000
000000FC0000007FFF8000000000F80000003FFF8000000001F80000003FFFC000000001F00000
003FFFC000000001F00000001FFFC000000003F00000001FFFE000000003E00000000FFFE00000
0007E00000000FFFF000000007C00000000FFFF000000007C000000007FFF00000000FC0000000
07FFF80000000F8000000003FFF80000001F8000000003FFFC0000001F0000000003FFFC000000
7FC000000001FFFC0000FFFFFFC00007FFFFFFFF80FFFFFFC00007FFFFFFFF80FFFFFFC00007FF
FFFFFF80FFFFFFC00007FFFFFFFF80FFFFFFC00007FFFFFFFF8051487CC75A>65
D<FFFFFFFFFFFFE00000FFFFFFFFFFFFFE0000FFFFFFFFFFFFFFC000FFFFFFFFFFFFFFF000FFFF
FFFFFFFFFFF800001FFF800001FFFE00001FFF8000007FFF00001FFF8000003FFF80001FFF8000
001FFFC0001FFF8000000FFFC0001FFF80000007FFE0001FFF80000007FFF0001FFF80000007FF
F0001FFF80000003FFF0001FFF80000003FFF8001FFF80000003FFF8001FFF80000003FFF8001F
FF80000003FFF8001FFF80000003FFF8001FFF80000003FFF8001FFF80000003FFF8001FFF8000
0003FFF8001FFF80000003FFF0001FFF80000007FFF0001FFF80000007FFE0001FFF8000000FFF
E0001FFF8000000FFFC0001FFF8000001FFF80001FFF8000003FFF00001FFF8000007FFE00001F
FF800001FFFC00001FFF800007FFF000001FFFFFFFFFFFC000001FFFFFFFFFFE0000001FFFFFFF
FFFF8000001FFFFFFFFFFFF000001FFF800000FFFC00001FFF8000003FFF00001FFF8000000FFF
C0001FFF80000007FFE0001FFF80000003FFF0001FFF80000003FFF8001FFF80000001FFF8001F
FF80000001FFFC001FFF80000000FFFC001FFF80000000FFFE001FFF80000000FFFE001FFF8000
0000FFFE001FFF80000000FFFF001FFF800000007FFF001FFF800000007FFF001FFF800000007F
FF001FFF800000007FFF001FFF80000000FFFF001FFF80000000FFFF001FFF80000000FFFF001F
FF80000000FFFE001FFF80000000FFFE001FFF80000001FFFE001FFF80000001FFFC001FFF8000
0003FFFC001FFF80000007FFF8001FFF80000007FFF0001FFF8000001FFFE0001FFF8000003FFF
E0001FFF800001FFFF80FFFFFFFFFFFFFFFF00FFFFFFFFFFFFFFFC00FFFFFFFFFFFFFFF000FFFF
FFFFFFFFFFC000FFFFFFFFFFFFF8000048477CC654>I<000000003FFE00000E0000000FFFFFC0
001E0000007FFFFFF8003E000003FFFFFFFE00FE00000FFFFFFFFF81FE00003FFFF800FFC3FE00
00FFFF80000FF7FE0001FFFC000003FFFE0007FFF0000001FFFE000FFFC00000007FFE001FFF80
0000003FFE003FFF000000001FFE007FFE000000000FFE00FFFC0000000007FE01FFF800000000
07FE03FFF00000000003FE03FFF00000000001FE07FFE00000000001FE07FFE00000000000FE0F
FFC00000000000FE0FFFC000000000007E1FFFC000000000007E1FFF8000000000007E3FFF8000
000000007E3FFF8000000000003E3FFF8000000000003E7FFF8000000000003E7FFF0000000000
003E7FFF000000000000007FFF00000000000000FFFF00000000000000FFFF00000000000000FF
FF00000000000000FFFF00000000000000FFFF00000000000000FFFF00000000000000FFFF0000
0000000000FFFF00000000000000FFFF00000000000000FFFF00000000000000FFFF0000000000
0000FFFF00000000000000FFFF000000000000007FFF000000000000007FFF000000000000007F
FF000000000000007FFF8000000000003E3FFF8000000000003E3FFF8000000000003E3FFF8000
000000003E1FFF8000000000003E1FFFC000000000003E0FFFC000000000007C0FFFC000000000
007C07FFE000000000007C07FFE00000000000F803FFF00000000000F803FFF00000000001F801
FFF80000000001F000FFFC0000000003E0007FFE0000000007E0003FFF000000000FC0001FFF80
0000001F80000FFFC00000003F000007FFF0000000FE000001FFFC000001FC000000FFFF80000F
F80000003FFFF8007FF00000000FFFFFFFFFC000000003FFFFFFFF00000000007FFFFFFC000000
00000FFFFFE00000000000003FFE000000474979C756>I<FFFFFFFFFFFFFFFE00FFFFFFFFFFFF
FFFE00FFFFFFFFFFFFFFFE00FFFFFFFFFFFFFFFE00FFFFFFFFFFFFFFFF00001FFFC00001FFFF00
001FFFC000001FFF00001FFFC0000007FF00001FFFC0000003FF00001FFFC0000000FF00001FFF
C00000007F00001FFFC00000007F00001FFFC00000003F00001FFFC00000003F80001FFFC00000
001F80001FFFC00000001F80001FFFC00000001F80001FFFC00000000F80001FFFC00000000F80
001FFFC0007C000F80001FFFC0007C000F80001FFFC0007C0007C0001FFFC0007C0007C0001FFF
C0007C0007C0001FFFC0007C0007C0001FFFC000FC000000001FFFC000FC000000001FFFC000FC
000000001FFFC001FC000000001FFFC003FC000000001FFFC01FFC000000001FFFFFFFFC000000
001FFFFFFFFC000000001FFFFFFFFC000000001FFFFFFFFC000000001FFFFFFFFC000000001FFF
C01FFC000000001FFFC003FC000000001FFFC001FC000000001FFFC000FC000000001FFFC000FC
000000001FFFC000FC000000001FFFC0007C00007C001FFFC0007C00007C001FFFC0007C00007C
001FFFC0007C0000F8001FFFC0007C0000F8001FFFC0007C0000F8001FFFC000000000F8001FFF
C000000001F8001FFFC000000001F0001FFFC000000001F0001FFFC000000001F0001FFFC00000
0003F0001FFFC000000003F0001FFFC000000007F0001FFFC000000007E0001FFFC00000000FE0
001FFFC00000001FE0001FFFC00000003FE0001FFFC00000007FE0001FFFC0000000FFE0001FFF
C0000003FFC0001FFFC000000FFFC0001FFFC00000FFFFC0FFFFFFFFFFFFFFFFC0FFFFFFFFFFFF
FFFFC0FFFFFFFFFFFFFFFF80FFFFFFFFFFFFFFFF80FFFFFFFFFFFFFFFF8046467CC54E>69
D<FFFFFFFFF80000FFFFFFC0FFFFFFFFF80000FFFFFFC0FFFFFFFFF80000FFFFFFC0FFFFFFFFF8
0000FFFFFFC0FFFFFFFFF80000FFFFFFC0001FFFC000000003FF8000001FFFC000000001FE0000
001FFFC000000003F80000001FFFC000000007F00000001FFFC00000000FE00000001FFFC00000
001FC00000001FFFC00000007F800000001FFFC0000000FE000000001FFFC0000001FC00000000
1FFFC0000003F8000000001FFFC0000007F0000000001FFFC000001FE0000000001FFFC000003F
C0000000001FFFC000007F00000000001FFFC00000FE00000000001FFFC00001FC00000000001F
FFC00007F800000000001FFFC0000FF000000000001FFFC0001FC000000000001FFFC0003F8000
000000001FFFC0007F0000000000001FFFC000FE0000000000001FFFC003FC0000000000001FFF
C007FC0000000000001FFFC00FFE0000000000001FFFC01FFF0000000000001FFFC03FFF800000
0000001FFFC0FFFF8000000000001FFFC1FFFFC000000000001FFFC3FFFFE000000000001FFFC7
FFFFF000000000001FFFCFEFFFF000000000001FFFDFC7FFF800000000001FFFFF87FFFC000000
00001FFFFE03FFFC00000000001FFFFC01FFFE00000000001FFFF800FFFF00000000001FFFF000
FFFF80000000001FFFE0007FFF80000000001FFFC0003FFFC0000000001FFFC0001FFFE0000000
001FFFC0001FFFF0000000001FFFC0000FFFF0000000001FFFC00007FFF8000000001FFFC00003
FFFC000000001FFFC00003FFFE000000001FFFC00001FFFE000000001FFFC00000FFFF00000000
1FFFC000007FFF800000001FFFC000007FFFC00000001FFFC000003FFFC00000001FFFC000001F
FFE00000001FFFC000000FFFF00000001FFFC000000FFFF80000001FFFC0000007FFF80000001F
FFC0000003FFFC0000001FFFC0000001FFFE0000001FFFC0000001FFFF0000001FFFC0000000FF
FF0000001FFFC00000007FFF8000001FFFC0000000FFFFC000FFFFFFFFF8007FFFFFFFE0FFFFFF
FFF8007FFFFFFFE0FFFFFFFFF8007FFFFFFFE0FFFFFFFFF8007FFFFFFFE0FFFFFFFFF8007FFFFF
FFE053477CC65D>75 D<FFFFFFFFFF000000FFFFFFFFFF000000FFFFFFFFFF000000FFFFFFFFFF
000000FFFFFFFFFF000000001FFFC000000000001FFFC000000000001FFFC000000000001FFFC0
00000000001FFFC000000000001FFFC000000000001FFFC000000000001FFFC000000000001FFF
C000000000001FFFC000000000001FFFC000000000001FFFC000000000001FFFC000000000001F
FFC000000000001FFFC000000000001FFFC000000000001FFFC000000000001FFFC00000000000
1FFFC000000000001FFFC000000000001FFFC000000000001FFFC000000000001FFFC000000000
001FFFC000000000001FFFC000000000001FFFC000000000001FFFC000000000001FFFC0000000
00001FFFC000000000001FFFC000000000001FFFC000000000001FFFC000000000001FFFC00000
0000001FFFC000000000001FFFC000000000001FFFC000000000001FFFC000000000001FFFC000
000000001FFFC0000000F8001FFFC0000000F8001FFFC0000000F8001FFFC0000000F8001FFFC0
000001F0001FFFC0000001F0001FFFC0000001F0001FFFC0000001F0001FFFC0000001F0001FFF
C0000003F0001FFFC0000003F0001FFFC0000003F0001FFFC0000007F0001FFFC0000007F0001F
FFC000000FE0001FFFC000001FE0001FFFC000001FE0001FFFC000003FE0001FFFC000007FE000
1FFFC00000FFE0001FFFC00003FFE0001FFFC0000FFFE0001FFFC0007FFFE0FFFFFFFFFFFFFFC0
FFFFFFFFFFFFFFC0FFFFFFFFFFFFFFC0FFFFFFFFFFFFFFC0FFFFFFFFFFFFFFC03D477CC647>I<
FFFFFFE0000000000003FFFFFFFFFFFFF0000000000007FFFFFFFFFFFFF0000000000007FFFFFF
FFFFFFF800000000000FFFFFFFFFFFFFF800000000000FFFFFFF001FFFF800000000000FFFF800
001FFFFC00000000001EFFF800001FFFFC00000000001EFFF800001FBFFE00000000003CFFF800
001FBFFE00000000003CFFF800001F9FFF000000000078FFF800001F9FFF000000000078FFF800
001F8FFF8000000000F0FFF800001F8FFF8000000000F0FFF800001F87FFC000000001E0FFF800
001F87FFC000000001E0FFF800001F87FFC000000001E0FFF800001F83FFE000000003C0FFF800
001F83FFE000000003C0FFF800001F81FFF00000000780FFF800001F81FFF00000000780FFF800
001F80FFF80000000F00FFF800001F80FFF80000000F00FFF800001F807FFC0000001E00FFF800
001F807FFC0000001E00FFF800001F807FFC0000001E00FFF800001F803FFE0000003C00FFF800
001F803FFE0000003C00FFF800001F801FFF0000007800FFF800001F801FFF0000007800FFF800
001F800FFF800000F000FFF800001F800FFF800000F000FFF800001F8007FFC00001E000FFF800
001F8007FFC00001E000FFF800001F8003FFE00003C000FFF800001F8003FFE00003C000FFF800
001F8003FFE00003C000FFF800001F8001FFF000078000FFF800001F8001FFF000078000FFF800
001F8000FFF8000F0000FFF800001F8000FFF8000F0000FFF800001F80007FFC001E0000FFF800
001F80007FFC001E0000FFF800001F80003FFE003C0000FFF800001F80003FFE003C0000FFF800
001F80001FFF00780000FFF800001F80001FFF00780000FFF800001F80001FFF00780000FFF800
001F80000FFF80F00000FFF800001F80000FFF80F00000FFF800001F800007FFC1E00000FFF800
001F800007FFC1E00000FFF800001F800003FFE3C00000FFF800001F800003FFE3C00000FFF800
001F800001FFF7800000FFF800001F800001FFF7800000FFF800001F800001FFF7800000FFF800
001F800000FFFF000000FFF800001F800000FFFF000000FFF800001F8000007FFE000000FFF800
001F8000007FFE000000FFF800001F8000003FFC000000FFF800001F8000003FFC000000FFF800
001F8000001FF8000000FFF800001F8000001FF8000000FFF800007FE000000FF0000000FFF800
FFFFFFF0000FF00007FFFFFFFFFFFFFFF0000FF00007FFFFFFFFFFFFFFF00007E00007FFFFFFFF
FFFFFFF00007E00007FFFFFFFFFFFFFFF00003C00007FFFFFFFF68477CC671>I<FFFFFFC00000
00FFFFFFF0FFFFFFE0000000FFFFFFF0FFFFFFF0000000FFFFFFF0FFFFFFF8000000FFFFFFF0FF
FFFFFC000000FFFFFFF0001FFFFC000000007FE000001FFFFE000000001F8000001FFFFF000000
001F8000001FFFFF800000001F8000001FFFFFC00000001F8000001FBFFFE00000001F8000001F
9FFFE00000001F8000001F9FFFF00000001F8000001F8FFFF80000001F8000001F87FFFC000000
1F8000001F83FFFE0000001F8000001F81FFFF0000001F8000001F80FFFF0000001F8000001F80
FFFF8000001F8000001F807FFFC000001F8000001F803FFFE000001F8000001F801FFFF000001F
8000001F800FFFF800001F8000001F8007FFF800001F8000001F8007FFFC00001F8000001F8003
FFFE00001F8000001F8001FFFF00001F8000001F8000FFFF80001F8000001F80007FFFC0001F80
00001F80003FFFC0001F8000001F80003FFFE0001F8000001F80001FFFF0001F8000001F80000F
FFF8001F8000001F800007FFFC001F8000001F800003FFFE001F8000001F800001FFFF001F8000
001F800001FFFF001F8000001F800000FFFF801F8000001F8000007FFFC01F8000001F8000003F
FFE01F8000001F8000001FFFF01F8000001F8000000FFFF81F8000001F8000000FFFF81F800000
1F80000007FFFC1F8000001F80000003FFFE1F8000001F80000001FFFF1F8000001F80000000FF
FF9F8000001F800000007FFFDF8000001F800000007FFFDF8000001F800000003FFFFF8000001F
800000001FFFFF8000001F800000000FFFFF8000001F8000000007FFFF8000001F8000000003FF
FF8000001F8000000003FFFF8000001F8000000001FFFF8000001F8000000000FFFF8000001F80
000000007FFF8000001F80000000003FFF8000001F80000000001FFF8000001F80000000001FFF
8000001F80000000000FFF8000001F800000000007FF8000001F800000000003FF8000001F8000
00000001FF8000007FE00000000000FF8000FFFFFFF000000000FF8000FFFFFFF0000000007F80
00FFFFFFF0000000003F8000FFFFFFF0000000001F8000FFFFFFF0000000000F000054477CC65D
>I<00000003FFF0000000000000007FFFFF80000000000003FFFFFFF000000000000FFFFFFFFC
00000000003FFF807FFF0000000000FFF80007FFC000000003FFE00001FFF000000007FFC00000
FFF80000000FFF0000003FFC0000001FFE0000001FFE0000003FFC0000000FFF0000007FFC0000
000FFF800000FFF800000007FFC00001FFF000000003FFE00003FFF000000003FFF00003FFE000
000001FFF00007FFE000000001FFF80007FFC000000000FFF8000FFFC000000000FFFC000FFFC0
00000000FFFC001FFF80000000007FFE001FFF80000000007FFE003FFF80000000007FFF003FFF
80000000007FFF003FFF80000000007FFF007FFF00000000003FFF807FFF00000000003FFF807F
FF00000000003FFF807FFF00000000003FFF807FFF00000000003FFF80FFFF00000000003FFFC0
FFFF00000000003FFFC0FFFF00000000003FFFC0FFFF00000000003FFFC0FFFF00000000003FFF
C0FFFF00000000003FFFC0FFFF00000000003FFFC0FFFF00000000003FFFC0FFFF00000000003F
FFC0FFFF00000000003FFFC0FFFF00000000003FFFC0FFFF00000000003FFFC0FFFF0000000000
3FFFC0FFFF00000000003FFFC07FFF00000000003FFF807FFF00000000003FFF807FFF80000000
007FFF807FFF80000000007FFF803FFF80000000007FFF003FFF80000000007FFF003FFF800000
00007FFF001FFFC000000000FFFE001FFFC000000000FFFE001FFFC000000000FFFE000FFFE000
000001FFFC000FFFE000000001FFFC0007FFE000000001FFF80003FFF000000003FFF00003FFF8
00000007FFF00001FFF800000007FFE00000FFFC0000000FFFC000007FFE0000001FFF8000007F
FF0000003FFF8000003FFF8000007FFF0000000FFFC00000FFFC00000007FFF00003FFF8000000
03FFFC000FFFF000000000FFFF807FFFC0000000007FFFFFFFFF80000000000FFFFFFFFC000000
000003FFFFFFF00000000000007FFFFF8000000000000003FFF0000000004A4979C759>I<FFFF
FFFFFFFF800000FFFFFFFFFFFFFC0000FFFFFFFFFFFFFF0000FFFFFFFFFFFFFFC000FFFFFFFFFF
FFFFF000001FFF80000FFFFC00001FFF800001FFFE00001FFF8000007FFF00001FFF8000003FFF
80001FFF8000001FFFC0001FFF8000000FFFC0001FFF8000000FFFE0001FFF8000000FFFE0001F
FF80000007FFF0001FFF80000007FFF0001FFF80000007FFF0001FFF80000007FFF8001FFF8000
0007FFF8001FFF80000007FFF8001FFF80000007FFF8001FFF80000007FFF8001FFF80000007FF
F8001FFF80000007FFF8001FFF80000007FFF8001FFF80000007FFF0001FFF80000007FFF0001F
FF80000007FFF0001FFF8000000FFFE0001FFF8000000FFFE0001FFF8000000FFFC0001FFF8000
001FFF80001FFF8000003FFF80001FFF8000007FFF00001FFF800001FFFE00001FFF80000FFFF8
00001FFFFFFFFFFFF000001FFFFFFFFFFFC000001FFFFFFFFFFE0000001FFFFFFFFFF00000001F
FFC00000000000001FFFC00000000000001FFFC00000000000001FFFC00000000000001FFFC000
00000000001FFFC00000000000001FFFC00000000000001FFFC00000000000001FFFC000000000
00001FFFC00000000000001FFFC00000000000001FFFC00000000000001FFFC00000000000001F
FFC00000000000001FFFC00000000000001FFFC00000000000001FFFC00000000000001FFFC000
00000000001FFFC00000000000001FFFC00000000000001FFFC00000000000001FFFC000000000
00001FFFC00000000000001FFFC00000000000001FFFC00000000000001FFFC00000000000001F
FFC00000000000FFFFFFFFF800000000FFFFFFFFF800000000FFFFFFFFF800000000FFFFFFFFF8
00000000FFFFFFFFF80000000045477CC651>I<FFFFFFFFFFFC0000000000FFFFFFFFFFFFF000
000000FFFFFFFFFFFFFE00000000FFFFFFFFFFFFFF80000000FFFFFFFFFFFFFFE0000000001FFF
80001FFFF8000000001FFF800001FFFC000000001FFF8000007FFF000000001FFF8000003FFF80
0000001FFF8000001FFF800000001FFF8000000FFFC00000001FFF8000000FFFE00000001FFF80
00000FFFE00000001FFF80000007FFF00000001FFF80000007FFF00000001FFF80000007FFF800
00001FFF80000007FFF80000001FFF80000007FFF80000001FFF80000007FFF80000001FFF8000
0007FFF80000001FFF80000007FFF80000001FFF80000007FFF80000001FFF80000007FFF80000
001FFF80000007FFF00000001FFF80000007FFF00000001FFF8000000FFFE00000001FFF800000
0FFFE00000001FFF8000000FFFC00000001FFF8000001FFF800000001FFF8000003FFF00000000
1FFF800000FFFE000000001FFF800003FFF8000000001FFF80001FFFF0000000001FFFFFFFFFFF
C0000000001FFFFFFFFFFE00000000001FFFFFFFFFF800000000001FFFFFFFFFFE00000000001F
FF80007FFF80000000001FFF80001FFFC0000000001FFF800007FFE0000000001FFF800003FFF0
000000001FFF800001FFF8000000001FFF800001FFFC000000001FFF800000FFFE000000001FFF
800000FFFE000000001FFF8000007FFE000000001FFF8000007FFF000000001FFF8000007FFF00
0000001FFF8000007FFF000000001FFF8000007FFF000000001FFF8000007FFF000000001FFF80
00007FFF000000001FFF8000007FFF000000001FFF8000007FFF800000001FFF8000007FFF8000
00001FFF8000007FFF800000001FFF8000007FFF800000001FFF8000007FFF800000001FFF8000
007FFF8000E0001FFF8000007FFF8001F0001FFF8000007FFFC001F0001FFF8000007FFFC001F0
001FFF8000003FFFC001F0001FFF8000003FFFC003F0001FFF8000001FFFE003E0001FFF800000
0FFFE007E0FFFFFFFFF00007FFF007C0FFFFFFFFF00003FFFC1F80FFFFFFFFF00001FFFFFF00FF
FFFFFFF000007FFFFE00FFFFFFFFF000001FFFFC000000000000000000FFF00054487CC659>82
D<00007FF00007000007FFFF000F00001FFFFFC01F00007FFFFFF03F0000FFFFFFFC7F0003FFC0
0FFEFF0007FE0000FFFF0007FC00003FFF000FF000001FFF001FF0000007FF001FE0000003FF00
3FE0000001FF003FC0000001FF007FC0000000FF007FC00000007F007FC00000007F00FFC00000
003F00FFC00000003F00FFC00000003F00FFE00000003F00FFE00000001F00FFF00000001F00FF
F80000001F00FFFC0000001F00FFFF00000000007FFFC0000000007FFFFE000000007FFFFFE000
00003FFFFFFF0000003FFFFFFFF000001FFFFFFFFC00001FFFFFFFFF00000FFFFFFFFFC00007FF
FFFFFFE00007FFFFFFFFF00003FFFFFFFFF80000FFFFFFFFFC00007FFFFFFFFE00003FFFFFFFFE
00000FFFFFFFFF000001FFFFFFFF0000003FFFFFFF80000001FFFFFF800000000FFFFFC0000000
00FFFFC0000000001FFFC0000000000FFFE00000000007FFE00000000003FFE07800000001FFE0
F800000000FFE0F800000000FFE0F8000000007FE0F8000000007FE0F8000000007FE0FC000000
007FE0FC000000007FC0FC000000007FC0FE000000007FC0FE000000007F80FF00000000FF80FF
80000000FF80FFC0000000FF00FFE0000001FE00FFF8000003FE00FFFE000007FC00FFFF80000F
F800FFFFFC007FF000FE3FFFFFFFE000FC0FFFFFFF8000F803FFFFFF0000F0007FFFF80000E000
03FFC00000334979C742>I<3FFFFFFFFFFFFFFFFF003FFFFFFFFFFFFFFFFF003FFFFFFFFFFFFF
FFFF003FFFFFFFFFFFFFFFFF003FFFFFFFFFFFFFFFFF003FFF0003FFF8003FFF007FF80003FFF8
0007FF807FE00003FFF80001FF807FC00003FFF80000FF807F800003FFF800007F807F000003FF
F800003F807F000003FFF800003F807E000003FFF800001F807E000003FFF800001F807E000003
FFF800000F807C000003FFF800000F807C000003FFF800000F807C000003FFF800000F807C0000
03FFF800000F80FC000003FFF800000FC0F8000003FFF8000007C0F8000003FFF8000007C0F800
0003FFF8000007C0F8000003FFF8000007C0F8000003FFF8000007C000000003FFF80000000000
000003FFF80000000000000003FFF80000000000000003FFF80000000000000003FFF800000000
00000003FFF80000000000000003FFF80000000000000003FFF80000000000000003FFF8000000
0000000003FFF80000000000000003FFF80000000000000003FFF80000000000000003FFF80000
000000000003FFF80000000000000003FFF80000000000000003FFF80000000000000003FFF800
00000000000003FFF80000000000000003FFF80000000000000003FFF80000000000000003FFF8
0000000000000003FFF80000000000000003FFF80000000000000003FFF80000000000000003FF
F80000000000000003FFF80000000000000003FFF80000000000000003FFF80000000000000003
FFF80000000000000003FFF80000000000000003FFF80000000000000003FFF800000000000000
03FFF80000000000000003FFF80000000000000003FFF80000000000000003FFF8000000000000
0003FFF80000000000000003FFF80000000000000003FFF80000000000000003FFF80000000000
03FFFFFFFFFFF800000003FFFFFFFFFFF800000003FFFFFFFFFFF800000003FFFFFFFFFFF80000
0003FFFFFFFFFFF800004A467CC553>I<0007FFFC000000007FFFFFC0000001FFFFFFF8000003
FFFFFFFE000007FE001FFF000007FF0003FFC0000FFF8001FFE0000FFF8000FFF0000FFF80007F
F0000FFF80007FF8000FFF80007FF80007FF00003FFC0007FF00003FFC0003FE00003FFC0000F8
00003FFC00000000003FFC00000000003FFC00000000003FFC00000000003FFC00000007FFFFFC
000000FFFFFFFC000007FFFFFFFC00003FFFE03FFC0000FFFE003FFC0003FFF0003FFC0007FFC0
003FFC000FFF00003FFC001FFE00003FFC003FFC00003FFC007FF800003FFC007FF800003FFC00
FFF000003FFC00FFF000003FFC00FFF000003FFC00FFF000003FFC00FFF000003FFC00FFF00000
7FFC007FF80000FFFC007FF80001EFFC003FFC0003EFFC003FFF0007CFFF000FFFC03F8FFFF807
FFFFFF07FFFC01FFFFFC03FFFC007FFFF001FFFC0003FF80007FF8362E7DAD3A>97
D<007FC00000000000FFFFC00000000000FFFFC00000000000FFFFC00000000000FFFFC0000000
0000FFFFC0000000000003FFC0000000000001FFC0000000000001FFC0000000000001FFC00000
00000001FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC000
0000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC0
000000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000000001FF
C0000000000001FFC0000000000001FFC00FFC00000001FFC07FFFC0000001FFC3FFFFF0000001
FFCFFFFFFC000001FFDFF00FFF000001FFFF8003FF800001FFFE0001FFC00001FFF800007FE000
01FFF000007FF00001FFE000003FF80001FFE000001FFC0001FFE000001FFC0001FFE000001FFE
0001FFE000001FFE0001FFE000000FFF0001FFE000000FFF0001FFE000000FFF0001FFE000000F
FF0001FFE000000FFF8001FFE000000FFF8001FFE000000FFF8001FFE000000FFF8001FFE00000
0FFF8001FFE000000FFF8001FFE000000FFF8001FFE000000FFF8001FFE000000FFF8001FFE000
000FFF8001FFE000000FFF0001FFE000000FFF0001FFE000000FFF0001FFE000001FFE0001FFE0
00001FFE0001FFE000001FFC0001FFE000001FFC0001FFE000003FF80001FFF000003FF80001FF
F800007FF00001FFFC0000FFE00001FFFE0001FFC00001FFBF0007FF800001FF1FE01FFE000001
FE0FFFFFFC000001FC03FFFFF0000001F800FFFF80000001F0001FF800000039487CC742>I<00
001FFFC0000000FFFFF8000007FFFFFE00001FFFFFFF80007FFC00FFC000FFE001FFC001FFC003
FFE003FF8003FFE007FF0003FFE00FFE0003FFE00FFE0003FFE01FFC0001FFC01FFC0001FFC03F
FC0000FF803FFC00003E007FF8000000007FF8000000007FF800000000FFF800000000FFF80000
0000FFF800000000FFF800000000FFF800000000FFF800000000FFF800000000FFF800000000FF
F800000000FFF8000000007FF8000000007FF8000000007FFC000000003FFC000000003FFC0000
00001FFC000000F81FFE000000F80FFE000000F80FFF000001F007FF800003F003FFC00007E001
FFE0000FC000FFF0001F80007FFE00FF00001FFFFFFE000007FFFFF8000000FFFFE00000001FFE
00002D2E7CAD35>I<00000000007FC00000000000FFFFC00000000000FFFFC00000000000FFFF
C00000000000FFFFC00000000000FFFFC0000000000003FFC0000000000001FFC0000000000001
FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC00000000000
01FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC000000000
0001FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000
000001FFC0000000000001FFC0000000000001FFC00000000FFC01FFC0000000FFFF81FFC00000
07FFFFE1FFC000001FFFFFF9FFC000007FFC03FFFFC00000FFF0007FFFC00001FFC0001FFFC000
03FF80000FFFC00007FF000007FFC0000FFE000003FFC0000FFE000003FFC0001FFC000003FFC0
001FFC000003FFC0003FFC000003FFC0003FFC000003FFC0007FF8000003FFC0007FF8000003FF
C0007FF8000003FFC000FFF8000003FFC000FFF8000003FFC000FFF8000003FFC000FFF8000003
FFC000FFF8000003FFC000FFF8000003FFC000FFF8000003FFC000FFF8000003FFC000FFF80000
03FFC000FFF8000003FFC0007FF8000003FFC0007FF8000003FFC0007FF8000003FFC0003FF800
0003FFC0003FFC000003FFC0003FFC000003FFC0001FFC000003FFC0001FFC000003FFC0000FFE
000007FFC00007FF00000FFFC00003FF00001FFFC00001FFC0003FFFC00000FFE000FFFFE00000
7FF807FBFFFF80001FFFFFF3FFFF800007FFFFC3FFFF800001FFFF03FFFF8000001FF803FFFF80
39487CC742>I<00001FFE00000001FFFFE0000007FFFFF800001FFFFFFE00007FFC07FF0000FF
E001FF8001FFC0007FC003FF80003FE007FF00003FF00FFE00001FF01FFE00000FF81FFC00000F
F83FFC00000FFC3FFC000007FC7FFC000007FC7FF8000007FC7FF8000007FE7FF8000007FEFFF8
000007FEFFF8000007FEFFFFFFFFFFFEFFFFFFFFFFFEFFFFFFFFFFFEFFFFFFFFFFFCFFF8000000
00FFF800000000FFF800000000FFF8000000007FF8000000007FF8000000007FFC000000003FFC
000000003FFC000000003FFC0000001C1FFE0000003E0FFE0000003E07FF0000007E07FF000000
FC03FF800001F801FFC00003F0007FF0001FE0003FFE00FFC0001FFFFFFF800007FFFFFE000000
FFFFF80000000FFF80002F2E7DAD36>I<000000FFC000000007FFF80000003FFFFC000000FFFF
FF000001FFC1FF000007FF03FF80000FFC03FF80000FF807FFC0001FF807FFC0003FF007FFC000
3FF007FFC0003FE003FF80007FE003FF80007FE001FF00007FE000FE00007FE0003800007FE000
0000007FE0000000007FE0000000007FE0000000007FE0000000007FE0000000007FE000000000
7FE0000000007FE0000000007FE0000000FFFFFFFE0000FFFFFFFE0000FFFFFFFE0000FFFFFFFE
0000FFFFFFFE0000007FF0000000007FF0000000007FF0000000007FF0000000007FF000000000
7FF0000000007FF0000000007FF0000000007FF0000000007FF0000000007FF0000000007FF000
0000007FF0000000007FF0000000007FF0000000007FF0000000007FF0000000007FF000000000
7FF0000000007FF0000000007FF0000000007FF0000000007FF0000000007FF0000000007FF000
0000007FF0000000007FF0000000007FF0000000007FF0000000007FF0000000007FF000000000
7FF0000000007FF0000000007FF0000000007FF0000000007FF00000003FFFFFF800003FFFFFF8
00003FFFFFF800003FFFFFF800003FFFFFF800002A487DC724>I<00000000001F8000007FF000
FFE00007FFFF03FFF0001FFFFFC7FFF0007FFFFFFFC7F800FFE03FFE0FF801FF800FFC0FF803FF
0007FE0FF807FE0003FF07F007FE0003FF07F00FFC0001FF81C00FFC0001FF80000FFC0001FF80
001FFC0001FFC0001FFC0001FFC0001FFC0001FFC0001FFC0001FFC0001FFC0001FFC0001FFC00
01FFC0000FFC0001FF80000FFC0001FF80000FFC0001FF800007FE0003FF000007FE0003FF0000
03FF0007FE000001FF800FFC000000FFE03FF8000001FFFFFFF0000001DFFFFFC0000003C7FFFF
00000003C07FF000000007C0000000000007C0000000000007C0000000000007C0000000000007
E0000000000007F0000000000007F8000000000007FFFFFFF0000007FFFFFFFF000003FFFFFFFF
E00003FFFFFFFFF80001FFFFFFFFFE0001FFFFFFFFFF0000FFFFFFFFFF80007FFFFFFFFF8003FF
FFFFFFFFC00FFFFFFFFFFFC01FF800001FFFE03FE0000001FFE07FC00000007FF07FC00000003F
F0FF800000001FF0FF800000001FF0FF800000001FF0FF800000001FF0FF800000001FF07FC000
00003FE07FC00000003FE03FE00000007FC03FF0000000FFC01FFC000003FF800FFF00000FFF00
03FFF000FFFC0000FFFFFFFFF000003FFFFFFFC0000007FFFFFE000000003FFFC0000035447DAE
3B>I<007FC00000000000FFFFC00000000000FFFFC00000000000FFFFC00000000000FFFFC000
00000000FFFFC0000000000003FFC0000000000001FFC0000000000001FFC0000000000001FFC0
000000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000000001FF
C0000000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000000001
FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC00000000000
01FFC0000000000001FFC0000000000001FFC001FFC0000001FFC00FFFF8000001FFC03FFFFE00
0001FFC0FFFFFF000001FFC1FC07FF800001FFC3E003FFC00001FFC7C001FFC00001FFCF0001FF
E00001FFDE0000FFE00001FFDC0000FFE00001FFFC0000FFF00001FFF80000FFF00001FFF00000
FFF00001FFF00000FFF00001FFF00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE000
00FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE0
0000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FF
E00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001
FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF000
01FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF000FFFFFFC07FFFFF
E0FFFFFFC07FFFFFE0FFFFFFC07FFFFFE0FFFFFFC07FFFFFE0FFFFFFC07FFFFFE03B487CC742>
I<00FC0001FF0003FF8007FFC00FFFC01FFFE01FFFE01FFFE01FFFE01FFFE01FFFE00FFFC007FF
C003FF8001FF0000FC000000000000000000000000000000000000000000000000000000000000
00000000007FC0FFFFC0FFFFC0FFFFC0FFFFC0FFFFC003FFC001FFC001FFC001FFC001FFC001FF
C001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FF
C001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FF
C001FFC001FFC001FFC0FFFFFFFFFFFFFFFFFFFFFFFFFFFFFF18497CC820>I<007FC000FFFFC0
00FFFFC000FFFFC000FFFFC000FFFFC00003FFC00001FFC00001FFC00001FFC00001FFC00001FF
C00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001
FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC000
01FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC0
0001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FF
C00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001
FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC000FFFFFF80FFFFFF80FFFFFF80
FFFFFF80FFFFFF8019487CC720>108 D<007FC001FFC00000FFE00000FFFFC00FFFF80007FFFC
0000FFFFC03FFFFE001FFFFF0000FFFFC0FFFFFF007FFFFF8000FFFFC1FC07FF80FE03FFC000FF
FFC3E003FFC1F001FFE00003FFC7C001FFC3E000FFE00001FFCF0001FFE78000FFF00001FFDE00
00FFEF00007FF00001FFDC0000FFEE00007FF00001FFFC0000FFFE00007FF80001FFF80000FFFC
00007FF80001FFF00000FFF800007FF80001FFF00000FFF800007FF80001FFF00000FFF800007F
F80001FFE00000FFF000007FF80001FFE00000FFF000007FF80001FFE00000FFF000007FF80001
FFE00000FFF000007FF80001FFE00000FFF000007FF80001FFE00000FFF000007FF80001FFE000
00FFF000007FF80001FFE00000FFF000007FF80001FFE00000FFF000007FF80001FFE00000FFF0
00007FF80001FFE00000FFF000007FF80001FFE00000FFF000007FF80001FFE00000FFF000007F
F80001FFE00000FFF000007FF80001FFE00000FFF000007FF80001FFE00000FFF000007FF80001
FFE00000FFF000007FF80001FFE00000FFF000007FF80001FFE00000FFF000007FF80001FFE000
00FFF000007FF80001FFE00000FFF000007FF80001FFE00000FFF000007FF80001FFE00000FFF0
00007FF80001FFE00000FFF000007FF80001FFE00000FFF000007FF80001FFE00000FFF000007F
F800FFFFFFC07FFFFFE03FFFFFF0FFFFFFC07FFFFFE03FFFFFF0FFFFFFC07FFFFFE03FFFFFF0FF
FFFFC07FFFFFE03FFFFFF0FFFFFFC07FFFFFE03FFFFFF05C2E7CAD63>I<007FC001FFC00000FF
FFC00FFFF80000FFFFC03FFFFE0000FFFFC0FFFFFF0000FFFFC1FC07FF8000FFFFC3E003FFC000
03FFC7C001FFC00001FFCF0001FFE00001FFDE0000FFE00001FFDC0000FFE00001FFFC0000FFF0
0001FFF80000FFF00001FFF00000FFF00001FFF00000FFF00001FFF00000FFF00001FFE00000FF
F00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000
FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE000
00FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE0
0000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FF
E00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001
FFE00000FFF000FFFFFFC07FFFFFE0FFFFFFC07FFFFFE0FFFFFFC07FFFFFE0FFFFFFC07FFFFFE0
FFFFFFC07FFFFFE03B2E7CAD42>I<00000FFF0000000000FFFFF000000007FFFFFE0000001FFF
FFFF8000003FFC03FFC00000FFE0007FF00001FF80001FF80003FF00000FFC0007FE000007FE00
0FFE000007FF000FFC000003FF001FFC000003FF803FFC000003FFC03FF8000001FFC03FF80000
01FFC07FF8000001FFE07FF8000001FFE07FF8000001FFE0FFF8000001FFF0FFF8000001FFF0FF
F8000001FFF0FFF8000001FFF0FFF8000001FFF0FFF8000001FFF0FFF8000001FFF0FFF8000001
FFF0FFF8000001FFF0FFF8000001FFF07FF8000001FFE07FF8000001FFE07FF8000001FFE07FF8
000001FFE03FFC000003FFC03FFC000003FFC01FFC000003FF801FFE000007FF800FFE000007FF
0007FF00000FFE0003FF80001FFC0001FFC0003FF80000FFE0007FF000007FFC03FFE000001FFF
FFFF80000007FFFFFE00000000FFFFF0000000000FFF000000342E7DAD3B>I<007FC00FFC0000
00FFFFC07FFFC00000FFFFC3FFFFF00000FFFFCFFFFFFC0000FFFFDFF01FFF0000FFFFFF8007FF
800003FFFE0001FFC00001FFF80000FFE00001FFF00000FFF00001FFE000007FF80001FFE00000
3FFC0001FFE000003FFC0001FFE000003FFE0001FFE000001FFE0001FFE000001FFF0001FFE000
001FFF0001FFE000001FFF0001FFE000000FFF0001FFE000000FFF8001FFE000000FFF8001FFE0
00000FFF8001FFE000000FFF8001FFE000000FFF8001FFE000000FFF8001FFE000000FFF8001FF
E000000FFF8001FFE000000FFF8001FFE000000FFF8001FFE000000FFF0001FFE000001FFF0001
FFE000001FFF0001FFE000001FFE0001FFE000001FFE0001FFE000003FFC0001FFE000003FFC00
01FFE000007FF80001FFF000007FF80001FFF80000FFF00001FFFC0001FFE00001FFFE0003FFC0
0001FFFF0007FF800001FFFFE03FFE000001FFEFFFFFFC000001FFE3FFFFF0000001FFE0FFFF80
000001FFE01FF800000001FFE0000000000001FFE0000000000001FFE0000000000001FFE00000
00000001FFE0000000000001FFE0000000000001FFE0000000000001FFE0000000000001FFE000
0000000001FFE0000000000001FFE0000000000001FFE0000000000001FFE0000000000001FFE0
000000000001FFE00000000000FFFFFFC000000000FFFFFFC000000000FFFFFFC000000000FFFF
FFC000000000FFFFFFC00000000039427CAD42>I<00FF803F8000FFFF80FFF000FFFF83FFFC00
FFFF87FFFE00FFFF8FC3FF00FFFF8F07FF0003FF9E0FFF8001FFBC0FFF8001FFB80FFF8001FFF8
0FFF8001FFF00FFF8001FFF007FF0001FFF007FF0001FFE003FE0001FFE000F80001FFE0000000
01FFE000000001FFC000000001FFC000000001FFC000000001FFC000000001FFC000000001FFC0
00000001FFC000000001FFC000000001FFC000000001FFC000000001FFC000000001FFC0000000
01FFC000000001FFC000000001FFC000000001FFC000000001FFC000000001FFC000000001FFC0
00000001FFC000000001FFC000000001FFC000000001FFC000000001FFC0000000FFFFFFE00000
FFFFFFE00000FFFFFFE00000FFFFFFE00000FFFFFFE00000292E7CAD31>114
D<000FFF00E0007FFFF3E001FFFFFFE007FFFFFFE00FF800FFE01FC0001FE03F80000FE03F0000
07E07F000003E07F000003E0FF000003E0FF000003E0FF800003E0FFC0000000FFF0000000FFFE
000000FFFFF800007FFFFFC0007FFFFFF0003FFFFFFC001FFFFFFF000FFFFFFF8007FFFFFFC003
FFFFFFE000FFFFFFF0003FFFFFF00003FFFFF800001FFFF8000000FFFC0000001FFC7800000FFC
F8000007FCF8000003FCFC000003FCFC000003FCFE000003F8FE000003F8FF000003F8FF800007
F0FFC0000FF0FFF0001FE0FFFC00FFC0FFFFFFFF80FC7FFFFE00F81FFFF800E003FF8000262E7C
AD2F>I<0001F000000001F000000001F000000001F000000001F000000001F000000003F00000
0003F000000003F000000007F000000007F000000007F00000000FF00000000FF00000001FF000
00003FF00000003FF00000007FF0000001FFF0000003FFF000000FFFFFFFC0FFFFFFFFC0FFFFFF
FFC0FFFFFFFFC0FFFFFFFFC000FFF0000000FFF0000000FFF0000000FFF0000000FFF0000000FF
F0000000FFF0000000FFF0000000FFF0000000FFF0000000FFF0000000FFF0000000FFF0000000
FFF0000000FFF0000000FFF0000000FFF0000000FFF0000000FFF0000000FFF0000000FFF00000
00FFF0000000FFF0000000FFF001F000FFF001F000FFF001F000FFF001F000FFF001F000FFF001
F000FFF001F000FFF001F000FFF001F0007FF001E0007FF803E0003FF803E0003FFC07C0001FFE
0F80000FFFFF800007FFFE000001FFFC0000001FF00024427EC12E>I<007FE000003FF000FFFF
E0007FFFF000FFFFE0007FFFF000FFFFE0007FFFF000FFFFE0007FFFF000FFFFE0007FFFF00003
FFE00001FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF000
01FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF0
0001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FF
F00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000
FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE000
00FFF00001FFE00000FFF00001FFE00000FFF00001FFE00001FFF00001FFE00001FFF00001FFE0
0001FFF00001FFE00003FFF00000FFE00007FFF00000FFE0000F7FF000007FE0001F7FF000007F
F0003E7FF800003FFC00FC7FFFE0001FFFFFF87FFFE00007FFFFE07FFFE00001FFFF807FFFE000
003FFE007FFFE03B2E7CAD42>I<FFFFFF8001FFFFFFFFFF8001FFFFFFFFFF8001FFFFFFFFFF80
01FFFFFFFFFF8001FFFF01FFE000001FC001FFF000001F8001FFF000001F8000FFF800001F0000
FFF800003F00007FF800003E00007FFC00007E00003FFC00007C00003FFE0000FC00001FFE0000
F800001FFF0001F800000FFF0001F000000FFF8003F0000007FF8003E0000007FFC007E0000007
FFC007E0000003FFE007C0000003FFE00FC0000001FFE00F80000001FFF01F80000000FFF01F00
000000FFF83F000000007FF83E000000007FFC7E000000003FFC7C000000003FFEFC000000001F
FEF8000000001FFFF8000000001FFFF8000000000FFFF0000000000FFFF00000000007FFE00000
000007FFE00000000003FFC00000000003FFC00000000001FF800000000001FF800000000000FF
000000000000FF0000000000007E0000000000003C000000382E7DAD3F>I<FFFFFF07FFFFE007
FFFEFFFFFF07FFFFE007FFFEFFFFFF07FFFFE007FFFEFFFFFF07FFFFE007FFFEFFFFFF07FFFFE0
07FFFE03FFC0001FFC00003FC003FFE0000FFC00001F8001FFE0000FFC00001F0001FFE0000FFE
00001F0001FFF00007FE00003F0000FFF0000FFF00003E0000FFF8000FFF00007E00007FF8000F
FF00007C00007FF8001FFF80007C00003FFC001FFF8000F800003FFC003FFFC000F800003FFE00
3EFFC001F800001FFE003EFFC001F000001FFE007EFFE003F000000FFF007C7FE003E000000FFF
00FC7FF003E000000FFF80F83FF007E0000007FF80F83FF007C0000007FF81F83FF80FC0000003
FFC1F01FF80F80000003FFC3F01FFC0F80000003FFE3E00FFC1F80000001FFE3E00FFC1F000000
01FFE7E00FFE3F00000000FFF7C007FE3E00000000FFFFC007FF3E00000000FFFF8003FF7E0000
00007FFF8003FF7C000000007FFF8003FFFC000000003FFF0001FFF8000000003FFF0001FFF800
0000003FFE0000FFF8000000001FFE0000FFF0000000001FFE0000FFF0000000000FFC00007FE0
000000000FFC00007FE0000000000FF800003FE00000000007F800003FC00000000007F800003F
C00000000003F000001F800000000001E000000F0000004F2E7DAD56>I<7FFFFF801FFFFF007F
FFFF801FFFFF007FFFFF801FFFFF007FFFFF801FFFFF007FFFFF801FFFFF00007FF80001FF0000
007FFC0001FC0000003FFE0003F80000001FFF0007F00000000FFF0007E000000007FF800FC000
000003FFC01F8000000003FFE03F8000000001FFF07F0000000000FFF8FE00000000007FF9FC00
000000003FFFF800000000003FFFF000000000001FFFE000000000000FFFC0000000000007FFC0
000000000003FFC0000000000001FFE0000000000001FFF0000000000001FFF8000000000003FF
FC000000000003FFFE000000000007FFFE00000000000FEFFF00000000001FCFFF80000000003F
87FFC0000000007F03FFE000000000FE01FFE000000001FC00FFF000000001F8007FF800000003
F0007FFC00000007F0003FFE0000000FE0001FFF0000001FC0000FFF0000003F800007FF800000
FF800007FFC000FFFFF8003FFFFFC0FFFFF8003FFFFFC0FFFFF8003FFFFFC0FFFFF8003FFFFFC0
FFFFF8003FFFFFC03A2E7EAD3F>I<7FFFFFC000FFFF807FFFFFC000FFFF807FFFFFC000FFFF80
7FFFFFC000FFFF807FFFFFC000FFFF8000FFF000000FE00000FFF800000FC00000FFF800000FC0
00007FFC00000F8000007FFC00001F8000003FFC00001F0000003FFE00003F0000001FFE00003E
0000001FFF00007E0000000FFF00007C0000000FFF8000FC00000007FF8000F800000007FFC001
F800000003FFC001F000000003FFE003F000000003FFE003F000000001FFF003E000000001FFF0
07E000000000FFF007C000000000FFF80FC0000000007FF80F80000000007FFC1F80000000003F
FC1F00000000003FFE3F00000000001FFE3E00000000001FFF7E00000000000FFF7C0000000000
0FFFFC00000000000FFFFC000000000007FFF8000000000007FFF8000000000003FFF000000000
0003FFF0000000000001FFE0000000000001FFE0000000000000FFC0000000000000FFC0000000
0000007F800000000000007F800000000000003F000000000000003F000000000000003F000000
000000003E000000000000007E000000000000007C00000000000000FC000000001F8000F80000
00003FC001F8000000007FE001F000000000FFF003F000000000FFF003E000000000FFF007E000
000000FFF00FC000000000FFF01F8000000000FFF03F80000000007FE07F00000000007F43FE00
000000003FFFF800000000001FFFF0000000000007FFC0000000000001FE00000000000039427E
AD3F>I E /Fz 30 120 df<78FCFCFEFE7A02020202040404081010204007127B8511>44
D<78FCFCFCFC7806067B8511>46 D<00100000700001F0000FF000FEF000F0F00000F00000F000
00F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F000
00F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F000
00F00000F00000F00001F8007FFFE07FFFE013287BA71E>49 D<007F000003FFC0000701F0000C
00F80010007C001C007C003E007E003E003E003E003E001E003E000C007E0000007C0000007C00
000078000000F0000000E0000001C0000007000000FF00000001E0000000F0000000780000003C
0000003E0000001F0000001F0000001F8000001F8030001F8078001F80FC001F80FC001F80FC00
1F00F8001F0040003F0040003E0030007C001800F8000F01F00003FFC000007F000019297EA71E
>51 D<007F000001FFC0000381F000060078000C003C001C001C0018000E0038000E0038000E00
38000E003C000E003C000E003E001C001F8018001FC038000FF0600007F8C00003FF800001FF00
00007FC00000FFE000030FF8000603FC001C01FE0038007E0030003F0070000F0070000780E000
0780E0000380E0000380E0000380E0000380F0000300700007007800060038000C001E0038000F
80F00003FFE000007F000019297EA71E>56 D<007F000001FFC00007C1E0000F0070001E003800
1C003C003C001C0078001E0078001E00F8000F00F8000F00F8000F00F8000F00F8000F80F8000F
80F8000F80F8000F8078000F8078001F803C001F803C001F801C002F800E004F800700CF800381
0F80007E0F8000000F0000000F0000000F0000001E0000001E0000001E0000003C001C003C003E
0078003E0070003C00E0001801C0001C0780000FFE000003F8000019297EA71E>I<FFFFFF8000
FFFFFFF00007E000FC0003E0007E0003E0003F0003E0001F8003E0000F8003E0000F8003E0000F
C003E0000FC003E0000FC003E0000FC003E0000FC003E0000F8003E0001F8003E0001F0003E000
3E0003E0007C0003E001F80003FFFFE00003E000F80003E0003E0003E0001F0003E0000F8003E0
0007C003E00007E003E00003E003E00003F003E00003F003E00003F003E00003F003E00003F003
E00003F003E00007E003E00007E003E0000FC003E0001F8003E0003F0007E000FE00FFFFFFF800
FFFFFFE00024297EA82A>66 D<FFFFFFC000FFFFFFF80007E000FC0003E0003F0003E0000F8003
E00007C003E00003E003E00001F003E00000F003E00000F803E000007C03E000007C03E000007C
03E000003E03E000003E03E000003E03E000003F03E000003F03E000003F03E000003F03E00000
3F03E000003F03E000003F03E000003F03E000003F03E000003F03E000003E03E000003E03E000
007E03E000007C03E000007C03E00000F803E00000F803E00001F003E00003E003E00007C003E0
000F8003E0001F0007E000FE00FFFFFFF800FFFFFFC00028297EA82E>68
D<FFFFE000FFFFE00007F0000003E0000003E0000003E0000003E0000003E0000003E0000003E0
000003E0000003E0000003E0000003E0000003E0000003E0000003E0000003E0000003E0000003
E0000003E0000003E0000003E0000003E0000003E0000003E0000103E0000103E0000103E00001
03E0000203E0000203E0000203E0000203E0000603E0000603E0000E03E0001E03E0007C07E001
FCFFFFFFFCFFFFFFFC20297EA825>76 D<FFE0000003FFC0FFE0000003FFC007E0000003F80002
F0000005F00002F0000005F0000278000009F0000278000009F0000278000009F000023C000011
F000023C000011F000021E000021F000021E000021F000021E000021F000020F000041F000020F
000041F0000207800081F0000207800081F0000207800081F0000203C00101F0000203C00101F0
000203E00201F0000201E00201F0000201E00201F0000200F00401F0000200F00401F0000200F0
0401F0000200780801F0000200780801F00002003C1001F00002003C1001F00002003C1001F000
02001E2001F00002001E2001F00002000F4001F00002000F4001F00002000F4001F00002000780
01F0000700078001F0000F80030003F800FFF803007FFFC0FFF803007FFFC032297EA837>I<FF
E0001FFFFFF0001FFF03F80001F002F80000E0027C000040027E000040023E000040021F000040
021F800040020F8000400207C000400207E000400203E000400201F000400201F800400200F800
4002007C004002007E004002003E004002001F004002001F804002000F8040020007C040020003
E040020003E040020001F040020000F840020000F8400200007C400200003E400200003E400200
001F400200000FC00200000FC002000007C002000003C002000003C007000001C00F800000C0FF
F80000C0FFF800004028297EA82D>I<FFFFFE000000FFFFFFC0000007E003F0000003E000FC00
0003E0003E000003E0001F000003E0001F800003E0000F800003E0000FC00003E0000FC00003E0
000FC00003E0000FC00003E0000FC00003E0000FC00003E0000F800003E0001F000003E0001E00
0003E0003C000003E000F8000003E003E0000003FFFE00000003E00780000003E001E0000003E0
00F0000003E00078000003E0007C000003E0003C000003E0003E000003E0003E000003E0003E00
0003E0003E000003E0003F000003E0003F000003E0003F000003E0003F000003E0003F008003E0
003F808003E0001F808007F0000F8100FFFF8007C100FFFF8003C20000000000FC00292A7EA82C
>82 D<7FFFFFFFF87FFFFFFFF87C007C00F870007C003860007C001840007C000840007C0008C0
007C000CC0007C000C80007C000480007C000480007C000480007C000480007C000400007C0000
00007C000000007C000000007C000000007C000000007C000000007C000000007C000000007C00
0000007C000000007C000000007C000000007C000000007C000000007C000000007C000000007C
000000007C000000007C000000007C000000007C000000007C000000007C000000007C00000000
FE000000FFFFFE0000FFFFFE0026297EA82B>84 D<01FC00000E0780001001C0003C00E0003E00
F0003E0078001C00780008007800000078000000780000007800007FF80003E078000F8078001F
0078003E0078007C00780078007820F8007820F8007820F8007820F800F8207C00F8203C013C40
1F063FC007F80F001B1A7E991E>97 D<007F8001C0700780080F003C1E007C3C007C3C00387C00
10780000F80000F80000F80000F80000F80000F80000F80000F800007800007C00003C00043C00
041E00080F001007802001C0C0007F00161A7E991B>99 D<00000F000001FF000001FF0000001F
0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F000000
0F0000000F0000000F00003F0F0001C0CF0003802F000F001F001E001F001C000F003C000F007C
000F0078000F0078000F00F8000F00F8000F00F8000F00F8000F00F8000F00F8000F00F8000F00
78000F0078000F003C000F003C000F001E001F000E002F0007004F8001C18FF8007E0FF81D2A7E
A921>I<007E0003C3800700E00E00F01C00703C00783C003878003C78003CF8003CF8003CFFFF
FCF80000F80000F80000F80000F800007800007C00003C00043C00041E00080E001007002001C0
C0007F00161A7E991B>I<001F000070C000E1E001C3E003C3E00381C007808007800007800007
8000078000078000078000078000078000078000FFFE00FFFE0007800007800007800007800007
800007800007800007800007800007800007800007800007800007800007800007800007800007
800007800007800007800007C000FFFE00FFFE00132A7FA912>I<07800000FF800000FF800000
0F8000000780000007800000078000000780000007800000078000000780000007800000078000
000780000007800000078000000783F800078C1C0007900E0007A0070007A0078007C0078007C0
078007800780078007800780078007800780078007800780078007800780078007800780078007
80078007800780078007800780078007800780078007800780078007800780FFFCFFFCFFFCFFFC
1E2A7FA921>104 D<07000F801F801F800F800700000000000000000000000000000000000000
07807F807F800F8007800780078007800780078007800780078007800780078007800780078007
800780078007800780FFF8FFF80D297FA811>I<07800000FF800000FF8000000F800000078000
000780000007800000078000000780000007800000078000000780000007800000078000000780
00000780000007807FF007807FF007801F8007801C000780180007802000078040000780800007
8100000782000007870000079F800007A7800007C7C0000783E0000781E0000781F0000780F800
0780780007807C0007803E0007801E0007801F0007801F80FFFC7FF8FFFC7FF81D2A7FA920>
107 D<0780FF80FF800F8007800780078007800780078007800780078007800780078007800780
078007800780078007800780078007800780078007800780078007800780078007800780078007
8007800780FFFCFFFC0E2A7FA911>I<0783F800FF8C1C00FF900E000FA0070007A0078007C007
8007C0078007800780078007800780078007800780078007800780078007800780078007800780
07800780078007800780078007800780078007800780078007800780078007800780FFFCFFFCFF
FCFFFC1E1A7F9921>110 D<007F000001C1C000070070000E0038001C001C003C001E003C001E
0078000F0078000F00F8000F80F8000F80F8000F80F8000F80F8000F80F8000F80F8000F80F800
0F8078000F0078000F003C001E003C001E001E003C000E0038000700700001C1C000007F000019
1A7E991E>I<0787C0FF98E0FF91F00FA1F007C1F007C0E007C000078000078000078000078000
07800007800007800007800007800007800007800007800007800007800007800007800007C000
FFFE00FFFE00141A7F9917>114 D<07F8401C06C03001C06000C06000C0E00040E00040F00040
F800007E00007FF0003FFE000FFF0003FF80003FC00007C08001E08001E0C000E0C000E0C000E0
E000C0F001C0F80180C4070083F800131A7E9918>I<0080000080000080000080000180000180
000180000380000380000780000F80001FFF80FFFF800780000780000780000780000780000780
000780000780000780000780000780000780000780000780400780400780400780400780400780
4007804003C08001C08000E100003E0012257FA417>I<07800780FF80FF80FF80FF800F800F80
078007800780078007800780078007800780078007800780078007800780078007800780078007
8007800780078007800780078007800780078007800780078007800F8007800F800380178001C0
27C000E047FC003F87FC1E1A7F9921>I<FFF00FF8FFF00FF80F8003C0078003800780010003C0
020003C0020003E0020001E0040001E0040000F0080000F0080000F81800007810000078100000
3C2000003C2000003E6000001E4000001E4000000F8000000F8000000700000007000000070000
000200001D1A7F9920>I<FFF1FFC1FFFFF1FFC1FF0F803E00780F001E003007801E002007801E
002007801F002003C03F004003C027004003C027804001E067808001E043808001E043C08000F0
81C10000F081C10000F881E300007900E200007900E200007D00F600003E007400003E00740000
1E007800001C003800001C003800000C0030000008001000281A7F992B>I
E /FA 14 117 df<0001C0000003C0000007C000001FC00000FFC000FFFFC000FFFFC000FF1FC0
00001FC000001FC000001FC000001FC000001FC000001FC000001FC000001FC000001FC000001F
C000001FC000001FC000001FC000001FC000001FC000001FC000001FC000001FC000001FC00000
1FC000001FC000001FC000001FC000001FC000001FC000001FC000001FC000001FC000001FC000
001FC000001FC000001FC000001FC000001FC000001FC000001FC000001FC000001FC000001FC0
00001FC000001FC000001FC000001FC000001FC000007FF000FFFFFFF8FFFFFFF8FFFFFFF81D38
79B72B>49 D<FFFFFFC0007FFFE0FFFFFFC0007FFFE0FFFFFFC0007FFFE000FFC000000FFE0000
7F80000007F000007F80000003C000007F800000078000007F800000060000007F8000000C0000
007F800000180000007F800000300000007F800000600000007F800000C00000007F8000018000
00007F800003000000007F800006000000007F80000C000000007F800018000000007F80003000
0000007F800060000000007F8000C0000000007F800180000000007F800300000000007F800F00
000000007F801F80000000007F803F80000000007F807FC0000000007F80FFE0000000007F819F
E0000000007F830FF0000000007F860FF8000000007F8C07F8000000007F9803FC000000007FB0
03FE000000007FE001FE000000007FC000FF000000007F8000FF800000007F80007F800000007F
80003FC00000007F80003FE00000007F80001FE00000007F80000FF00000007F80000FF8000000
7F800007F80000007F800003FC0000007F800003FE0000007F800001FE0000007F800000FF0000
007F800000FF8000007F8000007F8000007F8000003FC000007F8000003FE000007F8000001FE0
00007F8000001FF000007F8000001FF80000FFC000003FFE00FFFFFFC003FFFFF0FFFFFFC003FF
FFF0FFFFFFC003FFFFF03C3B7EBA43>75 D<FFFFFFF00000FFFFFFF00000FFFFFFF0000000FFE0
000000007F80000000007F80000000007F80000000007F80000000007F80000000007F80000000
007F80000000007F80000000007F80000000007F80000000007F80000000007F80000000007F80
000000007F80000000007F80000000007F80000000007F80000000007F80000000007F80000000
007F80000000007F80000000007F80000000007F80000000007F80000000007F80000000007F80
000000007F80000000007F80000000007F80000000007F80000000007F80000000007F80000000
007F80000006007F80000006007F80000006007F80000006007F80000006007F8000000E007F80
00000C007F8000000C007F8000000C007F8000000C007F8000001C007F8000001C007F8000001C
007F8000003C007F8000007C007F8000007C007F800001FC007F800003F8007F80000FF800FFC0
007FF8FFFFFFFFFFF8FFFFFFFFFFF8FFFFFFFFFFF82F3B7EBA36>I<FFFF8000000001FFFFFFFF
C000000003FFFFFFFFC000000003FFFF00FFC000000003FF00006FE000000006FE00006FE00000
0006FE00006FE000000006FE000067F00000000CFE000067F00000000CFE000063F800000018FE
000063F800000018FE000063F800000018FE000061FC00000030FE000061FC00000030FE000060
FE00000060FE000060FE00000060FE000060FE00000060FE0000607F000000C0FE0000607F0000
00C0FE0000607F000000C0FE0000603F80000180FE0000603F80000180FE0000601FC0000300FE
0000601FC0000300FE0000601FC0000300FE0000600FE0000600FE0000600FE0000600FE000060
0FE0000600FE00006007F0000C00FE00006007F0000C00FE00006003F8001800FE00006003F800
1800FE00006003F8001800FE00006001FC003000FE00006001FC003000FE00006000FE006000FE
00006000FE006000FE00006000FE006000FE000060007F00C000FE000060007F00C000FE000060
007F00C000FE000060003F818000FE000060003F818000FE000060001FC30000FE000060001FC3
0000FE000060001FC30000FE000060000FE60000FE000060000FE60000FE000060000FE60000FE
0000600007FC0000FE0000600007FC0000FE0000600003F80000FE0000600003F80000FE0000F0
0003F80000FE0001F80001F00000FE0007FE0001F00001FF00FFFFF000E001FFFFFFFFFFF000E0
01FFFFFFFFFFF000E001FFFFFF483B7DBA4F>I<3FFFFFFFFFFFF83FFFFFFFFFFFF83FFFFFFFFF
FFF83FE001FF8007F83F0000FF0001F87C0000FF00007C780000FF00003C780000FF00003C7000
00FF00001C700000FF00001C600000FF00000C600000FF00000C600000FF00000C600000FF0000
0C600000FF00000CE00000FF00000EC00000FF000006C00000FF000006C00000FF000006C00000
FF000006000000FF000000000000FF000000000000FF000000000000FF000000000000FF000000
000000FF000000000000FF000000000000FF000000000000FF000000000000FF000000000000FF
000000000000FF000000000000FF000000000000FF000000000000FF000000000000FF00000000
0000FF000000000000FF000000000000FF000000000000FF000000000000FF000000000000FF00
0000000000FF000000000000FF000000000000FF000000000000FF000000000000FF0000000000
00FF000000000000FF000000000000FF000000000000FF000000000000FF000000000000FF0000
00000000FF000000000000FF000000000003FFC00000001FFFFFFFF800001FFFFFFFF800001FFF
FFFFF800373B7DBA3E>84 D<FFFFFE00001FFFF0FFFFFE00001FFFF0FFFFFE00001FFFF003FFC0
000003FF0001FF00000000FC0000FF00000000780000FF800000007000007F800000006000007F
800000006000007FC0000000E000003FC0000000C000003FE0000000C000001FE0000001800000
1FE00000018000001FF00000038000000FF00000030000000FF000000300000007F80000060000
0007F800000600000007FC00000600000003FC00000C00000003FC00000C00000003FE00001C00
000001FE00001800000001FF00001800000000FF00003000000000FF00003000000000FF800070
000000007F800060000000007FC00060000000003FC000C0000000003FC000C0000000003FE000
C0000000001FE00180000000001FE00180000000001FF00380000000000FF00300000000000FF8
03000000000007F806000000000007F806000000000007FC0E000000000003FC0C000000000003
FE0C000000000001FE18000000000001FE18000000000001FF18000000000000FF300000000000
00FF300000000000007FE00000000000007FE00000000000007FE00000000000003FC000000000
00003FC00000000000003FC00000000000001F800000000000001F800000000000000F00000000
0000000F000000000000000F0000000000000006000000003C3C7EBA41>86
D<0003FC0000001FFF0000007E07C00000F801E00001E000F00003E000780007C0007C000F8000
3E001F80003E001F00003F003F00001F003F00001F007F00001F007E00001F807E00001F80FE00
001F80FE00001F80FFFFFFFF80FFFFFFFF80FE00000000FE00000000FE00000000FE00000000FE
000000007E000000007E000000007F000000007F000000003F000001803F000001801F80000180
0F800003000FC000030007C000060003E0000C0001F00018000078007000003F01E000000FFF80
000001FE000021287EA626>101 D<01F800000000FFF800000000FFF800000000FFF800000000
07F80000000001F80000000001F80000000001F80000000001F80000000001F80000000001F800
00000001F80000000001F80000000001F80000000001F80000000001F80000000001F800000000
01F80000000001F80000000001F80000000001F80000000001F80000000001F807F8000001F81F
FE000001F8781F000001F8E00F800001F98007C00001FB0007E00001FB0003E00001FE0003F000
01FC0003F00001FC0003F00001FC0003F00001F80003F00001F80003F00001F80003F00001F800
03F00001F80003F00001F80003F00001F80003F00001F80003F00001F80003F00001F80003F000
01F80003F00001F80003F00001F80003F00001F80003F00001F80003F00001F80003F00001F800
03F00001F80003F00001F80003F00001F80003F00001F80003F00001F80003F00001F80003F000
03FC0007F800FFFFF1FFFFE0FFFFF1FFFFE0FFFFF1FFFFE02B3C7EBB30>104
D<01C00003F00007F8000FF8000FF8000FF80007F80003F00001C0000000000000000000000000
0000000000000000000000000000000000000000000001F8007FF8007FF8007FF80007F80001F8
0001F80001F80001F80001F80001F80001F80001F80001F80001F80001F80001F80001F80001F8
0001F80001F80001F80001F80001F80001F80001F80001F80001F80001F80001F80001F80001F8
0001F80001F80003FC00FFFFE0FFFFE0FFFFE0133A7FB917>I<01F807F80000FFF81FFE0000FF
F8781F0000FFF8E00F800007F98007C00001FB0007E00001FB0003E00001FE0003F00001FC0003
F00001FC0003F00001FC0003F00001F80003F00001F80003F00001F80003F00001F80003F00001
F80003F00001F80003F00001F80003F00001F80003F00001F80003F00001F80003F00001F80003
F00001F80003F00001F80003F00001F80003F00001F80003F00001F80003F00001F80003F00001
F80003F00001F80003F00001F80003F00001F80003F00001F80003F00001F80003F00003FC0007
F800FFFFF1FFFFE0FFFFF1FFFFE0FFFFF1FFFFE02B267EA530>110 D<0001FE0000000FFFC000
003F03F00000F8007C0001F0003E0003E0001F0007C0000F800F800007C00F800007C01F000003
E03F000003F03F000003F03F000003F07E000001F87E000001F87E000001F8FE000001FCFE0000
01FCFE000001FCFE000001FCFE000001FCFE000001FCFE000001FCFE000001FCFE000001FC7E00
0001F87E000001F87F000003F83F000003F03F000003F01F000003E01F800007E00F800007C007
C0000F8003E0001F0001F0003E0000F8007C00003F03F000000FFFC0000001FE000026287EA62B
>I<03F00F80FFF03FE0FFF070F0FFF0C1F807F183F801F303F801F603F801F601F001F6004001
FC000001FC000001FC000001FC000001F8000001F8000001F8000001F8000001F8000001F80000
01F8000001F8000001F8000001F8000001F8000001F8000001F8000001F8000001F8000001F800
0001F8000001F8000001F8000001F8000001F8000003FC0000FFFFF800FFFFF800FFFFF8001D26
7EA522>114 D<007F818003FFE3800F807F801E001F8038000780380007807000038070000380
F0000180F0000180F0000180F8000180F8000180FE0000007F8000007FFC00003FFFC0001FFFF0
000FFFFC0003FFFE0001FFFF00001FFF800000FF8000001FC040000FC0C00007E0C00003E0E000
01E0E00001E0E00001E0E00001E0F00001E0F00001C0F80003C0FC000380FC000700F7000E00E3
C03C00C0FFF800C03FC0001B287DA622>I<001800000018000000180000001800000018000000
380000003800000038000000380000007800000078000000F8000000F8000001F8000003F80000
07F800001FFFFF00FFFFFF00FFFFFF0001F8000001F8000001F8000001F8000001F8000001F800
0001F8000001F8000001F8000001F8000001F8000001F8000001F8000001F8000001F8000001F8
000001F8000001F8000001F8018001F8018001F8018001F8018001F8018001F8018001F8018001
F8018001F8018000F8018000F8030000FC0300007C0300003E0600001F0C00000FF8000003F000
19367EB421>I E end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 300
TeXDict begin @a4
%%EndSetup
%%Page: 112 1
bop 66 50 a Fs(APPENDIX)16 b(B.)31 b(THE)17 b(ST)l(A)l(TE)f(OF)g(THE)g
(SYSTEM)748 b Fw(112)188 195 y(probably)13 b(b)q(e)f(done)h(for)f(exception)f
(and)i(data)g(constructors)g(prin)o(ted)f(at)g(top-lev)o(el.)19
b(Similarly)l(,)188 255 y(w)o(e)f(could)f(insist)h(that)g(v)m(alues)g(whose)h
(data)f(constructors)h(are)f(completely)d(inaccessible)h(b)q(e)188
315 y(prin)o(ted)g(opaquely;)f(this)h(w)o(ould)h(implem)o(e)o(n)o(t)c
Fu(abstype)h Fw(prop)q(erly)l(.)66 417 y Fx(Rede\014nition)k(of)g
Fu(ref)o Fx(.)24 b Fw(The)16 b(Kit)f(curren)o(tly)e(allo)o(ws)j
(rede\014nition)e(of)i Fu(ref)f Fw(as)h(a)f(data)i(constructor)188
477 y(\(whic)o(h)c(is)h(a)g(problem)e(since)h(application)g(of)h
Fu(ref)e Fw(m)o(ust)h(b)q(e)g(treated)h(sp)q(ecially\))e(and)i(also)h(as)f(a)
188 538 y(t)o(yp)q(e)e(constructor)g(\(whic)o(h)g(is)f(a)i(problem)d(since)i
(equalit)o(y)e(admission)h(regards)i Fu(ref)e Fw(sp)q(ecially\).)66
639 y Fx(T)-5 b(reatmen)n(t)18 b(of)g Fu(Match)f Fx(and)i Fu(Bind)o
Fx(.)24 b Fw(Although)19 b Fu(Match)e Fw(and)i Fu(Bind)e Fw(are)i(de\014ned)g
(in)f(the)g(prelude,)188 699 y(they)e(are)g(not)h(raised)f(b)o(y)g
(inexhaustiv)o(e)f(pattern)h(matc)o(hes)f(and)i(bindings.)66
801 y Fx(Mo)r(dules)h(compiler.)k Fw(There)16 b(is)g(curren)o(tly)e(no)j(lam)
o(b)q(da)e(compiler)f(for)j(the)f(Mo)q(dules.)66 903 y Fx(Core)j(matc)n(h)f
(compiler.)j Fw(The)c(matc)o(h)d(compiler)g(for)j(the)f(Core)h(do)q(es)g(not)
g(deal)f(with)g(exception)188 963 y(matc)o(hes)f(prop)q(erly)l(.)22
b(This)17 b(is)g(a)g(di\016cult)e(problem,)f(and)k(the)e(curren)o(t)g
(decision)g(tree)g(sc)o(heme)188 1023 y(needs)g(to)h(b)q(e)f(rethough)o(t)h
(to)g(deal)f(with)g(the)g(sequen)o(tial)f(nature)h(of)h(exception)e(matc)o
(hing.)66 1125 y Fx(P)n(arsing)20 b(cosmetics.)h Fw(There)16
b(should)h(b)q(e)f(a)h(distinct)e(con)o(tin)o(uation)h(prompt.)66
1227 y Fx(Sets)j(instead)f(of)h(lists.)k Fw(Man)o(y)18 b(of)h(the)f(elab)q
(oration)i(routines)e(for)h(the)f(Core)h(and)g(Mo)q(dules)g(use)188
1287 y(lists)f(in)g(lieu)f(of)h(sets.)27 b(These)18 b(should)g(b)q(e)g(con)o
(v)o(erted)f(to)h(use)g(the)g(Edin)o(burgh)g(Library's)g(set)188
1347 y(op)q(erations.)24 b(The)17 b(main)e(o)q(ccurrences)h(are)h(those)g
(where)g Fu(ListHacks)c Fw(and)k Fu(LIST)p 1732 1347 16 2 v
17 w(HACKS)e Fw(are)188 1407 y(curren)o(tly)g(b)q(eing)h(used.)66
1509 y Fx(Phase)j(problems)e(when)i(c)n(hanging)g(execution)e(mo)r(de.)22
b Fw(A)o(t)c(presen)o(t,)f(it)h(is)f(p)q(ossible)i(to)f(run)188
1569 y(the)i(Kit)g(in)g(elab)q(orate-only)g(mo)q(de,)g(and)h(then)f(switc)o
(h)g(to)g(execute)f(mo)q(de)g(with)h(the)g(same)188 1629 y(accum)o(ulated)c
(basis.)27 b(This)18 b(is)g(insecure,)f(since)g(iden)o(ti\014ers)g(will)g(b)q
(e)h(kno)o(wn)g(statically)f(with)188 1689 y(the)f(incorrect,)f(or)i(no,)f
(run)o(time)e(binding.)66 1791 y Fx(Occurrences)k(of)h Fu(op)o
Fx(.)24 b Fw(In)19 b Fu(Infixing)m Fw(,)h(there)e(should)i(b)q(e)g(a)f
(cosmetic)e(c)o(hec)o(k)h(for)h(o)q(ccurrences)g(of)188 1851
y Fu(op)d Fw(in)g(datat)o(yp)q(e)h(and)g(exception)f(bindings.)22
b(According)16 b(to)h(the)f(De\014nition,)g Fu(op)g Fw(is)g(required)188
1912 y(for)h(iden)o(ti\014ers)e(with)h(in\014x)g(status,)g(although)h(the)f
(parser)h(do)q(es)g(not)g(need)f(this)g(annotation.)66 2013
y Fx(Bad)j(functor)g(argumen)n(t)f(rep)r(orting.)k Fw(The)11
b(declaration)g(\\)p Fu(functor)23 b(F\(\))i(=)g(struct)e(end)o
Fw(")11 b(gets)188 2073 y(turned)17 b(in)o(to)e(a)i(rep)q(ort)g(with)f(what)h
(lo)q(oks)g(lik)o(e)d(the)i(\014rst)h(line)e(missing.)p eop
%%Page: 111 2
bop 66 527 a Fy(App)s(endix)41 b(B)66 735 y(The)f(State)g(of)g(the)h(System)
66 961 y Fw(This)21 b(section)g(lists)f(the)h(unimplem)o(en)n(ted)d(and)j
(nonfunctional)g(features)g(of)g(the)g(Kit,)g(as)g(w)o(ell)f(as)66
1021 y(some)c(matters)f(of)h(st)o(yle)f(and)i(so)g(on)g(whic)o(h)e(could)h(b)
q(e)h(impro)o(v)o(ed.)66 1132 y Fx(Error)i(conditions)f(in)g(the)g(parsing)h
(to)r(ols.)k Fw(The)18 b(sh)o(un)o(ting)f(algorithm)g(emplo)o(y)o(ed)e(b)o(y)
i(the)g(in-)188 1192 y(\014x)24 b(analyser)g(panics)g(on)g(an)g(illegal)f
(sequence)f(of)i(op)q(erators.)46 b(It)23 b(should)h(pro)o(vide)f(error)188
1252 y(annotations.)g(An)16 b(example)e(of)j(o\013ending)g(input)f(is)296
1364 y Fu(infix)23 b(@@)i(val)g(x)g(=)g(@@)g(2)66 1476 y Fx(Lexical)17
b(errors)h(not)h(handled.)24 b Fw(The)16 b(lexer)g(raises)g(an)h(error)g(if)f
(it)g(encoun)o(ters)g(an)h(illegal)f(tok)o(en)188 1537 y(\(suc)o(h)22
b(as)h(a)g(con)o(trol)f(c)o(haracter,)h(or)g(illegal)e(string)i(escap)q(e)f
(lik)o(e)f Fu("\\)k(")p Fw(\).)39 b(This)22 b(should)h(b)q(e)188
1597 y(caugh)o(t)17 b(and)g(presen)o(ted)e(as)i(a)g(parsing)g(error.)66
1698 y Fx(Ov)n(er\015o)n(w)j(in)e(in)n(teger)g(constan)n(ts.)24
b Fw(There)15 b(should)g(b)q(e)g(a)g(trap)g(for)g(the)f Fu(Overflow)e
Fw(exception)i(in)188 1758 y(the)k(lexer,)f(so)i(that)g(large)f(in)o(teger)f
(constan)o(ts)i(can)f(b)q(e)g(faulted)g(as)h(bad)g(tok)o(ens.)27
b(Curren)o(tly)l(,)188 1818 y(the)16 b Fu(Overflow)e Fw(exception)h
(propagates.)66 1919 y Fx(Missing)k(p)r(osition)e(information.)22
b Fw(Source)14 b(p)q(osition)g(information)e(is)h(not)h(plan)o(ted)e(in)o(to)
h(the)g(ab-)188 1979 y(stract)g(syn)o(tax)e(created)h(for)g(deriv)o(ed)f
(forms.)19 b(This)12 b(results)f(in)h(error)g(prin)o(ting)g(with)f(the)h
(source)188 2039 y(p)q(osition)17 b(prin)o(ted)f(as)g(\\)p
Fu(\(position)23 b(unknown\))m Fw(".)66 2140 y Fx(Rede\014nition)18
b(of)g(\\)p Fu(=)p Fx(".)24 b Fw(Because)16 b(the)h(equalit)o(y)e(predicate)i
(is)g(de\014ned)f(in)h(terms)f(of)h Fu(prim)f Fw(in)g(the)188
2200 y(prelude,)k(the)g(Kit)g(m)o(ust)f(allo)o(w)h(\\)p Fu(=)p
Fw(")h(to)f(app)q(ear)i(in)d(a)i(declaration.)33 b(Since)19
b(the)i(De\014nition)188 2260 y(outla)o(ws)e(this,)g(the)f(Kit)g(should)h
(disallo)o(w)g(subsequen)o(t)f(declarations)g(of)h(\\)p Fu(=)p
Fw(".)29 b(In)18 b(the)g(same)188 2320 y(v)o(ein,)g(a)h(quali\014ed)e(iden)o
(ti\014er)g(con)o(taining)i(\\)p Fu(=)p Fw(")g(should)g(b)q(e)f(disallo)o(w)o
(ed)g(\(as)h(it)f(can)h(nev)o(er)e(b)q(e)188 2381 y(v)m(alid\).)66
2481 y Fx(Numeric)g(record)h(lab)r(els.)k Fw(The)16 b(De\014nition)f(allo)o
(ws)g(n)o(umeric)d(record)k(lab)q(els)f(to)g(b)q(e)h(of)f(arbitrary)188
2542 y(size)k(\(p)q(ossibly)g(o)o(v)o(er\015o)o(wing)g(an)h(in)o(teger\),)f
(and)g(also)h(syn)o(tactically)e(restricts)g(them)g(to)i(not)188
2602 y(start)d(with)f(a)h(zero.)k(The)16 b(Kit)g(curren)o(tly)e(regards)j
(record)f(lab)q(els)h(as)f(in)o(teger)g(constan)o(ts.)66 2702
y Fx(T)n(yp)r(e)i(path)h(names.)k Fw(Curren)o(tly)l(,)13 b(t)o(yp)q(e)g
(constructors)i(are)f(prin)o(ted)f(merely)e(as)j(iden)o(ti\014ers.)19
b(They)188 2763 y(should)g(b)q(e)g(prin)o(ted)f(as)h(complete)d(paths)k(dep)q
(ending)e(on)h(their)f(accessibilit)o(y)l(.)26 b(Inaccessible)188
2823 y(t)o(yp)q(e)16 b(constructors)h(should)f(b)q(e)h(mark)o(ed)d(\(as)j(\\)
p Fu(?.TyCon)n Fw(")f(for)h(example\).)h(The)f(same)e(should)975
2947 y(111)p eop
%%Page: 110 3
bop 66 50 a Fs(APPENDIX)16 b(A.)31 b(RELEASE)17 b(NOTES)1038
b Fw(110)66 203 y Ft(A.5)83 b(Compiling)20 b(the)g(Edin)n(burgh)f(Library)g
(using)h(the)g(Kit)66 313 y Fw(Compilation)c(of)g(the)g(Library)h(is)f(done)g
(in)g(the)g(follo)o(wing)g(w)o(a)o(y)l(.)140 373 y(Place)f(y)o(ourself)h(in)g
(directory)f Fu(src)g Fw(and)i(start)g(a)f(kit)g(session;)g(then)g(do)h(the)f
(follo)o(wing)271 475 y Fu(evalFile)23 b("../tools/k)o(it)o(.lo)o(ad")66
577 y Fw(and)13 b(c)o(hange)g(directory)e(to)i(the)f(directory)f(con)o
(taining)i(the)f(p)q(ortable)h(v)o(ersion)e(of)i(the)f(Library)h(\(using)66
637 y Fu(System.cd)23 b("..")p Fw(\).)c(Then)e(do)271 738 y
Fu(evalFile)23 b("build_all.)o(sm)o(l")66 840 y Fw(to)17 b(compile)d(the)i
(en)o(tire)f(library)l(.)679 822 y Fm(1)140 900 y Fw(The)g
Fu(kit)e Fw(session)j(can)f(then)g(b)q(e)g(sa)o(v)o(ed)f(as)i(an)f
(executable)f(\014le)g(as)h(describ)q(ed)g(in)f(1,)h(but)h(b)q(ew)o(are:)66
960 y(the)g(executable)f(is)h(large,)g(around)h(20)g(Mb.)p
66 2677 756 2 v 123 2708 a Fi(1)141 2723 y Fh(The)c(curren)o(t)i(v)o(ersion)e
(of)f(the)h(Library)g(uses)h(Non)e(Standard)h(ML)g(in)f(the)i(\014le)e
Ff(portable/Make/Make0)o(.sml)p Fh(.)i(In)66 2773 y(function)h
Ff(Class)f Fh(c)o(haracters)j(are)e(compared)g(using)f Ff(=)p
Fh(;)h(in)g(Standard)g(ML,)f(function)h Ff(ord)f Fh(m)o(ust)g(b)q(e)i
(applied)e(b)q(efore)66 2823 y(equalit)o(y)f(is)h(tested)p
eop
%%Page: 109 4
bop 66 50 a Fs(APPENDIX)16 b(A.)31 b(RELEASE)17 b(NOTES)1038
b Fw(109)66 195 y Fr(A.3.1)70 b(Compilation)20 b(under)k(Standard)g(ML)g(of)f
(New)f(Jersey)66 287 y Fw(W)l(e)15 b(assume)e(y)o(ou)i(ha)o(v)o(e)e(a)i(v)o
(ersion)f(of)h(SML/NJ)f(with)h(Edin)o(burgh)f(Library)h(loaded)g(\(either)e
(the)h(full)66 348 y(library)l(,)20 b(or)g(just)g(the)f(Mak)o(e)g(facilit)o
(y\).)30 b(Then)20 b(c)o(hange)f(directory)g(to)h(the)g Fu(src)e
Fw(directory)h(and)h(set)66 408 y(the)d(v)m(ariable)g Fu(NJSML)f
Fw(in)g(the)h Fu(Makefile)e Fw(to)i(the)g(name)f(of)i(y)o(our)f(executable)e
(v)o(ersion)i(of)g(SML/NJ.)66 468 y(When)j(the)f Fu(Makefile)d
Fw(has)k(b)q(een)f(mo)q(di\014ed)f(use)h(one)h(of)f(the)g(commands)f(b)q(elo)
o(w)h(to)h(build)e(either)66 528 y(the)e(in)o(terpreter,)e(the)i(compiler)e
(or)j(the)f(batc)o(h)g(in)o(terpreter.)p 113 585 1797 2 v 112
645 2 61 v 138 627 a Fx(Command)p 598 645 V 233 w(Builds)p
1909 645 V 113 647 1797 2 v 112 707 2 61 v 138 689 a Fu(make)24
b(kit-int-NJ)p 598 707 V 98 w Fw(The)16 b(in)o(terpreter,)e(an)j(executable)e
(\014le)g Fu(kit)g Fw(is)h(made)p 1909 707 V 112 767 V 138
749 a Fu(make)24 b(kit-comp-NJ)p 598 767 V 72 w Fw(The)16 b(compiler,)d(an)k
(executable)e(\014le)g Fu(kit)h Fw(is)g(made)p 1909 767 V 112
828 V 138 810 a Fu(make)24 b(kit-batch-N)o(J)p 598 828 V 47
w Fw(The)16 b(batc)o(h)g(in)o(terpreter,)e(an)j(executable)e(\014le)g
Fu(evalFile)f Fw(is)i(made)p 1909 828 V 113 829 1797 2 v 66
910 a(W)l(e)22 b(recommend)c(to)k(build)g(the)f(in)o(terpreter)f(and)i(p)q
(erhaps)h(also)f(the)g(batc)o(h)f(in)o(terpreter)f(as)i(the)66
970 y(compiler)14 b(is)i(incomplete.)66 1114 y Fr(A.3.2)70
b(Compilation)20 b(under)k(P)n(oly/ML)66 1207 y Fw(W)l(e)18
b(assume)f(y)o(ou)g(ha)o(v)o(e)g(a)i(database)g(\014le)e(with)g(the)h(Edin)o
(burgh)g(Library)f(\(either)g(the)h(full)e(library)l(,)66 1267
y(or)g(just)g(the)f(Mak)o(e)g(facilit)o(y)l(.\))k(Then)c(simply)e(c)o(hange)j
(directory)e(to)i(the)f Fu(src)g Fw(directory)f(and)i(set)f(the)66
1327 y(v)m(ariables)k Fu(POLYDATABA)o(SEF)o(ILE)c Fw(and)k
Fu(POLY)f Fw(in)g(the)h Fu(Makefile)p Fw(.)26 b(When)18 b(the)h
Fu(Makefile)d Fw(has)j(b)q(een)66 1387 y(mo)q(di\014ed)e(use)h(one)g(of)h
(the)e(commands)f(b)q(elo)o(w)i(to)h(build)e(either)g(the)g(in)o(terpreter)g
(or)h(the)g(compiler)66 1447 y(\(no)f(batc)o(h)f(system)f(is)h(pro)o(vided\))
p 175 1507 1674 2 v 174 1567 2 61 v 199 1549 a Fx(Command)p
685 1567 V 259 w(Builds)p 1847 1567 V 175 1569 1674 2 v 174
1629 2 61 v 199 1611 a Fu(make)25 b(kit-int-P)o(oly)p 685 1629
V 72 w Fw(The)16 b(in)o(terpreter,)e(a)j(c)o(hild)d(database)k(called)d
Fu(kit)g Fw(is)h(made)p 1847 1629 V 174 1689 V 199 1671 a Fu(make)25
b(kit-comp-)o(Pol)o(y)p 685 1689 V 47 w Fw(The)16 b(compiler,)d(a)k(c)o(hild)
e(database)i(called)e Fu(kit)h Fw(is)g(made)p 1847 1689 V 175
1691 1674 2 v 66 1771 a(The)d(database)i(con)o(taining)e(the)f(Library)i(is)f
(\014rst)g(copied)f(suc)o(h)h(that)h(this)f(database)h(is)f(not)g(mo)q
(di\014ed)66 1831 y(b)o(y)h(the)g(installation.)20 b(W)l(e)14
b(recommend)d(to)k(build)e(the)h(in)o(terpreter)f(as)i(the)f(compiler)d(is)j
(incomplete.)66 1998 y Ft(A.4)83 b(Non-Standard)28 b(ML)f(primitiv)n(es)66
2107 y Fw(The)17 b(Kit)e(in)o(terpreter)g(pro)o(vides)h(a)g(structure)g
Fu(Kit)f Fw(with)h(the)g(follo)o(wing)g(signature)271 2209
y Fu(sig)323 2269 y(exception)22 b(Use)323 2329 y(val)i(use)h(:)g(string)f
(->)g(unit)323 2390 y(val)g(flush_out)f(:)i(outstream)d(->)j(unit)271
2450 y(end)66 2552 y Fw(The)18 b Fu(use)f Fw(function)h(should)g(b)q(e)g
(familiar)e(to)i(the)g(reader,)f Fu(flush_out)e Fw(\015ushes)j(its)g(output)g
(stream)66 2612 y(argumen)o(t)j(and)g(is)g(only)g(pro)o(vided)g(in)g(order)g
(to)h(mak)o(e)d(it)i(p)q(ossible)g(to)h(compile)d(the)i(Edin)o(burgh)66
2672 y(Library)c(using)f(the)g(Kit.)p eop
%%Page: 108 5
bop 66 50 a Fs(APPENDIX)16 b(A.)31 b(RELEASE)17 b(NOTES)1038
b Fw(108)66 195 y(These)17 b(directories)e(con)o(tains)h(the)g(follo)o(wing)g
(\014les)p 276 232 1470 2 v 275 293 2 61 v 301 275 a(File)p
684 293 V 327 w(Con)o(ten)o(ts)p 1745 293 V 276 294 1470 2
v 275 354 2 61 v 301 336 a Fu(src.tar.Z)p 684 354 V 175 w Fw(The)g(src)g
(directory)g(con)o(taining)g(source)g(co)q(de)p 1745 354 V
275 415 V 301 397 a Fu(doc.tar.Z)p 684 415 V 175 w Fw(The)g(do)q(c)h
(directory)e(con)o(taining)h(do)q(cumen)o(tation)p 1745 415
V 275 475 V 301 457 a Fu(tools.tar.Z)p 684 475 V 123 w Fw(The)g(to)q(ols)h
(directory)f(con)o(taining)g(some)f(utilities)p 1745 475 V
275 535 V 301 517 a Fu(examples.ta)o(r.Z)p 684 535 V 46 w Fw(The)h(examples)f
(directory)g(con)o(taining)h(...)k(examples)p 1745 535 V 275
595 V 301 577 a Fu(README)p 684 595 V 253 w Fw(Summary)14 b(of)i(release)g
(information)p 1745 595 V 275 655 V 301 637 a Fu(COPYING)p
684 655 V 227 w Fw(GNU)g(General)g(Public)f(Licence)p 1745
655 V 276 657 1470 2 v 66 718 a(Here)h(are)g(sample)f(dialogs)271
800 y Fu(ftp)25 b(ftp.diku.d)o(k)561 b(ftp)24 b(ftp.lfcs.ed)o(.ac)o(.uk)271
860 y(Name:)g(anonymous)561 b(Name:)24 b(anonymous)271 920
y(Password:)f(<your)h(loginname)o(@ho)o(st)o(>)151 b(Password:)22
b(<your)i(loginname@)o(hos)o(t>)271 980 y(ftp>)h(binary)664
b(ftp>)24 b(binary)271 1040 y(ftp>)h(cd)g(diku/user)o(s/b)o(ir)o(ked)o(al)253
b(ftp>)24 b(cd)h(export/ml/)o(mlk)o(it)271 1101 y(ftp>)g(get)f(README)562
b(ftp>)24 b(get)h(README)271 1161 y(ftp>)g(get)f(COPYING)536
b(ftp>)24 b(get)h(COPYING)271 1221 y(ftp>)g(get)f(src.tar.Z)484
b(ftp>)24 b(get)h(src.tar.Z)271 1281 y(ftp>)g(get)f(doc.tar.Z)484
b(ftp>)24 b(get)h(doc.tar.Z)271 1341 y(ftp>)g(get)f(tools.tar.Z)432
b(ftp>)24 b(get)h(tools.tar)o(.Z)271 1402 y(ftp>)g(get)f(examples.ta)o(r.)o
(Z)356 b(ftp>)24 b(get)h(examples.)o(tar)o(.Z)271 1462 y(ftp>)g(bye)742
b(ftp>)24 b(bye)66 1544 y Fw(After)16 b(the)f(\014les)h(are)g(transferred)g
(they)f(should)i(b)q(e)f(uncompressed)f(and)h(then)g(extracted)f(using)i(tar)
66 1604 y(in)o(to)f(a)h(directory)e(called)g(\(e.g.\))21 b
Fu(Kit)15 b Fw(F)l(or)i(example:)271 1686 y Fu(mkdir)24 b(Kit)271
1746 y(mv)h(src.tar.Z)e(Kit)271 1806 y(cd)i(Kit)271 1866 y(zcat)g(src.tar.Z)d
(|)j(tar)g(xf)g(-)66 1948 y Fw(will)16 b(install)f(the)h Fu(src)f
Fw(directory)h(\(i.e.,)e(a)i(directory)g Fu(src)f Fw(app)q(ears)i(in)f
(directory)f Fu(Kit)p Fw(\).)66 2111 y Ft(A.3)83 b(Installation)66
2221 y Fw(No)14 b(executable)e(v)o(ersion)h(of)h(the)f(Kit)g(is)g(supplied,)g
(i.e.,)f(y)o(ou)i(ha)o(v)o(e)e(to)i(compile)d(the)j(sources)f(y)o(ourself.)66
2281 y(Ho)o(w)o(ev)o(er,)19 b(this)g(is)g(easily)g(done)h(as)g(describ)q(ed)f
(b)q(elo)o(w.)31 b(The)20 b(Kit)f(can)g(b)q(e)h(compiled)d(using)j(either)66
2341 y(Standard)e(ML)e(of)g(New)g(Jersey)f(or)i(P)o(oly/ML.)e(Ho)o(w)o(ev)o
(er,)f(a)j(stand-alone)g(batc)o(h)f(v)o(ersion)f(can)h(only)66
2402 y(b)q(e)d(made)f(using)h(SML/NJ.)f(The)h(to)q(ols)g(directory)f(is)h
(needed)f(to)h(compile)d(with)i(as)i(describ)q(ed)e(b)q(elo)o(w.)66
2462 y(Notice,)19 b(that)g(the)g(executables)f(will)f(b)q(e)j(big)f(\(around)
h(nine)e(megab)o(ytes\))g(and)h(it)g(is)g(preferable)f(if)66
2522 y(y)o(ou)c(compile)e(using)i(a)g(mac)o(hine)e(with)i(a)g(lot)g(of)g
(memory)d(\(it)i(tak)o(es)h(around)h(10)g(min)o(utes)c(to)k(compile)66
2582 y(under)i(SML/NJ)f(on)h(a)g(SP)l(AR)o(C)e(station)i(with)f(64)h(Mb)f(of)
h(memory)l(.)o(\))140 2642 y(SML/NJ)12 b(is)g(in)g(the)g(public)f(domain)h
(and)h(is)f(a)o(v)m(ailable)f(from)g(LF)o(CS,)h(as)h(ab)q(o)o(v)o(e,)g(but)f
(in)g(directory)66 2703 y Fu(export/ml/n)o(jml)o Fw(.)140 2763
y(P)o(oly/ML)i(is)h(a)g(commerc)o(iall)o(y)d(supp)q(orted)k(system,)d(a)o(v)m
(ailable)g(from)h(Abstract)h(Hardw)o(are)f(Ltd.)66 2823 y(\()p
Fu(ahl@ahl.co.)o(uk)p Fw(\))p eop
%%Page: 107 6
bop 66 527 a Fy(App)s(endix)41 b(A)66 735 y(Release)h(Notes)66
961 y Fw(W)l(e)20 b(here)f(describ)q(e)g(the)g(latest)g(release)g(of)h(The)g
(ML)f(Kit)g(system.)30 b(Please)19 b(send)h(commen)o(ts)d(and)66
1021 y(bug)g(rep)q(orts)g(to)188 1119 y Fo(Lars)e(Birk)o(edal)188
1176 y(DIKU,)h(Univ)o(ersit)o(y)g(of)e(Cop)q(enhagen)188 1232
y(Univ)o(ersitetspark)o(en)i(1)188 1289 y(DK-2100)f(Cop)q(enhagen)g(East)188
1345 y(Denmark)188 1401 y(Email:)21 b(birk)o(edal@diku.dk)66
1624 y Ft(A.1)83 b(Cop)n(yrigh)n(t)27 b(notice)364 1734 y Fw(Cop)o(yrigh)o(t)
16 b(\(C\))h(1993)h(Edin)o(burgh)e(and)h(Cop)q(enhagen)h(Univ)o(ersities)66
1844 y Fo(This)f(program)f(is)h(free)f(soft)o(w)o(are;)f(y)o(ou)h(can)h
(redistribute)h(it)f(and/or)f(mo)q(dify)h(it)f(under)i(the)e(terms)g(of)g
(the)66 1901 y(GNU)f(General)h(Public)h(License)g(as)e(published)j(b)o(y)d
(the)h(F)l(ree)f(Soft)o(w)o(are)f(F)l(oundation;)h(either)h(v)o(ersion)g(2)f
(of)66 1957 y(the)h(License,)g(or)f(\(at)f(y)o(our)h(option\))g(an)o(y)g
(later)g(v)o(ersion.)140 2014 y(This)h(program)e(is)i(distributed)h(in)f(the)
g(hop)q(e)g(that)f(it)g(will)i(b)q(e)g(useful,)f(but)f(WITHOUT)h(ANY)g(W)-5
b(AR-)66 2070 y(RANTY;)20 b(without)f(ev)o(en)h(the)g(implied)i(w)o(arran)o
(t)o(y)17 b(of)i(MER)o(CHANT)l(ABILITY)i(or)e(FITNESS)g(F)o(OR)h(A)66
2126 y(P)l(AR)l(TICULAR)e(PURPOSE.)d(See)h(the)f(GNU)g(General)h(Public)h
(License)g(for)e(more)f(details.)140 2187 y(Y)l(ou)d(should)i(ha)o(v)o(e)d
(receiv)o(ed)j(a)e(cop)o(y)g(of)g(the)h(GNU)f(General)g(Public)j(License)f
(along)e(with)h(this)g(program;)66 2247 y(if)i(not,)e(write)h(to)f(the)h(F)l
(ree)f(Soft)o(w)o(are)g(F)l(oundation,)h(Inc.,)g(675)f(Mass)g(Av)o(e,)h(Cam)o
(bridge,)g(MA)f(02139,)f(USA.)66 2413 y Ft(A.2)83 b(Getting)28
b(this)f(release)66 2523 y Fw(The)18 b(ML)f(Kit)f(can)i(b)q(e)f(obtained)h(b)
o(y)e(anon)o(ymous)h(ftp)g(from)f(the)h(b)q(oth)h(the)f(Univ)o(ersit)o(y)e
(of)i(Cop)q(en-)66 2583 y(hagen,)g(and)g(the)f(Univ)o(ersit)o(y)d(of)k(Edin)o
(burgh:)p 500 2640 1023 2 v 499 2700 2 61 v 525 2682 a(Host)p
985 2700 V 387 w(Directory)p 1522 2700 V 500 2702 1023 2 v
499 2762 2 61 v 525 2744 a Fu(ftp.diku.d)o(k)p 985 2762 V 201
w(diku/user)o(s/b)o(ir)o(ked)o(al)p 1522 2762 V 499 2822 V
525 2804 a(ftp.lcfs.e)o(d.a)o(c.)o(uk)p 985 2822 V 47 w(export/ml)o(/ml)o(ki)
o(t)p 1522 2822 V 500 2824 1023 2 v 975 2947 a Fw(107)p eop
%%Page: 106 7
bop 66 50 a Fs(BIBLIOGRAPHY)1425 b Fw(106)66 195 y([13])25
b(Didier)15 b(R)o(\023)-23 b(em)o(y)l(.)19 b(T)o(yping)c(record)h
(concatenation)h(for)f(free.)21 b(In)15 b Fk(Pr)n(o)n(c.)i(Principles)h(of)f
(Pr)n(o)n(gr)n(am-)167 255 y(ming)h(L)n(anguages\(POPL\))p
Fw(,)e(pages)h(166{176,)i(Jan.)d(1992.)66 357 y([14])25 b(Donald)14
b(Sanella)f(and)i(Andrzej)d(T)l(arlec)o(ki.)19 b(Extended)13
b(ML:)g(P)o(ast,)i(presen)o(t)e(and)h(future.)20 b(T)l(ec)o(h-)167
417 y(nical)f(Rep)q(ort)h(ECS-LF)o(CS-91-138,)j(Lab)q(oratory)f(for)e(F)l
(oundations)h(of)e(Computer)g(Science,)167 477 y(Univ)o(ersit)o(y)13
b(of)k(Edin)o(burgh,)f(1991.)p eop
%%Page: 105 8
bop 66 527 a Fy(Bibli)q(og)q(raph)m(y)91 753 y Fw([1])24 b(Andrew)15
b(W.)g(App)q(el.)21 b(A)15 b(run)o(time)e(system.)20 b Fk(LISP)d(and)g(Symb)n
(olic)g(Computation)p Fw(,)f(3:343{380,)167 814 y(1990.)91
915 y([2])24 b(Andrew)e(W.)h(App)q(el.)41 b Fk(Compiling)24
b(with)g(Continuations)p Fw(.)43 b(Cam)o(bridge)22 b(Univ)o(ersit)o(y)e
(Press,)167 976 y(1992.)91 1077 y([3])k(Andrew)c(W.)g(App)q(el)g(and)h(Da)o
(vid)f(B.)f(MacQueen.)33 b(A)20 b(Standard)i(ML)e(compiler.)31
b(In)20 b(Gilles)167 1137 y(Kahn,)13 b(editor,)f Fk(F)l(unctional)k(Pr)n(o)n
(gr)n(amming)c(L)n(anguages)j(and)f(Computer)g(A)o(r)n(chite)n(ctur)n(e)p
Fw(.)e(A)o(CM,)167 1198 y(Springer-V)l(erlag,)j(Sept)h(1987.)91
1299 y([4])24 b(Andrew)e(W.)g(App)q(el,)h(James)f(S.)g(Mattson,)i(and)f(Da)o
(vid)f(R.)g(T)l(arditi.)40 b(A)22 b(lexical)f(analyzer)167
1359 y(generator)16 b(for)g(Standard)h(ML.)k(Online)15 b(do)q(cumen)o(tation)
g(distributed)g(with)g(SML/NJ,)h(1989.)91 1461 y([5])24 b(Andrew)18
b(W.)f(App)q(el)h(and)h(Da)o(vid)f(R.)f(T)l(arditi.)27 b(ML-Y)l(acc,)18
b(v)o(ersion)g(2.1.)g(do)q(cumen)o(tation)f(for)167 1521 y(release)e(v)o
(ersion.)21 b(Online)15 b(do)q(cumen)o(tation)g(distributed)h(with)g(SML/NJ,)
g(Marc)o(h)g(1991.)91 1623 y([6])24 b(Marianne)13 b(Baudinet)g(and)i(Da)o
(vid)e(MacQueen.)20 b(T)l(ree)13 b(pattern)h(matc)o(hing)e(for)i(ML.)21
b(Extended)167 1683 y(abstract,)16 b(Decem)o(b)q(er)e(1985.)91
1785 y([7])24 b(Da)o(v)o(e)17 b(Berry)l(.)26 b(The)18 b(edin)o(burgh)g(sml)e
(library)l(.)26 b(T)l(ec)o(hnical)17 b(Rep)q(ort)h(ECS-LF)o(CS-91-148)q(,)j
(Lab-)167 1845 y(oratory)j(for)g(F)l(oundations)h(of)f(Computer)f(Science,)h
(Departmen)o(t)e(of)i(Computer)f(Science,)167 1905 y(Edin)o(burgh)16
b(Univ)o(ersit)o(y)l(,)d(April)i(1991.)91 2007 y([8])24 b(L.)17
b(Damas)g(and)h(R.)f(Milner.)23 b(Principal)17 b(t)o(yp)q(e)g(sc)o(hemes)e
(for)j(functional)f(programs.)24 b(In)17 b Fk(Pr)n(o)n(c.)167
2067 y(9th)j(A)o(nnual)i(A)o(CM)e(Symp.)g(on)h(Principles)h(of)e(Pr)n(o)n(gr)
n(amming)f(L)n(anguages)p Fw(,)i(pages)f(207{212,)167 2127
y(Jan.)c(1982.)91 2229 y([9])24 b(Simon)12 b(L.)i(P)o(eyton)f(Jones.)21
b Fk(The)15 b(Implementation)i(of)e(F)l(unctional)i(Pr)n(o)n(gr)n(amming)c(L)
n(anguages)p Fw(.)167 2289 y(Pren)o(tice-Hall,)g(1987.)66 2391
y([10])25 b(Robin)16 b(Milner)f(and)i(Mads)f(T)l(ofte.)22 b
Fk(Commentary)17 b(on)g(Standar)n(d)g(ML)p Fw(.)k(MIT)16 b(Press,)g(1991.)66
2493 y([11])25 b(Robin)12 b(Milner,)f(Mads)i(T)l(ofte,)f(and)h(Rob)q(ert)g
(Harp)q(er.)20 b Fk(The)14 b(De\014nition)h(of)e(Standar)n(d)h(ML)p
Fw(.)19 b(MIT)167 2553 y(Press,)d(1990.)66 2655 y([12])25 b(Didier)19
b(R)o(\023)-23 b(em)o(y)l(.)31 b(T)o(yp)q(e)20 b(inference)e(for)j(records)f
(in)g(a)g(natural)h(extension)f(of)g(ML.)34 b(T)l(ec)o(hnical)167
2715 y(Rep)q(ort)16 b(1431,)i(Inria,)d(Ro)q(cquencourt,)h(1991.)975
2947 y(105)p eop
%%Page: 104 9
bop 66 50 a Fs(CHAPTER)17 b(7.)37 b(MISCELLANEOUS)1052 b Fw(104)140
195 y Fu(use)11 b Fw(is)i(implem)o(en)o(te)o(d)d(using)k(source)f(readers)g
(\(Chapter)g(3\).)21 b(This)13 b(means)f(that)h(a)g(call)g(to)g
Fu(use)f Fw(on)66 255 y(a)k(\014le)e(causes)h(the)f(en)o(tire)g(\014le)g(to)h
(b)q(e)g(read)f(in)o(to)h(memory)d(b)q(efore)j(its)f(con)o(ten)o(ts)g(are)h
(fed)f(to)i(the)e(lexer.)66 315 y(In)j(practice,)e(this)i(should)g(b)q(e)g
(no)g(di\013eren)o(t)f(b)q(eha)o(viourally)g(to)h(the)g(\\ob)o(vious")h(sc)o
(heme)c(where)i(the)66 376 y(\014le)g(is)g(read)g(from)g(sequen)o(tially)e
(as)j(the)f(lexer)f(is)h(in)o(v)o(ok)o(ed.)140 436 y(The)k(main)e(impleme)o
(n)o(tation)g(issue)h(with)h Fu(use)f Fw(is)h(that)h(it)f(requires)f
(self-reference)f(in)h(the)h(in-)66 496 y(terpreter.)38 b Fu(use)21
b Fw(is)h(a)g(primitiv)o(e)d(function)i(whic)o(h)h(needs)g(to)g(b)q(e)g(able)
g(to)g(call)g(the)f(en)o(tire)g(in)o(ter-)66 556 y(preter)15
b(on)h(a)f(b)q(o)q(dy)h(of)g(source)f(text,)f(but)i(the)f(in)o(terpreter)e
(needs)i(to)h(supp)q(ort)g(the)f(en)o(tire)f(language,)66 616
y(including)19 b(all)g(the)g(primitiv)o(e)d(functions)j(suc)o(h)g(as)h
Fu(use)o Fw(.)31 b(The)19 b(most)g(straigh)o(tforw)o(ard)h(implem)o(en-)66
677 y(tation)h(tec)o(hnique)d(is)h(to)h(use)g(a)g(reference)f(to)h(hold)g
(the)f Fu(use)g Fw(function.)32 b(The)19 b(reference)g(\(of)h(t)o(yp)q(e)66
737 y Fu(\(string)j(->)i(unit\))f(ref)o Fw(\))14 b(is)g(pro)o(vided)f(in)h
(functor)g Fu(KitCompile)o(r)m Fw(,)g(and)h(is)e(created)h(con)o(taining)g(a)
66 797 y(function)f(of)h(the)e(correct)h(t)o(yp)q(e)f(but)i(no)f(e\013ect.)20
b(Th)o(us,)13 b(a)h(function)f Fu(USE)e Fw(\(of)j(t)o(yp)q(e)e
Fu(string)24 b(->)h(unit)n Fw(\))66 857 y(can)i(b)q(e)f(passed)h(to)f(the)g
(lo)o(w)o(er)g(lev)o(els)e(of)i(the)g(system)f(\(the)h(functors)g
Fu(Linking)n Fw(,)i Fu(Execution)m Fw(,)66 917 y Fu(Evaluation)m
Fw(,)17 b Fu(EvalDec)n Fw(,)g Fu(Apply)n Fw(\).)25 b(Once)17
b(the)g(functor)h(heirarc)o(h)o(y)d(has)k(b)q(een)e(built,)g(the)g(reference)
66 978 y(v)m(ariable)f(can)h(b)q(e)f(assigned)h(with)f(a)h(function)f(whic)o
(h)f(calls)h Fu(KitCompile)o(r.i)o(nte)o(rp)o(ret)o(Fil)o(e)m
Fw(.)140 1038 y(Exception)g(propagation)j(within)d Fu(use)g
Fw(is)h(handled)g(as)g(follo)o(ws.)23 b Fu(Apply)15 b Fw(has)j(a)f(lo)q(cal)g
(exception)66 1098 y Fu(Use)o Fw(,)22 b(and)g(there)f(is)g(a)h(handler)f(for)
g(this)h(at)f(the)g(p)q(oin)o(t)h(in)f Fu(Apply)e Fw(where)i(the)g
Fu(use)f Fw(op)q(eration)i(is)66 1158 y(executed.)28 b(Should)20
b Fu(Use)d Fw(b)q(e)i(raised,)g(the)g(handler)g(translates)g(this)g(failure)f
(in)o(to)h(a)g(raising)g(of)g(the)66 1218 y(exception)13 b(v)m(alue)g
Fu(Use)g Fw(whic)o(h)g(w)o(as)h(passed)g(as)g(an)g(argumen)o(t)f(to)h
Fu(prim)e Fw(in)h(the)g(prelude.)20 b(The)13 b(facilit)o(y)66
1279 y(to)20 b(raise)g Fu(Use)e Fw(is)i(exp)q(orted)f(from)g
Fu(Apply)e Fw(as)j(the)g(function)f Fu(FAIL)p 1320 1279 16
2 v 17 w(USE)o Fw(.)31 b(This)20 b(function)f(is)g(passed)66
1339 y(through)k Fu(EvalDec)c Fw(and)j Fu(EvalTopdec)c Fw(to)k
Fu(Interprete)o(r)m Fw(,)g(where)g(the)f(abilit)o(y)f(to)i(raise)f
Fu(Use)g Fw(\(to)66 1399 y(signal)14 b(compilation)e(errors\))i(is)f(needed.)
20 b(F)l(or)13 b(run)o(time)f(exceptions,)g Fu(EvalDec)f Fw(pro)o(vides)i(a)h
(function)66 1459 y Fu(RE)p 121 1459 V 18 w(RAISE)k Fw(whic)o(h)h(the)g(in)o
(terpreter)f(can)h(use)h(to)g(raise)f(uncaugh)o(t)h(pac)o(k)o(ets)f(in)o(to)g
(the)g(surrounding)66 1519 y Fu(use)e Fw(con)o(text.)24 b(\(There)17
b(is)g(no)h(problem)e(with)i(unclosed)f(source)h(\014les)f(since)f(eac)o(h)h
(used)h(\014le)f(is)g(read)66 1579 y(completely)d(in)o(to)i(memory)d(and)k
(closed)f(b)q(efore)g(it)g(is)g(presen)o(ted)f(to)i(the)f(top-lev)o(el)f(lo)q
(op.\))p eop
%%Page: 103 10
bop 66 50 a Fs(CHAPTER)17 b(7.)37 b(MISCELLANEOUS)1052 b Fw(103)p
66 159 1890 6 v 185 213 a Fu(signature)22 b(ERROR)p 574 213
16 2 v 16 w(TRAVERSE)h(=)261 274 y(sig)338 334 y(type)h(topdec)338
394 y(type)g(Report)338 514 y(datatype)f(result)g(=)j(SUCCESS)748
575 y(|)g(FAILURE)d(of)i(Report)338 695 y(val)g(traverse:)d(topdec)i(->)h
(result)261 755 y(end)554 911 y Fw(Figure)16 b(7.8:)21 b(The)16
b(signature)h Fu(ERROR)p 1250 911 V 17 w(TRAVERSE)p 66 968
1890 6 v 66 1091 a(use)o Fw(,)j(or)g(they)f(are)g(built)g(on)h(top)g(of)f(a)h
(library)f(or)g(en)o(vironmen)o(t)e(\(suc)o(h)i(as)h(the)f(Edin)o(burgh)h
(SML)66 1151 y(Library)l(,)c(or)h(its)f(Mak)o(e)f(system\))g(whic)o(h)h
(requires)f Fu(use)o Fw(.)140 1211 y(The)i(Kit)g(do)q(es)h(not)g(mak)o(e)d
Fu(use)i Fw(p)q(erv)m(asiv)o(e;)g(instead)g(it)g(is)g(de\014ned)g(in)g(a)h
(structure)f(called)g Fu(Kit)o Fw(,)66 1272 y(as)g(a)g(call)e(to)i
Fu(prim)o Fw(.)k(The)16 b(\(informal\))f(seman)o(tics)f(are)i(as)h(follo)o
(ws:)139 1332 y Fp(\017)24 b Fw(Ev)m(aluation)c(of)g(the)e
Fu(use)h Fw(function)f(applied)h(to)h(a)f(string)h(causes)f(the)g(top-lev)o
(el)f(lo)q(op)i(to)f(b)q(e)188 1392 y(immediatel)o(y)c(in)o(v)o(ok)o(ed)h(on)
i(the)f(\014le,)g(suc)o(h)h(that)g(the)g(\014le's)f(bindings)h(\(and)g
(side-e\013ects\))f(are)188 1452 y(established)f(in)f(the)h(top-lev)o(el)e
(en)o(vironmen)o(t)f(b)q(efore)j(the)g(call)f(to)h Fu(use)f
Fw(terminates.)k(Because)188 1512 y(complete)14 b(phrases)j(are)g(t)o(yp)q
(ec)o(hec)o(k)o(ed)c(b)q(efore)j(execution,)f(an)i(expression)f(suc)o(h)g(as)
296 1625 y Fu(\(use)24 b("file.sml")o(;)e(x)k(+)f(1\))188 1738
y Fw(has)18 b(the)e(same)f(meaning)g(and)i(v)m(alue)f(regardless)h(of)g(an)o
(y)f(binding)g(made)g(to)g Fu(x)g Fw(in)h Fu(file.sml)m Fw(.)188
1798 y(The)g(used)g(\014le)f(is)h(executed)e(in)i(the)f(enclosing)h(basis)g
(upto)g(but)g(excluding)f(the)g(phrase)i(con-)188 1858 y(taining)f(the)f
(call)f(to)i Fu(use)o Fw(.)139 1959 y Fp(\017)24 b Fw(A)12
b(compiled-tim)o(e)e(error)i(\(parsing)h(or)g(t)o(yp)q(ec)o(hec)o(king\))d
(in)i(the)g(used)h(\014le)e(causes)i(the)f(exception)188 2019
y Fu(Use)17 b Fw(\(in)h(structure)g Fu(Kit)o Fw(\))g(to)g(b)q(e)g(raised)g
(in)g(the)g(calling)f(con)o(text.)26 b(This)18 b(can)g(b)q(e)g(handled)h(in)
188 2079 y(the)d(usual)h(manner.)139 2180 y Fp(\017)24 b Fw(An)17
b(exception)f(whic)o(h)g(propagates)j(uncaugh)o(t)f(to)f(the)g(top-lev)o(el)e
(in)i(the)g(used)g(\014le)g(is)f(passed)188 2240 y(uncaugh)o(t)h(in)o(to)f
(the)g(con)o(text)f(calling)h(the)g Fu(use)o Fw(,)g(or)g(else)g(rep)q(orted)g
(at)h(top-lev)o(el.)139 2341 y Fp(\017)24 b Fw(Nested)16 b(o)q(ccurrences)g
(of)g Fu(use)f Fw(w)o(ork)i(as)f(exp)q(ected.)66 2402 y(Therefore,)j(the)g
(exception)f Fu(Use)g Fw(can)i(b)q(e)f(handled)g(in)g(order)g(to)g(deal)g
(with)g(compile-tim)o(e)d(failure)66 2462 y(for)f(a)f(used)g(\014le)g(\(or)g
(an)o(y)g(nested)g(\014le\),)f(and)h(run)o(time)e(exceptions)h(whic)o(h)h
(propagate)h(through)g(a)f Fu(use)66 2522 y Fw(can)j(b)q(e)f(handled.)140
2582 y Fu(Interpret)o(er)c Fw(main)o(tains)j(the)h(top-lev)o(el)e(basis)i(in)
g(a)g(reference)f(v)m(ariable)g(\(all)g(the)h(lo)o(w)o(er)f(lev)o(els)66
2642 y(are)f(pure)g(in)f(the)h(w)o(a)o(y)f(they)g(manipulate)f(bases\).)21
b(As)14 b(eac)o(h)f(top-lev)o(el)f(declaration)i(is)f(executed)g(and)66
2702 y(terminates)j(successfully)l(,)g(its)h(bindings)h(are)f(added)h(to)g
(the)f(top-lev)o(el)f(basis.)26 b(This)17 b(means)g(that)h(a)66
2763 y(\014le)h(con)o(taining)g(an)h(error)f(\(compile)e(time)g(or)j(run)o
(time\))d(will)h(cause)h(bindings)h(to)f(b)q(e)h(established)66
2823 y(up)d(to)f(but)h(excluding)e(the)h(o\013ending)h(declaration.)p
eop
%%Page: 102 11
bop 66 50 a Fs(CHAPTER)17 b(7.)37 b(MISCELLANEOUS)1052 b Fw(102)66
203 y Ft(7.6)83 b(Error)28 b(Detection)f(and)h(Rep)r(orting)66
313 y Fw(As)16 b(a)f(general)g(rule,)g(whenev)o(er)f(a)i(Kit)f(comp)q(onen)o
(t)f(w)o(an)o(ts)h(to)h(prin)o(t)f(some)f(message)h(to)g(the)h(user,)f(it)66
373 y(pro)q(duces)20 b(a)e(v)m(alue,)h(called)e(a)i Fs(rep)q(ort)p
Fw(,)g(whic)o(h)f(can)h(later)f(b)q(e)h(com)o(bined)d(with)i(other)h(rep)q
(orts)g(from)66 433 y(other)k(parts)h(of)f(the)g(Kit)f(to)h(form)f(a)h
(complete)e(message)h(whic)o(h)g(can)h(then)g(b)q(e)g(prin)o(ted.)40
b(This)66 493 y(approac)o(h)19 b(is)f(v)o(ery)f(di\013eren)o(t)h(to)g
(eagerly)g(writing)g(something)f(on)i(the)f(screen)f(eac)o(h)h(time)e(there)h
(is)66 554 y(some)f(information)f(that)h(the)g(use)h(migh)o(t)d(w)o(an)o(t.)
21 b(By)16 b(dela)o(ying)f(prin)o(ting,)g(w)o(e)h(ha)o(v)o(e)f(the)h(p)q
(ossibilit)o(y)66 614 y(of)j(editing)g(rep)q(orts)g(\(or)g(omitting)e(parts)j
(of)f(rep)q(orts)g(altogether\))g(b)q(efore)g(they)f(are)h(presen)o(ted)f(to)
66 674 y(the)e(user.)140 734 y(A)24 b(rep)q(ort)h(is)f(an)h(abstract)g
(represen)o(tation)f(of)h(a)g(line)e(of)i(text.)45 b(Rep)q(orts)25
b(can)g(b)q(e)g(created)66 794 y(from)d(strings,)i(app)q(ended)f(to)f(eac)o
(h)g(other,)i(inden)o(ted,)e(decorated)h(with)f(pre\014x)g(strings,)i(and)f
(\014-)66 855 y(nally)d(prin)o(ted.)33 b(This)21 b(kind)f(of)h(functionalit)o
(y)e(is)h(needed)g(to)h(prin)o(t)f(some)f(of)i(the)f(more)f(complex)66
915 y(ob)s(jects)i(of)h(ML)g(suc)o(h)f(as)h(functor)f(bindings.)37
b(Rather)22 b(than)g(prin)o(t)e(lines)h(of)h(text,)f(a)h(\\prin)o(ting")66
975 y(function)15 b(will)e(return)h(a)h(rep)q(ort;)g(these)f(rep)q(orts)h
(are)f(accum)o(ulated)f(to)i(the)f(top)h(lev)o(el)d(of)j(the)f(system)66
1035 y(\(functor)j Fu(Interpret)o(er)m Fw(\))f(where)g(they)g(are)g
(\014nally)g(prin)o(ted.)140 1095 y(In)k(addition,)h(some)f(prin)o(ting)g
(\(or)h(rather,)g(rep)q(ort)g(generation\))g(is)f(deferred.)34
b(In)20 b(particular,)66 1156 y(elab)q(oration)e(errors)e(are)h(not)g(prin)o
(ted)e(\(i.e.)g(turned)h(in)o(to)g(rep)q(orts\))h(as)g(so)q(on)h(as)f(they)f
(are)h(detected;)66 1216 y(that)24 b(w)o(ould)g(complicate)d(the)j(elab)q
(orator,)i(as)e(all)f(the)g(elab)q(oration)i(functions)e(w)o(ould)h(ha)o(v)o
(e)f(to)66 1276 y(return)e(results)f(con)o(taining)g(rep)q(orts.)35
b(Instead,)21 b(elab)q(oration)g(errors)g(cause)g(error)f(info)g(no)q(des)i
(to)66 1336 y(b)q(e)17 b(plan)o(ted)g(on)g(the)f(abstract)i(syn)o(tax.)k
(After)16 b(elab)q(oration,)h(a)g(separate)g(p)q(ost-pass)i(runs)f(o)o(v)o
(er)d(the)66 1396 y(abstract)g(syn)o(tax)f(to)g(pic)o(k)f(out)i(and)f(to)h
(generate)e(a)i(rep)q(ort)f(from)f(an)o(y)h(errors)g(whic)o(h)g(w)o(ere)f
(detected.)66 1457 y(The)k(in)o(terpretation)e(pro)q(cess)i(only)f(con)o(tin)
o(ues)f(if)h(there)g(w)o(ere)f(no)i(errors.)140 1517 y(Error)22
b(tra)o(v)o(ersal)f(is)h(done)h(b)o(y)e Fu(ErrorTraver)o(se)m
Fw(,)i(whose)f(signature)h(is)f(giv)o(en)f(in)h(Figure)f(7.8.)66
1577 y Fu(ErrorTraver)o(se)12 b Fw(examines)i(all)g(info)i(no)q(des)g(to)g
(see)f(if)g(they)g(con)o(tain)g(an)o(y)g(error)h(info.)k(If)15
b(so,)h(this)f(is)66 1637 y(extracted)e(together)h(with)f(the)g(source)h
(information)e(\(if)h(it)g(is)g(presen)o(t,)g(whic)o(h)g(it)g(should)h(b)q(e)
g(in)f(most)66 1697 y(cases\))19 b(and)g(built)f(in)o(to)h(a)g(rep)q(ort.)28
b(The)19 b(result)f(of)h(eac)o(h)f(tra)o(v)o(ersal)g(is)g(examined)f(in)h
(the)h(top-lev)o(el)66 1758 y(lo)q(op,)e(in)f Fu(Interprete)o(r)m
Fw(,)g(where)g(an)o(y)g(errors)g(are)g(rep)q(orted.)140 1818
y(Rep)q(orts)f(are)f(also)h(used)f(for)h(top-lev)o(el)e(prin)o(tout)h(of)h
(bindings.)20 b(The)15 b(functor)f Fu(TopLevelRep)o(ort)66
1878 y Fw(tak)o(es)19 b(a)g(basis)h(\(comprising)d(a)i(static,)g(a)h
(dynamic,)d(and)i(an)h(in\014x)e(basis\))i(and)f(returns)g(a)g(rep)q(ort.)66
1938 y Fu(TopLevelRep)o(ort)13 b Fw(is)j(resp)q(onsible)g(for)g(an)o(y)h
(inden)o(tation)e(and)i(formatting)f(of)g(Mo)q(dules-lev)o(el)f(con-)66
1998 y(structs)g(\(suc)o(h)g(as)g(functors,)g(whic)o(h)g(require)e(some)h(w)o
(ork)h(in)f(order)h(to)g(presen)o(t)f(them)g(in)g(an)h(accept-)66
2058 y(able)j(manner\),)f(but)h(kno)o(ws)g(nothing)g(ab)q(out)h(creating)f
(textual)f(represen)o(tations)g(of)i(Core)f(v)m(alues.)66 2119
y(This)e(is)e(done)i(b)o(y)e Fu(ValPrint)m Fw(;)h(the)g(only)g(assumption)g
(made)f(b)o(y)g Fu(TopLevelRe)o(por)o(t)e Fw(\(p)q(erhaps)k(erro-)66
2179 y(neously\))g(is)g(that)h(a)g(v)m(alue)f(will)f(prin)o(t)h(in)o(to)f(a)i
(one-line)f(rep)q(ort.)66 2358 y Ft(7.7)83 b(File)27 b(Inclusion)g(and)g
(Implemen)n(tation)g(of)g Fa(use)66 2467 y Fw(Despite)20 b(b)q(eing)g(presen)
o(t)g(in)f(most)h(SML)g(implem)o(en)o(tati)o(ons,)f Fu(use)g
Fw(is)h(not)g(part)h(of)f(the)g(SML)g(Def-)66 2527 y(inition.)34
b(In)21 b(addition,)h(di\013eren)o(t)d(impleme)o(n)o(tations)f(impleme)o(n)o
(t)g(di\013eren)o(t)i(functionalit)o(y)f(for)i(it,)66 2588
y(and)16 b(rarely)f(sp)q(ecify)g(its)g(b)q(eha)o(viour)g(precisely)l(.)k
(Since)14 b(it)h(is)g(not)h(part)g(of)g(the)f(De\014nition,)f(it)h(should,)66
2648 y(strictly)g(sp)q(eaking,)i(not)g(b)q(e)f(impleme)o(n)o(ted)d(in)j(the)g
(Kit;)g(ho)o(w)o(ev)o(er,)f(the)h(Kit's)f(usefulness)i(w)o(ould)f(b)q(e)66
2708 y(limited)h(without)i(it.)29 b(Isolated)20 b(source)f(\014les)f(could)h
(b)q(e)h(read)f(using)g Fu(evalFile)n Fw(,)g(but)g(it)g(w)o(ould)g(b)q(e)66
2768 y(di\016cult)f(to)h(test)g(the)f(Kit)h(on)g(real-w)o(orld)g(programs)g
(since)f(they)g(either)g(con)o(tain)h(o)q(ccurrences)f(of)p
eop
%%Page: 101 12
bop 66 50 a Fs(CHAPTER)17 b(7.)37 b(MISCELLANEOUS)1052 b Fw(101)p
66 239 1890 6 v 185 293 a Fu(abstype)23 b(instream)f(=)k(INSTREAM)c(of)j(int)
287 353 y(and)g(outstream)d(=)j(OUTSTREAM)e(of)h(int)185 413
y(with)261 474 y(val)h(std)p 445 474 16 2 v 17 w(in)g(=)g(INSTREAM)e(0)261
534 y(val)i(std)p 445 534 V 17 w(out)g(=)g(OUTSTREAM)d(0)261
654 y(fun)j(open)p 471 654 V 17 w(in\(f:)f(string\))f(=)338
714 y(INSTREAM\(pr)o(im\()o(33)o(,)g(\(f,)h(Io\("Cannot)e(open)i(")i(^)f
(f\)\)\)\))261 835 y(fun)g(open)p 471 835 V 17 w(out\(f:)e(string\))g(=)338
895 y(OUTSTREAM\(p)o(rim)o(\(3)o(4,)f(\(f,)j(Io\("Cannot)d(open)i(")h(^)h
(f\)\)\)\))261 1015 y(fun)f(input\(INST)o(REA)o(M)d(i,)j(n:)g(int\):)f
(string)f(=)j(prim\(35,)c(\(i,)j(n\)\))261 1136 y(fun)g(lookahead\()o(INS)o
(TR)o(EAM)d(i\):)j(string)e(=)i(prim\(36,)e(i\))261 1256 y(fun)i(close)p
497 1256 V 17 w(in\(INSTRE)o(AM)d(i\):)j(unit)f(=)h(prim\(37,)e(i\))261
1376 y(fun)i(end)p 445 1376 V 17 w(of)p 514 1376 V 18 w(stream\(INS)o(TRE)o
(AM)d(i\):)j(bool)f(=)h(prim\(38,)e(i\))261 1497 y(fun)i(output\(OUT)o(STR)o
(EA)o(M)e(i,)i(str:)f(string\):)e(unit)j(=)338 1557 y(prim\(39,)e(\(i,)i
(str,)f(Io)h("Output)e(stream)g(is)i(closed"\)\))261 1677 y(fun)g(close)p
497 1677 V 17 w(out\(OUTST)o(REA)o(M)d(i\):)j(unit)f(=)h(prim\(40,)e(i\))185
1738 y(end)477 1893 y Fw(Figure)15 b(7.6:)22 b(De\014nition)16
b(of)g(streams)g(from)f(the)h(prelude)p 66 1950 1890 6 v 66
2049 V 185 2103 a Fu(signature)22 b(APPLY)i(=)261 2163 y(sig)338
2223 y(type)g(BasVal)g(and)g(Val)338 2344 y(val)h(APPLY:)e(BasVal)h(*)h(Val)g
(->)f(Val)338 2404 y(val)h(equal:)49 b(Val)24 b(*)i(Val)e(->)h(bool)338
2524 y(val)g(FAIL)p 548 2524 16 2 v 17 w(USE:)f(unit)g(->)h(unit)261
2584 y(end)666 2740 y Fw(Figure)15 b(7.7:)22 b(The)16 b(signature)h
Fu(APPLY)p 66 2797 1890 6 v eop
%%Page: 100 13
bop 66 50 a Fs(CHAPTER)17 b(7.)37 b(MISCELLANEOUS)1052 b Fw(100)188
195 y(need)13 b(to)g(b)q(e)f(built-in)g(b)q(ecause)h(ML)g(has)g(constan)o(ts)
g(of)g(those)g(t)o(yp)q(es.)20 b(In)12 b(addition,)h(the)g(t)o(yp)q(e)f(of)
188 255 y Fu(prim)k Fw(con)o(tains)g Fu(int)o Fw(.)22 b Fu(exn)16
b Fw(is)g(built-in)g(b)q(ecause)h(of)g(the)f(primitiv)o(e)d(nature)k(of)g
(the)f(exception)188 315 y(mec)o(hanism.)31 b Fu(ref)20 b Fw(is)g(built-in)g
(b)q(ecause)h(of)g(the)f(sp)q(ecial)h(nature)f(of)h(the)g Fu(ref)e
Fw(constructor,)188 376 y(and)h(also)g(b)q(ecause)f(the)g Fu(ref)f
Fw(t)o(yp)q(e)h(constructor)g(is)g(treated)g(sp)q(ecially)f(when)h(testing)g
(t)o(yp)q(es)188 436 y(for)e(equalit)o(y)d(admission.)139 538
y Fp(\017)24 b Fw(The)13 b(follo)o(wing)f(v)m(alues:)19 b Fu(ref)o
Fw(,)13 b Fu(prim)n Fw(.)20 b(The)13 b(need)f(to)h(prede\014ne)f
Fu(prim)f Fw(should)i(b)q(e)f(ob)o(vious.)20 b Fu(ref)188 598
y Fw(has)e(sp)q(ecial)f(static)g(and)h(dynamic)d(prop)q(erties.)24
b(Statically)l(,)16 b(it)g(has)i(t)o(yp)q(e)f Fu('a)25 b(->)g('a)f(ref)17
b Fw(in)188 658 y(patterns)e(and)h Fu(`)p 502 658 16 2 v 18
w(a)25 b(->)g(')p 674 658 V 18 w(a)g(ref)14 b Fw(in)g(expressions.)21
b(Dynamically)l(,)12 b(it)i(creates)h(a)g(new)f(address)188
718 y(on)j(application,)f(and)g(has)h(a)g(sp)q(eci\014c)f(seman)o(tic)e(rule)
h(\(rule)h(114\))h(indicating)f(this.)140 778 y(In)f(addition,)h(some)e(of)i
(the)g(non-primitiv)o(e)d(iden)o(ti\014ers)h(are)i(kno)o(wn)g(in)o(ternally)e
(b)o(y)i(the)f(system.)66 839 y(These)21 b(are)f Fu(nil)o Fw(,)h
Fu(::)o Fw(,)g Fu(true)o Fw(,)g Fu(false)e Fw(and)i Fu(it)o
Fw(.)34 b(These)20 b(are)g(needed)g(for)h(deriv)o(ed-form)d(expansion)66
899 y(\(sp)q(eci\014cally)l(,)13 b Fu(if)o Fw(/)p Fu(then)o
Fw(/)p Fu(else)o Fw(,)h(list)f(expressions,)h(and)h(top-lev)o(el)d
(expressions\).)20 b(All)13 b(except)g Fu(it)g Fw(are)66 959
y(needed)k(for)h(the)g(dynamic)e(ev)m(aluation)h(phase)i(as)f(w)o(ell,)e
(since)h(some)g(of)h(the)f(primitiv)o(e)d(op)q(erations)66
1019 y(return)i(b)q(o)q(olean)h(constructors)f(or)g(lists.)21
b(Note)15 b(that)i(the)e(t)o(yp)q(es)h(\(and)g(iden)o(ti\014ers\))e
Fu(bool)g Fw(and)j Fu(list)66 1079 y Fw(are)e(not)h(kno)o(wn)f(in)o(ternally)
l(.)k(Note)c(also)g(that)h(\\)p Fu(:=)o Fw(")g(and)f(\\)p Fu(!)p
Fw(")h(are)f(non-primitiv)o(e,)d(and)j(are)g(de\014ned)66 1139
y(in)h(the)g(prelude)g(with)g(the)g(t)o(yp)q(es)g(required)f(b)o(y)h(the)g
(De\014nition.)140 1200 y(P)o(erhaps)d(surprisingly)l(,)g(the)g(t)o(yp)q(es)f
Fu(instream)f Fw(and)i Fu(outstream)d Fw(are)j(not)h(primitiv)n(e.)j(Figure)c
(7.6)66 1260 y(sho)o(ws)19 b(their)d(de\014nition)h(in)h(the)f(prelude.)24
b(Their)17 b(t)o(yp)q(es)g(are)h(in)o(tro)q(duced)f(using)h(an)g
Fu(abstype)c Fw(dec-)66 1320 y(laration,)21 b(whic)o(h)f(mak)o(es)e(them)h
(suitably)g(opaque.)34 b(The)20 b(p)q(erv)m(asiv)o(e)f(op)q(erations)i(on)g
(streams)e(are)66 1380 y(pro)o(vided)e(as)h(primitiv)o(e)o(s)d(\(using)j
Fu(prim)n Fw(\))g(with)f(in)o(tegers)f(denoting)i(the)f(streams)g(themselv)o
(e)o(s.)22 b(The)66 1440 y(in)o(terpreter)16 b(\(sp)q(eci\014cally)l(,)f(the)
i(functor)g Fu(Apply)n Fw(,)g(using)g(a)h(stream)e(pac)o(k)m(age)h
Fu(IOStreams)m Fw(\))g(pro)o(vides)66 1501 y(the)f(required)f(functionalit)o
(y)f(o)o(v)o(er)h(streams)g(accessed)h(as)g(in)o(tegers.)21
b(This)16 b(approac)o(h)g(frees)g(the)f(rest)66 1561 y(of)i(the)f(Kit)g(from)
f(ha)o(ving)h(to)h(kno)o(w)f(an)o(ything)g(ab)q(out)i(the)e(t)o(yp)q(es)g(of)
g(input)g(and)h(output)g(streams.)140 1631 y(The)12 b(ev)m(aluation)h(of)g
(the)g(primitiv)n(es)d(is)j(implem)o(e)o(n)o(ted)d(b)o(y)i(the)g(functor)h
Fu(Apply)n Fw(,)g(whose)h(signature)66 1691 y(is)g(giv)o(en)f(in)h(Figure)g
(7.7.)20 b(The)14 b(set)g(of)h(basic)f(v)m(alues)g(BasV)l(al)f(con)o(tains)h
(a)h(single)e(v)m(alue,)h Fu(prim)o Fw(.)20 b Fu(Apply)66 1751
y Fw(pro)o(vides)g(the)h(application)f(function)g(APPL)l(Y)g(whic)o(h)g(tak)o
(es)g(a)h(BasV)l(al)f(\(whic)o(h)g(m)o(ust)f(b)q(e)i Fu(prim)n
Fw(\))66 1811 y(and)15 b(an)g(argumen)o(t)e(v)m(alue)i(\(whic)o(h)e(m)o(ust)g
(b)q(e)i(a)f(pair)h(whose)g(\014rst)f(argumen)o(t)g(is)g(an)h(in)o(teger)e
(denoting)66 1871 y(the)18 b(primitiv)o(e)d(function)i(required)g(and)i
(whose)f(second)h(argumen)o(t)e(is)g(of)i(the)e(correct)h(form\),)f(and)66
1932 y(returns)e(a)h(result)e(v)m(alue.)21 b Fu(Apply)13 b
Fw(also)j(pro)o(vides)e(the)h(equalit)o(y)e(function)i(as)h(a)f
Fu(prim)f Fw(\(whic)o(h)g(is)h(used)66 1992 y(to)j(implem)o(en)n(t)c(\\)p
Fu(=)p Fw(",)j(and)h(is)f(also)g(needed)g(for)g(pattern)g(matc)o(hing\),)e
(and)j(some)e(glue)g(to)i(deal)e(with)66 2052 y(the)j Fu(use)f
Fw(function)h(\(Section)f(7.7\).)30 b(The)19 b(b)q(o)q(dy)i(of)e
Fu(Apply)e Fw(is)i(fairly)f(straigh)o(tforw)o(ard.)30 b(There)19
b(are)66 2112 y(functions)c(for)g(unpac)o(king)f(and)h(pac)o(king)f(the)g
(primitiv)o(e)d(t)o(yp)q(es)j(and)h(the)f(imp)q(ortan)o(t)g(non-primitiv)o(e)
66 2172 y(t)o(yp)q(es)k(lik)o(e)d Fu(bool)i Fw(and)h Fu(list)n
Fw(.)26 b(The)17 b(function)g(impleme)o(n)o(ting)e(APPL)l(Y)i(tak)o(es)g(a)h
(BasV)l(al)g(\(whic)o(h)e(is)66 2233 y(ignores,)f(since)g(it)f(can)h(only)g
(b)q(e)g Fu(prim)n Fw(\))g(and)h(a)f(v)m(alue)g(whic)o(h)f(is)h(imm)o
(ediatel)o(y)d(decomp)q(osed)i(to)i(yield)66 2293 y(an)j(in)o(teger)e
(denoting)h(the)g(primitiv)o(e)d(op)q(eration,)k(and)f(a)h(v)m(alue)f
(denoting)g(the)g(actual)g(argumen)o(ts)66 2353 y(to)j(the)e(primitiv)o(e)e
(op)q(eration.)33 b Fu(Apply)18 b Fw(mak)o(es)g(use)i(of)g
Fu(IOStreams)c Fw(to)21 b(implem)o(en)n(t)c(streams,)j(and)66
2413 y Fu(CoreDynObje)o(ct.)o(Sto)o(re)10 b Fw(to)j(manipulate)f(references.)
19 b(\(Only)13 b(the)g Fu(add)f Fw(and)i Fu(retrieve)c Fw(op)q(erations)66
2473 y(are)20 b(used)g(b)o(y)e(APPL)l(Y)i(to)g(implem)o(en)n(t)d(assignmen)o
(t)h(and)i(dereferencing;)f(new)h(references)e(\(using)66 2534
y Fu(Store.uniqu)o(e)m Fw(\))e(are)h(created)e(as)i Fu(ref)e
Fw(is)h(applied,)g(in)f Fu(EvalDec)n Fw(.\))140 2594 y Fu(Apply)g
Fw(is)i(also)h(capable)f(of)g(raising)h(exceptions)e(from)g(the)h(primitiv)o
(e)d(functions|it)i(is)h(passed)66 2654 y(a)23 b(v)m(alue)e
Fu(RAISE)f Fw(of)i(t)o(yp)q(e)g Fu(CoreDynOb)o(je)o(ct.)o(Val)g(->)j('a)c
Fw(whic)o(h)g(can)h(b)q(e)g(called)f(with)g(exception)66 2714
y(v)m(alues.)p eop
%%Page: 99 14
bop 66 50 a Fs(CHAPTER)17 b(7.)37 b(MISCELLANEOUS)1076 b Fw(99)p
66 213 1890 6 v 185 267 a Fu(fun)24 b(op)h(=)g(\(x:)g(''a,)f(y:)h(''a\):)f
(bool)g(=)h(prim\(0,)e(\(x,)i(y\)\))287 328 y(and)g(abs\(x:)e(int\):)h(int)g
(=)i(prim\(1,)d(\(x,)h(Abs\)\))287 388 y(and)h(floor\(x:)d(real\):)i(int)g(=)
i(prim\(2,)d(\(x,)h(Floor\)\))287 448 y(and)h(real\(x:)e(int\):)g(real)i(=)g
(prim\(3,)e(x\))364 508 y Fw(.)8 b(.)g(.)603 664 y(Figure)15
b(7.5:)22 b(Use)16 b(of)g Fu(prim)f Fw(in)h(the)g(prelude)p
66 722 V 66 847 a(whic)o(h)g(the)g(Kit)g(reads)g(when)h(building)e(itself.)
140 907 y(Other)g(p)q(erv)m(asiv)o(es)g(cannot)h(b)q(e)g(dealt)f(with)h(in)f
(this)g(w)o(a)o(y;)g(for)h(instance,)f Fu(+)g Fw(is)h(a)f(p)q(erv)m(asiv)o(e)
g(v)m(alue)66 967 y(whic)o(h)23 b(cannot)h(b)q(e)f(expressed)f(in)h(terms)f
(of)h(more)f(primitiv)n(e)e(op)q(erations.)43 b(W)l(e)23 b(sa)o(y)g(that)g
(suc)o(h)66 1027 y(p)q(erv)m(asiv)o(es)17 b(are)g Fs(primitiv)o(e)p
Fw(.)k(P)o(erv)m(asiv)o(es)16 b(are)h(used)h(b)o(y)e(the)h(Kit)g(\(for)g
(example,)e Fu(true)h Fw(is)h(needed)g(in)66 1088 y(the)f(expansion)h(of)g
(deriv)o(ed)d(forms\),)h(so)i(p)q(erv)m(asiv)o(es)f(m)o(ust)f(b)q(e)h
(accessible)f(to)i(the)f(Kit)f(itself.)140 1148 y(In)k(principle,)f(the)i
(primitiv)o(e)o(s)d(should)k(include)d(all)h(the)h(basic)f(v)m(alues)h
(\(BasV)l(al)g(is)f(de\014ned)h(in)66 1208 y([11)q(,)25 b(Section)e(6.4]\).)
43 b(Ho)o(w)o(ev)o(er,)23 b(the)g(large)h(n)o(um)o(b)q(er)d(of)j(basic)g(v)m
(alues)f(is)h(a)f(problem)f(in)i(a)g(real)66 1268 y(impleme)o(n)o(tation.)17
b(It)10 b(w)o(ould)h(b)q(e)g(v)o(ery)f(incon)o(v)o(enien)o(t)e(if)j(eac)o(h)f
(basic)h(v)m(alue)g(w)o(ere)f(to)h(ha)o(v)o(e)f(its)h(iden)o(ti\014er)66
1328 y(built)20 b(in)o(to)f(the)h(system)f(\(separately)g(as)i(an)g(iden)o
(ti\014er)d(and)j(as)f(a)h(v)m(ariable\),)f(its)g(t)o(yp)q(e)f(built)h(in)o
(to)66 1389 y(the)c(elab)q(orator,)h(its)f(v)m(alue)f(built)g(in)h(as)h(a)f
(basic)g(v)m(alue)g(and)g(its)g(op)q(eration)h(built)e(in)o(to)h(the)f(APPL)l
(Y)66 1449 y(function.)140 1509 y(Therefore,)d(the)h(Kit)g(has)h(a)f(sp)q
(ecial)g(built-in)f(v)m(alue,)h(called)g Fu(prim)n Fw(,)g(whic)o(h)g(is)g
(used)g(to)h(implem)o(e)o(n)o(t)66 1569 y(most)j(of)h(the)g(basic)f(v)m
(alues)h(in)f(a)i(uniform)d(w)o(a)o(y)l(.)25 b(More)17 b(precisely)l(,)f
(most)h(of)h(the)g(basic)f(v)m(alues)h(\(i.e.)66 1629 y(the)e(mem)o(b)q(ers)e
(of)i(BasV)l(al\))g(are)g(declared)g(in)g(the)g(prelude,)f(using)h(calls)g
(to)g Fu(prim)o Fw(.)21 b Fu(prim)15 b Fw(has)i(t)o(yp)q(e)188
1690 y Fu(\(int)25 b(*)g('a\))f(->)h('b)66 1750 y Fw(where)16
b(the)f Fu(int)g Fw(indicates)g(whic)o(h)g(primitiv)o(e)d(function)k(is)f
(required.)20 b(It)c(is)f(essen)o(tially)f(o)o(v)o(erloaded,)66
1810 y(impleme)o(n)o(ting)19 b(a)k(large)f(n)o(um)o(b)q(er)e(of)i(primitiv)o
(e)d(functions)j(according)g(to)h(the)f(v)m(alue)g(of)g(its)g(\014rst)66
1870 y(argumen)o(t)11 b(\(rather)h(than)g(according)g(to)f(its)h(t)o(yp)q(e,)
f(whic)o(h)g(is)h(the)f(usual)h(discriminan)o(t)d(for)j(o)o(v)o(erloaded)66
1930 y(op)q(erations\).)140 1990 y(Figure)g(7.5)h(giv)o(es)f(a)h(small)f(p)q
(ortion)h(of)g(the)g(prelude,)f(sho)o(wing)i(some)d(uses)i(of)h
Fu(prim)n Fw(.)20 b(The)13 b(second)66 2051 y(argumen)o(t)h(to)i
Fu(prim)d Fw(is)i(either)f(a)i(single)e(v)m(alue)h(or)h(a)f(tuple)g
(expression,)f(dep)q(ending)i(on)f(the)g(n)o(um)o(b)q(er)66
2111 y(of)22 b(argumen)o(ts)e(the)h(primitiv)o(e)d(op)q(eration)k(tak)o(es.)
36 b(Eac)o(h)22 b(use)f(of)h Fu(prim)d Fw(has)j(to)g(b)q(e)f(accompanied)66
2171 y(b)o(y)16 b(t)o(yp)q(e)g(constrain)o(ts,)h(since)f(it)g(is)g(a)h(t)o
(yp)q(e-unsafe)f(construct,)h(and)g(since)f(the)g(p)q(erv)m(asiv)o(es)g(m)o
(ust)f(b)q(e)66 2231 y(giv)o(en)c(the)g(t)o(yp)q(es)g(dictated)g(b)o(y)g(the)
g(De\014nition.)19 b(Note)11 b(also)h(that)g(exception-raising)f(p)q(erv)m
(asiv)o(es)g(tak)o(e)66 2291 y(exceptions)19 b(\(i.e.)f(v)m(alues)i(of)f(t)o
(yp)q(e)h Fu(exn)n Fw(\))g(as)g(extra)g(argumen)o(ts;)g(the)f(implem)o(en)n
(tation)e(of)j(APPL)l(Y)66 2352 y(can)15 b(raise)f(these)f(exceptions)h(as)g
(required.)20 b(The)14 b(equalit)o(y)e(predicate)h(is)h(implem)o(en)o(te)o(d)
e(using)i Fu(prim)o Fw(.)66 2412 y(\(It)k(is)h(prim)e(zero,)h(a)h(fact)f
(assumed)g(b)o(y)g(the)h(lam)o(b)q(da)e(co)q(de)i(generator.\))29
b(The)18 b(prelude)g(mak)o(es)f(all)66 2472 y(the)i(standard)g(\014xit)o(y)f
(declarations,)g(declares)g(all)g(the)g(p)q(erv)m(asiv)o(e)g(exceptions)1553
2454 y Fm(2)1572 2472 y Fw(,)h(and)g(declares)e(the)66 2532
y(t)o(yp)q(es)f Fu(unit)o Fw(,)g Fu(bool)f Fw(and)h Fu(list)o
Fw(.)140 2602 y(There)22 b(are)h(a)h(n)o(um)o(b)q(er)d(of)j(things)f(that)g
(the)g(prelude)f(cannot)i(implem)o(en)o(t.)38 b(These)23 b(are)g(the)66
2662 y(follo)o(wing:)139 2722 y Fp(\017)h Fw(The)14 b(follo)o(wing)f(t)o(yp)q
(es:)19 b Fu(int)o Fw(,)14 b Fu(real)n Fw(,)g Fu(string)n Fw(,)f
Fu(exn)o Fw(,)g Fu(ref)o Fw(.)21 b(The)13 b(t)o(yp)q(es)g Fu(int)o
Fw(,)h Fu(real)d Fw(and)j Fu(string)p 66 2768 756 2 v 123 2798
a Fi(2)141 2813 y Fh(including)f Ff(Match)o Fh(,)g Ff(Bind)g
Fh(and)h Ff(Interrupt)n Fh(,)g(although)f(these)i(are)f(not)g(kno)o(wn)f(b)o
(y)h(the)h(in)o(terpreter)g(at)f(presen)o(t)p eop
%%Page: 98 15
bop 66 50 a Fs(CHAPTER)17 b(7.)37 b(MISCELLANEOUS)1076 b Fw(98)p
66 213 1890 6 v 185 267 a Fu(signature)22 b(VAL)p 522 267 16
2 v 17 w(PRINT)i(=)261 328 y(sig)261 388 y(type)h(id)f(and)h(strid)261
448 y(type)g(DynamicBa)o(sis)261 508 y(type)g(TypeSchem)o(e)261
568 y(type)g(Val)261 689 y(val)g(locate:)49 b(DynamicBa)o(sis)22
b(*)j(strid)f(list)g(*)h(id)g(->)g(Val)261 749 y(val)g(print:)49
b(Val)25 b(*)g(TypeScheme)d(->)j(string)185 809 y(end)618 965
y Fw(Figure)16 b(7.4:)21 b(The)c(signature)f Fu(VAL)p 1262
965 V 17 w(PRINT)p 66 1022 1890 6 v 188 1147 a Fp(f)p Fu(render:)23
b(StrId)h(list)g(*)i(id)e(*)i(TypeSchem)o(e)d(->)i(string,)213
1207 y(pathR:)f(StrId)f(list,)213 1267 y(str:)h(Str,)213 1328
y(bindings:)f(bool)188 1388 y Fp(g)j Fu(->)f(Report)66 1448
y(render)18 b Fw(tak)o(es)h(a)g(path,)i(an)f(iden)o(ti\014er)d(and)j(a)g(t)o
(yp)q(e)f(sc)o(heme,)e(and)j(prin)o(ts)f(the)g(dynamic)f(v)m(alue)h(of)66
1508 y(that)h(iden)o(ti\014er,)f(accessed)g(via)g(the)h(path)g(from)f(the)g
(topmost)g(dynamic)f(basis,)j(according)e(to)h(its)66 1568
y(t)o(yp)q(e)13 b(as)h(indicated)f(in)g(the)g(t)o(yp)q(e)f(sc)o(heme.)18
b Fu(pathR)12 b Fw(is)h(a)h(\(rev)o(ersed\))d(record)j(of)f(the)g(nested)g
(structures)66 1629 y(tra)o(v)o(ersed)e(to)h(reac)o(h)g(the)f(leaf)g(no)q
(de.)21 b(The)12 b(other)g(argumen)o(ts)e(v)m(ary)i(b)q(et)o(w)o(een)f(the)h
(di\013eren)o(t)f(rep)q(orting)66 1689 y(functions,)20 b(but)f(the)f(argumen)
o(t)g Fu(bindings)m Fw(,)h(if)g(presen)o(t,)f(indicates)g(whether)h(the)f
(dynamic)f(v)m(alue)66 1749 y(should)g(b)q(e)g(retriev)o(ed)d(via)i(the)g
Fu(render)e Fw(function)i(and)h(prin)o(ted.)140 1819 y Fu(TopLevelR)o(epo)o
(rt)10 b Fw(mak)o(es)i(calls)h(to)i(lo)o(w)o(er-lev)o(el)c(functions)i(in)h
(other)g(mo)q(dules.)19 b Fu(iterateVE)11 b Fw(\(in)66 1879
y Fu(Environment)o(s)m Fw(\))16 b(is)g(a)h(generic)e(tra)o(v)o(erser)g(of)i
(v)m(alue)f(en)o(vironmen)o(ts;)d Fu(iterateSE)g Fw(is)j(the)g(equiv)m(alen)o
(t)66 1939 y(for)k(structure)f(en)o(vironmen)o(ts.)28 b Fu(ModuleEnvi)o(ron)o
(men)o(ts)16 b Fw(pro)o(vides)j(tra)o(v)o(ersers)f(for)i(signature)g(and)66
1999 y(functor)14 b(en)o(vironmen)o(ts)d(\(whic)o(h)h(tak)o(e)h(callbac)o(k)f
(functions)h(for)h(dealing)f(with)g(the)g(individual)f(signa-)66
2060 y(tures)k(and)h(functor)e(signatures\).)22 b(Finally)l(,)14
b Fu(ValPrint)f Fw(\(whose)j(signature)h(is)e(giv)o(en)g(in)h(Figure)f(7.4\))
66 2120 y(pro)o(vides)g(the)f(abilit)o(y)g(to)h(tra)o(v)o(erse)f(a)h(c)o
(hain)f(of)h(structure)g(iden)o(ti\014ers)e(in)i(a)g(dynamic)e(basis)j
(yielding)66 2180 y(a)21 b(dynamic)e(v)m(alue,)h(and)h(to)g(prin)o(t)e(a)i(v)
m(alue)f(according)h(to)f(a)h(t)o(yp)q(e)f(sc)o(heme.)31 b(These)20
b(are)g(the)g(t)o(w)o(o)66 2240 y(op)q(erations)e(whic)o(h)d(will)g(v)m(ary)i
(in)f(implem)o(en)n(tation)e(b)q(et)o(w)o(een)h(the)h(in)o(terpreter)f(and)i
(the)f(compiler.)66 2407 y Ft(7.5)83 b(Implemen)n(tation)27
b(of)h(the)f(P)n(erv)-5 b(asiv)n(es)66 2516 y Fw(Let)23 b(us)g(refer)f(to)h
(the)f(iden)o(ti\014ers)f(that)i(are)g(de\014ned)f(in)h(the)f(initial)f
(basis)i(of)g(Standard)h(ML)f(as)66 2576 y Fs(p)q(erv)m(asiv)o(es)p
Fw(.)42 b(The)23 b(p)q(erv)m(asiv)o(es)g(are)g(listed)f(in)h(App)q(endices)f
(C)i(and)f(D)h(of)f(the)g(De\014nition;)j(they)66 2636 y(include)19
b(t)o(yp)q(e)h(constructors)h(\(e.g.)f Fu(int)n Fw(\),)h(v)m(alue)f
(constructors)h(\(e.g.)f Fu(true)n Fw(\))g(and)h(v)m(alue)f(v)m(ariables)66
2697 y(\(e.g.)c Fu(map)o Fw(\).)21 b(They)16 b(also)h(include)e(the)h(basic)g
(v)m(alues,)g(suc)o(h)g(as)h Fu(+)f Fw(and)g Fu(open)p 1476
2697 16 2 v 17 w(in)p Fw(.)140 2757 y(Some)e(of)j(the)e(p)q(erv)m(asiv)o(es)h
(are)g(expressible)e(in)i(terms)e(of)i(ML)h(declarations)f(that)g(use)g(a)g
(smaller)66 2817 y(set)d(of)g(p)q(erv)m(asiv)o(es;)g(this)g(applies)f(to)h
Fu(map)o Fw(,)g(for)g(example.)18 b(Suc)o(h)13 b(p)q(erv)m(asiv)o(es)f(are)h
(de\014ned)f(in)h(a)g Fs(prelude)p eop
%%Page: 97 16
bop 66 50 a Fs(CHAPTER)17 b(7.)37 b(MISCELLANEOUS)1076 b Fw(97)66
195 y(a)20 b(static)g(basis)g(and)g(a)g(dynamic)e(basis)i(\(as)g(describ)q
(ed)f(in)g(the)g(De\014nition\),)h(as)g(w)o(ell)e(as)i(the)g(in\014x)66
255 y(basis.)30 b Fu(TopLevelRe)o(por)o(t.)o(rep)o(ort)15 b
Fw(tak)o(es)k(a)g(basis)g(as)h(argumen)o(t,)e(along)h(with)g(a)g(\015ag)h
(indicating)66 315 y(whether)f(dynamic)e(v)m(alues)i(should)h(b)q(e)f(prin)o
(ted)f(as)h(w)o(ell:)26 b(if)18 b(the)h(Kit)f(is)h(b)q(eing)g(run)g(purely)f
(as)i(an)66 376 y(elab)q(orator,)c(then)e(there)f(will)g(b)q(e)h(no)h(v)m
(alues)f(to)g(prin)o(t.)20 b(The)14 b(result)g(of)g(prin)o(ting)g(a)g
(top-lev)o(el)f(basis)h(is)66 436 y(a)i Fk(r)n(ep)n(ort)e Fw(\(as)i(describ)q
(ed)e(in)h(Section)g(7.6\),)g(whic)o(h)g(is)g(a)g(represen)o(tation)g(of)g
(the)g(lines)g(to)g(b)q(e)h(prin)o(ted.)66 496 y(The)f(rep)q(ort)g(is)g
(generated)f(b)o(y)h(a)g(tra)o(v)o(ersal)f(of)h(the)f(in\014x)g(basis)i(\(in)
e(order)h(to)g(rep)q(ort)g(in\014x)f(bindings\))66 556 y(on)o(to)j(whic)o(h)f
(is)g(app)q(ended)h(a)f(tra)o(v)o(ersal)g(of)g(the)g(static)g(and)h(dynamic)e
(bases.)140 616 y(In)21 b(theory)h(\(and)g(assuming)g(that)g(b)q(oth)h(bases)
f(are)g(presen)o(t\),)g(the)g(prin)o(tout)f(is)h(driv)o(en)e(b)o(y)i(a)66
677 y(tra)o(v)o(ersal)14 b(of)h(the)g(static)f(basis)h(and)g(the)g(dynamic)e
(basis)i(in)f(parallel.)20 b(The)15 b(tra)o(v)o(ersal)e(is)i(a)g(recursiv)o
(e)66 737 y(one)h(o)o(v)o(er)f(b)q(oth)h(data)h(structures,)e(although)h(the)
f(dynamic)f(basis)i(is)g(ignored)f(for)h(the)f(upp)q(er)h(lev)o(els)66
797 y(of)f(the)f(language)i(\(since)d(the)i(Mo)q(dules)f(ob)s(jects)g(are)h
(not)g(prin)o(ted)e(as)i(dynamic)e(v)m(alues)h(at)h(all\).)20
b(The)66 857 y(dynamic)g(basis)h(is)g(used)g(when)g(the)f(data)i(v)m(alues)f
(of)g(the)g(core)g(are)g(reac)o(hed:)29 b(most)21 b(of)g(the)f(core)66
917 y(v)m(alues)d(need)e(to)i(b)q(e)f(prin)o(ted)g(as)h(a)f(\(dynamic\))f(v)m
(alue)h(with)g(a)g(\(static\))g(t)o(yp)q(e.)140 978 y(In)c(practice,)g(this)h
(parallel)f(tra)o(v)o(ersal)g(is)h(decoupled)f(and)i(the)e(prin)o(tout)h(is)g
(driv)o(en)e(b)o(y)i(a)g(tra)o(v)o(ersal)66 1038 y(of)h(the)g(static)f
(basis,)h(with)g(the)f(dynamic)f(basis)i(b)q(eing)g(tra)o(v)o(ersed)e(at)i
(the)f(lea)o(v)o(es)g(of)g(the)h(static)f(basis.)66 1098 y(This)21
b(is)f(a)h(simpler)d(solution)j(b)q(ecause)f(dynamic)f(basis)i(tra)o(v)o
(ersal)e(is)h(su\016cien)o(tly)f(simple)f(that)j(it)66 1158
y(can)e(b)q(e)g(detac)o(hed)f(from)g(static)h(basis)g(tra)o(v)o(ersal)f
(\(whic)o(h)g(is)g(quite)g(complex\),)f(and)i(also)h(mak)o(es)d(it)66
1218 y(easy)i(to)f(rep)q(ort)g(a)h(top-lev)o(el)e(basis)h(when)g(no)h(ev)m
(aluation)f(has)h(b)q(een)f(done,)g(or)h(where)e(there)h(is)g(no)66
1279 y(dynamic)12 b(en)o(tit)o(y)h(corresp)q(onding)i(to)f(the)f(static)h
(one)g(\(for)g(example,)e(in)h(the)h(case)g(of)g(signatures)h(and)66
1339 y(functor)i(b)q(o)q(dies\).)140 1399 y(The)23 b(rep)q(orting)h
(functions)g(\(in)f Fu(TopLevelRe)o(por)o(t)m Fw(\))g(are)h(m)o(utually)d
(recursiv)o(e,)i(and)i(tak)o(e)e(as)66 1459 y(argumen)o(t)c(a)g(function)h
(called)e Fu(render)f Fw(for)j(p)q(erforming)e(a)i(dynamic)d(basis)j(tra)o(v)
o(ersal)f(at)g(the)g(ap-)66 1519 y(propriate)e(lea)o(v)o(es)d(of)j(the)f
(static)g(basis.)21 b(F)l(or)c(example,)c(the)j(t)o(yp)q(e)g(of)g
Fu(reportStr)d Fw(is)j(\(if)g(w)o(e)f(w)o(ere)h(to)66 1579
y(lab)q(el)g(the)g(argumen)o(ts\):)p eop
%%Page: 96 17
bop 66 50 a Fs(CHAPTER)17 b(7.)37 b(MISCELLANEOUS)1076 b Fw(96)p
66 434 1890 6 v 185 488 a Fu(functor)23 b(KitCompil)o(er\()o(va)o(l)g
(prelude:)f(string\))261 548 y(:)k(sig)338 609 y(val)f(parse:)e(unit)h(->)h
(unit)338 669 y(val)g(elab:)f(unit)g(->)h(unit)338 729 y(val)g(eval:)f(unit)g
(->)h(unit)338 849 y(val)g(parseFile:)d(string)h(->)i(unit)338
910 y(val)g(elabFile:)d(string)i(->)h(unit)338 970 y(val)g(evalFile:)d
(string)i(->)h(unit)261 1030 y(end)g(=)185 1090 y(struct)261
1150 y Fw(.)8 b(.)g(.)185 1211 y Fu(end)610 1366 y Fw(Figure)16
b(7.2:)21 b(The)16 b(functor)h Fu(KitCompil)o(er)p 66 1425
V 66 1914 V 185 1968 a(signature)22 b(INTERPRETE)o(R)g(=)261
2028 y(sig)338 2088 y(datatype)h(Mode)h(=)h(PARSE)p 881 2088
16 2 v 17 w(ONLY)f(|)i(ELABORATE)p 1311 2088 V 15 w(ONLY)e(|)h(EVALUATE)338
2209 y(val)g(interpretS)o(td)o(In:)d(Mode)i(->)h(unit)f(->)h(unit)338
2269 y(val)g(interpretF)o(il)o(e:)d(Mode)j(->)f(string)g(->)h(unit)338
2329 y(val)g(interpretS)o(tr)o(ing)o(:)e(Mode)h(->)h(string)e(->)i(unit)261
2389 y(end)589 2545 y Fw(Figure)15 b(7.3:)22 b(The)16 b(signature)h
Fu(INTERPRETE)o(R)p 66 2602 1890 6 v eop
%%Page: 95 18
bop 66 50 a Fs(CHAPTER)17 b(7.)37 b(MISCELLANEOUS)1076 b Fw(95)140
195 y(There)14 b(are)g(also)i(other)e(linking)g(functors)h(whic)o(h)f(do)h
(not)g(form)e(a)i(part)g(of)g(the)g(main)e(spine.)20 b(The)66
255 y(lam)o(b)q(da)15 b(compiler)e(con)o(tains)j(a)f(small)f(n)o(um)o(b)q(er)
g(of)i(linking)e(functors)i(\(one)g(for)f(the)g(top)h(lev)o(el)e(of)h(the)66
315 y(compiler)g(and)j(one)f(for)g(the)g(matc)o(h)f(compiler\),)e(and)k
Fu(Evaluatio)o(n)c Fw(is)j(also)h(a)f(link)m(age)g(stage.)24
b(This)66 376 y(is)d(b)q(ecause)h(it)e(is)h(at)h(the)f(lev)o(el)e(of)i
Fu(Evaluation)d Fw(that)j(the)g(Compiler)e(and)j(In)o(terpreter)e(v)o
(ersions)66 436 y(of)g(the)e(Kit)g(div)o(erge.)28 b(There)18
b(are)h(t)o(w)o(o)g Fu(Evaluation)c Fw(functors,)20 b(with)e(the)h(same)e
(result)i(signature)66 496 y(and)f(the)f(same)f(set)i(of)f(argumen)o(ts)f
(\(although)j(neither)d(functor)h(is)g(required)f(to)i(use)f(all)g(of)g
(them\).)66 556 y(Eac)o(h)k Fu(Evaluation)c Fw(functor)k(is)g(a)g(link)m(age)
f(functor)h(for)g(its)g(resp)q(ectiv)o(e)e(subsystem.)34 b(The)21
b(Com-)66 616 y(piler's)16 b Fu(Evaluation)e Fw(functor)j(is)g(describ)q(ed)g
(in)g(the)g(compiler)e(Chapter)i(6.)25 b(w)o(e)17 b(consider)f(only)h(the)66
677 y(In)o(terpreter)e(v)o(ersion)h(here.)140 737 y(In)d(fact,)h(the)g(in)o
(ternal)f(structure)g(of)i Fu(Evaluatio)o(n)c Fw(is)j(simple.)k(It)c(dra)o
(ws)g(together)g(the)g(elemen)o(ts)66 797 y(needed)21 b(for)g(Mo)q(dules-lev)
o(el)e(ev)m(aluation)i(\(basic)g(and)g(sp)q(ecial)g(v)m(alues,)h(dynamic)d
(ob)s(jects)h(for)h(the)66 857 y(Core)15 b(and)g(Mo)q(dules,)f(ev)m(aluators)
h(for)f(Core)h(and)g(Mo)q(dules,)f(and)h(top-lev)o(el)d(prin)o(ting\).)20
b(It)14 b(exp)q(orts)h(a)66 917 y(structure)g(for)g(the)f(dynamic)f(basis)i
(\(signature)g Fu(DYNAMIC)p 1156 917 16 2 v 16 w(BASIS)n Fw(\),)g(a)g
(top-lev)o(el)e(declaration)h(ev)m(alu-)66 978 y(ator)g(\()p
Fu(EVALTOPDE)o(C)m Fw(\))f(and)g(top-lev)o(el)e(v)m(alue)h(prin)o(ting)g(\()p
Fu(VAL)p 1162 978 V 18 w(PRINT)n Fw(\)|these)g(are)h(the)f(three)g(elemen)o
(ts)66 1038 y(whose)21 b(implem)o(en)o(tation)d(di\013ers)i(b)q(et)o(w)o(een)
f(the)h(Compiler)f(and)h(the)g(In)o(terpreter.)1644 1020 y
Fm(1)1696 1038 y Fw(W)l(e)g(describ)q(e)66 1098 y Fu(ValPrint)14
b Fw(in)i(Section)f(7.4.)140 1158 y(The)22 b(signature)h Fu(INTERPRETE)o(R)d
Fw(is)i(sho)o(wn)h(in)f(Figure)g(7.3.)41 b(The)22 b(functionalit)o(y)g(pro)o
(vided)f(is)66 1218 y(roughly)i(equiv)m(alen)o(t)e(to)i(the)f(in)o(terface)f
(pro)o(vided)h(b)o(y)g Fu(KitCompil)o(er)m Fw(.)40 b Fu(Interpret)o(er)19
b Fw(p)q(erforms)66 1279 y(its)g(o)o(wn)f(stream)g(handling)h(\(indirectly)l
(,)d(via)i(the)g(op)q(erations)i(pro)o(vided)e(b)o(y)g Fu(Parse)n
Fw(\).)28 b(It)18 b(pro)o(vides)66 1339 y(the)h(p)q(ersisten)o(t)f(top-lev)o
(el)g(basis)h(\(all)f(the)h(lo)o(w)o(er)f(lev)o(els)f(of)i(the)f(system)g
(are)h(\\pure")g(in)f(that)i(they)66 1399 y(tak)o(e)14 b(en)o(vironmen)o(tal)
e(ob)s(jects)i(as)i(argumen)o(ts)d(and)j(return)e(new,)g(incremen)o(tal)e
(ones)j(as)g(results\).)21 b(It)66 1459 y(initiates)16 b(parsing,)h(elab)q
(oration)g(and)g(execution,)e(and)i(detects)f(and)h(rep)q(orts)g(errors)f(in)
g(an)o(y)h(of)f(the)66 1519 y(three)g(phases.)66 1695 y Ft(7.4)83
b(T)-7 b(op-lev)n(el)28 b(Prin)n(ting)66 1805 y Fw(An)o(y)17
b(SML)i(system)d(needs)i(a)g(w)o(a)o(y)g(of)g(rep)q(orting)g(top-lev)o(el)f
(bindings)h(to)g(the)g(user.)26 b(This)18 b(in)o(v)o(olv)o(es)66
1865 y(t)o(w)o(o)13 b(pro)q(cesses:)20 b(the)12 b(prin)o(ting)g(of)h(dynamic)
e(v)m(alues,)i(and)h(the)e(prin)o(ting)g(of)h(static)f(en)o(vironmen)o(ts)f
(and)66 1925 y(t)o(yp)q(es.)21 b(Some)13 b(of)i(the)f(en)o(tities)f(to)h(b)q
(e)h(presen)o(ted)e(to)i(the)f(user)h(are,)f(for)h(our)f(purp)q(oses,)i
(purely)d(static)66 1985 y(in)21 b(nature.)34 b(F)l(or)20 b(example,)f
(signatures)i(and)g(functors)g(are)f(rep)q(orted)h(merely)d(as)j(static)f(ob)
s(jects;)66 2046 y(their)d(dynamic)f(\(run)o(time\))f(represen)o(tation)h(is)
i(not)g(used.)24 b(Other)17 b(en)o(tities)f(con)o(tain)h(b)q(oth)i(a)e
(static)66 2106 y(and)f(a)f(dynamic)d(comp)q(onen)o(t:)20 b(most)14
b(core-lev)o(el)e(v)m(alue)i(bindings,)h(for)g(example,)d(are)j(rep)q(orted)g
(as)g(a)66 2166 y(com)o(bination)h(of)h(v)m(alue)g(and)g(t)o(yp)q(e.)23
b(\(Those)17 b(whic)o(h)f(are)h(not)h(include)d(functions,)i(and)g(v)m(alues)
g(with)66 2226 y(abstract)g(t)o(yp)q(es.\))140 2286 y(The)24
b(prin)o(ting)f(of)i(v)m(alues)f(is)g(not)h(simply)d(a)j(case)f(of)g(presen)o
(ting)g(the)g(static)g(and)h(dynamic)66 2347 y(comp)q(onen)o(ts)e(in)g(a)h
(neat)g(and)g(tidy)e(w)o(a)o(y:)36 b(for)23 b(example,)g(the)g(dynamic)f
(comp)q(onen)o(t)g(migh)o(t)g(b)q(e)66 2407 y(irrelev)m(an)o(t,)15
b(and)j(the)e(static)h(comp)q(onen)o(t)e(migh)o(t)g(need)i(to)g(b)q(e)g
(reorganised)g(in)f(order)h(to)g(prin)o(t)f(it)h(in)66 2467
y(the)g(w)o(a)o(y)f(that)g(the)g(users)h(w)o(an)o(ts)g(to)f(see)g(it,)g(whic)
o(h)f(usually)h(corresp)q(onds)i(to)f(the)f(source)g(language)66
2527 y(syn)o(tax)g(\(an)h(ob)o(vious)g(example)d(is)i(functor)g(bindings\).)
140 2587 y(V)l(alue)11 b(prin)o(ting)h(is)g(driv)o(en)f(at)i(the)f(top-most)g
(lev)o(el)e(b)o(y)i(the)g(tra)o(v)o(ersal)f(of)i(a)f(basis,)i(whic)o(h)d(con)
o(tains)p 66 2631 756 2 v 123 2662 a Fi(1)141 2677 y Fh(In)17
b(fact,)g Ff(ValPrint)e Fh(should)h(b)q(e)h(common)d(b)q(et)o(w)o(een)k
(them,)e(and)h(use)g(a)g(lo)o(w)o(er-lev)o(el)e(run)o(time)h(v)n(alue)g(tra)o
(v)o(ersal)66 2727 y(mo)q(dule)e(with)g(a)h(common)d(in)o(terface)k(b)q(et)o
(w)o(een)g(the)g(Compiler)d(and)h(the)i(In)o(terpreter.)23
b(A)o(t)15 b(presen)o(t,)i Ff(ValPrint)c Fh(just)66 2776 y(insp)q(ects)j(the)
e(run)o(time)f(represen)o(tation)j(directly)m(,)d(with)g(no)h(reference)i(to)
e(the)h(static)f(t)o(yp)q(es)h(of)e(v)n(alues.)p eop
%%Page: 94 19
bop 66 50 a Fs(CHAPTER)17 b(7.)37 b(MISCELLANEOUS)1076 b Fw(94)66
195 y Fu(evalSigbind)21 b Fw(\(signature)16 b(bindings\))h(for)f(rule)g(175;)
66 297 y Fu(evalSpec)22 b Fw(\(sp)q(eci\014cations\))16 b(for)h(rules)e
(176{183;)66 399 y Fu(evalStrdesc)21 b Fw(\(structure)16 b(descriptions\))f
(for)i(rule)e(186;)66 500 y Fu(evalFunbind)21 b Fw(\(functor)16
b(bindings\))g(for)h(rule)e(187;)66 602 y Fu(evalFundec)21
b Fw(\(functor)16 b(declarations\))h(for)f(rules)g(188{190.)66
662 y(Rules)g(184)g(\(v)m(alue)g(descriptions\))f(and)h(185)h(\(exception)d
(descriptions\))h(are)h(essen)o(tially)e(dealt)h(with)66 722
y(\\in)c(line")f(in)h Fu(evalSpec)m Fw(,)g(using)h(the)e(op)q(erations)i
Fu(Vars)p 1075 722 16 2 v 17 w(in)p 1144 722 V 18 w(Int)e Fw(and)h
Fu(Excons)p 1495 722 V 16 w(in)p 1563 722 V 18 w(Int)f Fw(\(from)f
Fu(ModuleDynOb)o(jec)o(t)m Fw(\))66 782 y(resp)q(ectiv)o(ely)l(.)22
b(Rules)16 b(191{193)k(are)d(rolled)f(in)o(to)h(the)g(main)f(function)g
Fu(eval)o Fw(.)24 b(The)17 b(In)o(ter)f(and)h Fp(#)g Fw(op-)66
843 y(erations)g(are)f(implem)o(en)o(te)o(d)e(in)i Fu(ModuleDyn)o(Obj)o(ect)l
Fw(.)66 1009 y Ft(7.3)83 b(Linking)66 1119 y Fw(This)19 b(section)f(describ)q
(es)g(the)h(v)o(ery)e(top)i(lev)o(el)d(of)j(the)f(system,)g(and)h(the)f(w)o
(a)o(y)g(that)h(the)f(execution)66 1179 y(and)h(ev)m(aluation)g(lev)o(els)d
(are)i(link)o(ed)f(together.)27 b(These)18 b(lev)o(els)e(are)i(ab)q(o)o(v)o
(e)g(the)g(Mo)q(dules)h(ev)m(aluator)66 1239 y(describ)q(ed)e(in)g(Section)g
(7.2,)g(and)h(are)g(in)f(fact)g(common)e(to)j(b)q(oth)g(the)f(\\pure")h(in)o
(terpreted)e(system)66 1299 y(and)i(the)f(lam)o(b)q(da)g(compiler.)22
b(Chapter)17 b(6)h(giv)o(es)f(more)f(insigh)o(t)h(in)o(to)g(the)g(w)o(a)o(y)g
(that)g(the)g(execution)66 1359 y(lev)o(els)d(for)h(the)h(compiler)c(and)k
(in)o(terpreter)e(are)h(abstracted)h(so)g(as)g(to)g(app)q(ear)g(iden)o(tical)
e(to)h(the)g(rest)66 1420 y(of)22 b(the)f(system;)h(w)o(e)f(will)f(only)h
(discuss)h(this)f(abstraction)h(where)f(it)g(relates)g(to)h(the)f(rest)g(of)g
(the)66 1480 y(system.)140 1540 y(The)c(top-lev)o(el)f(of)i(the)g(system)e
(is)i(a)g(functor)f(called)g Fu(KitCompile)o(r)m Fw(.)25 b(It)18
b(tak)o(es)f(as)h(argumen)o(t)f(a)66 1600 y(string)k(whic)o(h)e(is)h(the)g
(name)f(of)i(a)f(\014le)g(to)h(read)f(as)h(the)f Fs(prelude)f
Fw(\(Section)h(7.5\);)i(it)d(has)i(no)g(other)66 1660 y(argumen)o(ts.)28
b(It)18 b(returns)h(a)g(structure)f(with)h(the)f(signature)h(giv)o(en)f(in)g
(Figure)g(7.2.)29 b Fu(KitCompiler)66 1720 y Fw(is)20 b(also)h(resp)q
(onsible)f(for)g(\\t)o(ying)g(the)g(knot")g(in)g(order)g(to)g(implem)o(en)o
(t)d(the)j Fu(use)f Fw(function,)h(in)f(the)66 1781 y(manner)d(describ)q(ed)f
(in)h(Section)g(7.7.)140 1841 y(The)g(main)f(constituen)o(ts)i(of)f
Fu(KitCompiler)d Fw(are)k Fu(Linking)m Fw(,)f(whic)o(h)g(brings)h(together)g
(the)f(lo)o(w)o(er)66 1901 y(lev)o(els)9 b(of)i(the)g(Kit)f(together)h(with)g
(the)g(parsing,)h(elab)q(oration)f(and)h(ev)m(aluation)f(lev)o(els,)e(and)j
Fu(Interpret)o(er)m Fw(,)66 1961 y(whic)o(h)18 b(implem)o(en)o(ts)d(the)j
(top-lev)o(el)f(lo)q(op)j(and)f(some)e(rudimen)o(tary)f(\014le)i
(redirection.)26 b(In)18 b(its)h(turn,)66 2021 y Fu(Linking)f
Fw(calls)h(on)i(the)e(highest)h(lev)o(el)e(functors)i(for)g(parsing)h(\()p
Fu(TopdecPars)o(ing)l Fw(\),)g(the)e(static)h(se-)66 2082 y(man)o(tic)15
b(ob)s(jects)h(of)g(the)g(language)i(\()p Fu(StaticObj)o(ect)o(s)m
Fw(\),)e(the)g(elab)q(orator)h(\()p Fu(Elaboration)l Fw(\))g(and)f(the)66
2142 y(ev)m(aluation)h(stage)g(\()p Fu(Execution)l Fw(\).)140
2202 y(A)o(t)h(this)h(stage)g(w)o(e)g(should)h(explain)e(that)h
Fu(Elaboratio)o(n)d Fw(and)k Fu(Evaluatio)o(n)c Fw(are)j(regarded)h(as)66
2262 y Fk(linking)k(functors)p Fw(,)d(and)g(form)e(part)i(of)g(the)f
(\\spine")h(whic)o(h)f(ties)f(together)i(the)f(en)o(tire)f(Kit.)33
b(The)66 2322 y(spine)26 b(functors)g(liv)o(e)e(in)h(the)h(\014le)f
Fu(KitCompile)o(r.s)o(ml)m Fw(,)i(and)g(build)e(v)m(arious)h(lev)o(els)e(of)i
(the)g(Kit)66 2383 y(\()p Fu(Tools)o Fw(,)c Fu(Basics)m Fw(,)h
Fu(TopdecPar)o(sin)o(g)m Fw(,)f Fu(StaticObje)o(cts)l Fw(,)g
Fu(Elaboration)l Fw(,)g Fu(Execution)m Fw(,)g Fu(Linking)n
Fw(,)66 2443 y Fu(KitCompiler)l Fw(\).)f(The)16 b(st)o(yle)f(of)g(these)h
(functors)g(di\013ers)f(from)g(those)h(whic)o(h)f(comprise)f(the)h(b)q(o)q
(dy)i(of)66 2503 y(the)c(Kit)f(prop)q(er:)20 b(the)13 b(linking)f(functors)h
(refer)f(to)h(the)g(functors)g(of)g(the)g(Kit)f(freely)l(,)f(and)j(eac)o(h)e
(linking)66 2563 y(functor)19 b(refers)e(to)i(the)f(linking)f(functor)h(in)g
(the)f(lev)o(el)f(b)q(elo)o(w)i(it.)27 b(Eac)o(h)18 b(linking)f(functor)h
(con)o(tains)66 2623 y(substructures)k(obtained)g(b)o(y)e(applying)i(the)f
(linking)f(functors)i(b)q(elo)o(w)f(it;)i(at)f(eac)o(h)e(lev)o(el,)g(access)
66 2684 y(migh)o(t)f(b)q(e)i(required)f(to)h(sev)o(eral)e(stages)j(of)f(the)g
(link)m(age,)g(and)g(the)f(functors)i(cannot)f(b)q(e)g(applied)66
2744 y(eac)o(h)h(time)d(without)k(the)e(resulting)h(t)o(yp)q(es)f(and)i
(structures)e(violating)h(the)f(sharing)i(constrain)o(ts)66
2804 y(required)15 b(b)o(y)h(the)g(rest)g(of)h(the)f(Kit.)p
eop
%%Page: 93 20
bop 66 50 a Fs(CHAPTER)17 b(7.)37 b(MISCELLANEOUS)1076 b Fw(93)p
66 213 1890 6 v 185 267 a Fu(signature)22 b(EVALTOPDEC)g(=)261
328 y(sig)338 388 y(type)i(topdec)338 448 y(type)g(DynamicBasi)o(s)338
508 y(type)g(Pack)338 629 y(val)h(RE)p 496 629 16 2 v 18 w(RAISE:)e(Pack)h
(->)h(unit)338 749 y(exception)e(UNCAUGHT)f(of)j(Pack)338 809
y(val)g(pr)p 496 809 V 18 w(Pack:)e(Pack)i(->)f(string)338
930 y(val)h(eval:)f(DynamicBa)o(sis)e(*)j(topdec)f(->)g(DynamicBasi)o(s)338
990 y(val)h(FAIL)p 548 990 V 17 w(USE:)f(unit)g(->)h(unit)338
1110 y(type)f(StringTree)338 1170 y(val)h(layoutDyna)o(mi)o(cBa)o(sis)o(:)e
(DynamicBa)o(si)o(s)g(->)i(StringTre)o(e)261 1230 y(end)602
1386 y Fw(Figure)15 b(7.1:)22 b(The)16 b(signature)h Fu(EVALTOPDE)o(C)p
66 1443 1890 6 v 140 1568 a Fw(The)e(other)g(functions)g(in)g
Fu(EVALTOPDE)o(C)d Fw(\()p Fu(RE)p 975 1568 16 2 v 18 w(RAISE)h
Fw(and)j Fu(FAIL)p 1334 1568 V 17 w(USE)n Fw(\))f(relate)g(to)g(the)g(implem)
o(en-)66 1628 y(tation)i(of)g(the)f(built-in)f(function)h Fu(use)o
Fw(,)g(and)h(are)f(do)q(cumen)o(ted)f(in)g(Section)h(7.7.)140
1688 y(The)10 b Fu(EvalTopdec)e Fw(functor)j(tak)o(es)f(as)h(argumen)o(ts)f
(the)h(abstract)h(syn)o(tax)e(\(signature)h Fu(TOPDEC)p 1869
1688 V 17 w(GRAMMAR)m Fw(\),)66 1748 y(the)k(dynamic)f(ob)s(jects)g(of)i(the)
f(Mo)q(dules)g(\(signature)g Fu(MODULE)p 1230 1748 V 16 w(DYNOBJECT)m
Fw(\),)g(the)g(Core)g(lev)o(el)e(ev)m(alu-)66 1809 y(ation)18
b(mac)o(hinery)e(\()p Fu(EVALDEC)f Fw(and)j Fu(CORE)p 849 1809
V 17 w(DYNOBJECT)l Fw(\),)g(and)g(other)g(utilit)o(y)e(structures.)25
b(The)17 b(top-)66 1869 y(lev)o(el)h(grammar)h(is)h(resolv)o(ed)f(suc)o(h)h
(that)g(iden)o(ti\014er)f(classes)h(are)g(kno)o(wn;)i(this)d(m)o(ust)g(b)q(e)
h(the)g(case)66 1929 y(b)q(ecause)f Fu(EvalTopde)o(c)c Fw(requires)i(that)h
(the)g(declaration)f(t)o(yp)q(e)h(\()p Fu(dec)o Fw(\))g(of)g
Fu(TOPDEC)p 1615 1929 V 16 w(GRAMMAR)e Fw(shares)66 1989 y(with)h(that)f(of)h
Fu(EvalDec)m Fw(,)f(whic)o(h)g(requires)f(a)h(resolv)o(ed)g(grammar.)140
2049 y(The)d(implem)o(e)o(n)o(tation)d(of)k(Mo)q(dules)f(execution)f
(\(functor)h Fu(EvalTopde)o(c)m Fw(\))g(follo)o(ws)g(fairly)f(directly)66
2109 y(from)23 b(the)g(rules)g(in)f(the)i(De\014nition.)42
b(The)23 b(topmost)g(function)g Fu(eval)f Fw(corresp)q(onds)i(directly)e(to)
66 2170 y(the)d(\014nal)g(three)f(Mo)q(dules)h(ev)m(aluation)g(rules)g(of)g
(the)f(De\014nition)h(\(191)h(to)f(193\).)30 b(The)19 b(lo)o(w)o(er)f(lev)o
(el)66 2230 y(functions)k(are)h(m)o(utually)c(recursiv)o(e,)i(and)i(corresp)q
(ond)g(to)f(the)g(rest)g(of)g(the)g(seman)o(tic)e(rules,)j(as)66
2290 y(follo)o(ws:)66 2350 y Fu(evalStrexp)e Fw(\(structure)16
b(expressions\))g(for)h(rules)e(160{163;)66 2452 y Fu(evalStrdec)21
b Fw(\(structure)16 b(declarations\))g(for)h(rules)f(164{168;)66
2554 y Fu(evalStrbind)21 b Fw(\(structure)16 b(bindings\))g(for)h(rule)e
(169;)66 2655 y Fu(evalSigexp)21 b Fw(\(signature)c(expressions\))f(for)g
(rules)g(170)i(and)e(171;)66 2757 y Fu(evalSigdec)21 b Fw(\(signature)c
(declarations\))f(for)g(rules)g(172{174;)p eop
%%Page: 92 21
bop 66 527 a Fy(Chapter)40 b(7)66 735 y(Miscellaneo)q(us)66
992 y Ft(7.1)83 b(In)n(tro)r(duction)66 1102 y Fw(This)19 b(do)q(cumen)o(t)f
(co)o(v)o(ers)g(a)h(n)o(um)o(b)q(er)e(of)i(assorted)h(design)f(topics)g(in)o
(v)o(olving)e(the)i(ML)g(Kit.)28 b(These)66 1162 y(issues)22
b(are)g(su\016cien)o(tly)e(small)g(that)i(they)f(do)h(not)g(merit)e(rep)q
(orts)i(of)g(their)f(o)o(wn,)i(and)f(y)o(et)f(it)g(is)66 1222
y(imp)q(ortan)o(t)c(that)i(they)e(b)q(e)h(co)o(v)o(ered)f(in)g(order)i(to)f
(gain)g(a)h(more)d(complete)g(understanding)j(of)f(ho)o(w)66
1282 y(the)e(Kit)g(op)q(erates.)22 b(The)16 b(sections)g(are)h(as)g(follo)o
(ws:)66 1342 y Fx(Section)h(7.2)24 b Fw(co)o(v)o(ers)18 b(the)h(ev)m
(aluation)h(of)f(the)g(Mo)q(dules)g(language)h(and)g(the)f(implem)o(en)n
(tation)e(of)188 1403 y(the)f(asso)q(ciated)i(dynamic)c(en)o(vironmen)o(ts;)
66 1500 y Fx(Section)k(7.3)24 b Fw(describ)q(es)16 b(some)f(of)i(the)f
(higher)g(lev)o(els)f(of)h(the)g(in)o(terpreter,)f(and)i(the)f(w)o(a)o(y)g
(that)g(the)188 1560 y(execution)f(and)i(ev)m(aluation)g(heirarc)o(h)o(y)d
(is)i(structured;)66 1657 y Fx(Section)i(7.4)24 b Fw(describ)q(es)16
b(the)g(mec)o(hanism)d(used)j(for)h(top-lev)o(el)e(prin)o(ting;)66
1754 y Fx(Section)j(7.5)24 b Fw(details)12 b(the)g(implem)o(en)n(tation)e(of)
j(the)f(p)q(erv)m(asiv)o(e)f(functions)h(of)h(the)f(Kit,)g(corresp)q(ond-)188
1814 y(ing)17 b(to)f(APPL)l(Y)g(in)g(the)g(De\014nition;)66
1911 y Fx(Section)i(7.6)24 b Fw(describ)q(es)16 b(the)g(detection)f(and)i
(rep)q(orting)g(of)g(elab)q(oration)g(errors;)66 2008 y Fx(Section)h(7.7)24
b Fw(describ)q(es)16 b(\014le)g(nesting)h(and)g(inclusion,)f(and)h(the)f
(seman)o(tics)f(and)i(implem)o(en)o(tation)188 2068 y(of)g(the)f
Fu(use)f Fw(function;)66 2232 y Ft(7.2)83 b(Ev)-5 b(aluation)28
b(of)g(the)f(Mo)r(dules)66 2341 y Fu(EvalTopdec)18 b Fw(is)k(the)f(ev)m
(aluator)h(for)g(the)f(Mo)q(dules)g(language.)38 b(Its)22 b(signature)g(\()p
Fu(EVALTOPDE)o(C)m Fw(\))f(is)66 2402 y(sho)o(wn)15 b(in)f(Figure)g(7.1.)21
b(This)14 b(signature)h(is)f(common)e(to)j(b)q(oth)g(the)f(In)o(terpreter)f
(and)i(the)f(Compiler,)66 2462 y(since)24 b(they)f(share)h(the)g(same)f(in)o
(terface;)j Fu(EvalTopdec)20 b Fw(is)k(sp)q(eci\014c)f(to)i(the)f(In)o
(terpreter.)42 b(\(The)66 2522 y(Compiler)18 b(has)i(its)f(o)o(wn)h(implem)o
(en)n(tation.\))28 b(T)l(op-lev)o(el)18 b(declarations)i(are)f(ev)m(aluated)g
(in)g(a)h(basis,)66 2582 y(yielding)15 b(a)g(new)h(basis)g(just)g(as)g(in)f
(rules)g(191)i(to)f(193)g(of)g(the)f(De\014nition.)21 b(An)o(y)15
b(exception)f(raised)i(in)66 2642 y(the)h(ev)m(aluation)g(whic)o(h)f
(propagates)i(to)f(the)f(top)i(lev)o(el)c(causes)j(the)g(meta-exception)d
Fu(UNCAUGHT)g Fw(to)66 2703 y(b)q(e)g(raised)g(with)g(a)g(pac)o(k)o(et.)20
b(\(The)14 b(exception)f Fu(UNCAUGHT)m Fw(,)h(as)g(w)o(ell)f(as)h(the)g(t)o
(yp)q(e)f Fu(Pack)g Fw(and)h(the)g(other)66 2763 y(exception)20
b(manipulation)f(facilities,)g(are)h(actually)g(propagated)i(from)d
Fu(EvalDec)m Fw(.\))34 b Fu(EVALTOPDEC)66 2823 y Fw(also)17
b(con)o(tains)g(prett)o(y-prin)o(ting)d(functions)j(for)f(prin)o(ting)g
(dynamic)e(bases.)987 2947 y(92)p eop
%%Page: 91 22
bop 66 50 a Fs(CHAPTER)17 b(6.)37 b(COMPILA)l(TION)16 b(FR)o(OM)f(THE)h(CORE)
h(TO)f(LAMBD)o(A)373 b Fw(91)p 66 213 1890 6 v 236 267 a Fu(signature)22
b(RUN)p 573 267 16 2 v 17 w(LAMBDA)i(=)287 328 y(sig)338 388
y(type)g(DEnv)338 448 y(type)g(LambdaExp)338 508 y(type)g(object)338
629 y(exception)f(UNCAUGHT)f(of)j(string)338 749 y(val)g(run:)f(DEnv)g
Fp(!)i Fu(LambdaExp)c Fp(!)j Fu(object)287 809 y(end)593 965
y Fw(Figure)16 b(6.12:)22 b(The)16 b(signature)h Fu(RUN)p 1262
965 V 17 w(LAMBDA)p 66 1022 1890 6 v 66 1146 a Fw(m)o(ust)e(b)q(e)h(a)h
Fu(FN)e Fw(lam)o(b)q(da)h(term\))e(is)i(applied)g(to)g(the)g(pac)o(k)o(et's)f
(v)m(alue.)21 b(If)15 b Fu(PACKET)f Fw(propagates)k(to)e(the)66
1207 y(top)j(lev)o(el)d(it)h(is)h(transformed)g(in)o(to)f(an)i(exception)e
(called)g Fu(UNCAUGHT)e Fw(so)k(that)f(it)g(can)g(b)q(e)g(rep)q(orted)66
1267 y(at)f(top)g(lev)o(el)d(\(or)i(signalled)g(in)o(to)g(an)h(enclosing)f
Fu(use)f Fw(con)o(text\).)140 1327 y(The)i(implem)o(en)o(tati)o(on)e(of)j
(SML)g(references)e(and)i(assignmen)o(t)e(\(i.e.)g(the)h(constructor)h
Fu(ref)f Fw(and)66 1387 y(the)h(function)g Fu(:=)p Fw(\))g(is)g(curren)o(tly)
f(incomplete,)e(and)k(so)g(w)o(e)f(defer)g(a)g(discussion)h(of)f(references)f
(to)i(a)66 1447 y(future)d(pap)q(er.)66 1623 y Ft(6.11)84 b(Conclusions)66
1733 y Fw(W)l(e)18 b(ha)o(v)o(e)e(attempted)h(to)g(sho)o(w)i(that)f(it)f(is)g
(p)q(ossible)h(to)g(build)f(an)h(SML)g(to)g(in)o(termedi)o(ate)d(lam)o(b)q
(da)66 1793 y(language)i(compiler)c(whic)o(h)h(is)i(mo)q(dular)e(and)i(whic)o
(h)f(uses)h(simple)d(data)j(structures.)21 b(Our)15 b(thesis)g(is)66
1853 y(that)g(mo)q(dularit)o(y)e(and)i(abstraction)g(are)g(initially)d(more)i
(imp)q(ortan)o(t)f(than)i(ra)o(w)g(e\016ciency|a)d(w)o(ell-)66
1914 y(structured)g(compiler)e(can)j(b)q(e)f(made)f(more)g(e\016cien)o(t)f(b)
o(y)i(optimising)e(the)i(mo)q(dules)g(and)g(re\014ning)g(the)66
1974 y(in)o(terfaces)k(b)q(et)o(w)o(een)h(them,)e(but)i(an)h(e\016cien)o(t)d
(compiler)g(can)i(rarely)g(b)q(e)g(impro)o(v)o(ed)e(in)i(mo)q(dularit)o(y)66
2034 y(and)g(structure.)140 2094 y(The)i(lam)o(b)q(da)g(language)i(is)f
(small)e(and)i(simple,)e(with)i(nice)f(prop)q(erties)g(\(suc)o(h)h(as)g(the)g
(unique)66 2154 y(iden)o(tit)o(y)h(of)i(lv)m(ars\))g(and)g(y)o(et)f(it)g(is)g
(a)h(full)f(functional)g(language)i(in)e(its)h(o)o(wn)g(righ)o(t.)40
b(Curren)o(tly)l(,)66 2215 y(man)o(y)16 b(pro)s(jects)i(dep)q(end)f(on)h
(making)f(alterations)g(and)i(enhancemen)o(ts)c(to)j(the)f(SML)h(source)g
(text)66 2275 y(or)e(treating)g(it)f(in)g(some)g(sp)q(ecial)g(w)o(a)o(y;)g(w)
o(e)g(hop)q(e)h(that)g(the)f(lam)o(b)q(da)g(language)h(can)g(b)q(e)g(used)f
(in)g(this)66 2335 y(w)o(a)o(y)h(instead,)g(th)o(us)g(a)o(v)o(oiding)g(the)g
(complexit)o(y)d(and)k(am)o(biguities)d(of)j(the)f(SML)g(language)h(itself.)
140 2395 y(The)f(matc)o(h)e(compiler)g(is)i(largely)f(complete)f(but)i(only)g
(con)o(tains)g(trivial)f(optimisation)g(heuris-)66 2455 y(tics.)28
b(W)l(e)19 b(w)o(ould)f(lik)o(e)f(to)i(dev)o(elop)f(it)g(further)g(and)h(mak)
o(e)e(comparisons)h(of)h(heuristics.)28 b(Since)18 b(w)o(e)66
2515 y(are)h(claiming)e(mo)q(dularit)o(y)g(as)i(a)h(virtue)d(of)i(the)g(Kit,)
f(it)h(should)g(b)q(e)g(easy)g(to)g(replace)f(the)g(curren)o(t)66
2576 y(matc)o(h)d(compiler)e(with)i(others;)h(an)g(impleme)o(n)o(tation)d(of)
j(W)l(adler's)f(sc)o(heme)f([9])h(w)o(ould)h(b)q(e)g(a)g(useful)66
2636 y(exercise,)21 b(as)h(w)o(ell)e(as)i(a)f(\\trivial")g(sequen)o(tial)f
(implem)o(en)o(tation)e(\(in)j(the)g(st)o(yle)g(of)g(the)g(seman)o(tic)66
2696 y(rules\),)16 b(in)g(order)g(to)h(compare)e(co)q(de)h(size)g(and)g(p)q
(erformance)f(directly)l(.)p eop
%%Page: 90 23
bop 66 50 a Fs(CHAPTER)17 b(6.)37 b(COMPILA)l(TION)16 b(FR)o(OM)f(THE)h(CORE)
h(TO)f(LAMBD)o(A)373 b Fw(90)66 195 y(whic)o(h)14 b(allo)o(ws)h(the)f
(compiler)e(to)j(deal)f(with)g(declarations)g(rather)h(than)g(expressions.)20
b(A)o(t)14 b(top-lev)o(el,)66 255 y(eac)o(h)i(core)f(declaration)g(is)h
(passed)g(to)g Fu(compileDec)m Fw(,)f(to)h(return)g(a)g(CEn)o(v)f(for)h(the)g
(declaration)f(plus)66 315 y(a)f(function)g Fv(f)19 b Fw(of)14
b(t)o(yp)q(e)f Fu(LambdaExp)22 b Fp(!)k Fu(LambdaExp)l Fw(.)21
b(F)l(rom)12 b(the)i(CEn)o(v)f(is)h(built)f(a)h Fu(VECTOR)d
Fw(lam)o(b)q(da)66 376 y(expression)16 b(con)o(taining)g(all)g(the)g(lv)m
(ars)g(in)g(some)f(canonical)h(order,)g(and)h Fv(f)k Fw(is)16
b(applied)g(to)g(this.)21 b(The)66 436 y(result)15 b(is)g(a)h(lam)o(b)q(da)e
(expression)h(for)g(the)g(top-lev)o(el)f(declaration)h(o)o(v)o(er)f(a)i(scop)
q(e)f(con)o(taining)g(a)h(tuple)66 496 y(of)j(the)g(v)m(ariables)f(b)q(ound)i
(b)o(y)e(the)h(declaration.)28 b(This)18 b(lam)o(b)q(da)g(expression)h(is)f
(then)g(executed,)g(to)66 556 y(return)g(\(if)f(successful\))f(a)i(v)o(ector)
f(of)h(ob)s(ject)f(v)m(alues,)g(one)h(for)f(eac)o(h)g(v)m(ariable.)25
b(The)17 b(v)o(ector)g(is)g(then)66 616 y(decomp)q(osed)d(to)h(form)e(a)i
(DEn)o(v)f(for)g(the)g(declaration.)21 b(Finally)l(,)13 b(the)h(top-lev)o(el)
f(basis)h(is)h(augmen)o(ted)66 677 y(with)i(the)f(CEn)o(v)g(and)h(the)f(DEn)o
(v.)140 737 y(The)h(top-lev)o(el)f(con)o(text)h(of)g(the)h(compiler)d(is)i(a)
h Fu(DynamicBa)o(sis)l Fw(,)g(comprising)e(a)i(CEn)o(v)f(\(whic)o(h)66
797 y(maps)h(all)g(the)g(visible)f(top-lev)o(el)g(iden)o(ti\014ers)g(to)i(lv)
m(ars\))g(and)g(a)g(DEn)o(v)f(\(whic)o(h)g(maps)g(all)g(the)g(lv)m(ars)66
857 y(for)f(the)f(visible)e(top-lev)o(el)h(iden)o(ti\014ers)g(to)h(their)f
(run)o(time)f(represen)o(tations)1477 839 y Fm(6)1497 857 y
Fw(\).)21 b(Eac)o(h)16 b(top-lev)o(el)e(dec-)66 917 y(laration)19
b(is)f(compiled)e(in)i(the)g(top-lev)o(el)f(CEn)o(v)h(and)h(executed)e(in)h
(the)g(top-lev)o(el)e(DEn)o(v,)j(and)f(the)66 978 y(new)f(bindings)f(are)g
(added)h(to)g(the)f(top-lev)o(el)e(if)i(it)g(terminates)e(successfully)l(.)
140 1038 y(The)21 b(in)o(terface)g(to)h(the)f(lam)o(b)q(da)g(in)o(terpreter)f
(is)i(sho)o(wn)g(in)f(Figure)h(6.12,)h(and)f(is)g(fairly)f(self-)66
1098 y(explanatory)l(.)g(In)14 b(practice,)f(the)h(implem)o(en)o(tation)d(is)
j(fairly)g(simple)e(as)j(w)o(ell.)k(Lam)o(b)q(da)14 b(expressions)66
1158 y(are)j(passed)g(to)f(a)h(function)188 1272 y Fu(run:)25
b(DEnv)f Fp(!)h Fu(LambdaExp)d Fp(!)k Fu(object)66 1386 y Fw(whic)o(h)14
b(executes)e(them)g(in)i(a)g(DEn)o(v)g(represen)o(ting)e(the)i(curren)o(t)f
(top-lev)o(el)f(en)o(vironmen)o(t.)18 b(V)l(ariables)66 1447
y(in)11 b(the)g(lam)o(b)q(da)f(expression)h(are)g(retriev)o(ed)e(directly)g
(from)h(the)h(DEn)o(v.)19 b(Constan)o(ts)12 b(ev)m(aluate)f(directly)66
1507 y(to)i(the)f(corresp)q(onding)h(ob)s(jects.)19 b(F)l(unction)12
b(\()p Fu(FN)o Fw(\))g(expressions)g(ev)m(aluate)g(to)g(closures)g
(encapsulating)66 1567 y(the)20 b(curren)o(t)e(en)o(vironmen)o(t.)28
b(The)20 b(treatmen)o(t)d(of)j Fu(FIX)e Fw(is)h(similar)f(to)h(the)h
(treatmen)o(t)d(of)j Fu(val)k(rec)66 1627 y Fw(in)17 b(the)f(De\014nition:)22
b(\014rstly)l(,)15 b(the)i(function)f(expressions)h(whic)o(h)f(form)f(the)i
(righ)o(t)f(hand)h(sides)g(of)f(the)66 1687 y(\014x)i(are)f(ev)m(aluated)h
(in)f(the)g(curren)o(t)g(en)o(vironmen)o(t,)d(yielding)j(closures)g(whic)o(h)
g(do)h(not)g(incorp)q(orate)66 1748 y(the)h(iden)o(ti\014ers)e(in)h(the)g
(recursiv)o(e)f(bindings.)28 b(Then,)18 b(an)h(en)o(vironmen)o(t)d(is)i
(built)g(whic)o(h)g(maps)f(the)66 1808 y(iden)o(ti\014ers)e(to)h(the)f
(closures.)21 b(Finally)l(,)14 b(the)h(Rec)g(op)q(eration)i(is)e(applied)g
(to)h(the)f(en)o(vironmen)o(t|this)66 1868 y(tra)o(v)o(erses)d(the)g
(closures,)h(replacing)f(the)g(recursiv)o(e)f(en)o(vironmen)o(t)e(comp)q
(onen)o(t)j(of)g(eac)o(h)g(closure)g(with)66 1928 y(the)h(en)o(tire)f(en)o
(vironmen)o(t,)e(including)j(the)g Fu(FIX)n Fw(-b)q(ound)i(v)m(ariables.)20
b(This)13 b(pro)o(vides)g(for)g(a)h(single)e(lev)o(el)66 1988
y(of)k(recursion;)f(inde\014nite)f(recursion)h(is)g(pro)o(vided)g(for)g(b)o
(y)g(subsequen)o(t)g(applications)g(of)h(Rec)f(within)66 2049
y(function)f(applications.)21 b(The)13 b(op)q(eration)i(of)f(Rec)g(is)f
(describ)q(ed)h(more)e(fully)h(in)h(the)f(SML)i(De\014nition)66
2109 y(and)i(the)f(SML)h(Commen)o(tary)l(.)140 2169 y(Application)j(\()p
Fu(APP)o Fw(\))i(of)f(one)h(lam)o(b)q(da)f(expression)g(to)h(another)g
(results)g(in)f(the)g(function)h(and)66 2229 y(argumen)o(t)i(b)q(eing)g(ev)m
(aluated,)i(and)f(then)f(the)g(b)q(o)q(dy)h(of)g(the)f(function)g(b)q(eing)h
(executed)d(in)i(the)66 2289 y(closure)16 b(en)o(vironmen)o(t)e(of)i(the)g
(function)g(extended)f(b)o(y)h(an)h(lv)m(ar)f(binding)g(for)g(the)g(argumen)o
(t.)k(Calls)66 2350 y(to)14 b(the)f(p)q(erv)m(asiv)o(e)f(functions)i(\()p
Fu(PRIM)p 746 2350 16 2 v 17 w(APP)o Fw(\))f(result)f(in)h(calls)g(to)g(the)g
Fu(Apply)f Fw(mo)q(dule)g(on)h(the)g(ev)m(aluated)66 2410 y(argumen)o(t.)21
b Fu(VECTOR)14 b Fw(and)i Fu(SELECT)e Fw(pro)q(duce)j(calls)f(to)g
Fu(Objects.vec)o(tor)c Fw(and)17 b Fu(Objects.sel)o(ect)l Fw(.)140
2470 y(Exception)12 b(handling)g(is)h(done)g(in)f(a)h(meta-circular)d
(manner;)i(the)h(lam)o(b)q(da)e(in)o(terpreter)g(con)o(tains)66
2530 y(a)i(single)e(exception)f(called)h Fu(PACKET)n Fw(.)19
b(When)12 b(a)g(lam)o(b)q(da)f(expression)h(raises)f(an)i(exception,)e(the)g
(in)o(ter-)66 2590 y(preter)16 b(raises)g Fu(PACKET)d Fw(with)j(the)g
(exception)e(pac)o(k)o(et.)20 b(Expressions)d(of)f(the)f(form)g
Fu(HANDLE\()p Fv(e)1820 2597 y Fm(1)1837 2590 y Fu(,)25 b Fv(e)1911
2597 y Fm(2)1931 2590 y Fu(\))66 2650 y Fw(cause)20 b Fv(e)223
2657 y Fm(1)262 2650 y Fw(to)g(b)q(e)g(in)o(terpreted)e(in)i(a)g(con)o(text)f
(whic)o(h)g(handles)h Fu(PACKET)n Fw(,)g(in)f(whic)o(h)g(case)h
Fv(e)1775 2657 y Fm(2)1814 2650 y Fw(\(whic)o(h)p 66 2697 756
2 v 123 2728 a Fi(6)141 2743 y Fh(It)12 b(is)f(assumed)g(that)g(when)h(SML)f
(v)n(ariables)g(go)g(out)g(of)g(scop)q(e)h(at)g(top)f(lev)o(el,)g(their)h(lv)
n(ars)e(are)i(mark)o(ed)e(for)h(garbage)66 2792 y(collection.)p
eop
%%Page: 89 24
bop 66 50 a Fs(CHAPTER)17 b(6.)37 b(COMPILA)l(TION)16 b(FR)o(OM)f(THE)h(CORE)
h(TO)f(LAMBD)o(A)373 b Fw(89)p 66 213 1890 6 v 236 267 a Fu(signature)22
b(OPT)p 573 267 16 2 v 17 w(LAMBDA)i(=)287 328 y(sig)338 388
y(type)g(LambdaExp)338 508 y(val)h(optimise:)d(LambdaExp)h
Fp(!)i Fu(LambdaExp)287 568 y(end)593 724 y Fw(Figure)16 b(6.11:)22
b(The)16 b(signature)h Fu(OPT)p 1262 724 V 17 w(LAMBDA)p 66
781 1890 6 v 66 906 a Fw(examined)c(for)i(sp)q(eci\014c)f(lv)m(ars)h(without)
h(consideration)f(of)g(scop)q(e,)g(since)f(there)g(is)h(only)f(one)h(binding)
66 966 y(of)22 b(eac)o(h)e(lv)m(ar.)35 b(And,)22 b(terms)d(can)i(b)q(e)h(mo)o
(v)o(ed)c(from)i(outer)h(to)h(inner)e(con)o(texts)g(without)i(v)m(ariable)66
1026 y(renaming)16 b(b)q(eing)h(necessary)l(,)g(since)f(no)h(inner)g(con)o
(text)f(can)h(rebind)f(a)h(v)m(ariable)g(referred)f(to)h(b)o(y)g(an)66
1086 y(enclosing)f(term.)140 1146 y(The)g(optimisations)f(are)h(as)h(follo)o
(ws:)66 1207 y Fx(UNUSED:)24 b Fw(An)19 b(lv)m(ar)f(binding)h(can)g(b)q(e)g
(remo)o(v)o(ed)d(if)i(the)g(lv)m(ar)h(is)f(not)i(used)e(in)h(the)f(scop)q(e)h
(of)g(the)188 1267 y(binding,)d Fk(and)h Fw(the)f(lv)m(ar)g(is)g(b)q(ound)h
(to)g(a)f(safe)h(term.)66 1369 y Fx(BET)-5 b(A1:)25 b Fw(If)12
b(an)h(lv)m(ar)g(is)g(b)q(ound)h(to)f(a)g(small,)f(safe)h(term,)e(eac)o(h)i
(o)q(ccurrence)f(of)h(the)g(lv)m(ar)g(in)f(the)h(scop)q(e)188
1429 y(is)k(replaced)f(b)o(y)g(the)g(term.)21 b(When)c(the)f(small)f(term)g
(is)i(another)g(v)m(ariable,)f(this)g(impleme)o(n)o(ts)188
1489 y(v)m(ariable)g(renaming.)66 1591 y Fx(BET)-5 b(A2:)25
b Fw(If)17 b(an)h(lv)m(ar)g(is)g(b)q(ound)g(to)h(a)f(safe)g(term)e(\(of)i(an)
o(y)g(size\))f(and)h(the)g(lv)m(ar)f(is)h(only)f(used)h(once)188
1651 y(in)e(the)g(scop)q(e,)h(the)f(binding)g(is)g(remo)o(v)o(ed)d(and)k(the)
f(lv)m(ar)g(replaced)g(with)g(its)g(term.)66 1752 y Fx(HOISTFIX:)25
b Fw(By)10 b(default,)h(\\)p Fu(fun)p Fw(")g(declarations)g(compile)e(in)o
(to)i Fu(FIX)f Fw(lam)o(b)q(da)g(co)q(de)h(constructions.)188
1813 y(This)23 b(optimisation)e(lifts)h(non-recursiv)o(e)f(function)i
(de\014nitions)f(out)h(of)g(the)f Fu(FIX)o Fw(,)h(making)188
1873 y(them)15 b(a)o(v)m(ailable)h(for)g(b)q(eta)h(optimisation.)66
1975 y Fx(FIX0:)25 b Fw(The)18 b(HOISTFIX)f(optimisation)g(migh)o(t)g(lea)o
(v)o(e)f(b)q(ehind)j(empt)o(y)d Fu(FIX)h Fw(constructors;)j(FIX0)188
2035 y(remo)o(v)o(es)14 b(them.)66 2136 y Fx(SWITCH:)25 b Fw(The)c(matc)o(h)e
(compiler)g(can,)j(in)e(some)g(circumstances,)g(pro)q(duce)i(switc)o(hes)e
(with)h(a)188 2197 y(wildcard)14 b(but)h(no)g(discriminan)o(ts.)k(This)14
b(optimisation)g(replaces)g(eac)o(h)g(suc)o(h)g(switc)o(h)g(directly)188
2257 y(with)i(its)g(wildcard.)66 2317 y(Beta)j(reduction)g(is)f(not)i(p)q
(erformed)e(o)o(v)o(er)g(functions.)29 b(If)19 b(it)f(w)o(ere,)h(v)m(ariable)
f(renaming)g(w)o(ould)h(b)q(e)66 2377 y(necessary)g(to)h(a)o(v)o(oid)e
(duplication)h(of)g(binding)g(o)q(ccurrences)g(of)g(lv)m(ars,)h(and)f(steps)g
(w)o(ould)h(ha)o(v)o(e)e(to)66 2437 y(b)q(e)f(tak)o(en)f(to)g(deal)g(with)g
(the)g(Y)g(com)o(binator.)66 2604 y Ft(6.10)84 b(Execution)66
2713 y Fw(Recall)15 b(that)i Fu(compileDec)c Fw(has)k(t)o(yp)q(e)188
2774 y Fu(CEnv)25 b Fp(!)g Fu(dec)f Fp(!)i Fu(\(CEnv)e Fp(\002)h
Fu(\(LambdaExp)d Fp(!)k Fu(LambdaExp)o(\)\))p eop
%%Page: 88 25
bop 66 50 a Fs(CHAPTER)17 b(6.)37 b(COMPILA)l(TION)16 b(FR)o(OM)f(THE)h(CORE)
h(TO)f(LAMBD)o(A)373 b Fw(88)p 66 213 1890 6 v 217 267 a Fu(val)24
b(\(op)h(=\))g(=)g(fn)g(\(x:)f Fv(\013)760 274 y Fm(=)790 267
y Fu(,)h(y:)g Fv(\013)949 274 y Fm(=)979 267 y Fu(\))g(=>)g(prim\(0,)e(\(x,)h
(y\)\):)h(bool)217 328 y(val)f(floor)g(=)h(fn)g(\(x:)g(real,)f(y:)g(real\))g
(=>)h(prim\(1,)e(\(x,)i(y,)g(Floor\)\):)d(int)217 388 y(val)i(real)g(=)i(fn)f
(\(x:)f(int\))g(=>)h(prim\(2,)e(x\):)i(real)217 448 y(val)f(sqrt)g(=)i(fn)f
(\(x:)f(real\))g(=>)h(prim\(3,)e(\(x,)h(Sqrt\)\):)f(real)217
508 y(val)h(sin)h(=)g(fn)g(\(x:)f(real\))g(=>)h(prim\(4,)e(x\):)i(real)217
568 y(val)f(cos)h(=)g(fn)g(\(x:)f(real\))g(=>)h(prim\(5,)e(x\):)i(real)217
629 y Fw(.)8 b(.)g(.)580 784 y(Figure)16 b(6.10:)22 b(P)o(art)16
b(of)h(the)f(initial)f(prelude)p 66 841 V 66 974 a Ft(6.9)83
b(Lam)n(b)r(da)27 b(Co)r(de)g(Optimisation)66 1084 y Fw(It)16
b(migh)o(t)e(seem)h(strange)i(to)f(implem)o(en)o(t)d(an)j(optimiser)e(in)i(a)
g(compiler)e(whic)o(h)h(mak)o(es)g(no)h(pretence)66 1144 y(at)k(b)q(eing)g
(e\016cien)o(t.)30 b(The)19 b(reasons)i(for)f(implem)o(en)n(ting)d(an)j
(optimiser)e(for)i(the)f(lam)o(b)q(da)g(language)66 1204 y(are)j(t)o(w)o
(o-fold.)36 b(Firstly)l(,)21 b(the)g(earlier)f(stages)i(of)g(the)f(compiler)e
(\(the)i(decision)f(tree)h(generator)h(in)66 1264 y(particular\))17
b(generate)f(a)h(lot)f(of)h(garbage,)h(suc)o(h)e(as)h(bindings)g(of)f(v)m
(ariables)h(whic)o(h)f(are)g(nev)o(er)g(used.)66 1324 y(In)k(addition,)h
(simple)c(constructor)k(applications)e(suc)o(h)h(as)h Fu(CON\(3\))c
Fw(are)j(compiled)e(in)o(to)h(function)66 1385 y(applications)13
b(with)g(a)g(closure)g(for)g Fu(CON)o Fw(,)g(so)g(w)o(e)g(should)g(a)g(least)
g(implem)o(en)n(t)d(an)k(optimiser)d(to)i(remo)o(v)o(e)66 1445
y(these.)21 b(It)14 b(is)g(therefore)g(desirable)f(to)i(do)g(simple)d
(optimisations)i(in)g(order)g(to)h(clarify)e(the)h(\014nal)h(co)q(de)66
1505 y(for)j(the)f(purp)q(oses)i(of)e(insp)q(ection.)25 b(Secondly)l(,)16
b(the)h(optimiser)f(w)o(as)h(an)h(afterno)q(on's)h(w)o(ork,)e(and)h(an)66
1565 y(in)o(teresting)d(exercise.)140 1625 y(The)i(in)o(terface)f(to)i(the)g
(optimiser)d(is)j(sho)o(wn)g(in)f(Figure)g(6.11,)i(and)f(its)f(function)g(is)
h(fairly)f(self-)66 1686 y(eviden)o(t.)23 b(In)o(ternally)l(,)16
b(it)g(is)h(impleme)o(n)o(ted)d(in)j(t)o(w)o(o)g(parts.)25
b(There)17 b(is)g(a)h(generic)e(tree-w)o(alk)o(er)g(whic)o(h)66
1746 y(w)o(alks)j(o)o(v)o(er)f(a)h(lam)o(b)q(da)f(expression,)h(applying)g(a)
g Fu(LambdaExp)k Fp(!)i Fu(LambdaExp)16 b Fw(function)i(to)i(eac)o(h)66
1806 y(no)q(de,)j(and)f(in)f(addition)g(there)g(is)g(a)h(set)f(of)h(simple)d
(optimising)g(functions,)k(eac)o(h)d(of)i(whic)o(h)e(has)66
1866 y(t)o(yp)q(e)15 b Fu(LambdaExp)23 b Fp(!)i Fu(LambdaExp)12
b Fw(and)17 b(op)q(erates)f(just)g(on)g(the)f(no)q(de)h(whic)o(h)f(is)g
(passed)i(to)f(it.)k(The)66 1926 y(optimiser)12 b(op)q(erates)i(b)o(y)e
(building)h(the)g(comp)q(osition)g(of)g(all)g(the)g(optimising)f(functions,)h
(and)h(calling)66 1987 y(the)i(tree-w)o(alk)o(er)e(with)i(this)g(comp)q
(osition.)k(The)c(optimiser)e(striv)o(es)h(for)h(a)h(\014xp)q(oin)o(t)e(at)i
(whic)o(h)e(none)66 2047 y(of)k(the)f(individual)e(optimisations)i(can)g(b)q
(e)g(p)q(erformed)f(an)o(ywhere)h(o)o(v)o(er)f(the)h(lam)o(b)q(da)f
(expression.)66 2107 y(Eac)o(h)j(optimising)e(function)i(touc)o(hes)f(a)h
(reference)e(v)m(ariable)h(whenev)o(er)g(it)g(succeeds)g(in)g(applying)66
2167 y(its)d(optimisation;)e(the)h(optimiser)f(mak)o(es)g(rep)q(eated)i
(passes)g(o)o(v)o(er)f(the)g(input)h(un)o(til)e(a)i(pass)h(is)e(made)66
2227 y(whic)o(h)h(lea)o(v)o(es)f(the)h(reference)e(un)o(touc)o(hed.)140
2287 y(W)l(e)e(describ)q(e)h(the)g(optimisations)f(b)q(elo)o(w,)h(but)h(m)o
(ust)d(\014rst)j(de\014ne)f(some)f(terms.)18 b(A)13 b(lam)o(b)q(da)f(sub-)66
2348 y(expression)k(is)g(said)h(to)f(b)q(e)h Fk(smal)r(l)g
Fw(if)f(it)g(can)g(b)q(e)g(substituted)h(for)f(a)h(v)m(ariable)f(o)q
(ccurrence)f(without)i(a)66 2408 y(large)c(increase)f(in)h(co)q(de)f(size.)20
b(A)12 b(sub-expression)h(is)g(said)g(to)g(b)q(e)g Fk(safe)f
Fw(if)h(it)f(p)q(erforms)g(no)h(side-e\013ects.)66 2468 y(The)j(leaf)f(no)q
(des)h(denoting)f(v)m(ariables)h(and)g(constan)o(ts)g(are)f(considered)g
(small.)k(The)d(conditions)f(for)66 2528 y(safeness)21 b(are,)g(in)f(theory)l
(,)h(more)e(complex,)g(but)h(the)g(algorithm)g(used)g(is)g(a)h(simple-mi)o
(nded)c(one:)66 2588 y(lam)o(b)q(da)d(terms)f(are)h(safe)h(if)e(they)h(con)o
(tain)g(no)h(applications)g(or)f(p)q(erv)m(asiv)o(e)g(applications,)g(and)h
(don't)66 2649 y(raise)21 b(exceptions.)35 b(Safe)22 b(terms)d(are)i(those)h
(whic)o(h)e(can)i(b)q(e)f(remo)o(v)o(ed)d(or)k(relo)q(cated)f(\(within)f(the)
66 2709 y(same)c(or)g(a)h(nested)f(con)o(text\))f(without)i(c)o(hanging)f
(the)g(meaning)g(of)g(the)g(program.)140 2769 y(It)22 b(is)h(here)g(that)g
(the)g(uniqueness)g(of)g(lv)m(ars)g(is)g(esp)q(ecially)f(useful.)41
b(Lam)o(b)q(da)23 b(terms)f(can)h(b)q(e)p eop
%%Page: 87 26
bop 66 50 a Fs(CHAPTER)17 b(6.)37 b(COMPILA)l(TION)16 b(FR)o(OM)f(THE)h(CORE)
h(TO)f(LAMBD)o(A)373 b Fw(87)66 195 y(Therefore,)13 b(w)o(e)f(c)o(ho)q(ose)g
(to)h(ha)o(v)o(e)f(a)g(single)g(built-in)g(function)g(called)f
Fu(prim)o Fw(,)h(and)h(w)o(e)f(de\014ne)g(the)g(other)66 255
y(p)q(erv)m(asiv)o(es)k(in)g(terms)f(of)h(it.)140 315 y(The)i(initial)e
(static)i(en)o(vironmen)o(t)d(con)o(tains)j(a)g(single)g(en)o(try:)23
b(the)18 b(iden)o(ti\014er)e Fu(prim)o Fw(,)i(with)g(t)o(yp)q(e)66
376 y Fu(\(int)25 b Fp(\002)g Fv(\013)p Fu(\))h Fp(!)f Fv(\014)r
Fw(.)c(In)16 b(order)f(to)h(describ)q(e)f(the)h(dynamic)e(binding)h(of)h
Fu(prim)o Fw(,)f(w)o(e)g(m)o(ust)f(revise)h(our)66 436 y(description)f(of)i
(compiler)c(en)o(vironmen)o(ts)g(\(CEn)o(v's\).)20 b(The)15
b(in)o(terface)e Fu(COMPILER)p 1594 436 16 2 v 16 w(ENV)h Fw(con)o(tains)g
(the)66 496 y(sp)q(eci\014cations)188 610 y Fu(datatype)23
b(result)g(=)j(LVAR)e(of)h(lvar)598 670 y(|)h(PRIM)188 791
y(val)f(lookupLong)o(va)o(r:)d(CEnv)j Fp(!)g Fu(longvar)e Fp(!)j
Fu(result)66 905 y Fw(and)16 b(the)g(initial)e(compiler)e(en)o(vironmen)o(t)h
(just)j(con)o(tains)f(a)h(mapping)f(from)f Fu(prim)g Fw(to)h
Fu(PRIM)o Fw(.)21 b(When-)66 965 y(ev)o(er)15 b(iden)o(ti\014ers)g(are)i
(declared)e(in)h(a)g(CEn)o(v,)g(they)g(map)f(to)i Fu(LVAR\()p
Fk(lv)o Fu(\))f Fw(for)g(some)g Fk(lv)p Fw(.)140 1025 y(The)k(compiler)e(lo)q
(oks)k(out)f(for)g(the)f(sp)q(ecial)g(case)h(where)f(an)h(iden)o(ti\014er)e
(mapping)h(to)h Fu(PRIM)e Fw(is)66 1086 y(applied)12 b(directly)e(to)i(an)g
(argumen)o(t.)18 b(\(Lo)q(oking)13 b(for)f(textual)f(o)q(ccurrences)h(of)g
Fu(prim)e Fw(is)h(inelegan)o(t,)h(and)66 1146 y(w)o(ould)j(require)f
(redeclaration)g(of)h Fu(prim)e Fw(in)i(an)o(y)g(w)o(a)o(y)f(to)h(b)q(e)g
(prohibited.\))20 b(In)15 b(suc)o(h)g(an)g(application,)66
1206 y(the)21 b(argumen)o(t)e(is)h(required)f(to)i(b)q(e)g(a)f(record)h(with)
f(t)o(w)o(o)g(\014elds,)h(the)f(\014rst)h(of)f(whic)o(h)g(m)o(ust)f(b)q(e)i
(an)66 1266 y(in)o(teger)e(constan)o(t.)33 b(This)20 b(n)o(um)o(b)q(er)e(m)o
(ust)h(coincide)f(with)i(the)g(implem)o(e)o(n)o(tation)d(of)k(the)e(seman)o
(tic)66 1326 y(function)f(APPL)l(Y)f(whic)o(h)g(in)h(the)f(compiler)e(tak)o
(es)i(an)i(in)o(teger)d(index.)25 b(Occurrences)16 b(of)i Fu(PRIM)e
Fw(are)66 1386 y(con)o(v)o(erted)22 b(in)o(to)g Fu(PRIM)p 506
1386 V 17 w(APP)g Fw(in)g(the)g(lam)o(b)q(da)g(language.)41
b(Because)22 b(the)h(application)f(of)h Fu(PRIM)e Fw(is)66
1447 y(detected)d(and)h(con)o(v)o(erted)e(in)h(the)g(compiler,)e(the)j(DEn)o
(v)f(has)h(no)g(kno)o(wledge)f(of)h(it,)f(and)h(no)g(lv)m(ars)66
1507 y(are)e(in)o(v)o(olv)o(ed.)140 1567 y Fu(PRIM)p 247 1567
V 17 w(APP)j Fw(alw)o(a)o(ys)g(tak)o(es)h(t)o(w)o(o)g(argumen)o(ts.)35
b(The)21 b(\014rst)g(is)g(an)h(in)o(teger)e(index)g(indicating)g(the)66
1627 y(primitiv)o(e)h(function)k(required,)g(and)g(the)f(second)h(is)f(a)h
(either)f(a)g(single)h(argumen)o(t)e(or)i(a)g(tuple)66 1687
y(of)d(argumen)o(ts)f(for)h(the)f(primitiv)o(e)d(function.)38
b(Th)o(us,)22 b(the)g(t)o(yp)q(e)f(of)h Fu(prim)e Fw(can)i(b)q(e)g
(restrained)f(to)66 1748 y Fu(\(int)k Fp(\002)g Fv(\013)p Fu(\))h
Fp(!)f Fv(\014)e Fw(rather)f(than)f(the)g(more)f(general)h(\(and)h(less)f
(safe\))g Fv(\013)g Fp(!)g Fv(\014)s Fw(.)36 b(If)20 b(a)i(primitiv)o(e)66
1808 y(function)17 b(is)g(capable)f(of)h(raising)g(an)h(exception,)d(the)h
(exception)g(pac)o(k)o(et)g(or)h(function)f(is)h(passed)h(as)66
1868 y(one)h(of)g(the)f(argumen)o(ts;)h(hence,)e(there)h(are)h(no)g(reserv)o
(ed)e(exceptions)h(in)g(the)g(impleme)o(n)o(tation)e(of)66
1928 y(APPL)l(Y.)140 1988 y(The)d(p)q(erv)m(asiv)o(e)g(functions)g(are)h
(de\014ned)f(in)g(a)h Fk(pr)n(elude)p Fw(,)f(part)h(of)g(whic)o(h)f(is)g(sho)
o(wn)h(in)f(Figure)g(6.10.)66 2049 y(This)h(prelude)f(is)g(pro)q(cessed)h(b)o
(y)f(the)g(Kit)g(when)h(it)f(is)g(built.)20 b(Eac)o(h)13 b(p)q(erv)m(asiv)o
(e)g(iden)o(ti\014er)f(is)h(b)q(ound)i(to)66 2109 y(an)e(application)f(of)h
Fu(prim)e Fw(to)i(the)f(correct)g(argumen)o(ts,)f(t)o(yp)q(e)h(constrain)o
(ts)h(b)q(eing)f(added)h(to)g(constrain)66 2169 y(the)i(unsafe)g(p)q
(olymorphic)e(t)o(yp)q(e)h(of)h Fu(prim)e Fw(to)i(the)f(correct)g(t)o(yp)q(e)
g(for)h(the)f(primitiv)o(e)d(in)j(question.)21 b(By)66 2229
y(con)o(v)o(en)o(tion,)16 b(equalit)o(y)g(is)h(primitiv)n(e)d(0,)k(and)g(is)f
(de\014ned)g(in)g(the)g(prelude)f(in)h(the)g(same)f(w)o(a)o(y)l(.)24
b(\(This)66 2289 y(p)q(erhaps)19 b(violates)e(the)g(assertion)h(in)f(the)g
(De\014nition)g(that)g(the)g(equalit)o(y)f(sym)o(b)q(ol)g(ma)o(y)g(not)i(b)q
(e)f(re-)66 2350 y(b)q(ound;)22 b(ho)o(w)o(ev)o(er,)d(w)o(e)g(w)o(ould)g
(argue)h(that)g(this)f(is)h(its)f Fk(initial)h Fw(binding.\))31
b(P)o(arts)20 b(of)f(the)h(compiler)66 2410 y(whic)o(h)15 b(require)g(the)g
(equalit)o(y)g(predicate)f(generate)i(lam)o(b)q(da)f(co)q(de)h(con)o(taining)
g Fu(PRIM)p 1672 2410 V 17 w(APP\(0,)23 b Fw(.)8 b(.)g(.)g
Fu(\))66 2470 y Fw(directly)l(.)32 b(This)20 b(impleme)o(n)o(tation)e(sc)o
(heme)g(means)h(that)i(the)f(primitiv)o(e)o(s)e(are)i(implem)o(en)o(te)o(d)e
(in)i(a)66 2530 y(rather)15 b(ine\016cien)o(t)d(manner)h(\(there)g(is)h(an)h
(extra)f(lev)o(el)e(of)j(function)f(application)g(for)g(eac)o(h)g(primitiv)o
(e)66 2590 y(application\),)g(but)f(w)o(e)g(w)o(ould)g(rather)h(defer)e(that)
i(to)g(later)f(optimising)f(passes,)i(and)g(k)o(eep)e(the)h(basic)66
2650 y(sc)o(heme)h(simple.)p eop
%%Page: 86 27
bop 66 50 a Fs(CHAPTER)17 b(6.)37 b(COMPILA)l(TION)16 b(FR)o(OM)f(THE)h(CORE)
h(TO)f(LAMBD)o(A)373 b Fw(86)66 195 y Fu(compileDeci)o(sio)o(nTr)o(ee)13
b Fw(tak)o(es)j(a)h(CEn)o(v)g(as)g(\(curried\))f(argumen)o(t.)21
b(This)c(is)f(only)h(needed)f(to)h(gen-)66 255 y(erate)22 b(co)q(de)g(for)g
(case)g(selection)e(o)o(v)o(er)h(exception)g(constructors:)33
b(the)21 b(iden)o(tit)o(y)f(of)i(an)g(exception)66 315 y(constructor)16
b(dep)q(ends)g(on)g(the)f(dynamic)f(en)o(vironmen)o(t.)k(The)d
Fu(failure)e Fw(argumen)o(t)i(is)g(the)g(lam)o(b)q(da)66 376
y(expression)h(to)f(plan)o(t)h(for)f(eac)o(h)g Fu(FAIL)f Fw(no)q(de:)22
b(an)16 b(expression)f(is)g(c)o(hosen)g(to)h(raise)f(the)h(p)q(erv)m(asiv)o
(e)f(ex-)66 436 y(ception)g Fu(Match)e Fw(in)h(lam)o(b)q(da)g(expressions,)h
Fu(Bind)e Fw(in)h(v)m(alue)h(bindings,)g(and)g(will)f(re-raise)g(the)h(ro)q
(ot)h(of)66 496 y(the)d(matc)o(h)e(in)h(exception)g(handlers.)20
b(Of)12 b(most)g(in)o(terest)g(is)g(the)g(higher-order)h(argumen)o(t)f
Fu(compiler)m Fw(.)66 556 y(This)j(is)f(an)g(encapsulation)h(of)f(the)g
(compiling)e(function)i(to)g(b)q(e)g(applied)g(to)h(the)e(righ)o(t)h(hand)h
(sides)f(of)66 616 y(the)h(matc)o(h.)k(Recall)13 b(that)j(decision)e(trees)g
(are)h(generated)f(from)g(a)h(ro)q(ot)h(lv)m(ar)e(and)i(a)f(list)f(of)h
(patterns)66 677 y(only|the)h(righ)o(t)h(hand)g(side)f(expressions)h(are)f
(not)h(pro)o(vided.)22 b(This)17 b(is)f(for)h(the)f(v)o(ery)g(go)q(o)q(d)i
(reason)66 737 y(that)f(they)f(migh)o(t)e(not)j(exist:)k(consider)15
b(the)h(case)h(of)f(a)h(top-lev)o(el)e(binding)h(suc)o(h)g(as)188
844 y Fu(val)25 b(\(x,)f(y\))h(=)h(\(1,)e(2\))66 950 y Fw(This)17
b(is)f(passed)h(to)f(the)g(matc)o(h)f(compiler)f(as)188 1057
y Fu(\(fn)25 b(\(x,)f(y\))h(=>)g Fk(sc)n(op)n(e)p Fu(\))g(\(1,)g(2\))66
1164 y Fw(where)16 b Fk(sc)n(op)n(e)g Fw(is)g(lam)o(b)q(da-abstracted)g(in)f
(the)h(compiler.)j(So,)d Fu(compileDec)o(Tre)o(e)d Fw(is)j(called)f(with)h
(an)66 1224 y(encapsulation)j(of)g(the)g(expression)f(compiler)e(whic)o(h)i
(deliv)o(ers)f(the)h(lam)o(b)q(da)g(co)q(de)h(for)g(the)f(appro-)66
1284 y(priate)j(righ)o(t)f(hand)h(side.)34 b(The)21 b(compiler)d(is)i(passed)
h(the)g(rule)f(n)o(um)o(b)q(er)f(and)i(the)f(CEn)o(v)h(for)f(the)66
1344 y(v)m(ariables)d(in)e(the)h(pattern.)140 1404 y(It)21
b(should)h(b)q(e)f(noted)h(that)g(a)g(rule)e(migh)o(t)g(o)q(ccur)i(in)f(sev)o
(eral)f(lea)o(v)o(es)g(of)i(a)g(decision)e(tree.)36 b(In)66
1465 y(suc)o(h)22 b(cases,)g(it)f(is)g(p)q(ossible)g(to)h(lam)o(b)q
(da-abstract)g(the)f(righ)o(t)g(hand)h(side)f(in)g(order)g(to)h(a)o(v)o(oid)e
(the)66 1525 y(duplication)12 b(of)h(co)q(de.)20 b(The)12 b(abstraction)h(w)o
(ould)f(b)q(e)h(p)q(erformed)e(o)o(v)o(er)g(the)h(v)m(ariables)g(of)g(the)g
(pattern.)66 1585 y(This)17 b(optimisation)e(is)h(not)h(p)q(erformed)e(at)h
(presen)o(t.)140 1645 y(Compilation)h(from)g(decision)g(tree)h(to)g(lam)o(b)q
(da)g(co)q(de)g(is)g(fairly)f(straigh)o(tforw)o(ard.)28 b(All)17
b(the)h(de-)66 1705 y(comp)q(osition)d(op)q(erations)i(compile)c(to)j(the)f
(appropriate)h(kind)f(of)h Fu(SELECT)n Fw(.)21 b Fu(CON)p 1591
1705 16 2 v 17 w(SWITCH)13 b Fw(compiles)66 1765 y(to)20 b(an)g(in)o(teger)e
(switc)o(h)h(o)o(v)o(er)f(the)h(tag)h(\014eld)f(of)h(the)f(argumen)o(t.)29
b Fu(SCON)p 1407 1765 V 17 w(SWITCH)17 b Fw(compiles)g(directly)66
1826 y(to)24 b(the)e(appropriate)h(kind)g(of)g Fu(SWITCH)d
Fw(in)j(the)f(lam)o(b)q(da)g(language.)42 b Fu(EXCON)p 1556
1826 V 16 w(SWITCH)21 b Fw(is)h(sligh)o(tly)66 1886 y(more)c(complicated,)g
(since)g(the)h(matc)o(hes)f(m)o(ust)g(b)q(e)h(p)q(erformed)f(in)h(sequen)o
(tial)f(order.)31 b(The)19 b(co)q(de)66 1946 y(generated)f(consists)f(of)h(a)
g(nested)f(sequence)f(of)h(conditional)g(expressions:)23 b(the)18
b(argumen)o(t)e(v)m(alue's)66 2006 y(exception)22 b(reference)e(is)i
(compared)f(against)j(eac)o(h)e(exception)f(constructor)h(in)g(turn,)i(using)
e(the)66 2066 y(p)q(erv)m(asiv)o(e)16 b(equalit)o(y)f(predicate)g(o)o(v)o(er)
g(the)h(string)h(references.)66 2232 y Ft(6.8)83 b(The)28 b(Primitiv)n(e)e(F)
-7 b(unctions)66 2341 y Fw(An)o(y)16 b(Standard)i(ML)e(system)f(m)o(ust)g
(pro)o(vide)h(the)g(built-in)g(functions)g(describ)q(ed)g(in)h(app)q(endices)
f(C)66 2402 y(and)i(D)f(of)h(the)e(De\014nition.)24 b(Some)15
b(of)j(these)e(\(suc)o(h)h(as)h Fu(map)e Fw(and)h Fu(rev)o
Fw(\))g(can)g(b)q(e)h(de\014ned)e(directly)g(in)66 2462 y(SML.)i(Others)f
(\(suc)o(h)g(as)h(the)f(arithmetic)e(op)q(erators)k(and)f(the)f(equalit)o(y)f
(predicate\))g(cannot.)25 b(The)66 2522 y(De\014nition)16 b(de\014nes)g(the)f
(latter)h(in)f(t)o(w)o(o)h(w)o(a)o(ys:)21 b(the)16 b(initial)e(static)i
(basis)g(con)o(tains)g(the)g(t)o(yp)q(es)f(of)h(the)66 2582
y(p)q(erv)m(asiv)o(es,)d(and)h(the)f(initial)f(dynamic)f(basis)j(con)o(tains)
f(the)g(basic)g(v)m(alues)h(whic)o(h)e(are)h(di\013eren)o(tiated)66
2642 y(at)21 b(application)g(time)d(\(rule)i(116\).)36 b(The)21
b(sp)q(ecial)f(status)i(of)f(the)f(basic)h(v)m(alues)f(is)h(inelegan)o(t)e
(in)i(a)66 2703 y(compiler,)e(partly)g(b)q(ecause)i(the)f(con)o(ten)o(ts)f
(of)i(sev)o(eral)e(en)o(vironmen)o(ts)e(ha)o(v)o(e)i(to)i(b)q(e)f
(\\hard-wired")66 2763 y(in)o(to)f(the)f(compiler)f(in)h(sev)o(eral)g
(places,)g(and)h(also)h(b)q(ecause)f(w)o(e)f(ha)o(v)o(e)g(decided)f(that)j
(the)e(di\013eren)o(t)66 2823 y(kinds)12 b(of)g(function)g(application)g
(should)g(b)q(e)h(di\013eren)o(tiated)d(at)j(compile-tim)o(e)8
b(rather)k(than)h(run)o(time.)p eop
%%Page: 85 28
bop 66 50 a Fs(CHAPTER)17 b(6.)37 b(COMPILA)l(TION)16 b(FR)o(OM)f(THE)h(CORE)
h(TO)f(LAMBD)o(A)373 b Fw(85)188 195 y(is)12 b(b)q(ecause)g(it)f(is)g(imp)q
(ossible)f(to)i(determine)d(the)j(iden)o(tit)o(y)d(of)j(exceptions)f(at)h
(compile-tim)o(e)c(\(cf.)188 255 y(v)m(alue)15 b(constructors,)g(whose)h(v)m
(alues)f(are,)g(seman)o(tically)l(,)c(simply)i(the)i(iden)o(ti\014ers\).)k
(Consider)188 315 y(the)d(follo)o(wing)g(example:)296 427 y
Fu(let)373 488 y(exception)22 b(E1)j(of)g(int)373 548 y(exception)d(E2)j(=)g
(E1)296 608 y(in)g Fw(.)8 b(.)g(.)33 b Fu(handle)23 b(E1\(0\))h(=>)h
Fv(e)897 615 y Fm(1)592 668 y Fu(|)g(E2\(n\))f(=>)h Fv(e)897
675 y Fm(2)592 728 y Fu(|)g(E1\(n\))f(=>)h Fv(e)897 735 y Fm(3)296
789 y Fu(end)188 901 y Fw(It)11 b(is)g(incorrect)f(to)h(merge)f(the)g(t)o(w)o
(o)h(o)q(ccurrences)g(of)g Fu(E1)f Fw(in)h(the)g(matc)o(h)e(since)i
Fu(E2)f Fw(is)h(dynamically)188 961 y(iden)o(tical)k(to)h Fu(E1)g
Fw(and)h(so)g(a)f(pac)o(k)o(et)f Fu(E1\(1\))g Fw(matc)o(hes)f
Fu(E2\(n\))o Fw(.)188 1041 y(\(It)j(migh)o(t)e(b)q(e)i(argued)g(that)h(the)e
(compiler)f(could)h(main)o(tain)g(an)h(en)o(vironmen)o(t)d(to)j(trac)o(k)f
(the)188 1101 y(iden)o(tit)o(y)g(of)j(exceptions)e(in)g(cases)h(suc)o(h)g(as)
h(this.)26 b(Ho)o(w)o(ev)o(er,)16 b(examples)g(using)i(the)g(mo)q(dules)188
1162 y(language)d(illustrate)f(that)g(exception)f(iden)o(tit)o(y)f(cannot)j
(alw)o(a)o(ys)f(b)q(e)g(determined)e(at)i(compile-)188 1222
y(time,)g(and)j(w)o(e)f(wish)g(to)h(encompass)e(the)h(mo)q(dules)g(language)h
(at)f(some)g(stage.\))66 1322 y Fu(END)p Fp(f)p Fu(ruleNum,)22
b(environmen)o(t)p Fp(g)f Fw(indicates)10 b(a)h(successful)g(matc)o(h)e(and)i
(pro)o(vides)g(the)f(index)g Fu(ruleNum)188 1383 y Fw(of)15
b(the)f(matc)o(hing)f(rule)g(together)h(with)g(a)h(CEn)o(v)f
Fu(environment)c Fw(for)15 b(the)f(v)m(ariables)g(of)g(the)g(ap-)188
1443 y(propriate)i(pattern.)21 b(An)15 b Fu(END)g Fw(no)q(de)h(do)q(es)g(not)
g(con)o(tain)f(an)o(y)g(v)o(estige)g(of)h(the)f(righ)o(t-hand-side)188
1503 y(of)i(the)f(matc)o(h)f(rule,)g(since)g(the)h(righ)o(t-hand-sides)h(ma)o
(y)e(not)h(exist,)f(as)i(explained)e(b)q(elo)o(w.)66 1604 y
Fu(FAIL)23 b Fw(indicates)16 b(the)g(failure)f(of)i(all)f(patterns)g(to)h
(matc)o(h)d(the)i(v)m(alue.)140 1664 y(The)21 b(decision)f(tree)h(con)o
(tains)g(some)f(em)o(b)q(edded)f(t)o(yp)q(e)i(information)f(pro)o(vided)h(b)o
(y)f(the)h(t)o(yp)q(e-)66 1724 y(c)o(hec)o(k)o(er.)g(The)d(compiler)c(m)o
(ust)i(con)o(v)o(ert)g(the)g(lab)q(els)h(and)h(constructors)g(of)f(the)g
(decision)f(tree)h(in)o(to)66 1784 y(in)o(teger)e(selections)g(in)h(the)g
(lam)o(b)q(da)f(language,)h(and)h(therefore)e(needs)h(to)g(kno)o(w)g(the)g
(ordinal)g(index)66 1844 y(of)e(eac)o(h)f(constructor)h(and)h(record)e(lab)q
(el.)20 b(In)13 b(addition,)h(the)g(t)o(yp)q(e)f(information)f(is)i(needed)f
(to)h(deter-)66 1905 y(mine)e(the)i(exhaustiv)o(eness)e(of)j(a)f(v)m(alue)f
(constructor)h(switc)o(h;)g(it)f(allo)o(ws)h(the)f(compiler)f(to)i(determine)
66 1965 y(whether)i(or)h(not)g(all)e(the)h(constructors)h(are)g(presen)o(t.)
140 2025 y(The)11 b(compile-time)d(w)o(arnings)13 b(\(irredundancy)l(,)e
(exhaustiv)o(eness\))g(are)h(p)q(erformed)f(in)g(a)i(separate)66
2085 y(p)q(ost-pass)19 b(o)o(v)o(er)c(the)h(decision)f(tree.)20
b(The)c(unreac)o(hable)g(rules)f(of)i(a)f(matc)o(h)e(are)i(those)h(whic)o(h)e
(don't)66 2145 y(o)q(ccur)20 b(in)f(an)o(y)g Fu(END)f Fw(no)q(de.)31
b(A)19 b(matc)o(h)f(is)h(inexhaustiv)o(e)f(if)h(the)g(decision)f(tree)h(con)o
(tains)g(an)o(y)h Fu(FAIL)66 2205 y Fw(no)q(des.)200 2187 y
Fm(5)140 2266 y Fw(The)g(\014nal)h(stage)g(in)f(compiling)e(a)j(matc)o(h)e
(is)h(to)h(generate)f(lam)o(b)q(da)g(co)q(de)g(from)g(the)g(decision)66
2326 y(tree.)h(This)16 b(is)g(done)h(b)o(y)f(a)g(function)g(with)g(the)g
(follo)o(wing)g(sp)q(eci\014cation:)188 2436 y Fu(fun)25 b(compileDec)o(is)o
(ion)o(Tre)o(e)e(\(env:)g(CEnv\))804 2496 y(\(tree:)g(DecisionTr)o(ee,)829
2556 y(compiler:)g(\(int)h Fp(\002)h Fu(CEnv\))f Fp(!)h Fu(LambdaExp,)829
2616 y(failure:)e(LambdaExp)804 2676 y(\):)h(LambdaExp)p 66
2727 756 2 v 123 2758 a Fi(5)141 2773 y Fh(The)12 b(assumption)e(here)i(is)g
(that)f(unreac)o(hable)h Ff(FAIL)e Fh(no)q(des)j(are)e(nev)o(er)i(generated)f
(in)f(our)h(decision)f(tree)i(building)66 2823 y(algorithm.)j(Exp)q(erimen)o
(tation)d(suggests)i(that)f(this)g(is)f(the)i(case,)f(but)g(it)g(is)g(not)f
(y)o(et)i(pro)o(v)o(en.)p eop
%%Page: 84 29
bop 66 50 a Fs(CHAPTER)17 b(6.)37 b(COMPILA)l(TION)16 b(FR)o(OM)f(THE)h(CORE)
h(TO)f(LAMBD)o(A)373 b Fw(84)p 66 301 1890 6 v 118 355 a Fu(signature)23
b(DECTREE)p 560 355 16 2 v 16 w(DT)i(=)170 416 y(sig)221 476
y(type)f(lab)h(and)f(lvar)g(and)h(var)f(and)h(con)221 536 y(type)f(longexcon)
e(and)j(scon)f(and)h(pat)221 596 y(type)f(type)p 456 596 V
17 w(info)221 656 y(type)g(RuleNum)f(sharing)g(type)h(RuleNum)g(=)h(int)221
716 y(type)f(\()p Fv(\013)406 723 y Fm(=)435 716 y Fu(,)i Fv(\014)s
Fu(\))e(map)221 777 y(type)g(CEnv)221 897 y(datatype)f Fv(\013)j
Fu(option)d(=)i(NONE)g(|)g(SOME)f(of)h Fv(\013)221 1017 y Fu(datatype)e
(DecisionT)o(ree)f(=)272 1078 y(LAB)p 353 1078 V 18 w(DECOMPOSE)g(of)j
Fp(f)p Fu(bind:)f(lvar,)f(parent:)g(lvar,)h(lab:)g(lab,)726
1138 y(child:)g(DecisionTr)o(ee,)e(info:)i(type)p 1526 1138
V 17 w(info)701 1198 y Fp(g)221 1318 y Fu(|)h(CON)p 353 1318
V 18 w(DECOMPOSE)d(of)j Fp(f)p Fu(bind:)f(lvar,)f(parent:)g(lvar,)h(child:)g
(DecisionT)o(ree)o Fp(g)221 1379 y Fu(|)h(EXCON)p 405 1379
V 17 w(DECOMPOSE)d(of)j Fp(f)p Fu(bind:)f(lvar,)g(parent:)f(lvar,)g(child:)h
(DecisionTr)o(ee)p Fp(g)221 1499 y Fu(|)h(CON)p 353 1499 V
18 w(SWITCH)e(of)i Fp(f)p Fu(arg:)f(lvar,)650 1559 y(selection)o(s:)e(\(con,)
i(\(type)p 1244 1559 V 17 w(info)g Fp(\002)h Fu(DecisionTr)o(ee\))o(\))e
(map,)650 1619 y(wildcard:)f(DecisionTr)o(ee)g(option)894 1680
y Fw(\(*)k Fk(A)o(n)18 b Fu(option)d Fk(b)n(e)n(c)n(ause)j(we)g(may)f(notic)n
(e)h(that)g(al)r(l)26 b Fw(*\))894 1740 y(\(*)g Fk(the)18 b(c)n(onstructors)f
(ar)n(e)g(pr)n(esent.)52 b Fw(*\))624 1800 y Fp(g)221 1860
y Fu(|)25 b(SCON)p 379 1860 V 17 w(SWITCH)f(of)h Fp(f)p Fu(arg:)f(lvar,)675
1920 y(selections:)e(\(scon,)h(DecisionTre)o(e\))f(map,)675
1980 y(wildcard:)h(DecisionT)o(ree)650 2041 y Fp(g)221 2101
y Fu(|)i(EXCON)p 405 2101 V 17 w(SWITCH)e(of)i Fp(f)p Fu(arg:)f(lvar,)701
2161 y(selections)o(:)e(\(longexcon)g Fp(\002)k Fu(DecisionT)o(ree)o(\))d
(list,)701 2221 y(wildcard:)f(DecisionTre)o(e)675 2281 y Fp(g)221
2402 y Fu(|)j(END)g(of)g Fp(f)p Fu(ruleNum:)d(RuleNum,)h(environmen)o(t:)f
(CEnv)p Fp(g)221 2462 y Fu(|)j(FAIL)170 2522 y(end)425 2678
y Fw(Figure)16 b(6.9:)22 b(The)16 b(decision)f(tree)h(data)h(structure)p
66 2735 1890 6 v eop
%%Page: 83 30
bop 66 50 a Fs(CHAPTER)17 b(6.)37 b(COMPILA)l(TION)16 b(FR)o(OM)f(THE)h(CORE)
h(TO)f(LAMBD)o(A)373 b Fw(83)66 195 y(and)18 b(not)g(referred)f(to)h(for)f
(the)h(curren)o(t)e(implem)o(en)o(tation.)22 b(The)17 b(sc)o(heme)e(in)o(v)o
(olv)o(es)h(the)h(generation)66 255 y(of)e Fk(de)n(cision)g(tr)n(e)n(es)p
Fw(.)20 b(A)14 b(decision)f(tree)g(is)h(an)g(in)o(termediate)d(data)j
(structure)g(whic)o(h)f(encompasses)g(the)66 315 y(decomp)q(ositions)20
b(and)h(selections)e(necessary)h(to)g(determine,)f(for)h(an)o(y)g(data)h(v)m
(alue,)g(the)e(topmost)66 376 y(pattern)h(whic)o(h)e(matc)o(hes)f(that)j(v)m
(alue.)29 b(\(W)l(e)19 b(m)o(ust,)f(of)h(course,)g(pro)o(vide)g(the)f(same)g
(e\013ect)h(as)g(the)66 436 y(top-to-b)q(ottom,)g(bac)o(ktrac)o(king)e(matc)o
(hing)f(of)i(the)g(seman)o(tics.\))23 b(F)l(or)18 b(an)o(y)g(data)g(v)m
(alue,)g(a)g(decision)66 496 y(tree)23 b(p)q(erforms)f(an)h(analysis)g(whic)o
(h)f(either)g(deliv)o(ers)f(the)i(\014rst)g(matc)o(hing)e(rule,)i(or)h
(indicates)e(a)66 556 y(failure)16 b(\(if)g(the)g(v)m(alue)g(matc)o(hes)f(no)
i(rule\).)k(If)16 b(a)h(rule)f(is)g(matc)o(hed,)e(the)j(decision)e(tree)h
(also)h(deliv)o(ers)66 616 y(the)i Fs(v)m(alue)f(en)o(vironmen)o(t)e
Fw(for)j(the)f(pattern.)28 b(This)19 b(is)f(a)h(CEn)o(v)g(mapping)e(the)i
(pattern's)f(v)m(ariables)66 677 y(to)f(lv)m(ars)f(corresp)q(onding)i(to)e
(in)o(ternal)g(no)q(des)h(of)f(the)g(argumen)o(t.)140 737 y(The)h(generation)
g(of)h(decision)f(trees)f(is)i(b)q(ey)o(ond)f(the)g(scop)q(e)h(of)f(this)h
(pap)q(er;)g(ho)o(w)o(ev)o(er,)d(w)o(e)i(shall)66 797 y(describ)q(e)h(the)h
(trees)f(themselv)o(es)e(and)j(sho)o(w)g(some)f(examples.)27
b(The)18 b Fu(DecisionTre)o(e)d Fw(data)20 b(struc-)66 857
y(ture)c(is)f(sho)o(wn)i(in)e(Figure)g(6.9.)22 b(It)15 b(should)h(b)q(e)g
(noted)g(that)g(decision)f(trees)g(are)h Fk(typ)n(e)n(d)p Fw(,)e(in)i(that)g
(they)66 917 y(con)o(tain)f(en)o(tities)f(suc)o(h)h(as)g(constructors)h(and)g
(record)f(lab)q(els)g(whose)h(in)o(terpretation)e(\(as)h(far)h(as)f(the)66
978 y(co)q(de)h(generator)g(is)f(concerned\))g(is)h(dep)q(enden)o(t)f(on)h
(their)e(t)o(yp)q(e.)21 b(Decision)15 b(trees)g(carry)g(lv)m(ars)h(whic)o(h)
66 1038 y(are)22 b(relev)m(an)o(t)e(to)h(the)g(lam)o(b)q(da)f(co)q(de)i
(generator.)36 b(In)21 b(addition,)h(decision)e(trees)h(are)g
Fk(symb)n(olic)h Fw(in)66 1098 y(that)f(they)f(refer)f(to)i(data)g(decomp)q
(ositions)f(in)g(an)h(abstract)g(sense)f(\(lab)q(el)g(decomp)q(osition,)g
(con-)66 1158 y(structor)e(decomp)q(osition,)e(and)i(so)f(on\))h(rather)f
(than)h(in)f(terms)e(of)j(the)f(concrete)f(data)i(op)q(erations)66
1218 y(\(sp)q(eci\014cally)l(,)d Fu(SELECT)n Fw(\))h(of)g(the)g(lam)o(b)q(da)
g(language.)140 1291 y(The)11 b(r^)-24 b(ole)10 b(of)h(a)h(decision)e(tree)g
(is)h(to)g(decomp)q(ose)f(and)i(examine)d(an)i(argumen)o(t)f(v)m(alue)h(to)g
(determine)66 1351 y(whether)h(it)g(matc)o(hes)f(a)i(sp)q(eci\014c)f
(pattern,)g(and)h(if)f(so)h(to)g(return)f(the)g(CEn)o(v)g(binding)h(the)f(v)m
(ariables)g(of)66 1411 y(the)j(pattern)f(to)h(the)g(appropriate)g(sub-comp)q
(onen)o(ts)f(of)h(the)g(argumen)o(t.)k(A)14 b(decision)g(tree)g(con)o(tains)
66 1472 y(no)q(des)k(whic)o(h)d(p)q(erform)g(decomp)q(ositions)h(of)h
(records)f(and)h(constructors,)f(as)h(follo)o(ws:)66 1532 y
Fu(LAB)p 147 1532 16 2 v 18 w(DECOMPOSE)o Fp(f)p Fu(bin)o(d,)22
b(parent,)h(lab,)h(child)p Fp(g)f Fw(extracts)12 b(a)i(\014eld)e
Fu(lab)g Fw(from)g(a)h(record)g Fu(parent)n Fw(,)188 1592 y(binding)j(it)g
(to)h(a)g(new)f(lv)m(ar)g Fu(bind)o Fw(;)66 1694 y Fu(CON)p
147 1694 V 18 w(DECOMPOSE)o Fp(f)p Fu(bin)o(d,)22 b(parent,)h(child)p
Fp(g)g Fw(decomp)q(oses)18 b(a)h(constructed)g(v)m(alue)f Fu(parent)n
Fw(,)h(bind-)188 1754 y(ing)e(the)f(v)m(alue)g(to)g(whic)o(h)g(the)g
(constructor)h(w)o(as)f(applied)g(to)h(the)f(lv)m(ar)g Fu(bind)n
Fw(;)66 1856 y Fu(EXCON)p 199 1856 V 17 w(DECOMPOSE)p Fp(f)p
Fu(b)o(ind)o(,)22 b(parent,)i(child)p Fp(g)e Fw(p)q(erforms)10
b(a)h(similar)e(op)q(eration)j(for)f(exception)f(con-)188 1916
y(structors;)66 2017 y Fu(CON)p 147 2017 V 18 w(SWITCH)p Fp(f)p
Fu(arg)o(,)23 b(selection)o(s,)f(wildcard)p Fp(g)g Fw(p)q(erforms)17
b(a)h(case)g(selection)f(o)o(v)o(er)g(a)i(set)e(of)i(con-)188
2078 y(structors,)g(dep)q(ending)f(on)g(the)g(constructor)g(of)g(the)g
(constructed)g(v)m(alue)f(b)q(ound)i(to)g Fu(arg)o Fw(.)26
b(If)188 2138 y(the)21 b(set)g(is)g(exhaustiv)o(e)g(then)g(the)g(wildcard)f
(is)h(omitted,)g(otherwise)g(the)g(wildcard)f(is)h(the)188
2198 y(decision)16 b(tree)f(to)i(b)q(e)f(tra)o(v)o(ersed)g(if)f(the)h(v)m
(alue)g(matc)o(hes)f(none)i(of)f(the)g(constructors)h(presen)o(t;)66
2300 y Fu(SCON)p 173 2300 V 17 w(SWITCH)p Fp(f)p Fu(arg,)22
b(selections,)g(wildcard)p Fp(g)f Fw(p)q(erforms)16 b(a)h(case)g(selection)e
(o)o(v)o(er)h Fs(sp)q(ecial)g(con-)188 2360 y(stan)o(ts)23
b Fw(\(in)o(tegers,)g(reals)f(or)h(strings\).)40 b(The)23 b(wildcard)f(m)o
(ust)f(alw)o(a)o(ys)h(b)q(e)g(presen)o(t)g(since)g(a)188 2420
y(selection)13 b(o)o(v)o(er)g(constan)o(ts)h(can)g(nev)o(er)f(b)q(e)h(v)o
(eri\014ed)e(as)j(exhaustiv)o(e)d(at)i(compile-tim)o(e.)j(\(Recall)188
2480 y(from)h(Section)g(6.5)h(that)g(the)g(wildcard)f(is)g(optional)h(in)g
(the)f(lam)o(b)q(da)g(language's)h Fu(SWITCH)p 1917 2480 V
17 w(I)188 2540 y Fw(instruction,)f(since)f(this)g(can)h(b)q(e)g(generated)f
(b)o(y)h(the)f(compiler)e(from)i Fu(CON)p 1602 2540 V 17 w(SWITCH)f
Fw(decision)188 2601 y(no)q(des.)29 b(An)18 b Fu(SCON)p 540
2601 V 17 w(SWITCH)f Fw(corresp)q(onds)i(to)g(constan)o(t)g(patterns)g(in)f
(the)g(source)h(co)q(de,)g(and)188 2661 y(these)d(can)h(nev)o(er)e(b)q(e)h
(exhaustiv)o(e.\))66 2763 y Fu(EXCON)p 199 2763 V 17 w(SWITCH)p
Fp(f)p Fu(arg,)22 b(selections)o(,)h(wildcard)p Fp(g)e Fw(p)q(erforms)f(a)h
(case)g(selection)e(o)o(v)o(er)h(exception)188 2823 y(constructors.)k(Note)17
b(that)g(the)g(selection)e(is)i Fk(se)n(quential)i Fw(\(a)e(list)f(rather)h
(than)h(a)f(map\).)22 b(This)p eop
%%Page: 82 31
bop 66 50 a Fs(CHAPTER)17 b(6.)37 b(COMPILA)l(TION)16 b(FR)o(OM)f(THE)h(CORE)
h(TO)f(LAMBD)o(A)373 b Fw(82)66 195 y(to)21 b(giv)o(e)e(meaning)g(to)h
(exception)f(constructors)i(in)e(the)h(pattern:)29 b(see)20
b(the)f(De\014nition,)h(rules)g(146)66 255 y(and)g(147\).)30
b(The)19 b(matc)o(h)f(either)g(succeeds,)g(yielding)g(a)h(v)m(alue)g(en)o
(vironmen)o(t)d(for)j(the)g(v)m(ariables)g(in)66 315 y(the)g(pattern,)h(or)g
(fails.)29 b(When)19 b(ev)m(aluating)h(a)f(matc)o(h,)f(failure)h(causes)g
(execution)f(to)i(pass)g(to)f(the)66 376 y(next)d(rule)g(so)g(that)h(the)f
(next)g(pattern)g(can)g(b)q(e)h(matc)o(hed)d(against)j(the)f(v)m(alue.)21
b(When)16 b(ev)m(aluating)h(a)66 436 y(v)m(alue)f(binding,)g(failure)f(to)i
(matc)o(h)e(causes)h(an)h(exception)e(\()p Fu(Bind)o Fw(\))h(to)h(b)q(e)f
(raised.)140 496 y(Although)c(p)q(erfectly)e(acceptable)i(for)g(a)h(seman)o
(tic)c(de\014nition,)j(this)g(op)q(erational,)i(bac)o(ktrac)o(king,)66
556 y(view)j(is)g(ine\016cien)o(t)d(from)i(a)i(practical)e(p)q(oin)o(t)h(of)h
(view,)e(for)h(a)h(n)o(um)o(b)q(er)d(of)i(reasons)h(whic)o(h)f(are)g(b)q(est)
66 616 y(illustrated)23 b(b)o(y)g(examples)e(\(in)i(whic)o(h)g(w)o(e)g
(assume)f(the)h(declaration)h(of)f(a)h(datat)o(yp)q(e)g(pro)o(viding)66
677 y(constructors)17 b Fu(RED)o Fw(,)f Fu(ORANGE)n Fw(,)g
Fu(YELLOW)e Fw(and)j(so)f(on)h(in)f(the)g(ob)o(vious)g(w)o(a)o(y\).)140
737 y(Consider)g(the)g(follo)o(wing:)188 837 y Fu(fn)25 b(\(1,)g(2,)g(\(3,)f
([RED,)g(GREEN,)f(RED]\)\))h(=>)h Fv(e)1160 844 y Fm(1)214
897 y Fu(|)g(\(1,)g(2,)g(\(3,)f([RED,)g(GREEN,)f(GREEN]\)\))g(=>)i
Fv(e)1211 904 y Fm(2)214 957 y Fu(|)g(\(1,)g(2,)g(\(3,)f([RED,)g(GREEN,)f
(BLUE]\)\))h(=>)g Fv(e)1185 964 y Fm(3)66 1058 y Fw(Executing)16
b(this)f(matc)o(h)f(in)i(the)f(sequen)o(tial,)f(bac)o(ktrac)o(king)h(manner)g
(suggested)h(b)o(y)g(the)f(seman)o(tics)66 1118 y(w)o(ould)g(b)q(e)f
(ine\016cien)o(t.)k(The)c(patterns)g(are)h(largely)e(iden)o(tical,)f
(di\013ering)i(only)g(in)g(the)f(third)h(elemen)o(t)66 1178
y(of)j(a)f(list)f(expression)g(whic)o(h)g(is)h(nested)g(quite)e(deeply)h(in)h
(the)f(patterns,)h(and)g(sequen)o(tial)f(matc)o(hing)66 1238
y(migh)o(t)10 b(w)o(ell)h(cause)g(the)h(argumen)o(t)e(v)m(alue)h(to)h(b)q(e)g
(decomp)q(osed)f(sev)o(eral)g(times,)f(with)h(largely)g(iden)o(tical)66
1298 y(tests)17 b(b)q(eing)f(p)q(erformed)f(eac)o(h)h(time.)140
1359 y(Ev)o(en)d(in)h(examples)e(with)i(minim)o(al)d(bac)o(ktrac)o(king,)i
(the)h(sequen)o(tial)e(nature)j(of)f(the)g(De\014nition's)66
1419 y(matc)o(hing)22 b(pro)q(cess)i(precludes)f(an)o(y)g(e\016cien)o(t)f
(case)h(analysis)h(o)o(v)o(er)e(data)j(constructors.)43 b(In)23
b(the)66 1479 y(example)188 1579 y Fu(fn)i(RED)g(=>)g Fv(e)468
1586 y Fm(1)214 1639 y Fu(|)g(ORANGE)f(=>)h Fv(e)545 1646 y
Fm(2)214 1699 y Fu(|)g(YELLOW)f(=>)h Fv(e)545 1706 y Fm(3)214
1760 y Fu(|)g(GREEN)f(=>)h Fv(e)519 1767 y Fm(4)214 1820 y
Fu(|)g(BLUE)f(=>)h Fv(e)493 1827 y Fm(5)214 1880 y Fu(|)g(INDIGO)f(=>)h
Fv(e)545 1887 y Fm(6)214 1940 y Fu(|)g(VIOLET)f(=>)h Fv(e)545
1947 y Fm(7)66 2040 y Fw(there)17 b(is)h(little)e(bac)o(ktrac)o(king)g(in)o
(v)o(olv)o(ed,)f(y)o(et)i(sequen)o(tial)f(matc)o(hing)g(is)i(still)e
(ine\016cien)o(t)f(compared)66 2101 y(to)i(a)g(single)e(linear)h(switc)o(h.)
140 2161 y(The)g(De\014nition)g(decomp)q(oses)f(record)i(patterns)f(from)f
(left)h(to)g(righ)o(t,)g(but)g(this)g(is)g(essen)o(tially)f(a)66
2221 y(notational)j(con)o(v)o(enience.)j(Since)15 b(SML)j(is)e(a)h(strict)g
(language,)g(there)f(is)h(no)g(obligation)g(to)h(do)f(left-)66
2281 y(to-righ)o(t)h(pattern)g(decomp)q(osition,)e(and)i(it)f(ma)o(y)f(b)q(e)
i(adv)m(an)o(tageous)h(to)f(c)o(ho)q(ose)g(a)g(di\013eren)o(t)f(order.)66
2341 y(In)e(terms)f(of)i(the)f(n)o(um)o(b)q(er)e(of)j(comparisons)f(p)q
(erformed)f(for)h(an)h(arbitrary)f(data)h(v)m(alue,)f(there)g(is)g(no)66
2402 y(o)o(v)o(erall)k(optimal)g(order)h(in)f(whic)o(h)h(to)g(decomp)q(ose)f
(the)h(tuples)f(of)i(this)f(matc)o(h|di\013eren)o(t)d(orders)66
2462 y(will)f(b)q(e)g(optimal)f(for)h(di\013eren)o(t)g(data)h(v)m(alues.)k(A)
16 b(more)f(practical)h(aim)f(migh)o(t)f(b)q(e)j(to)f(minimi)o(se)d(the)66
2522 y(n)o(um)o(b)q(er)19 b(of)h(decision)f(no)q(des)i(in)e(the)h(co)q(de)g
(generated)g(for)g(a)g(matc)o(h;)g(in)f(this)h(case,)g(the)g(problem)66
2582 y(can)d(b)q(e)f(sho)o(wn)h(to)f(b)q(e)h(NP-complete)d([6)o(].)21
b(In)16 b(practice,)f(w)o(e)h(elimi)o(nate)e(bac)o(ktrac)o(king)h(\(example)f
(1\))66 2642 y(and)k(iden)o(tify)e(linear)g(switc)o(hes)g(\(example)f(2\),)j
(and)f(adopt)i(a)e(simple)e(sc)o(heme)g(to)i(c)o(ho)q(ose)h(the)f(most)66
2703 y(appropriate)g(\014rst)g(matc)o(h)d(in)i(a)h(record.)k(The)16
b(details)g(are)g(b)q(ey)o(ond)h(the)f(scop)q(e)g(of)h(this)f(pap)q(er.)140
2763 y(The)e(sc)o(heme)d(adopted)k(for)f(compilation)e(of)i(matc)o(hes)f(and)
h(bindings)g(is)g(based)g(on)h(the)e(concepts)66 2823 y(b)q(ehind)i(an)f
(earlier)f(e\013ort)i(b)o(y)f(Marianne)g(Baudinet)g([6)o(],)g(although)h
(that)g(co)q(de)g(w)o(as)f(written)g(in)g(Lisp)p eop
%%Page: 81 32
bop 66 50 a Fs(CHAPTER)17 b(6.)37 b(COMPILA)l(TION)16 b(FR)o(OM)f(THE)h(CORE)
h(TO)f(LAMBD)o(A)373 b Fw(81)66 203 y Ft(6.7)83 b(The)28 b(Matc)n(h)f
(Compiler)66 313 y Fw(The)15 b(whole)g(area)g(of)h(e\016cien)o(t)c(pattern)k
(matc)o(hing)d(is)i(quite)f(a)h(complex)d(one.)21 b(The)15
b(matc)o(h)f(compiler)66 373 y(impleme)o(n)o(ted)g(for)k(the)f(Kit)g(is)h
(fairly)e(sophisticated,)i(and)g(b)q(ey)o(ond)f(the)h(scop)q(e)g(of)g(this)f
(pap)q(er,)h(but)66 433 y(it)d(is)g(at)h(least)f(necessary)g(to)h(describ)q
(e)f(what)h(it)f(do)q(es,)h(and)g(ho)o(w)f(it)g(in)o(terfaces)f(with)h(the)h
(rest)f(of)g(the)66 493 y(compiler.)k(W)l(e)d(b)q(egin)h(with)f(an)g(o)o(v)o
(erview)f(of)i(the)f(seman)o(tics)e(of)i(pattern)h(matc)o(hing)e(in)g(SML.)
140 554 y(The)h(De\014nition)h(describ)q(es)f(a)i(syn)o(tactic)d(construct)i
(called)f(a)h Fs(matc)o(h)p Fw(,)e(whic)o(h)h(is)h(a)g(list)f(of)i(\(pat-)66
614 y(tern,)25 b(expression\))e(pairs.)44 b(Matc)o(hes)23 b(o)q(ccur)h(in)f
(man)o(y)f(of)i(the)g(con)o(texts)f(where)g(iden)o(ti\014ers)f(are)66
674 y(b)q(ound)17 b(\(sp)q(eci\014cally)l(,)d(case)i(expressions,)g(function)
f(argumen)o(ts)g(and)i(exception)e(handlers\),)g(and)i(it)66
734 y(is)f(con)o(v)o(enien)o(t)f(to)h(in)o(terpret)f(non-recursiv)o(e)g(v)m
(alue)h(bindings)h(in)f(a)g(similar)f(manner.)140 794 y(In)h(fact,)h(case)g
(expressions)g(can)g(b)q(e)g(ignored)g(since)f(they)h(are)g(nothing)g(more)f
(than)h(con)o(v)o(enien)o(t)66 855 y(sugaring)f(for)f(function)g
(application.)20 b(Similarly)l(,)12 b(w)o(e)i(can)h(ignore)f(\\formal")h
(function)f(declarations)66 915 y(using)i Fu(fun)o Fw(,)f(including)g
(curried)g(functions,)g(since)g(they)g(are)g(just)h(shorthand)h(for)f
(\(recursiv)o(e\))d(v)m(alue)66 975 y(bindings)k(to)f(lam)o(b)q(da)g
(expressions.)140 1035 y(Consider)g(the)g(expression)188 1146
y Fu(fn)25 b(\(0,)p 371 1146 16 2 v 43 w(\))h(=>)e Fv(e)537
1153 y Fm(1)214 1206 y Fu(|)h(\()p 294 1206 V 18 w(,)h(0\))f(=>)f
Fv(e)537 1213 y Fm(2)214 1266 y Fu(|)h(\()p 294 1266 V 18 w(,)p
364 1266 V 44 w(\))g(=>)g Fv(e)530 1273 y Fm(3)66 1377 y Fw(This)c(is)g(an)h
(anon)o(ymous)e(function)h(whic)o(h)f(tak)o(es)h(a)g(pair)g(of)g(in)o(tegers)
f(as)i(argumen)o(t.)34 b(The)21 b(SML)66 1437 y(seman)o(tics)15
b(requires)h(that)g(it)h(attempt)e(to)i(matc)o(h)e(its)h(actual)g(parameter)g
(against)h(the)g(patterns)g(in)66 1497 y(sequence,)c(so)h(that)g(calling)f
(it)g(with)g(argumen)o(t)f Fu(\(0,)25 b(0\))13 b Fw(w)o(ould)g(return)h(the)f
(result)g Fv(e)1652 1504 y Fm(1)1671 1497 y Fw(,)h(ev)o(en)e(though)66
1557 y(all)k(three)g(patterns)h(matc)o(h)e(the)h(actual)h(argumen)o(t.)j
(This)d(particular)f(function)g(emplo)o(ys)f(a)i(matc)o(h)66
1618 y(whic)o(h)f(is)g Fs(exhaustiv)o(e)p Fw(,)f(in)h(that)h(ev)o(ery)d(p)q
(ossible)j(actual)f(parameter)f(is)h(matc)o(hed)f(b)o(y)h(some)f(pattern)66
1678 y(\(in)i(fact,)g Fu(\()p 283 1678 V 18 w(,)p 352 1678
V 43 w(\))g Fw(will)f(matc)o(h)f(an)o(y)i(argumen)o(t)f(whic)o(h)g(t)o(yp)q
(ec)o(hec)o(ks\).)22 b(The)17 b(matc)o(h)e(is)i(also)g Fs(irredun-)66
1738 y(dan)o(t)p Fw(,)k(since)e(eac)o(h)h(pattern)g(in)f(the)h(matc)o(h)e
(will)h(b)q(e)h(c)o(hosen)g(for)g(some)f(argumen)o(t.)31 b(Inexhaustiv)o(e)66
1798 y(and)19 b(redundan)o(t)f(matc)o(hes)f(are)h(legal,)g(but)g(the)g
(De\014nition)g(requires)f(that)h(eac)o(h)g(m)o(ust)e(result)i(in)g(a)66
1858 y(w)o(arning)f(message)f(from)f(the)h(compiler.)140 1919
y(W)l(e)j(c)o(ho)q(ose)g(to)h(treat)f(all)g(non-recursiv)o(e)f
Fu(val)h Fw(bindings)g(as)h(instances)f(of)h(pattern)f(matc)o(hing.)66
1979 y(Eac)o(h)e(is)f(an)g(instance)g(of)h(the)f(phrase)h(class)188
2089 y Fu(val)25 b Fk(p)n(at)g Fu(=)g Fk(exp)140 2200 y Fw(A)15
b(simple)f(declaration)i(suc)o(h)g(as)188 2311 y Fu(val)25
b(x)g(=)g(3)66 2421 y Fw(p)q(erforms)c(pattern)g(matc)o(hing)f(on)i(the)f
(pattern)h(consisting)f(of)h(the)f(v)m(ariable)g Fu(x)o Fw(.)37
b(The)21 b(compiler,)66 2481 y(parameterised)15 b(on)i(a)f(scop)q(e)h(for)g
(the)f(declaration,)f(transforms)h(it)g(in)o(to)g(the)g(form)188
2592 y Fu(\(fn)25 b(x)g(=>)g Fk(sc)n(op)n(e)s Fu(\))h(\(3\))66
2702 y Fw(at)17 b(whic)o(h)f(p)q(oin)o(t)g(it)g(can)g(use)g(the)g(matc)o(h)f
(compiler)f(for)i(the)g Fu(fn)g Fw(expression.)140 2763 y(The)k(De\014nition)
g(giv)o(es)f(a)i(formal,)e(op)q(erational,)j(de\014nition)d(of)i(pattern)f
(matc)o(hing.)32 b(A)19 b(v)m(alue)66 2823 y(can)c(b)q(e)g(matc)o(hed)e
(against)j(a)f(pattern)f(in)h(the)f(con)o(text)g(of)h(an)g(en)o(vironmen)o(t)
d(\(whic)o(h)i(is)g(needed)g(only)p eop
%%Page: 80 33
bop 66 50 a Fs(CHAPTER)17 b(6.)37 b(COMPILA)l(TION)16 b(FR)o(OM)f(THE)h(CORE)
h(TO)f(LAMBD)o(A)373 b Fw(80)140 195 y(An)17 b(actual)g(exception)g(v)m(alue)
g(is)g(built)g(when)h(an)g(exception)e(iden)o(ti\014er)g(is)i(encoun)o(tered)
e(in)h(the)66 255 y(con)o(text)e(of)i(an)f(expression.)21 b(It)15
b(is)h(here)f(that)h(v)m(alue-carrying)g(exceptions)f(are)h(distinguished)f
(from)66 315 y(n)o(ullary)h(exceptions.)k(Consider)d(the)f(declaration)188
422 y Fu(exception)23 b(A1)342 482 y(and)i(A2)g(of)f(int)66
588 y Fw(The)17 b(declaration)f(pro)q(duces)h(the)f(bindings)188
695 y Fu(A1)25 b Fp(!)h Fv(l)q(v)381 702 y Fm(1)188 755 y Fu(A2)f
Fp(!)h Fv(l)q(v)381 762 y Fm(2)66 861 y Fw(in)16 b(the)g(CEn)o(v)g(and)188
967 y Fv(l)q(v)228 974 y Fm(1)273 967 y Fp(!)25 b Fu(ref)g("A1")188
1027 y Fv(l)q(v)228 1034 y Fm(2)273 1027 y Fp(!)g Fu(ref)g("A2")66
1134 y Fw(in)15 b(the)f(DEn)o(v.)21 b(If)14 b(iden)o(ti\014er)f
Fu(A1)h Fw(is)g(encoun)o(tered)g(in)g(an)h(expression,)f(the)h(co)q(de)g
(generated)f(retriev)o(es)66 1194 y(the)20 b(string)g(reference)e(and)i
(builds)g(a)g(v)o(ector.)30 b(If)20 b(the)f(iden)o(ti\014er)f
Fu(A2)h Fw(o)q(ccurs,)i(the)e(co)q(de)h(returns)g(a)66 1254
y(closure)c(for)h(a)f(function)g(whic)o(h)g(pairs)h(its)f(argumen)o(t)f(with)
h(the)g(string)g(reference.)140 1314 y(W)l(e)i(no)o(w)g(describ)q(e)g(the)g
(other)h(kinds)f(of)h(declaration.)27 b(Recursiv)o(e)17 b(function)h
(declarations)g(are)66 1375 y(straigh)o(tforw)o(ard;)i(SML)f(disallo)o(ws)f
(an)o(y)h(other)f(kind)g(of)h(ob)s(ject)f(to)g(b)q(e)h(declared)f(recursiv)o
(ely)l(,)e(and)66 1435 y(ev)o(en)21 b(places)f(syn)o(tactic)h(restrictions)f
(on)i(the)f(functions)g(\(recursiv)o(e)f(declarations)h(ma)o(y)e(not,)k(for)
66 1495 y(instance,)16 b(bind)g(v)m(ariables)g(to)h(expressions)f(whic)o(h)f
(just)i(happ)q(en)g(to)g(ha)o(v)o(e)e(functional)h(t)o(yp)q(e\).)140
1555 y(Within)h(a)i Fu(rec)f Fw(declaration)g(\(of)h(whic)o(h)f
Fu(fun)f Fw(is)h(just)h(a)g(syn)o(tactic)e(deriv)o(ed)g(form\),)h(there)g(ma)
o(y)66 1615 y(only)i(b)q(e)f(function)h(bindings)f(and)h(further,)g(nested,)f
(o)q(ccurrences)g(of)h Fu(rec)f Fw(\(whic)o(h)f(serv)o(e)h(no)h(pur-)66
1675 y(p)q(ose\).)26 b(The)17 b(en)o(tire)f(topmost)h Fu(rec)f
Fw(declaration)h(is)g(\015attened)g(out)h(to)g(yield)e(a)h(set)h(of)f(m)o
(utually)e(re-)66 1736 y(cursiv)o(e)f(function)g(bindings,)h(whic)o(h)f(are)h
(then)g(translated)g(in)o(to)f(a)i Fu(FIX)d Fw(declaration)i(in)f(the)h(lam)o
(b)q(da)66 1796 y(language.)140 1856 y(The)e(recursiv)o(e)g(declaration)g(is)
h(compiled)e(in)h(t)o(w)o(o)h(passes.)21 b(The)14 b(\014rst)g(pass)h(assem)o
(bles)d(the)i(func-)66 1916 y(tion)g(iden)o(ti\014ers)f(to)h(b)q(e)h(b)q
(ound)g(and)f(creates)g(new)g(lv)m(ars)g(for)g(them.)19 b(The)14
b(second)h(pass)g(compiles)c(the)66 1976 y(declaration's)16
b(righ)o(t)g(hand)h(sides)f(\(whic)o(h)g(m)o(ust)e(all)i(b)q(e)h(lam)o(b)q
(da)e(expressions\))h(in)g(the)g(outer)g(CEn)o(v)66 2037 y(plus)f(the)g(CEn)o
(v)f(for)h(the)g(function)f(iden)o(ti\014ers.)20 b(The)14 b(resulting)h(lv)m
(ars)g(and)g(compiled)d(functions)j(are)66 2097 y(then)i(assem)o(bled)d(in)o
(to)i(a)h Fu(FIX)n Fw(.)140 2157 y(Finally)i(w)o(e)i(consider)f(plain)h(v)m
(alue)f(bindings.)36 b(These)21 b(are)f(actually)h(the)f(most)g(complicated)
66 2217 y(in)f(terms)f(of)h(the)g(co)q(de)g(generated,)h(b)q(ecause)f(v)m
(alue)g(bindings)g(ma)o(y)e(con)o(tain)i(patterns)h(and)g(m)o(ust)66
2277 y(therefore)c(use)g(the)g(matc)o(h)f(compiler.)140 2338
y(An)g(expression)h(of)h(the)f(form)188 2444 y Fu(let)25 b
Fk(p)n(at)g Fu(=)g Fk(exp)i Fu(in)e Fk(sc)n(op)n(e)g Fu(end)66
2550 y Fw(is)16 b(regarded)h(as)g(the)f(equiv)m(alen)o(t)188
2656 y Fu(\(fn)25 b Fk(p)n(at)g Fu(=>)g Fk(sc)n(op)n(e)p Fu(\))g
Fk(exp)66 2763 y Fw(where)18 b(the)g(lam)o(b)q(da)g(expression)g(con)o(tains)
g(a)g Fk(match)p Fw(.)28 b(V)l(alue)17 b(bindings)i(are)f(therefore)f(dealt)h
(with)66 2823 y(b)o(y)e(the)g(mac)o(hinery)e(resp)q(onsible)i(for)h(function)
f(expressions)g(and)h(applications.)p eop
%%Page: 79 34
bop 66 50 a Fs(CHAPTER)17 b(6.)37 b(COMPILA)l(TION)16 b(FR)o(OM)f(THE)h(CORE)
h(TO)f(LAMBD)o(A)373 b Fw(79)66 195 y(function.)21 b(Empt)o(y)13
b(declarations)i(and)h(in\014x)e(declarations)1162 177 y Fm(4)1197
195 y Fw(are)h(treated)g(similarly)l(.)j(F)l(or)d(phrases)h(of)66
255 y(the)g(form)188 359 y Fu(abstype)23 b Fk(datbind)k Fu(with)d
Fk(de)n(c)i Fu(end)66 464 y Fw(the)c Fk(datbind)g Fw(is)f(discarded.)38
b Fu(local)19 b Fw(and)j(sequen)o(tial)f(declarations)g(are)h(similar)d(to)j
(eac)o(h)g(other;)66 524 y(they)17 b(di\013er)g(only)h(in)f(the)g(CEn)o(v)g
(pro)q(duced)h(as)g(a)g(result.)24 b(In)17 b(b)q(oth)h(cases,)f(the)h
(\014rst)f(declaration)g(is)66 584 y(compiled)10 b(yielding)g(a)i(CEn)o(v)g
Fv(ce)658 591 y Fm(1)689 584 y Fw(and)g(result)f(function)g
Fv(f)1120 591 y Fm(1)1140 584 y Fw(.)20 b(The)12 b(second)f(declaration)h(is)
f(compiled)f(in)66 644 y(an)16 b(en)o(vironmen)o(t)c(augmen)o(ted)i(with)h
Fv(ce)813 651 y Fm(1)832 644 y Fw(,)g(yielding)f Fv(ce)1087
651 y Fm(2)1121 644 y Fw(and)i Fv(f)1239 651 y Fm(2)1258 644
y Fw(.)21 b(The)15 b(resulting)g(CEn)o(v)g(is)f Fv(ce)1818
651 y Fm(1)1846 644 y Fw(+)9 b Fv(ce)1937 651 y Fm(2)66 704
y Fw(\(for)24 b(sequen)o(tial)d(declarations\))i(or)h Fv(ce)809
711 y Fm(2)851 704 y Fw(\(for)f Fu(local)e Fw(declarations\);)26
b(in)d(b)q(oth)h(cases,)g(the)f(result)66 765 y(function)16
b(\(of)h(t)o(yp)q(e)f Fu(LambdaExp)d Fp(!)j Fu(LambdaExp)l
Fw(\))h(is)f Fv(f)1094 772 y Fm(1)1113 765 y Fv(of)1160 772
y Fm(2)1181 765 y Fw(.)140 825 y(Some)d(complexit)o(y)e(arises)k(when)f
(dealing)h(with)f(v)m(alue)g(bindings)h(and)g(exception)f(bindings.)20
b(W)l(e)66 885 y(deal)c(with)g(exception)g(bindings)g(\014rst.)140
945 y(Exceptions)22 b(require)g(rather)i(sophisticated)f(compiler)e(supp)q
(ort,)26 b(for)d(a)h(v)m(ariet)o(y)e(of)i(reasons.)66 1005
y(Exceptions)13 b(are)g(generativ)o(e:)19 b(if)12 b(an)i(exception)e
(declaration)h(serv)o(es)f(to)i(in)o(tro)q(duce)f(a)g(new)g(exception)66
1066 y(\(as)k(opp)q(osed)f(to)g(a)g(new)g(iden)o(ti\014er)d(binding)j(for)f
(an)h(existing)f(exception\),)f(then)i(eac)o(h)f(execution)f(of)66
1126 y(that)19 b(declaration)g(creates)f(a)h(new,)g(distinct,)f(exception.)27
b(\(By)18 b(con)o(trast,)h(datat)o(yp)q(e)g(declarations)66
1186 y(compile)e(to)i(no)g(co)q(de.\))28 b(Exceptions)18 b(ma)o(y)f(b)q(e)i
(n)o(ullary)f(or)h(they)f(ma)o(y)f(carry)h(v)m(alues,)h(in)f(the)g(same)66
1246 y(w)o(a)o(y)f(as)g(constructors.)24 b(And,)16 b(exceptions)g(ma)o(y)f(b)
q(e)i(pattern-matc)o(hed,)e(in)h(whic)o(h)h(case)f(they)h(m)o(ust)66
1306 y(b)q(e)23 b(matc)o(hed)e(sequen)o(tially)f(according)j(to)g(their)e
(dynamic)g(iden)o(tit)o(y)l(,)g(rather)i(than)g(iden)o(ti\014er)e(or)66
1367 y(textual)e(o)q(ccurrence.)29 b(By)19 b(con)o(trast,)h(data)g
(constructors)g(are)f(not)h(generativ)o(e,)e(and)i(ma)o(y)d(not)j(b)q(e)66
1427 y(renamed)c(without)h(losing)g(their)g(constructor)g(status;)h(hence,)e
(constructors)i(in)e(patterns)i(ma)o(y)d(b)q(e)66 1487 y(distinguished)h
(merely)e(b)o(y)i(their)f(iden)o(ti\014ers.)140 1547 y(The)e(represen)o
(tation)h(of)g(exception)f(v)m(alues)g(and)i(pac)o(k)o(ets)e(is)g(describ)q
(ed)h(in)f(Section)g(6.6.1.)21 b(Ho)o(w-)66 1607 y(ev)o(er,)13
b(the)h(dynamic)f(en)o(vironmen)o(t)e(\(DEn)o(v\))j(holds)h(exceptions)e
(simply)f(as)j(string)f(references.)19 b(This)66 1667 y(mak)o(es)f(pattern)i
(matc)o(hing)e(o)o(v)o(er)g(exceptions)h(straigh)o(tforw)o(ard;)i(if)e(they)g
(w)o(ere)f(held)h(in)g(the)g(same)66 1728 y(represen)o(tation)h(as)h(v)m
(alues)f(of)g(t)o(yp)q(e)g Fu(exn)n Fw(,)h(then)f(extra)g(dereferencing)e(w)o
(ould)i(result,)h(and)f(v)m(alue-)66 1788 y(carrying)c(exceptions)g(w)o(ould)
g(ha)o(v)o(e)g(to)g(decomp)q(osed)g(from)f(their)g(closure)h(represen)o
(tations.)140 1848 y(When)22 b(an)h(exception)e(is)h(encoun)o(tered)f(in)h
(the)g(con)o(text)g(of)g(an)h(expression,)g(therefore,)g(it)e(is)66
1908 y(con)o(v)o(erted)e(in)o(to)g(a)h(v)m(alue)f(of)h(t)o(yp)q(e)f
Fu(exn)f Fw(\(whic)o(h)h(is)h(a)f(v)o(ector)g(of)h(length)f(t)o(w)o(o\))h(or)
g(a)g(v)m(alue)f(of)h(t)o(yp)q(e)66 1968 y Fv(\034)32 b Fp(!)25
b Fu(exn)15 b Fw(for)i(some)e Fv(\034)22 b Fw(\(whic)o(h)16
b(is)g(a)g(closure\).)140 2029 y(W)l(e)g(can)g(no)o(w)h(consider)f(exception)
f(declarations)h(in)g(detail.)k(A)c(declaration)g(of)h(the)f(form)188
2133 y Fu(exception)23 b(A)66 2237 y Fw(causes)h(the)f(iden)o(ti\014er)f
Fu(A)h Fw(to)g(b)q(e)h(b)q(ound)g(to)g(a)f(new)h(lv)m(ar)f(in)g(the)g(CEn)o
(v)g(when)g(the)g(declaration)66 2297 y(is)f(compiled;)h(the)f(lv)m(ar)g(is)g
(b)q(ound)h(to)g Fu(ref\("A"\))c Fw(in)j(the)g(DEn)o(v)g(eac)o(h)f(time)g
(the)g(declaration)h(is)66 2357 y(executed.)e(A)c(v)m(alue-carrying)g
(exception)f(is)h(treated)g(iden)o(tically)l(.)j(A)d(declaration)g(of)g(the)g
(form)188 2462 y Fu(exception)23 b(B)i(=)g(A)66 2566 y Fw(in)o(tro)q(duces)17
b(a)g(binding)g(for)g Fu(B)f Fw(to)i Fu(A)o Fw('s)f(lv)m(ar)g(in)f(the)h(CEn)
o(v)f(at)i(compile-tim)o(e)o(,)c(and)j(lea)o(v)o(es)f(the)g(DEn)o(v)66
2626 y(unc)o(hanged)h(at)g(run)o(time)d(\(and)j(in)f(fact,)g(no)g(co)q(de)h
(is)f(generated\).)22 b(Comp)q(ound)16 b(declarations)h(using)66
2686 y Fu(and)f Fw(are)g(straigh)o(tforw)o(ard.)p 66 2727 756
2 v 123 2758 a Fi(4)141 2773 y Fh(In\014x)10 b(declarations)g(\014nd)g(their)
g(w)o(a)o(y)f(in)o(to)h(the)g(abstract)h(syn)o(tax,)f(although)f(they)i(are)f
(omitted)e(from)g(the)j(seman)o(tic)66 2823 y(rules)k(of)e(the)i
(De\014nition.)p eop
%%Page: 78 35
bop 66 50 a Fs(CHAPTER)17 b(6.)37 b(COMPILA)l(TION)16 b(FR)o(OM)f(THE)h(CORE)
h(TO)f(LAMBD)o(A)373 b Fw(78)p 66 159 1890 6 v 185 213 a Fk(Sour)n(c)n(e:)25
b Fp(f)p Fu(C=f\(\),)e(B=f\(\),)h(A=f\(\))p Fp(g)p Fu(;)236
328 y Fk(Co)n(de:)h Fu(LET\(v197)e(=)i(APP\()p Fk(lvar)847
335 y Fg(f)868 328 y Fu(,)h(VOID\):)484 388 y(v198)e(=)h(APP\()p
Fk(lvar)847 395 y Fg(f)868 388 y Fu(,)h(VOID\):)484 448 y(v199)e(=)h(APP\()p
Fk(lvar)847 455 y Fg(f)868 448 y Fu(,)h(VOID\):)484 508 y(VECTOR[v1)o(99)o(,)
d(v198,)h(v197])458 568 y(\))590 724 y Fw(Figure)16 b(6.8:)21
b(Co)q(de)c(generation)g(for)f(records)p 66 781 V 140 906 a(A)o(tomic)c
(expressions)i(of)h(the)f(form)f Fu(let)25 b Fk(de)n(c)h Fu(in)f
Fk(exp)h Fu(end)14 b Fw(cause)g(the)g(declaration)h(to)g(b)q(e)f(com-)66
966 y(piled,)g(yielding)f(a)h(CEn)o(v)g Fk(c)n(e)593 973 y
Fm(1)628 966 y Fw(for)g(the)g(declaration)g(and)h(a)g(function)f
Fv(f)20 b Fw(to)14 b(b)q(e)h(applied)f(to)g(the)g(scop)q(e,)66
1026 y(whic)o(h)i(is)g(the)g(result)g(of)g(compiling)f Fk(exp)i
Fw(in)e(the)h(original)h(CEn)o(v)f(augmen)o(ted)f(with)h Fk(c)n(e)1693
1033 y Fm(1)1713 1026 y Fw(.)66 1170 y Fr(6.6.3)70 b(Compiling)21
b(Expressions)66 1263 y Fw(Expressions)j(are)e(compiled)f(in)h(the)h(con)o
(text)f(of)h(a)g(CEn)o(v,)h(yielding)d(a)i(lam)o(b)q(da)f(expression,)i(as)66
1323 y(follo)o(ws.)k(F)l(unction)18 b(application)g(is)g(fairly)f(simple,)f
(b)q(ecause)j(the)f(t)o(yp)q(e)g(of)h(the)f(functional)g(part)g(is)66
1383 y(not)d(discriminated)d(at)j(application)f(time;)e(instead,)i(the)g
(compiler)e(ensures)i(that)h(it)f(will)f(alw)o(a)o(ys)h(b)q(e)66
1443 y(a)19 b(closure.)25 b(Ho)o(w)o(ev)o(er,)15 b(it)j(is)f(here)g(that)h(w)
o(e)g(deal)f(with)h(p)q(erv)m(asiv)o(e)f(functions,)g(using)h(a)h(mec)o
(hanism)66 1504 y(describ)q(ed)d(in)g(Section)g(6.8.)140 1564
y(F)l(unction)e(\()p Fu(fn)o Fw(\))h(expressions)f(are)h(dealt)f(with)g
(directly)f(b)o(y)h(the)g(matc)o(h)f(compiler)f(\(Section)i(6.7\).)66
1624 y(Exception)k(handling)g(is)g(done)g(at)h(run)o(time)d(b)o(y)h(a)i
(meta-circular)c(in)o(terpreter)i(\(one)h(whic)o(h)f(imple-)66
1684 y(men)o(ts)g(exceptions)g(using)i(exceptions\):)24 b Fu(raise)16
b Fw(expressions)i(are)g(compiled)e(in)o(to)i Fu(RAISE)e Fw(lam)o(b)q(da)66
1744 y(terms)f(and)i Fu(handle)e Fw(expressions)h(are)h(compiled)d(in)o(to)i
Fu(HANDLE)e Fw(lam)o(b)q(da)i(terms,)e(whic)o(h)i(are)g(imple-)66
1805 y(men)o(ted)j(in)h(the)g(lam)o(b)q(da)g(in)o(terpreter)f(with)h
(exceptions.)33 b(In)20 b(the)h(case)f(of)h Fu(HANDLE)n Fw(,)g(the)f(lam)o(b)
q(da)66 1865 y(term)15 b(con)o(tains)h(a)h(function)f Fu(FN)f
Fw(sub-term)h(built)f(b)o(y)h(the)g(matc)o(h)f(compiler.)66
2009 y Fr(6.6.4)70 b(Compiling)21 b(Declarations)66 2102 y
Fw(The)12 b(function)g Fu(compileDe)o(c)d Fw(forms)h(the)i(top-lev)o(el)e(of)
i(the)f(compiler;)g(since)f(w)o(e)i(don't)f(curren)o(tly)f(sup-)66
2162 y(p)q(ort)16 b(the)e(mo)q(dules)g(system,)f(phrases)j(passed)f(to)h(the)
e(compiler)e(corresp)q(ond)k(to)f(core)g(declarations.)66 2222
y Fu(compileDec)e Fw(has)k(t)o(yp)q(e)188 2282 y Fu(CEnv)25
b Fp(!)g Fu(dec)f Fp(!)i Fu(\(CEnv)e Fp(\002)h Fu(\(LambdaExp)d
Fp(!)k Fu(LambdaExp)o(\)\))66 2342 y Fw(as)16 b(explained)e(in)h(Section)f
(6.6.1.)21 b(The)15 b(subsidiary)g(functions)g(for)g(dealing)g(with)g(v)m
(albinds,)g(exbinds)66 2402 y(and)i(so)g(on)g(ha)o(v)o(e)e(similar)f(t)o(yp)q
(es.)140 2463 y(W)l(e)e(shall)g(dismiss)e(the)i(simple)e(cases)j(\014rst.)20
b(T)o(yp)q(e)12 b(declarations)g(pla)o(y)g(almost)f(no)i(part)f(in)g(SML's)66
2523 y(dynamic)k(seman)o(tics,)f(and)i(so)h(the)f(compiler)e(can)i(ignore)g
(their)f(e\013ect)1407 2505 y Fm(3)1427 2523 y Fw(.)23 b(Therefore,)17
b Fu(compileDec)66 2583 y Fw(compiles)c Fu(type)g Fw(and)j
Fu(datatype)c Fw(declarations)i(in)o(to)h(an)g(empt)o(y)e(CEn)o(v)h(together)
h(with)g(the)f(iden)o(tit)o(y)p 66 2628 756 2 v 123 2659 a
Fi(3)141 2674 y Fh(W)m(e)h(sa)o(y)h Fd(almost)f Fh(no)h(part)f(b)q(ecause)j
(there)f(is)e(an)h(obscure)h(situation,)d(highligh)o(ted)h(in)g(the)h(SML)g
(Commen)o(tary)66 2724 y([10)o(],)e(whic)o(h)h(requires)h Ff(datatype)d
Fh(declarations)h(to)h(ha)o(v)o(e)f(an)h(e\013ect)h(at)e(ev)n(aluation)f
(time.)19 b(Ho)o(w)o(ev)o(er,)c(this)g(situation)66 2773 y(o)q(ccurs)h(in)d
(connection)i(with)e(the)i(mo)q(dules)e(system)g(whic)o(h)h(the)h(Kit)e
(curren)o(tly)i(do)q(es)g(not)f(implem)o(en)o(t.)p eop
%%Page: 77 36
bop 66 50 a Fs(CHAPTER)17 b(6.)37 b(COMPILA)l(TION)16 b(FR)o(OM)f(THE)h(CORE)
h(TO)f(LAMBD)o(A)373 b Fw(77)p 66 213 1890 6 v 185 267 a Fk(Sour)n(c)n(e:)25
b Fu(let)f(datatype)f Fv(\013)j Fu(t)f(=)h(T)f(of)g Fv(\013)h
Fu(in)f(T)g(1)g(end)236 382 y Fk(Co)n(de:)g Fu(VECTOR[VEC)o(TOR)o([1)o(,)e
(0]])185 496 y Fk(R)n(esult:)i Fu(val)g(it)g(=)g(T)g(1)h(:)f(int)f(t)185
610 y Fk(Sour)n(c)n(e:)h Fu(let)f(datatype)f Fv(\013)j Fu(t)f(=)h(T)f(of)g
Fv(\013)h Fu(in)f(T)g(end)236 724 y Fk(Co)n(de:)g Fu(VECTOR[FN)d(v192.)i
(VECTOR[v19)o(2,)e(0]])185 838 y Fk(R)n(esult:)j Fu(val)g(it)g(=)g(fn)g(:)g
Fv(\013)h Fp(!)g Fv(\013)g Fu(t)519 994 y Fw(Figure)16 b(6.7:)21
b(Co)q(de)c(for)g(a)f(unary)h(data)g(constructor)p 66 1051
V 140 1175 a(Exception)i(constructors)i(are)f(treated)g(similarly)e(to)j
(data)g(constructors,)g(but)g(with)f(the)g(im-)66 1236 y(p)q(ortan)o(t)25
b(di\013erence)d(that)i(exceptions)e(are)i(generated)f(dynamically)e(during)i
(execution,)h(whic)o(h)66 1296 y(complicates)14 b(matters.)20
b(Eac)o(h)c(time)d(an)j(exception)f(declaration)g(is)h(encoun)o(tered)f(a)h
(new)f(exception)66 1356 y(is)22 b(generated,)i(distinct)d(from)g(an)o(y)h
(exception)g(generated)g(from)f(a)h(previous)h(ev)m(aluation)f(of)g(the)66
1416 y(declaration.)30 b(Eac)o(h)19 b(exception)f(is)g(a)i(\014rst-class)g(v)
m(alue,)f(and)g(can)g(b)q(e)h(regarded)f(as)h(a)f(function)g(\(if)66
1476 y(the)d(exception)f(is)h(v)m(alue-carrying,)g(with)g(t)o(yp)q(e)g
Fv(\013)26 b Fp(!)f Fu(exn)15 b Fw(for)i(some)e(t)o(yp)q(e)h
Fv(\013)p Fw(\))g(or)h(as)g(an)f(exception)66 1537 y(pac)o(k)o(et)11
b(\(if)g(the)g(exception)g(is)g(n)o(ullary)l(,)g(with)h(t)o(yp)q(e)f
Fu(exn)o Fw(\).)19 b(Eac)o(h)12 b(exception)e(m)o(ust,)h(ho)o(w)o(ev)o(er,)g
(b)q(e)g(a)o(v)m(ail-)66 1597 y(able)19 b(for)f(pattern)h(matc)o(hing)e
(\(regardless)h(of)h(whether)f(it)g(is)g(n)o(ullary)g(or)g(unary\),)h(and)g
(exceptions)66 1657 y(only)d(matc)o(h)f(if)h(they)g(are)g(iden)o(tical)e(at)j
(run)o(time.)140 1717 y(The)f(implem)o(en)o(tation)e(sc)o(heme)g(is)j(as)g
(follo)o(ws.)23 b(A)16 b(declaration)g(of)h(a)g(new)g(exception)f(will)f
(bind)66 1777 y(an)g(lv)m(ar)g(to)f(a)h(new)g Fk(string)h(r)n(efer)n(enc)n(e)
p Fw(,)e(regardless)h(of)g(whether)f(the)g(exception)f(carries)h(a)h(v)m
(alue.)20 b(The)66 1838 y(string)h(holds)g(the)f(exception's)g(name)f(for)i
(prin)o(ting.)33 b(This)21 b(represen)o(tation)f(is)g(most)g(con)o(v)o(enien)
o(t)66 1898 y(for)h(pattern)g(matc)o(hing,)f(since)g(exception)f(matc)o(hing)
g(then)i(b)q(ecomes)e(a)i(matter)f(of)g(determining)66 1958
y(iden)o(tit)o(y)e(of)i(references.)31 b(When)20 b(an)g(exception)f(iden)o
(ti\014er)f(is)i(encoun)o(tered)f(in)g(an)i(expression,)f(it)66
2018 y(m)o(ust)g(b)q(e)i(con)o(v)o(erted)e(in)o(to)h(a)h(form)f(consisten)o
(t)g(with)g(a)h(v)m(alue)f(of)h(t)o(yp)q(e)f Fu(exn)f Fw(or)i
Fv(\013)k Fp(!)f Fu(exn)o Fw(.)37 b(F)l(or)66 2078 y(n)o(ullary)18
b(exceptions,)g(the)g(compiled)e(lam)o(b)q(da)h(co)q(de)i(pairs)g(the)f
(string)h(reference)d(with)j Fu(VOID)n Fw(.)28 b(F)l(or)66
2139 y(unary)20 b(exceptions,)f(the)g(co)q(de)h(builds)f(a)h(closure)f(whic)o
(h)g(tak)o(es)g(a)h(v)m(alue)f Fv(x)g Fw(and)h(returns)g(the)f(pair)66
2199 y(\()p Fv(x;)8 b(n)p Fw(\))18 b(where)f Fv(n)h Fw(is)f(the)h(string)f
(reference.)24 b(Note)18 b(once)f(again)h(that)h(the)e(aim)f(is)i(to)g(ha)o
(v)o(e)f(a)h(uni\014ed)66 2259 y(sc)o(heme)11 b(for)j(application,)f
(regardless)g(of)h(the)f(kind)g(of)g(ob)s(ject)g(b)q(eing)g(applied;)g(this)g
(is)g(in)g(con)o(trast)h(to)66 2319 y(the)g(dynamic)d(seman)o(tics)h(of)h
(the)h(De\014nition)f(where)g(there)g(are)g(a)h(n)o(um)o(b)q(er)e(of)h(rules)
g(for)h(application.)140 2379 y(Records)k(\(and)h(tuples\))g(compile)d(to)j
(v)o(ectors,)f(using)h(a)g(canonical)g(represen)o(tation)f(where)g(the)66
2439 y(\014elds)e(are)g(stored)g(according)g(to)g(the)g(lexical)e(ordering)i
(of)g(the)g(\014eld)f(lab)q(els.)21 b(No)16 b(t)o(yp)q(e)f(information)66
2500 y(is)g(needed)g(since)f(record)h(expressions)g(are)g(exhaustiv)o(e)e(in)
i(the)g(lab)q(els.)20 b(Ho)o(w)o(ev)o(er,)13 b(some)h(subtlet)o(y)g(is)66
2560 y(required,)h(since)h(record)g(\014elds)f(m)o(ust)g(b)q(e)i(stored)f(in)
g(canonical)g(order)h(but)f(ev)m(aluated)g(in)g(the)g(order)66
2620 y(in)h(whic)o(h)f(they)g(o)q(ccur)h(in)f(the)g(program,)h(in)f(order)h
(to)g(main)o(tain)e(determinacy)f(where)i(side)g(e\013ects)66
2680 y(migh)o(t)e(b)q(e)i(presen)o(t.)k(This)c(is)f(done)h(b)o(y)f(means)f
(of)i(a)g(set)g(of)f(lo)q(cal)h(declarations)f(whic)o(h)g(ev)m(aluate)g(the)
66 2740 y(\014elds)h(in)f(the)g(required)f(order)i(and)g(then)f(build)g(the)g
(record)h(in)f(canonical)g(order.)21 b(Figure)15 b(6.8)h(giv)o(es)66
2801 y(an)h(example)d(where)i(record)g(\014elds)g(ha)o(v)o(e)g(to)g(b)q(e)h
(reordered.)p eop
%%Page: 76 37
bop 66 50 a Fs(CHAPTER)17 b(6.)37 b(COMPILA)l(TION)16 b(FR)o(OM)f(THE)h(CORE)
h(TO)f(LAMBD)o(A)373 b Fw(76)188 196 y Fu(let)265 256 y(exception)23
b(A)265 316 y(exception)g(B)i(=)g(A)188 376 y(in)265 436 y(raise)f(B)188
497 y(end)66 611 y Fw(results)17 b(in)f(the)g(uncaugh)o(t)h(exception)e
Fu(A)h Fw(b)q(eing)h(rep)q(orted)g(at)f(top)h(lev)o(el,)d(rather)j(than)g
Fu(B)p Fw(.)k(Secondly)l(,)66 671 y(the)16 b(ob)o(vious)g(de\014nition)f(of)h
(lists)f(\(using)h(a)g Fu(datatype)d Fw(declaration\))i(results)g(in)h(t)o(w)
o(o)f(v)o(ectors)g(b)q(eing)66 731 y(allo)q(cated)e(for)g(eac)o(h)e(list)h
(elemen)o(t.)17 b(Both)c(problems)e(can)h(b)q(e)h(circum)o(v)n(en)o(ted)c
(with)j(a)h(little)e(e\013ort,)i(but)66 791 y(this)j(is)f(b)q(ey)o(ond)h(the)
g(scop)q(e)g(of)g(this)f(rep)q(ort.)22 b(The)15 b(issues)h(in)o(v)o(olv)o(ed)
d(in)j(the)f(e\016cien)o(t)f(represen)o(tation)66 852 y(of)j(datat)o(yp)q(es)
g(is)f(discussed)g(further)g(in)g([1].)140 912 y(W)l(e)h(no)o(w)h(consider)f
(the)g(declaration)g(compiler)e(in)i(more)g(detail.)24 b(The)17
b(input)h(to)f(the)h(compiler)66 972 y(is)h(a)h(data)f(structure)g(b)q
(earing)h(a)f(close)f(resem)o(blance)f(to)i(the)g(abstract)g(syn)o(tax)g(of)h
(the)e(SML)h(core)66 1032 y(presen)o(ted)13 b(in)g(the)g(De\014nition)g
(\(pages)h(8{9\),)h(and)f(is)f(therefore)g(not)h(describ)q(ed)f(here.)20
b(Note)13 b(that)g(the)66 1092 y(abstract)k(syn)o(tax)e(of)h(the)g
(De\014nition)f(has)i(b)q(een)e Fk(r)n(esolve)n(d)h Fw(suc)o(h)f(that)i(iden)
o(ti\014ers)d(are)i(distinguished)66 1153 y(as)j(v)m(ariables,)f(data)g
(constructors)h(or)f(exception)f(constructors.)27 b(In)18 b(addition)g(to)g
(this)g(resolution,)66 1213 y(the)g(compiler)e(needs)i(some)f(t)o(yp)q(e)g
(information)g(in)h(order)g(to)g(compile)e(matc)o(hes)g(and)j(c)o(ho)q(ose)f
(data)66 1273 y(represen)o(tations)e(in)g(some)f(circumstances;)f(this)i(is)g
(discussed)g(in)g(Section)g(6.7.)66 1417 y Fr(6.6.2)70 b(Compiling)21
b(A)n(tomic)g(Expressions)66 1510 y Fw(A)o(tomic)12 b(expressions)h(are)h
(compiled)d(as)j(follo)o(ws.)21 b(Sp)q(ecial)13 b(constan)o(ts)h(\(in)o
(tegers,)f(reals)h(and)g(strings\))66 1570 y(ha)o(v)o(e)20
b(direct)f(coun)o(terparts)i(in)f(the)g(lam)o(b)q(da)g(language,)i(and)f(are)
f(trivially)e(compiled)g(in)o(to)j(these)66 1630 y(without)16
b(reference)e(to)h(the)g(CEn)o(v.)21 b(Iden)o(ti\014ers)14
b(are)h(more)f(complicated,)f(since)i(b)o(y)g(this)g(stage)h(they)66
1690 y(ha)o(v)o(e)g(b)q(een)g(resolv)o(ed)f(b)o(y)g(the)h(elab)q(orator)h(in)
o(to)f(one)g(of)g(three)g(classes:)21 b(v)m(ariable,)15 b(data)i(constructor)
66 1750 y(or)j(exception)e(constructor.)29 b(V)l(ariables)19
b(are)g(lo)q(ok)o(ed)f(up)h(in)g(the)g(CEn)o(v)g(yielding)e(lv)m(ars)i
(\(although)66 1811 y(the)f(p)q(erv)m(asiv)o(es)f(are)h(treated)g(sligh)o
(tly)f(di\013eren)o(tly)l(,)f(as)i(describ)q(ed)f(in)h(Section)f(6.8\).)27
b(Nullary)16 b(data)66 1871 y(constructors)j(compile)d(in)o(to)h(pairs)i
(whose)f(\014rst)h(elemen)o(t)c(is)j Fu(VOID)e Fw(and)j(second)f(is)g(an)g
(in)o(teger)f(tag)66 1931 y(denoting)c(the)e(constructor.)20
b(When)12 b(a)g(unary)h(\(v)m(alue-carrying\))e(constructor)h(is)g(applied)f
(to)i(a)f(v)m(alue,)66 1991 y(a)j(pair)f(is)g(built)f(con)o(taining)h(the)f
(v)m(alue)h(and)h(an)f(in)o(teger)f(tag)i(for)f(the)g(constructor.)21
b(The)14 b(v)m(alue)f(itself)66 2051 y(migh)o(t)k(b)q(e)i(a)g(pair)f(\(suc)o
(h)g(as)i(argumen)o(ts)d(to)i(the)f(cons)h(op)q(erator,)h(`)p
Fu(::)o Fw('\);)f(there)f(are)g(more)f(e\016cien)o(t)66 2112
y(represen)o(tations)23 b(for)g(suc)o(h)g(datat)o(yp)q(es,)i(but)e(none)g
(has)h(b)q(een)e(impleme)o(n)o(ted)e(y)o(et.)40 b(Eac)o(h)23
b(unary)66 2172 y(constructor)16 b(is)e(compiled)e(in)o(to)j(a)g(function)f
(expression)h(whic)o(h)e(builds)i(a)g(pair)g(when)f(applied)g(to)h(its)66
2232 y(argumen)o(t)k(\(Figure)g(6.7\).)32 b(\(The)20 b(co)q(de)g(generated)f
(for)h(something)f(lik)o(e)f Fu(2)25 b(::)g(nil)18 b Fw(is,)i(therefore,)66
2292 y(initially)15 b(rather)i(ine\016cien)o(t,)c(but)k(the)f(optimiser)f
(describ)q(ed)h(in)g(Section)g(6.9)h(transforms)f(it)h(in)o(to)f(a)66
2352 y(more)f(sensible)h(form,)e(as)j(sho)o(wn)g(in)f(the)g(\014rst)h
(example)d(of)i(Figure)g(6.7.\))140 2425 y(The)f(compilation)e(of)j
(constructors)g(requires)e(information)g(from)h(the)g(elab)q(orator)h(for)g
(t)o(w)o(o)f(rea-)66 2485 y(sons.)37 b(Firstly)l(,)21 b(the)g(v)m(alue)g(of)g
(the)g(in)o(teger)f(tag)i(dep)q(ends)g(on)g(where)e(the)h(constructor)h(iden)
o(ti\014er)66 2545 y(falls)16 b(alphab)q(etically)g(compared)f(to)i(the)f
(other)g(constructors)h(of)f(the)g(datat)o(yp)q(e.)22 b(Secondly)l(,)15
b(v)m(alue-)66 2606 y(carrying)k(constructors)h(are)f(detected)f(b)o(y)h
(their)f(t)o(yp)q(e;)i(if)f(the)f(constructor)i(has)g(a)f(t)o(yp)q(e)g(whic)o
(h)f(is)66 2666 y(an)23 b(instance)e(of)i Fv(\013)16 b Fp(!)g
Fv(\014)25 b Fw(then)c(it)h(is)f(v)m(alue-carrying.)38 b(The)22
b(compilation)f(of)h(constructors)g(do)q(es)66 2726 y(not)c(require)d(the)i
(CEn)o(v,)f(just)h(as)h(the)e(dynamic)f(seman)o(tics)g(do)q(esn't)i(require)f
(an)h(en)o(vironmen)o(t)d(for)66 2786 y(ev)m(aluation)j(of)f(constructors)h
(\(rule)f(105\).)p eop
%%Page: 75 38
bop 66 50 a Fs(CHAPTER)17 b(6.)37 b(COMPILA)l(TION)16 b(FR)o(OM)f(THE)h(CORE)
h(TO)f(LAMBD)o(A)373 b Fw(75)66 195 y(The)25 b(result)f(of)g(compiling)e(a)j
(declaration)f(is)g(a)h(CEn)o(v)f(for)h(the)f(declaration,)h(plus)g(a)f
(function)66 255 y(whic)o(h,)14 b(when)h(applied)f(to)i(a)f(compiled)d
Fk(sc)n(op)n(e)j Fw(for)g(the)f(declaration,)h(returns)f(a)i(lam)o(b)q(da)e
(expression)66 315 y(corresp)q(onding)k(to)e(the)g(declaration)g(compiled)e
(lo)q(cally)i(for)g(that)h(scop)q(e.)140 376 y(There)22 b(are)h(t)o(w)o(o)f
(reasons)i(for)f(this)g(particular)f(con)o(v)o(en)o(tion.)40
b(The)23 b(\014rst)g(is)f(abstraction|an)66 436 y(alternativ)o(e)13
b(approac)o(h)i(w)o(ould)f(ha)o(v)o(e)f(b)q(een)h(to)h(ha)o(v)o(e)e(the)h
(compiler)e(translate)i(declarations)g(directly)66 496 y(in)o(to)i(lam)o(b)q
(da)e(expressions)i(with)f(some)g(con)o(v)o(en)o(tion)f(for)i(the)g(scop)q(e)
g(of)f(the)h(declaration)f(\(suc)o(h)h(as)g(a)66 556 y(v)o(ector)e(of)h(lv)m
(ars)f(corresp)q(onding)i(to)e(the)g(iden)o(ti\014ers)f(ordered)i
(lexically\),)c(but)k(it)f(is)g(more)f(elegan)o(t)h(to)66 616
y(c)o(ho)q(ose)e(the)f(con)o(v)o(en)o(tion)f(elsewhere,)g(separately)h(from)f
(the)h(compiler)d(itself.)19 b(The)11 b(second)g(reason)h(for)66
677 y(the)17 b(higher-order)f(nature)h(of)g Fu(compileDec)c
Fw(is)j(that)h(it)f(mak)o(es)f(sequen)o(tial)h(and)h(lo)q(cal)f(declarations)
66 737 y(easy)f(to)g(deal)f(with:)20 b(the)14 b(functions)g(resulting)g(from)
g(compilation)e(of)j(the)f(sub-phrases)i(can)e(just)h(b)q(e)66
797 y(comp)q(osed)h(together)h(\(as)f(sho)o(wn)h(in)f(subsection)h(6.6\).)140
857 y(This)j(con)o(v)o(en)o(tion)f(carries)h(do)o(wn)h(in)o(to)f(the)g
(functions)g(priv)m(ate)g(to)h(the)f(compiler.)31 b(F)l(unctions)66
917 y(whic)o(h)16 b(compile)d(expression-lik)o(e)i(phrases)h(\(expressions,)g
(atomic)f(expressions)h(and)g(so)h(on\))f(return)66 978 y(a)f
Fu(LambdaExp)m Fw(.)21 b(F)l(unctions)14 b(whic)o(h)g(compile)e
(declaration-lik)o(e)g(phrases)k(\(declarations,)e(v)m(alue)g(bind-)66
1038 y(ings,)i(and)h(so)g(on\))g(return)f(a)h(function)f(of)g(t)o(yp)q(e)g
Fu(LambdaExp)22 b Fp(!)k Fu(LambdaExp)l Fw(.)140 1098 y(The)14
b(compiler)e(has)k(a)f(simple)d(set)j(of)g(run)o(time)d(data)k(structures,)e
(on)o(to)h(whic)o(h)f(it)g(m)o(ust)g(map)f(the)66 1158 y(run)o(time)h(data)k
(structures)e(\(the)g(dynamic)f(seman)o(tic)f(ob)s(jects\))i(of)h(the)f
(De\014nition.)21 b(The)c(represen-)66 1218 y(tations)g(are)g(as)f(follo)o
(ws:)139 1333 y Fp(\017)24 b Fw(Records)16 b(b)q(ecome)f(v)o(ectors)h(whose)g
(elemen)o(ts)e(represen)o(t)h(the)h(record)g(\014elds)f(in)h(lexical)f
(order.)139 1434 y Fp(\017)24 b Fw(Constructed)d(datat)o(yp)q(es)g(b)q(ecome)
e(pairs)h(\(v)o(ectors)g(of)g(t)o(w)o(o)h(elemen)o(ts\),)d(the)i(\014rst)g
(of)h(whic)o(h)188 1494 y(\(elemen)o(t)c(0\))j(is)g(the)g(argumen)o(t)f(of)h
(the)f(constructor)i(\(or)f Fu(void)e Fw(for)j(n)o(ullary)e(constructors\))
188 1555 y(and)h(the)g(second)f(of)h(whic)o(h)f(is)g(an)h(in)o(teger)e(tag)j
(\()p Fp(\025)e Fw(0\))g(denoting)h(the)f(lexical)f(index)h(of)g(the)188
1615 y(constructor)e(in)f(the)g(datat)o(yp)q(e.)139 1716 y
Fp(\017)24 b Fw(Exception)13 b(constructors)g(in)g(the)g(DEn)o(v)g(are)g
(held)f(as)i(string)f(references;)f(the)h(string)g(con)o(tains)188
1777 y(the)h(exception's)e(name)g(\(the)i(SML)g(iden)o(ti\014er\))d(for)j
(prin)o(ting,)f(and)i(the)e(reference)f(mo)q(dels)g(the)188
1837 y(exception's)j(generativ)o(e)g(b)q(eha)o(viour.)139 1939
y Fp(\017)24 b Fw(Exception)16 b(v)m(alues)g(and)g(pac)o(k)o(ets)f(ha)o(v)o
(e)h(the)f(same)g(represen)o(tation|a)h(pair)g(whose)h(\014rst)f(ele-)188
1999 y(men)o(t)e(is)i(the)g(v)m(alue)g(carried)f(b)o(y)h(the)g(exception)f
(and)h(second)g(elemen)o(t)d(is)j(a)h Fk(string)g(r)n(ef)f
Fw(whic)o(h)188 2059 y(em)o(b)q(o)q(dies)j(the)g(dynamic)f(name)g(of)i(the)f
(exception)g(\(as)h(the)f(address)i(of)e(the)h(reference\))e(as)188
2119 y(w)o(ell)d(as)i(a)g(string)f(for)h(top-lev)o(el)e(prin)o(ting.)139
2221 y Fp(\017)24 b Fw(V)l(alue-carrying)15 b(v)m(alue)g(and)g(exception)f
(constructors)i(compile)d(in)o(to)h(functions)h(whic)o(h)g(build)188
2281 y(a)i(data)g(structure)f(of)h(the)f(appropriate)g(form)g(from)f(their)g
(argumen)o(t.)66 2395 y(There)h(are)g(t)o(w)o(o)f(problems)g(with)g(these)h
(represen)o(tations.)k(Firstly)l(,)14 b(the)i(represen)o(tation)f(for)h
(excep-)66 2455 y(tions)h(means)e(that)i(the)f(expression)p
eop
%%Page: 74 39
bop 66 50 a Fs(CHAPTER)17 b(6.)37 b(COMPILA)l(TION)16 b(FR)o(OM)f(THE)h(CORE)
h(TO)f(LAMBD)o(A)373 b Fw(74)p 66 213 1890 6 v 236 267 a Fu(signature)22
b(LAMBDA)p 651 267 16 2 v 16 w(EXP)j(=)287 328 y(sig)338 388
y(type)f(lvar)338 448 y(type)g(\()p Fv(\013)523 455 y Fm(=)553
448 y Fu(,)h Fv(\014)s Fu(\))f(map)338 568 y(datatype)f Fv(\013)j
Fu(option)d(=)j(NONE)e(|)h(SOME)f(of)h Fv(\013)338 689 y Fu(datatype)e
(LambdaExp)f(=)441 749 y(VAR)i(of)h(lvar)287 b Fw(\(*)26 b
Fk(L)n(amb)n(da)16 b(variables)27 b Fw(*\))390 809 y Fu(|)e(INTEGER)e(of)i
(int)210 b Fw(\(*)26 b Fk(Constants)p Fw(.)8 b(.)g(.)34 b(*\))390
869 y Fu(|)25 b(STRING)e(of)i(string)390 930 y(|)g(REAL)f(of)h(real)390
990 y(|)g(FN)g(of)g(lvar)f Fp(\002)h Fu(LambdaExp)e Fw(\(*)j
Fk(F)l(unction-terms)h Fw(*\))390 1050 y Fu(|)e(FIX)f(of)h(lvar)f(list)h
Fp(\002)g Fu(LambdaExp)d(list)i Fp(\002)i Fu(LambdaExp)1011
1110 y Fw(\(*)g Fk(Mutual)r(ly)19 b(r)n(e)n(cursive)e(fns)26
b Fw(*\))390 1170 y Fu(|)f(APP)f(of)h(LambdaExp)e Fp(\002)i
Fu(LambdaExp)d Fw(\(*)k Fk(F)l(unction)19 b(applic)n(ation)26
b Fw(*\))390 1230 y Fu(|)f(PRIM)p 548 1230 V 17 w(APP)f(of)h(int)g
Fp(\002)g Fu(LambdaExp)e Fw(\(*)j Fk(Primitive)17 b(function)i(applic)n
(ation)26 b Fw(*\))390 1291 y Fu(|)f(VECTOR)e(of)i(LambdaExp)e(list)h
Fw(\(*)i Fk(R)n(e)n(c)n(or)n(ds/tuples)e Fw(*\))390 1351 y
Fu(|)h(SELECT)e(of)i(int)g Fp(\002)g Fu(LambdaExp)d Fw(\(*)k
Fk(Con/r)n(e)n(c)n(or)n(d)16 b(indexing)27 b Fw(*\))390 1411
y Fu(|)e(SWITCH)p 600 1411 V 16 w(I)g(of)g(int)g(Switch)e Fw(\(*)j
Fk(Switch)19 b(on)f(inte)n(gers)26 b Fw(*\))390 1471 y Fu(|)f(SWITCH)p
600 1471 V 16 w(S)g(of)g(string)f(Switch)f Fw(\(*)j Fk(Switch)19
b(on)f(strings)26 b Fw(*\))390 1531 y Fu(|)f(SWITCH)p 600 1531
V 16 w(R)g(of)g(real)f(Switch)g Fw(\(*)i Fk(Switch)19 b(on)e(r)n(e)n(als)25
b Fw(*\))390 1592 y Fu(|)g(RAISE)f(of)h(LambdaExp)105 b Fw(\(*)26
b Fk(R)n(aise)17 b(exc)n(eption)27 b Fw(*\))390 1652 y Fu(|)e(HANDLE)e(of)i
(LambdaExp)e Fp(\002)i Fu(LambdaExp)d Fw(\(*)k Fk(Exc)n(eption)19
b(hand)r(ling)27 b Fw(*\))390 1712 y Fu(|)e(REF)f(of)h(LambdaExp)157
b Fw(\(*)26 b Fu(ref\()p Fk(expr)5 b Fu(\))25 b Fw(*\))390
1772 y Fu(|)g(VOID)466 b Fw(\(*)26 b Fu(nil)o Fk(,)18 b Fu(\(\))e
Fk(etc)27 b Fw(*\))338 1893 y Fu(and)e Fv(\013)h Fu(Switch)d(=)j(SWITCH)d(of)
i Fp(f)p Fu(arg:)f(LambdaExp,)1010 1953 y(selections:)e(\()p
Fv(\013)p Fu(,)j(LambdaExp\))d(map,)1010 2013 y(wildcard:)h(LambdaExp)f
(option)1011 2073 y Fw(\(*)k Fk(Wildc)n(ar)n(d)16 b(mandatory)h(for)25
b Fw(*\))1011 2133 y(\(*)h Fu(REAL)16 b Fk(or)h Fu(STRING)e
Fk(switches)27 b Fw(*\))985 2194 y Fp(g)421 2314 y Fw(\(*)f
Fk(Some)18 b(c)n(onvenient)i(lamb)n(da-building)f(utilities:)52
b Fw(*\))338 2374 y Fu(val)25 b(pair:)f(LambdaExp)e Fp(\002)j
Fu(LambdaExp)e Fp(!)i Fu(LambdaExp)338 2434 y(val)g(first:)e(LambdaExp)g
Fp(!)i Fu(LambdaExp)338 2494 y(val)g(second:)e(LambdaExp)f
Fp(!)k Fu(LambdaExp)338 2555 y(val)f(Let:)f(\(\(lvar)f Fp(\002)j
Fu(LambdaExp\))c Fp(\002)j Fu(LambdaExp\))d Fp(!)k Fu(LambdaExp)287
2615 y(end)605 2771 y Fw(Figure)16 b(6.6:)21 b(The)c(signature)f
Fu(LAMBDA)p 1327 2771 V 17 w(EXP)p 66 2828 1890 6 v eop
%%Page: 73 40
bop 66 50 a Fs(CHAPTER)17 b(6.)37 b(COMPILA)l(TION)16 b(FR)o(OM)f(THE)h(CORE)
h(TO)f(LAMBD)o(A)373 b Fw(73)66 195 y(p)q(ossible)16 b(range)h(of)f(v)m
(alues)g(of)g(the)f(argumen)o(t.)20 b(The)c(wildcard)f(is)h(mandatory)l(,)f
(ho)o(w)o(ev)o(er,)f(for)i(string)66 255 y(and)21 b(real)e(switc)o(hes)g(b)q
(ecause)h(they)g(are)g(generated)f(only)h(as)g(a)h(result)e(of)h(matc)o(hes)e
(in)i(the)f(source)66 315 y(SML)f(program)f(and)g(can)g(nev)o(er)f(b)q(e)h
(exhaustiv)o(e.)23 b(In)16 b(these)h(case)g(the)g(compiler)d(alw)o(a)o(ys)j
(generates)66 376 y(a)g(wildcard)f(whic)o(h)f(is)h(appropriate.)140
436 y(Finally)l(,)g(the)i(lam)o(b)q(da)f(language)i(pro)o(vides)f(for)g
(exception)f(raising)h(and)g(handling.)27 b Fu(RAISE\()p Fv(e)p
Fu(\))66 496 y Fw(raises)17 b(the)g(exception)e(pac)o(k)o(et)h(denoted)h(b)o
(y)f Fv(e)g Fw(\(and)i(whose)f(format)f(is)h(describ)q(ed)f(in)g(Section)g
(6.6\).)66 556 y Fu(HANDLE\()p Fv(e)271 563 y Fm(1)288 556
y Fu(,)25 b Fv(e)362 563 y Fm(2)382 556 y Fu(\))16 b Fw(ev)m(aluates)h
Fv(e)658 563 y Fm(1)677 556 y Fw(;)g(if)f(an)h(exception)f(is)g(propagated,)i
Fv(e)1381 563 y Fm(2)1417 556 y Fw(is)f(ev)m(aluated)f(to)h(yield)f(a)h
Fu(FN)66 616 y Fw(expression,)e(and)i(the)e(result)g(of)h(the)g
Fu(HANDLE)d Fw(expression)i(is)h Fv(e)1241 623 y Fm(2)1276
616 y Fw(applied)f(to)h(the)f(exception)g(pac)o(k)o(et.)66
677 y(An)o(y)h(exception)f(resulting)h(from)f(this)h(application)g(is)g
(propagated)i(out)o(w)o(ard.)140 737 y(It)12 b(can)h(b)q(e)g(seen)g(that)g
(the)g(in)o(terpreter)e(for)i(the)g(lam)o(b)q(da)f(language)i(carries)e(an)h
(implicit)d(dynamic)66 797 y(exception)k(con)o(text)g(during)h(ev)m
(aluation;)g(the)g(in)o(terpreter)e(is)i(describ)q(ed)f(in)h(detail)f(in)h
(Section)f(6.10.)140 857 y(The)h Fu(LAMBDA)p 398 857 16 2 v
17 w(EXP)f Fw(signature)i(con)o(tains)g(some)f(con)o(v)o(enien)o(t)f
(shorthand)j(functions)f(for)g(building)66 917 y(the)g(common)f(forms)g(of)h
(lam)o(b)q(da)g(construct.)21 b(Of)16 b(particular)g(note)h(is)f(the)g(form)
188 978 y Fu(Let\()p Fv(v)r Fu(,)24 b Fv(e)391 985 y Fm(1)410
978 y Fu(,)h Fv(e)484 985 y Fm(2)503 978 y Fu(\))66 1038 y
Fw(whic)o(h)16 b(ev)m(aluates)g(to)188 1152 y Fu(APP\(FN\()p
Fv(v)r Fu(,)22 b Fv(e)467 1159 y Fm(2)487 1152 y Fu(\),)j Fv(e)587
1159 y Fm(1)606 1152 y Fu(\))66 1266 y Fw(This)16 b(is)f(a)h(translation)g
(whic)o(h)f(can)h(b)q(e)f(p)q(erformed)f(safely)h(in)g(the)h(un)o(t)o(yp)q
(ed)f(lam)o(b)q(da)f(language;)i(the)66 1326 y(same)i(is)g(not)g(true)g(in)g
(SML)h(itself,)e(due)h(to)h(the)f(w)o(a)o(y)f(in)h(whic)o(h)g
Fu(let)o Fw(-b)q(ound)h(v)m(ariables)f(ha)o(v)o(e)g(their)66
1386 y(t)o(yp)q(es)e(generalised.)66 1563 y Ft(6.6)83 b(The)28
b(Declaration)f(Compiler)66 1687 y Fr(6.6.1)70 b(Con)n(v)n(en)n(tions)23
b(and)h(Represen)n(tations)66 1779 y Fw(The)17 b(declaration)f(compiler)d
(has)k(t)o(w)o(o)g(purp)q(oses:)139 1839 y Fp(\017)24 b Fw(to)18
b(translate)g(declarations)g(in)f(the)h(SML)f(core)h(language)g(in)o(to)g
(expressions)f(in)h(the)f(lam)o(b)q(da)188 1899 y(language;)139
2001 y Fp(\017)24 b Fw(to)18 b(generate)g(a)g(compiler)d(en)o(vironmen)o(t)g
(\(CEn)o(v\))j(for)g(the)f(v)m(ariables)h(b)q(ound)h(in)e(eac)o(h)h(decla-)
188 2061 y(ration.)66 2121 y(Ho)o(w)o(ev)o(er,)k(since)f(\(SML\))h
(declarations)g(yield)f(en)o(vironmen)o(ts)e(and)k(\(lam)o(b)q(da\))e
(expressions)h(yield)66 2182 y(v)m(alues,)j(there)d(is)h(no)g(ob)o(vious)h
(translation)f(from)f(declarations)h(to)h(lam)o(b)q(da)e(expressions.)41
b(The)66 2242 y(follo)o(wing,)16 b(rather)g(elegan)o(t,)f(con)o(v)o(en)o
(tion)g(is)h(due)g(to)h(Andrew)f(App)q(el)g([3].)140 2302 y(The)g(compiler)e
(is)i(a)g(function)g Fu(compileDec)d Fw(with)j(t)o(yp)q(e)188
2416 y Fu(CEnv)25 b Fp(!)g Fu(dec)f Fp(!)i Fu(\(CEnv)e Fp(\002)h
Fu(\(LambdaExp)d Fp(!)k Fu(LambdaExp)o(\)\))140 2530 y Fw(Ev)o(ery)16
b(SML)h(declaration)h(is)f(treated)g(as)h(if)e(it)h(had)h(a)g
Fk(sc)n(op)n(e)p Fw(.)24 b(F)l(or)17 b(top-lev)o(el)f(declarations,)h(the)66
2590 y(scop)q(e)d(do)q(es)g(not)f(actually)g(exist,)f(although)j(eac)o(h)d
(suc)o(h)h(declaration)g Fk(de)n(c)g Fw(is)g(treated)g(as)h(if)f(it)f(o)q
(ccured)66 2651 y(as)17 b(part)g(of)g(an)f(expression)g(of)h(the)f(form)188
2765 y Fu(let)25 b Fk(de)n(c)h Fu(in)f Fk(sc)n(op)n(e)g Fu(end)p
eop
%%Page: 72 41
bop 66 50 a Fs(CHAPTER)17 b(6.)37 b(COMPILA)l(TION)16 b(FR)o(OM)f(THE)h(CORE)
h(TO)f(LAMBD)o(A)373 b Fw(72)66 195 y(asso)q(ciated)20 b(with)f(SML's)g(sp)q
(ecial)g(v)m(alues,)g(as)h(w)o(ell)e(as)h Fk(switches)h Fw(\(simple)d(case)i
(expressions\))g(o)o(v)o(er)66 255 y(them.)24 b(W)l(e)18 b(consider)f(the)g
(lam)o(b)q(da)g(language)i(to)f(b)q(e)f Fk(untyp)n(e)n(d)p
Fw(,)h(in)f(that)h(there)f(is)g(no)i(pro)o(vision)e(for)66
315 y(de\014ning)d(or)f(expressing)g(t)o(yp)q(es)g(in)g(the)g(language.)22
b(The)13 b(in)o(tegers,)g(strings)g(and)h(reals)f(of)h(the)f(lam)o(b)q(da)66
376 y(language)20 b(can)f(b)q(e)g(considered)f(to)h(ha)o(v)o(e)f(SML)h(t)o
(yp)q(es)g Fu(int)o Fw(,)f Fu(string)f Fw(and)i Fu(real)f Fw(resp)q(ectiv)o
(ely)l(,)e(but)66 436 y(there)g(is)g(no)h(notion)g(of)f(t)o(yp)q(e)g
(abstraction,)g(datat)o(yp)q(e)h(and)g(so)g(on.)140 496 y(The)d(v)m(ariables)
g(of)h(the)f(language)h(are)f(the)g Fs(lv)m(ars)h Fw(in)o(tro)q(duced)f(in)g
(Section)f(6.3.)21 b(Lv)m(ars)16 b(are)e(b)q(ound)66 556 y(in)k(function)g
(\()p Fu(FN)o Fw(\))g(expressions)g(and)g(recursiv)o(e)e(declarations)i(\()p
Fu(FIX)o Fw(\))g(and)g(referenced)f(b)o(y)g Fu(VAR)g Fw(leaf)66
616 y(no)q(des.)k(The)13 b(De\014nition's)f Fs(sp)q(ecial)g(constan)o(ts)h
Fw(map)f(to)g(lam)o(b)q(da-expressions)g(of)h(the)f(kind)g
Fu(INTEGER)n Fw(,)66 677 y Fu(STRING)i Fw(or)j Fu(REAL)n Fw(,)f(whic)o(h)g
(ha)o(v)o(e)f(corresp)q(onding)i(kinds)f(of)g Fs(ob)s(ject)g
Fw(\(Section)g(6.4\).)21 b(Similarly)l(,)13 b(there)66 737
y(is)j(a)g Fu(VOID)e Fw(lam)o(b)q(da)g(constructor)i(whic)o(h)f(yields)f(a)i
Fu(void)e Fw(ob)s(ject.)21 b(\(The)15 b(name)f Fu(VOID)g Fw(is)i(used)f
(rather)66 797 y(than)21 b Fu(UNIT)d Fw(since)i(there)f(are)h(man)o(y)e
(circumstances)g(in)i(whic)o(h)f(a)h Fu(VOID)f Fw(lam)o(b)q(da)g(term)f(migh)
o(t)g(b)q(e)66 857 y(used,)h(and)g(the)f(w)o(ord)h Fu(UNIT)e
Fw(migh)o(t)g(misleadingly)f(suggest)j(some)f(relation)g(to)h(SML's)f
Fu(unit)f Fw(data)66 917 y(ob)s(ject.\))140 978 y(F)l(unction)h(\()p
Fu(fn)o Fw(\))h(expressions)g(are)g(compiled)e(in)o(to)i Fu(FN)f
Fw(expressions)h(in)g(the)f(lam)o(b)q(da)h(language.)66 1038
y(These)e(only)g(tak)o(e)f(a)h(single)f(lv)m(ar)h(as)g(argumen)o(t,)f(so)h(a)
g(fair)g(amoun)o(t)f(of)h(w)o(ork)g(is)f(in)o(v)o(olv)o(ed)f(in)h(trans-)66
1098 y(forming)e(SML)h(function)f(expressions)g(con)o(taining)h(matc)o(hes)d
(in)o(to)j(lam)o(b)q(da)e(functions;)i(most)f(of)g(the)66 1158
y(w)o(ork)j(is)f(done)g(b)o(y)g(the)g Fs(matc)o(h)f(compiler)e
Fw(\(Section)j(6.7\).)140 1218 y(Mutually)f(recursiv)o(e)f(function)i
(de\014nitions)g(compile)e(in)o(to)h Fu(FIX)g Fw(expressions)h(whic)o(h)g
(bind)g(a)g(set)66 1279 y(of)i(lv)m(ars)f(in)f(parallel.)22
b(\(Recall)16 b(that)h(the)g(compiler)d(asso)q(ciates)k(a)f(new)g(lv)m(ar)g
(with)g(eac)o(h)f(v)m(ariable)h(in)66 1339 y(an)i(SML)g(declaration.\))28
b(The)18 b(righ)o(t)h(hand)g(sides)f(of)h(the)f(bindings)h(are)f(exp)q(ected)
g(to)h(b)q(e)f(function)66 1399 y(\()p Fu(FN)p Fw(\))c(expressions.)20
b(The)15 b Fu(APP)e Fw(constructor)i(represen)o(ts)e(application)h(of)h(one)f
(lam)o(b)q(da-expression)g(to)66 1459 y(another)j(in)f(the)g(ob)o(vious)g(w)o
(a)o(y)l(.)21 b Fu(PRIM)p 783 1459 16 2 v 17 w(APP)15 b Fw(is)h(used)g(for)h
(p)q(erv)m(asiv)o(e)e(functions)i(\(the)f Fs(basic)g(v)m(alues)g
Fw(of)66 1519 y(the)g(De\014nition\))g(in)g(a)h(manner)e(describ)q(ed)h(in)g
(Section)f(6.8.)140 1579 y(Corresp)q(onding)h(to)f(the)f(man)o(y)f(data)j(ob)
s(jects)e(of)h(the)g(De\014nition)f(\(records,)g(data)i(constructors,)66
1640 y(exception)i(constructors,)h(references\),)e(the)h(lam)o(b)q(da)f
(language)i(has)g(t)o(w)o(o)f(distinct)g(data)h(manipu-)66
1700 y(lating)e(constructors.)22 b Fu(VECTOR)14 b Fw(tak)o(es)i(a)h(list)e
(of)i(lam)o(b)q(da)e(expressions)i(and)f(returns)h(a)g(\014xed-length)66
1760 y(list)i(of)g(ob)s(jects)f(from)g(whic)o(h)g(elemen)o(ts)e(can)j(b)q(e)g
(extracted)f(using)h(the)g Fu(SELECT)d Fw(constructor.)30 b(\(In)66
1820 y(an)18 b(implem)o(en)n(tation,)c(one)j(w)o(ould)g(exp)q(ect)f(this)h
(to)g(b)q(e)g(an)g(arra)o(y)g(with)g(constan)o(t)g(access)g(time,)d(but)66
1880 y(this)k(is)f(not)h(a)g(requiremen)o(t.)o(\))k Fu(SELECT)16
b Fw(tak)o(es)h(an)h(index)e Fv(i)h Fw(b)q(et)o(w)o(een)g(0)h(and)g
Fv(n)12 b Fp(\000)g Fw(1)17 b(where)h Fv(n)f Fw(is)g(the)66
1941 y(length)g(of)g(the)f(v)o(ector)g(and)h(returns)g(the)f
Fv(i)p Fw('th)g(elemen)o(t)e(\(and)j(is)g(unde\014ned)f(for)h(v)m(alues)g(of)
g Fv(i)d(<)h Fw(0)i(or)66 2001 y Fp(\025)g Fv(n)p Fw(\).)26
b Fu(REF)17 b Fw(is)g(a)h(constructor)h(for)f(creating)f(a)i(reference)d(to)i
(an)g(ob)s(ject)g(using)g(a)g(new)g(address,)h(as)66 2061 y(in)d(the)g
(De\014nition.)140 2121 y(The)f(lam)o(b)q(da)f(language)i(has)f(conditional)g
(expressions)g(o)o(v)o(er)f(the)h(three)f(basic)h(t)o(yp)q(es)f(\(in)o
(tegers,)66 2181 y(strings,)i(reals\);)f(comparison)f(of)h(reals)g(is)g
(assumed)g(to)g(mak)o(e)e(sense)i(b)q(ecause)h(it)e(is)h(required)f(b)o(y)g
(the)66 2242 y(De\014nition.)20 b(There)13 b(are)h(three)f(\\branc)o(h")h(op)
q(erations)g(\()p Fu(SWITCH)p 1269 2242 V 16 w(I)p Fw(,)f Fu(SWITCH)p
1494 2242 V 17 w(S)g Fw(and)h Fu(SWITCH)p 1798 2242 V 16 w(R)p
Fw(\),)f(one)66 2302 y(for)19 b(eac)o(h)f(corresp)q(onding)i(ob)s(ject)e(t)o
(yp)q(e,)h(although)g(the)g(switc)o(hes)f(ha)o(v)o(e)f(iden)o(tical)g
(structure)i(\(and)66 2362 y(in)h(fact)h(the)f(switc)o(h)g(datat)o(yp)q(e)h
(is)f(p)q(olymorphic\).)32 b(A)20 b(switc)o(h)g(can)g(b)q(e)h(considered)f(a)
h(degenerate)66 2422 y Fu(case)16 b Fw(expression:)23 b(it)17
b(has)h(an)f Fk(ar)n(gument)p Fw(,)h(whic)o(h)e(is)h(a)h(lam)o(b)q(da)e
(expression)h(whic)o(h)g(m)o(ust)e(ev)m(aluate)66 2482 y(to)i(a)h(basic)e(v)m
(alue)h(\(constan)o(t\))g(of)g(the)f(correct)g(t)o(yp)q(e,)g(and)h(con)o
(tains)g(a)g(\014nite)f(map)g(from)f(constan)o(ts)66 2543 y(to)20
b(lam)o(b)q(da)e(expressions.)28 b(If)18 b(the)h(argumen)o(t)f(is)g(in)h(the)
f(domain)g(of)h(the)g(map)f(the)g(corresp)q(onding)66 2603
y(lam)o(b)q(da)c(expression)g(from)f(the)h(range)g(is)g(ev)m(aluated)g(as)h
(the)f(v)m(alue)g(of)h(the)f(switc)o(h.)19 b(If)14 b(the)g(map)f(do)q(es)66
2663 y(not)21 b(con)o(tain)f(the)g(argumen)o(t,)g(the)g(switc)o(h)g(ev)m
(aluates)g(and)h(returns)f(its)h(optional)f Fk(wildc)n(ar)n(d)p
Fw(.)33 b(The)66 2723 y(v)m(alue)20 b(of)g(an)g(unmatc)o(hed)e(switc)o(h)h
(with)h(no)g(wildcard)f(is)h(unde\014ned.)31 b(The)20 b(wildcard)f(is)h
(optional)66 2783 y(for)d(in)o(teger)f(switc)o(hes,)g(since)g(the)g(compiler)
e(often)j(kno)o(ws)g(that)g(the)f(switc)o(h)h(is)f(exhaustiv)o(e)g(for)g(the)
p eop
%%Page: 71 42
bop 66 50 a Fs(CHAPTER)17 b(6.)37 b(COMPILA)l(TION)16 b(FR)o(OM)f(THE)h(CORE)
h(TO)f(LAMBD)o(A)373 b Fw(71)p 66 393 1890 6 v 118 451 a Fu(signature)22
b(OBJECTS)h(=)169 511 y(sig)220 571 y(type)h(lvar)220 631 y(type)g(LambdaExp)
311 b Fw(\(*)26 b Fk(F)l(or)17 b(building)i(closur)n(es.)52
b Fw(*\))220 692 y Fu(type)24 b(DEnv)441 b Fw(\(*)26 b Fu(lvar)o
Fp(!)p Fu(object)15 b Fk(envir)n(onment.)52 b Fw(*\))220 752
y Fu(type)24 b(object)220 872 y(val)h(void:)f(object)220 993
y(val)h(integer:)d(int)j Fp(!)g Fu(object)220 1053 y(val)g(deInteger)o(:)e
(object)g Fp(!)j Fu(int)220 1173 y(val)f(real:)f(real)g Fp(!)h
Fu(object)220 1233 y(val)g(deReal:)e(object)g Fp(!)j Fu(real)220
1354 y(val)f(string:)e(string)g Fp(!)j Fu(object)220 1414 y(val)f(deString:)d
(object)i Fp(!)h Fu(string)220 1534 y(val)g(closure:)271 1594
y Fp(f)p Fu(arg:)g(lvar,)e(body:)h(LambdaExp,)e(bodyEnv:)h(DEnv)p
Fp(g)h(!)h Fu(object)893 1655 y Fw(\(*)h Fk(The)18 b Fu(recEnv)d
Fk(p)n(art)i(is)g(cr)n(e)n(ate)n(d)g(empty.)51 b Fw(*\))220
1775 y Fu(val)25 b(deClosure)o(:)271 1835 y(object)f Fp(!)h(f)p
Fu(arg:)f(lvar,)g(body:)g(LambdaExp,)e(bodyEnv:)h(DEnv,)g(recEnv:)h(DEnv)p
Fp(g)220 1956 y Fu(val)h(vector:)e(object)g(list)h Fp(!)i Fu(object)220
2016 y(val)f(select:)e(int)h Fp(\002)i Fu(object)d Fp(!)j Fu(object)220
2136 y(val)f(Ref:)f(object)f Fp(!)j Fu(object)220 2196 y(val)f(deRef:)e
(object)h Fp(!)h Fu(object)220 2317 y(val)g(equal:)e(object)h
Fp(\002)h Fu(object)e Fp(!)j Fu(bool)169 2377 y(end)522 2533
y Fw(Figure)16 b(6.5:)21 b(The)16 b(signature)h Fu(OBJECTS)p
66 2590 V eop
%%Page: 70 43
bop 66 50 a Fs(CHAPTER)17 b(6.)37 b(COMPILA)l(TION)16 b(FR)o(OM)f(THE)h(CORE)
h(TO)f(LAMBD)o(A)373 b Fw(70)p 66 335 1890 6 v 236 389 a Fu(signature)22
b(COMPILER)p 703 389 16 2 v 16 w(ENV)i(=)287 449 y(sig)338
509 y(type)g(CEnv)338 569 y(type)g(var)467 b Fw(\(*)26 b Fk(Unquali\014e)n(d)
19 b(variables)27 b Fw(*\))338 629 y Fu(type)d(longvar)363
b Fw(\(*)26 b Fk(Quali\014e)n(d)19 b(vars)e(\(for)g(lo)n(okup\))26
b Fw(*\))338 689 y Fu(type)e(excon)415 b Fw(\(*)26 b Fk(Unquali\014e)n(d)19
b(exc)n(eption)g(c)n(onstructors)26 b Fw(*\))338 750 y Fu(type)e(longexcon)
311 b Fw(\(*)26 b Fk(Quali\014e)n(d)19 b(exc)n(ons)f(\(for)f(lo)n(okup\))26
b Fw(*\))338 810 y Fu(type)e(lvar)441 b Fw(\(*)26 b Fk(Unique)19
b(lamb)n(da)f(identi\014ers)26 b Fw(*\))338 930 y Fu(val)f(emptyCEnv:)d(CEnv)
338 990 y(val)j(initialCEn)o(v:)d(CEnv)338 1111 y(val)j(declareVar)o(:)d
(\(var)j Fp(\002)g Fu(lvar)f Fp(\002)i Fu(CEnv\))d Fp(!)j Fu(CEnv)338
1171 y(val)f(declareExc)o(on)o(:)e(\(excon)g Fp(\002)j Fu(lvar)e
Fp(\002)h Fu(CEnv\))f Fp(!)h Fu(CEnv)338 1291 y(val)g(plus:)f(CEnv)g
Fp(\002)h Fu(CEnv)f Fp(!)i Fu(CEnv)338 1412 y(datatype)d(result)g(=)j(LVAR)e
(of)h(lvar)748 1472 y(|)h(PRIM)107 b Fw(\(*)26 b Fk(L)n(o)n(oking)17
b(up)h(a)f(value)i(identi\014er)f(wil)r(l)28 b Fw(*\))1011
1532 y(\(*)e Fk(either)18 b(get)h(you)e(a)g(r)n(e)n(al)g(lvar,)26
b Fw(*\))1011 1592 y(\(*)g Fk(or)17 b Fu(PRIM)f Fk(\(which)i(me)n(ans)f(you)h
(have)g(to)25 b Fw(*\))1011 1653 y(\(*)h Fk(extr)n(act)18 b(the)g(inte)n(ger)
h(ar)n(gument)e(and)26 b Fw(*\))1011 1713 y(\(*)g Fk(use)18
b(it)g(in)g(a)f Fu(PRIM)p 1424 1713 V 17 w(APP)f Fk(lamb)n(da-exp\))27
b Fw(*\))338 1833 y Fu(val)e(lookupLong)o(va)o(r:)d(CEnv)j
Fp(!)g Fu(longvar)e Fp(!)i Fu(result)1011 1893 y Fw(\(*)h Fk(Only)19
b Fu(prim)d Fk(should)h(give)i(you)e(b)n(ack)26 b Fw(*\))1011
1953 y(\(*)g Fu(PRIM)16 b Fk(\(and)i(even)h(then)f(it)g(c)n(an)f(b)n(e)26
b Fw(*\))1011 2014 y(\(*)g Fk(overwritten\))h Fw(*\))338 2134
y Fu(val)e(lookupLong)o(ex)o(con)o(:)e(CEnv)h Fp(!)h Fu(longexcon)e
Fp(!)i Fu(lvar)1011 2194 y Fw(\(*)h Fk(L)n(o)n(oking)17 b(up)h(an)g(exc)n(on)
g(must)g(give)26 b Fw(*\))1011 2254 y(\(*)g Fk(you)17 b(an)h(lvar)26
b Fw(*\))338 2375 y Fu(val)f(lvarsOfCEn)o(v:)d(CEnv)i Fp(!)i
Fu(lvar)e(list)287 2435 y(end)579 2591 y Fw(Figure)16 b(6.4:)22
b(The)16 b(signature)h Fu(COMPILER)p 1354 2591 V 15 w(ENV)p
66 2648 1890 6 v eop
%%Page: 69 44
bop 66 50 a Fs(CHAPTER)17 b(6.)37 b(COMPILA)l(TION)16 b(FR)o(OM)f(THE)h(CORE)
h(TO)f(LAMBD)o(A)373 b Fw(69)p 66 159 1890 6 v 236 213 a Fu(signature)22
b(DYNAMIC)p 677 213 16 2 v 16 w(ENV)j(=)287 274 y(sig)338 334
y(type)f(DEnv)338 394 y(type)g(lvar)338 454 y(type)g(object)338
575 y(val)h(emptyDEnv:)d(DEnv)338 635 y(val)j(declare:)e(\(lvar)g
Fp(\002)j Fu(object)d Fp(\002)j Fu(DEnv\))d Fp(!)j Fu(DEnv)338
695 y(val)f(plus:)f(DEnv)g Fp(\002)h Fu(DEnv)f Fp(!)i Fu(DEnv)338
755 y(val)f(REC:)f(DEnv)g Fp(!)i Fu(DEnv)134 b Fw(\(*)26 b
Fk(Semantics)19 b(V4,)f(p48)25 b Fw(*\))338 815 y Fu(val)g(lookup:)e(DEnv)h
Fp(!)i Fu(lvar)e Fp(!)h Fu(object)287 876 y(end)592 1031 y
Fw(Figure)16 b(6.3:)22 b(The)16 b(signature)h Fu(DYNAMIC)p
1341 1031 V 15 w(ENV)p 66 1088 1890 6 v 66 1213 a Fw(\(Section)f(6.5\).)140
1273 y(The)g(simplest)e(run)o(time)g(ob)s(jects)h(corresp)q(ond)j(to)e(the)g
Fs(sp)q(ecial)g(v)m(alues)g Fw(of)g(the)g(De\014nition:)21
b(in)o(te-)66 1333 y(gers,)f(reals)e(and)i(strings.)29 b(In)19
b(addition,)g(there)f(is)h(a)g Fs(v)o(oid)f Fw(ob)s(ject)h(used)g(in)f(the)h
(represen)o(tation)f(of)66 1393 y Fu(unit)f Fw(and)i(of)g(n)o(ullary)e
(exception)h(and)g(data)i(constructors)f(\(Section)e(6.6\).)28
b Fu(vector)16 b Fw(and)j Fu(select)66 1454 y Fw(allo)o(w)i(v)o(ectors)f
(\(non-assignable)j(arra)o(ys\))e(of)g(ob)s(jects)f(to)i(b)q(e)f(built)f(and)
h(decomp)q(osed.)35 b Fu(Ref)20 b Fw(and)66 1514 y Fu(deRef)e
Fw(build)i(and)g(decomp)q(ose)f(references.)30 b Fu(equal)18
b Fw(pro)o(vides)i(equalit)o(y)e(on)i(ob)s(jects;)h(it)e(resp)q(ects)66
1574 y(the)d(iden)o(tit)o(y)f(of)h(references,)f(and)h(is)g(unde\014ned)h(on)
f(closures.)140 1634 y(The)h(represen)o(tation)f(of)h(closures)g(corresp)q
(onds)i(v)o(ery)c(closely)h(to)i(that)f(in)g(the)g(De\014nition,)f(but)66
1694 y(has)d(an)f(extra)f(comp)q(onen)o(t.)19 b Fu(bodyEnv)9
b Fw(and)k Fu(recEnv)c Fw(corresp)q(ond)k(to)f(the)f(elemen)o(ts)e
Fk(E)j Fw(and)g Fk(VE)g Fw(in)f(the)66 1755 y(closures)i(of)h(the)f(seman)o
(tics.)18 b(In)13 b(place)f(of)h(the)g Fs(matc)o(h)p Fw(,)f(w)o(e)h(ha)o(v)o
(e)f(an)i(lv)m(ar)f(and)g(a)h(lam)o(b)q(da)e(expression.)66
1815 y(Where)k(the)g(De\014nition)f(applies)h(the)g(matc)o(h)e(to)j(an)f
(argumen)o(t,)f(w)o(e)g(instead)h(ev)m(aluate)g(the)g(lam)o(b)q(da)66
1875 y(co)q(de)f(in)g(an)g(en)o(vironmen)o(t)d(whic)o(h)i(binds)g(the)h(lv)m
(ar)f(to)h(the)g(argumen)o(t.)k(The)c(dynamic)e(en)o(vironmen)o(t)66
1935 y(signature)g(\(Figure)g(6.3\))g(pro)o(vides)f(the)g Fs(Rec)g
Fw(op)q(eration)i(describ)q(ed)e(in)g(the)g(De\014nition.)20
b(As)13 b(an)g(aside,)66 1995 y(the)19 b(t)o(yp)q(es)g(of)h(ob)s(jects)f(and)
g(dynamic)f(en)o(vironmen)o(ts)e(are)j(m)o(utually)e(recursiv)o(e:)26
b(ob)s(jects)18 b(include)66 2056 y(closures)h(whic)o(h)g(con)o(tain)f
(dynamic)g(en)o(vironmen)o(ts,)e(and)k(dynamic)d(en)o(vironmen)o(ts)g(map)h
(lv)m(ars)h(to)66 2116 y(ob)s(jects.)140 2176 y(There)14 b(are)g(a)g(n)o(um)o
(b)q(er)f(of)i(in)o(v)m(arian)o(ts)e(concerning)h(the)g(op)q(erations)i(on)e
(ob)s(jects:)20 b(the)14 b(unpac)o(king)66 2236 y(op)q(erations)24
b(m)o(ust)c(b)q(e)j(applied)e(to)i(ob)s(jects)f(of)g(the)g(correct)g(t)o(yp)q
(e,)g Fu(select)e Fw(m)o(ust)h(use)h(an)h(index)66 2296 y(within)16
b(an)h(appropriate)g(range)g(for)f(the)g(length)g(of)h(the)f(v)o(ector,)f
(and)h(so)h(on.)66 2472 y Ft(6.5)83 b(The)28 b(Lam)n(b)r(da)f(Language)66
2582 y Fw(W)l(e)19 b(no)o(w)g(describ)q(e)e(the)i(lam)o(b)q(da)e(language)j
(generated)e(b)o(y)g(the)g(compiler.)26 b(The)18 b(signature)h(sp)q(eci-)66
2642 y(fying)g(the)g(lam)o(b)q(da)g(language)h(datat)o(yp)q(e)f(is)g(sho)o
(wn)h(in)f(Figure)g(6.6.)30 b(The)19 b(language)h(is)f(at)h(a)f(lev)o(el)66
2702 y(usually)j(asso)q(ciated)h(with)e(compiler)f(in)o(termedi)o(ate)f(co)q
(des,)k(but)f(the)g(Kit)f(in)o(terprets)g(it)g(directly)66
2762 y(rather)d(than)g(compiling)e(it)h(do)o(wn)h(in)o(to)f(lo)o(w)o(er-lev)o
(el)e(co)q(de.)25 b(The)17 b(lam)o(b)q(da)g(language)i(is)e(essen)o(tially)66
2823 y(lam)o(b)q(da)12 b(calculus)g(with)h(one)g(or)g(t)o(w)o(o)f(simple)f
(extensions.)19 b(It)13 b(con)o(tains)g(constan)o(ts)g(of)g(the)f(base)h(t)o
(yp)q(es)p eop
%%Page: 68 45
bop 66 50 a Fs(CHAPTER)17 b(6.)37 b(COMPILA)l(TION)16 b(FR)o(OM)f(THE)h(CORE)
h(TO)f(LAMBD)o(A)373 b Fw(68)66 195 y(the)17 b(in)o(termediate)d(co)q(de)k
(can)f(b)q(e)g(p)q(erformed)f(with)h(resp)q(ect)g(to)h(an)f(lv)m(ar)g
(without)h(w)o(orrying)f(ab)q(out)66 255 y(the)f(same)g(lv)m(ar)g(b)q(eing)g
(reb)q(ound)h(in)f(a)h(nested)f(scop)q(e)1056 237 y Fm(2)1076
255 y Fw(.)140 315 y(Corresp)q(onding)d(to)g(the)f(v)m(arious)h(en)o
(vironmen)o(ts)c(of)k(the)f(dynamic)e(seman)o(tics,)h(the)h(compiler)d(has)66
376 y(t)o(w)o(o)16 b(kinds,)f(whose)h(in)o(terfaces)e(are)h(sho)o(wn)h(in)f
(Figures)g(6.3)h(and)g(6.4.)21 b(The)16 b Fs(dynamic)d(en)o(vironmen)o(t)p
Fw(,)66 436 y(or)23 b(DEn)o(v,)h(maps)e(lv)m(ars)h(to)g(run)o(time)d(ob)s
(jects.)40 b(The)23 b Fs(compiler)d(en)o(vironmen)o(t)p Fw(,)h(or)i(CEn)o(v,)
h(maps)66 496 y(SML)17 b(v)m(ariables)g(to)g(lv)m(ars.)23 b(CEn)o(vs)17
b(are)g(used)g(during)f(compilation)f(to)j(deal)e(with)h(SML)g(iden)o
(ti\014ers)66 556 y(o)q(ccurring)k(in)g(the)g(source)g(text)f(b)q(eing)h
(compiled;)f(DEn)o(vs)h(are)g(used)g(during)g(execution)f(to)h(deal)66
616 y(with)c(the)f(ev)m(aluation)g(of)g(lv)m(ars.)140 677 y(When)g(a)h
(declaration)f(is)g(compiled,)e(eac)o(h)h(v)m(ariable)h(b)q(ound)i(b)o(y)e
(the)g(declaration)g(is)g(asso)q(ciated)66 737 y(with)d(a)g(new,)g(unique,)f
(lv)m(ar.)20 b(This)12 b(mapping)g(of)h(SML)g(v)m(ariables)f(to)h(lv)m(ars)g
(constitutes)f(the)g(CEn)o(v)h(for)66 797 y(the)i(declaration.)20
b(The)15 b(co)q(de)g(is)f(then)h(executed)e(to)i(yield)e(a)i(set)g(of)g(ob)s
(jects,)f(one)h(for)g(eac)o(h)f(v)m(ariable.)66 857 y(These)22
b(ob)s(jects)g(are)g(b)q(ound)i(to)e(the)g(lv)m(ars)g(to)h(form)e(the)h(DEn)o
(v)g(for)g(this)g(declaration.)39 b(Finally)l(,)66 917 y(the)24
b(CEn)o(v)f(and)h(DEn)o(v)g(are)f(incorp)q(orated)h(in)o(to)g(the)f(top-lev)o
(el)f(en)o(vironmen)o(t.)40 b(In)24 b(subsequen)o(t)66 978
y(declarations,)c(the)f(compiler)e(will)h(translate)i(o)q(ccurrences)f(of)h
(the)f(newly-b)q(ound)h(SML)f(v)m(ariables)66 1038 y(in)o(to)f(their)f
(corresp)q(onding)h(lv)m(ars)g(via)f(the)h(CEn)o(v;)f(during)h(execution,)e
(the)i(lv)m(ars)g(will)e(b)q(e)i(mapp)q(ed)66 1098 y(to)f(their)f(run)o(time)
d(v)m(alues)k(b)o(y)e(the)h(DEn)o(v.)140 1158 y(Recall)23 b(from)h(Section)h
(6.2)g(that)h(the)f(compiler)d(m)o(ust)i(matc)o(h)g(the)g(signature)i
Fu(EVALTOPDEC)66 1218 y Fw(in)d(order)g(to)g(link)f(with)h(the)f(rest)h(of)g
(the)g(system.)39 b(This)23 b(it)g(do)q(es)g(b)o(y)g(implem)o(e)o(n)o(ting)d
(the)j(t)o(yp)q(e)66 1279 y Fu(DynamicBasi)o(s)17 b Fw(as)k(a)f(pair)g(\()p
Fu(CEnv)f Fp(\002)h Fu(DEnv)n Fw(\).)33 b(This)20 b(allo)o(ws)h(SML)f(iden)o
(ti\014ers)f(to)h(b)q(e)g(mapp)q(ed)g(to)66 1339 y(run)o(time)14
b(ob)s(jects)i(b)o(y)g(lo)q(oking)g(them)f(up)h(in)g(the)g(CEn)o(v)g(and)h
(then)f(lo)q(oking)g(up)g(the)g(resulting)g(lv)m(ars)66 1399
y(in)g(the)g(DEn)o(v.)66 1565 y Ft(6.4)83 b(Run)n(time)27 b(Data)h(Ob)5
b(jects)26 b(and)h(Represen)n(tations)66 1675 y Fw(The)13 b(De\014nition)f
(has)i(a)f(large)f(selection)g(of)h(dynamic,)e(or)i(\\run)o(time",)e(data)i
(ob)s(jects,)g(including)f(con-)66 1735 y(structors,)18 b(records,)f
(exception)f(pac)o(k)o(ets,)h(and)h(v)m(arious)g(kinds)f(of)g(en)o(vironmen)o
(t.)22 b(These)17 b(seman)o(tic)66 1795 y(ob)s(jects)e(are)g(de\014ned)f
(abstractly)h(at)g(a)g(fairly)f(high-lev)o(el,)f(and)i(some)f(\(records)g
(and)i(en)o(vironmen)o(ts\))66 1855 y(are)23 b(de\014ned)f(using)h(other)f
(high-lev)o(el)f(constructs)i(\(\014nite)e(maps\).)39 b(The)23
b(compiler)d(has)j(a)g(small)66 1916 y(n)o(um)o(b)q(er)14 b(of)i(simple)d
(data)j(ob)s(jects)f(and)h(a)g(single)f(notion)h(of)f(en)o(vironmen)o(t,)d
(in)k(whic)o(h)e(the)h(seman)o(tic)66 1976 y(ob)s(jects)j(are)g(implem)o(e)o
(n)o(ted.)k(This)c(implem)o(en)o(tation)d(requires)i(the)g(compiler)e(to)j
(mak)o(e)e(c)o(hoices)h(of)66 2036 y(represen)o(tation;)f(some)f(of)h(the)g
(c)o(hoices)g(require)f(information)g(from)g(the)h(t)o(yp)q(ec)o(hec)o(k)o
(er.)140 2096 y(The)h(compiler)e(tak)o(es)i(SML)h(declarations)f(and)h
(generates)g(lam)o(b)q(da)e(co)q(de)i(whic)o(h)e(manipulates)66
2156 y(these)f(ob)s(jects;)g(the)g(compiler)e(therefore)h(needs)h(to)h(b)q(e)
f(a)o(w)o(are)g(of)h(the)f(mapping)f(b)q(et)o(w)o(een)g(seman)o(tic)66
2217 y(ob)s(jects)k(and)h(their)e(represen)o(tations.)26 b(Execution)18
b(of)g(lam)o(b)q(da)f(co)q(de)h(tak)o(es)g(place)f(in)h(\(a)h(represen-)66
2277 y(tation)k(of)s(\))f(the)f(top-lev)o(el)g(en)o(vironmen)o(t,)f(and)i
(pro)q(duces)g(new)g(top-lev)o(el)e(bindings)i(in)g(terms)e(of)66
2337 y(compiler)15 b(ob)s(jects;)i(the)f(mo)q(dule)g(resp)q(onsible)h(for)h
(the)e(top-lev)o(el)g(en)o(vironmen)o(t)e(m)o(ust)i(manipulate)66
2397 y(the)c(ob)s(jects)f(and)h(dynamic)e(en)o(vironmen)o(ts)f(consisten)o
(tly)l(,)i(without)h(in)o(v)m(alidating)f(the)h(abstract)g(view)66
2457 y(of)17 b(program)f(execution)f(whic)o(h)h(the)g(rest)g(of)g(the)g(SML)h
(Kit)f(relies)f(up)q(on.)140 2518 y(The)h(compiler's)d Fu(OBJECTS)g
Fw(signature)k(is)e(sho)o(wn)i(in)f(Figure)f(6.5.)21 b(This)c(is)e(essen)o
(tially)g(an)h(in)o(ter-)66 2578 y(face)d(to)g(a)g(\(hidden\))f(datat)o(yp)q
(e,)i(but)e(there)h(are)f(adv)m(an)o(tages)i(to)f(making)f(the)g(in)o
(terface)g(functional|)66 2638 y(in)19 b(particular,)f(closures)h(are)g
(built)f(in)g(a)h(clean)g(w)o(a)o(y)l(.)28 b(The)19 b(t)o(yp)q(es)f
Fu(lvar)g Fw(and)h Fu(DEnv)n Fw(,)g(as)h(describ)q(ed)66 2698
y(ab)q(o)o(v)o(e,)e(are)f(needed)g(for)h(building)f(closures,)g(as)i(is)e
(the)g(t)o(yp)q(e)g Fu(LambdaExp)e Fw(of)j(lam)o(b)q(da)e(expressions)p
66 2743 756 2 v 123 2774 a Fi(2)141 2789 y Fh(and)e(some)f(cannot;)g(b)q
(eta-reduction)i(of)f(functions,)f(for)h(example,)e(w)o(ould)h(require)i(v)n
(ariable)d(renaming.)p eop
%%Page: 67 46
bop 66 50 a Fs(CHAPTER)17 b(6.)37 b(COMPILA)l(TION)16 b(FR)o(OM)f(THE)h(CORE)
h(TO)f(LAMBD)o(A)373 b Fw(67)p 66 159 1890 6 v 236 213 a Fu(signature)22
b(DYNAMIC)p 677 213 16 2 v 16 w(BASIS)i(=)287 274 y(sig)338
334 y(type)g(Basis)338 454 y(val)h(emptyBasis)o(:)d(Basis)338
514 y(val)j(initialBas)o(is)o(:)e(Basis)338 575 y(val)i(B)p
470 575 V 18 w(plus)p 592 575 V 17 w(B:)g(Basis)f Fp(\002)h
Fu(Basis)f Fp(!)h Fu(Basis)287 635 y(end)567 790 y Fw(Figure)15
b(6.2:)22 b(The)16 b(signature)h Fu(DYNAMIC)p 1315 790 V 16
w(BASIS)p 66 848 1890 6 v 66 972 a(B)p 95 972 16 2 v 19 w(plus)p
218 972 V 16 w(B)p Fw(\).)29 b(The)19 b(rest)g(of)g(the)f(SML)h(kit)g
(accesses)f(the)h(ev)m(aluation)g(mo)q(dules)f(through)h(the)g(in)o(ter-)66
1032 y(faces)g(pro)o(vided)f(b)o(y)h(the)f(signatures)i Fu(EVALTOPDE)o(C)c
Fw(and)j Fu(DYNAMIC)p 1338 1032 V 16 w(BASIS)e Fw(\(Figure)i(6.2\),)g(and)g
(has)66 1092 y(no)e(kno)o(wledge)f(of)g(an)o(y)h(of)f(their)g(in)o(ternals.)
140 1153 y(The)f(compiler)e(con)o(tains)i(a)g(n)o(um)o(b)q(er)f(of)h(mo)q
(dules)g(asso)q(ciated)h(with)f(analysing,)g(compiling)f(and)66
1213 y(executing)23 b(declarations.)42 b(These)23 b(are)g(brough)o(t)h
(together)g(in)e(a)i(single)f(link)m(age)g(mo)q(dule)f(whic)o(h)66
1273 y(compiles)h(and)h(ev)m(aluates)h(top-lev)o(el)d(declarations.)46
b(This)24 b(top-lev)o(el)f(mo)q(dule)g(of)i(the)f(compiler)66
1333 y(translates)13 b(\(core-lev)o(el\))e(declarations)h(to)h(lam)o(b)q(da)f
(co)q(de)g(whic)o(h)g(is)g(fed)g(through)i(a)f(simple)d(optimiser)66
1393 y(and)k(then)f(executed.)19 b(If)13 b(successful,)g(the)g(execution)f
(results)h(in)g(a)g(new)g(set)h(of)f(dynamic)e(bindings)j(to)66
1454 y(add)i(to)g(the)f(top-lev)o(el)f(en)o(vironmen)o(t.)k(As)d(far)h(as)g
(the)f(rest)g(of)h(the)f(Kit)g(is)g(concerned,)g(the)g(in)o(terface)66
1514 y(is)j(just)g(an)g(ev)m(aluator)g(for)g(declarations;)g(the)f(compiler)e
(is)j(totally)f(hidden.)25 b(\(A)o(t)16 b(presen)o(t)h(there)g(is)66
1574 y(some)e(temp)q(orary)g(clutter)g(in)h(this)f(mo)q(dule)g(since)g(w)o(e)
h(do)g(not)g(y)o(et)f(ha)o(v)o(e)g(supp)q(ort)i(for)g(the)e(mo)q(dules)66
1634 y(language,)25 b(and)e(y)o(et)f(require)f(supp)q(ort)j(for)f(top-lev)o
(el)e Fu(local)g Fw(declarations)i(whic)o(h)f(can)h(only)f(b)q(e)66
1694 y(parsed)17 b(as)g(mo)q(dule-lev)o(el)c(constructs.\))140
1755 y(The)g(compilation)f(phase)i(is)g(fairly)f(straigh)o(tforw)o(ard,)h
(and)h(w)o(e)e(describ)q(e)g(it)g(in)g(Section)g(6.6.)21 b(The)66
1815 y(part)c(of)f(the)g(compiler)d(resp)q(onsible)j(for)g(compiling)e
(pattern)i(matc)o(hes,)e(ho)o(w)o(ev)o(er,)h(is)g(sophisticated)66
1875 y(and)g(quite)d(complex;)g(an)i(o)o(v)o(erview)e(is)i(giv)o(en)f(in)g
(Section)g(6.7.)21 b(The)13 b(in)o(terface)g(b)q(et)o(w)o(een)f(the)i(t)o(w)o
(o)f(is)h(a)66 1935 y(data)j(structure)f(called)f(a)i Fk(de)n(cision)g(tr)n
(e)n(e)p Fw(.)k(The)16 b(compiler)e(w)o(orks)i(at)h(the)f(lev)o(el)e(of)i
(dynamic)f(ob)s(jects)66 1995 y(whic)o(h)h(b)q(ear)i(some)d(similarit)o(y)f
(to)j(the)f(ob)s(jects)g(of)h(the)g(De\014nition's)f(dynamic)f(seman)o(tics,)
f(but)j(are)66 2056 y(at)j(a)g(lo)o(w)o(er)f(lev)o(el)f(and)i(m)o(uc)o(h)d
(simpler.)29 b(The)20 b(in)o(termediate)c(lam)o(b)q(da)j(language)i(is)e
(fairly)g(simple,)66 2116 y(as)j(is)g(its)f(in)o(terpretation.)36
b(The)21 b(run)o(time)e(ob)s(jects)i(are)h(discussed)f(in)g(Section)g(6.4,)i
(the)e(lam)o(b)q(da)66 2176 y(language)d(in)e(Section)f(6.5,)h(and)h(the)f
(lam)o(b)q(da)g(in)o(terpreter)e(in)i(Section)g(6.10.)66 2342
y Ft(6.3)83 b(V)-7 b(ariables)27 b(and)h(En)n(vironmen)n(ts)66
2452 y Fw(Where)21 b(the)g(dynamic)f(seman)o(tics)f(retains)j(the)f(notion)h
(of)f(a)h Fs(v)m(ariable)f Fw(in)g(the)g(source)h(language,)66
2512 y(and)f(builds)f(en)o(vironmen)o(ts)e(as)j(mappings)e(from)g(suc)o(h)h
(v)m(ariables,)h(w)o(e)f(in)o(tro)q(duce)f(a)i(new)f(t)o(yp)q(e)g(of)66
2572 y(iden)o(ti\014er,)e(the)g Fs(lv)m(ar)p Fw(,)h(whic)o(h)g(is)f(kno)o(wn)
h(only)g(to)g(the)g(compiler)d(and)k(lam)o(b)q(da)e(in)o(terpreter.)27
b(Lv)m(ars)66 2632 y(are)20 b(represen)o(ted)e(n)o(umerically)e(and)k(are)f
(generated)g(uniquely)f(during)h(compilation.)29 b(Therefore,)66
2693 y(ev)o(en)17 b(though)i(the)e(same)g(SML)h(v)m(ariable)g(can)g(o)q(ccur)
g(in)f(sev)o(eral)g(places)g(in)h(the)f(source)h(text,)f(with)66
2753 y(di\013eren)o(t)h(meanings,)f(an)i(lv)m(ar)g(is)f(b)q(ound)h(exactly)e
(once.)28 b(This)18 b(prop)q(ert)o(y)h(simpli\014es)d(m)o(uc)o(h)g(of)i(the)
66 2813 y(compiler)e(since)h(a)i(lot)f(of)g(en)o(vironmen)o(t)e(analysis)i
(is)g(no)g(longer)h(necessary;)f(man)o(y)e(op)q(erations)k(on)p
eop
%%Page: 66 47
bop 66 50 a Fs(CHAPTER)17 b(6.)37 b(COMPILA)l(TION)16 b(FR)o(OM)f(THE)h(CORE)
h(TO)f(LAMBD)o(A)373 b Fw(66)p 66 213 1890 6 v 236 267 a Fu(signature)22
b(EVALTOPDEC)g(=)287 328 y(sig)338 388 y(type)i(DynamicBasi)o(s)338
448 y(type)g(topdec)338 568 y(datatype)f(result)g(=)j(SUCCESS)d(of)i
(DynamicBa)o(sis)748 629 y(|)h(FAILURE)d(of)i(string)338 749
y(val)g(eval:)f(DynamicBa)o(sis)e Fp(\002)j Fu(topdec)f Fp(!)h
Fu(result)287 809 y(end)602 965 y Fw(Figure)15 b(6.1:)22 b(The)16
b(signature)h Fu(EVALTOPDE)o(C)p 66 1022 V 66 1144 a Fw(e\016ciency)c
(\(whether)i(at)h(the)f(lev)o(el)e(of)j(algorithm)e(complexit)o(y)e(or)j(n)o
(um)o(b)q(ers)f(of)i(op)q(erations\))g(do)g(not)66 1204 y(arise)g(at)h(all)f
(at)g(the)g(seman)o(tic)f(lev)o(el.)140 1264 y(A)k(greater)h(imp)q(etus)f(is)
h(giv)o(en)f(b)o(y)h(the)g(fact)g(that)h(a)f(large)g(p)q(ortion)h(of)g(the)f
(SML)g(Kit)g(can)g(b)q(e)66 1324 y(shared)f(b)q(et)o(w)o(een)d(the)i(in)o
(terpreter)e(and)i(the)g(compiler,)d(and)j(the)g(compiler)d(can)j(b)q
(ene\014t)g(from)e(the)66 1384 y(parser)g(and)g(t)o(yp)q(ec)o(hec)o(k)o(er)d
(for)i(the)h(en)o(tire)e(SML)i(language,)g(plus)f(the)g(o)o(v)o(erall)f(mo)q
(dular)h(sk)o(eleton)g(of)66 1445 y(the)h(in)o(terpreted)f(system.)140
1505 y(It)g(should)g(b)q(e)h(stated)g(that)f(some)g(of)g(the)h(main)e(ideas)h
(in)g(the)g(compiler)e(\(suc)o(h)i(as)h(the)f(adoption)66 1565
y(of)20 b(an)h(in)o(termediate)16 b(lam)o(b)q(da)j(language)i(with)e(unique)g
(v)m(ariables,)h(and)h(the)e(use)h(of)g(higher-order)66 1625
y(functions)d(to)f(compile)e(declarations\))i(w)o(ere)f(\014rst)i(seen)e(in)h
(Standard)i(ML)e(of)g(New)g(Jersey)f([3],)h(and)66 1685 y(the)c(reader)h(is)f
(referred)f(to)i([2])e(for)i(a)g(more)e(extensiv)o(e)f(co)o(v)o(erage)i(of)g
(SML)h(co)q(de)f(generation,)h(together)66 1746 y(with)19 b(some)f(of)h(the)g
(tec)o(hniques)f(emplo)o(y)o(ed)e(in)i(the)h(Kit.)29 b(Su\016ce)18
b(to)i(sa)o(y)f(that)g(the)g(Kit)f(Compiler)66 1806 y(is)j(a)f(lot)h(simpler)
d(in)i(o)o(v)o(erall)f(structure)h(and)h(function,)g(but)f(op)q(erates)h(in)g
(a)f(similar)f(w)o(a)o(y)h(to)g(the)66 1866 y(bac)o(k-end)c(and)h(run)o(time)
d(system)h(of)h(SML/NJ.)66 2032 y Ft(6.2)83 b(Structural)27
b(Ov)n(erview)66 2141 y Fw(The)18 b(SML)f(Kit's)f(ev)m(aluation)i(stage)f
(rev)o(olv)o(es)f(around)i(the)f(concept)g(of)g Fk(dynamic)h(b)n(asis)f
Fw(presen)o(ted)66 2201 y(in)f(the)g(De\014nition.)21 b(The)16
b(ev)m(aluator)g(tak)o(es)g(a)h(dynamic)d(basis)i(represen)o(ting)g(the)f
(curren)o(t)h(top-lev)o(el)66 2262 y(en)o(vironmen)o(t,)e(and)k(a)f(top-lev)o
(el)f(declaration,)g(and)i(attempts)e(to)h(ev)m(aluate)g(it.)22
b(The)17 b(ev)m(aluation)g(is)66 2322 y(either)h(successful,)g(yielding)f
(the)h(dynamic)e(basis)j(corresp)q(onding)g(to)g(the)f(declaration,)g(or)h
(else)f(it)66 2382 y(fails)c(due)h(to)f(an)h(exception)e(propagating)j(to)f
(the)f(top)h(lev)o(el.)j(The)d Fu(EVALTOPDE)o(C)c Fw(signature)k(is)f(giv)o
(en)66 2442 y(in)i(Figure)g(7.1)339 2424 y Fm(1)359 2442 y
Fw(.)140 2512 y(The)j(in)o(terpreter)e(and)j(the)f(compiler)d(eac)o(h)j(form)
f(a)i(subsystem)e(whic)o(h)g(conforms)h(to)g(this)g(in-)66
2572 y(terface.)41 b(The)23 b(implem)o(en)o(tation)d(of)j(the)g(dynamic)e
(basis)j(is)f(di\013eren)o(t)f(in)g(eac)o(h)h(case,)h(although)66
2632 y(b)q(oth)19 b(implem)o(en)o(t)o(ations)d(pro)o(vide)g(the)i(op)q
(erations)h(of)e(the)h(dynamic)e(seman)o(tics)f(\()p Fu(E)p
1661 2632 16 2 v 18 w(in)p 1731 2632 V 18 w(B)p Fw(,)i Fu(E)p
1832 2632 V 18 w(of)p 1902 2632 V 18 w(B)p Fw(,)p 66 2678 756
2 v 123 2708 a Fi(1)141 2723 y Fh(The)g(co)q(de)f(examples)g(ha)o(v)o(e)f(b)q
(een)j(b)q(eauti\014ed)e(sligh)o(tly:)21 b(\\)p Ff(*)p Fh(")16
b(\(for)f(t)o(yp)q(e)i(tuples\))g(is)f(written)g(\\)p Fb(\002)p
Fh(",)g Ff(->)g Fh(\(for)g(the)66 2773 y(function)g(t)o(yp)q(e\))g(is)g(\\)p
Fb(!)p Fh(",)e(and)i(t)o(yp)q(e)g(v)n(ariables)f(are)h(written)g(\\)p
Fc(\013)p Fh(",)f(\\)p Fc(\014)r Fh(")h(and)f(so)h(on)f(\(or)h(\\)p
Fc(\013)1556 2779 y Fi(=)1583 2773 y Fh(",)f(\\)p Fc(\014)1675
2779 y Fi(=)1703 2773 y Fh(")g(if)g(they)h(ha)o(v)o(e)66 2823
y(the)f(equalit)o(y)e(attribute\).)p eop
%%Page: 65 48
bop 66 50 a Fs(CHAPTER)17 b(6.)37 b(COMPILA)l(TION)16 b(FR)o(OM)f(THE)h(CORE)
h(TO)f(LAMBD)o(A)373 b Fw(65)66 195 y(with.)34 b(The)21 b(desire)f(w)o(as)h
(for)g(a)g(to)q(ol)g(whic)o(h)f(w)o(ould)g(allo)o(w)g(c)o(hanges)h(or)g
(additions)g(to)g(the)f(formal)66 255 y(seman)o(tics)15 b(to)i(b)q(e)f
(implem)o(en)o(te)o(d)e(with)i(the)g(minim)n(um)c(of)17 b(e\013ort,)f(so)h
(that)g(they)f(could)g(actually)g(b)q(e)66 315 y(seen)c(in)g(op)q(eration)h
(and)g(pla)o(y)o(ed)e(with)h(\(and)g(this)g(aim)f(has)i(b)q(een)f(ac)o(hiev)o
(ed)e(in)i(a)g(n)o(um)o(b)q(er)f(of)h(pro)s(jects,)66 376 y(including)i
(Extended)g(ML)g([14]\).)20 b(While)13 b(there)h(are)g(a)h(n)o(um)o(b)q(er)d
(of)j(SML)f(compilers)e(in)i(existence)f(or)66 436 y(under)h(dev)o(elopmen)o
(t)d(at)j(presen)o(t,)f(none)h(can)g(b)q(e)g(considered)f(simple)e(enough)k
(to)f(allo)o(w)f(this)h(kind)f(of)66 496 y(exp)q(erimen)o(tation.)24
b(In)18 b(addition,)f(large,)h(commerci)o(al-qualit)o(y)c(compilers)i(tend)i
(to)g(con)o(tain)f(extra)66 556 y(mac)o(hinery)h(required)h(for)h(e\016cien)o
(t)e(co)q(de)j(generation,)g(and)f(this)g(tends)h(to)f(obscure)g(mo)q
(dularit)o(y)l(.)66 616 y(Also,)14 b(there)g(is)g(no)h(motiv)m(ation)e(on)h
(the)g(part)h(of)g(compiler)c(writers)j(to)h(pro)q(duce)f(a)h(piece)e(of)h
(soft)o(w)o(are)66 677 y(whic)o(h)19 b(re\015ects)f(the)h(De\014nition)g(in)g
(its)g(in)o(ternal)f(structure|all)g(that)i(is)f(imp)q(ortan)o(t)f(for)i(suc)
o(h)f(an)66 737 y(impleme)o(n)o(tation)14 b(is)i(adherence)f(to)i(the)f
(language)h(seman)o(tics)e(\\on)i(the)f(outside")g(\(and)h(ev)o(en)e(here,)66
797 y(compilers)f(can)j(v)m(ary\).)140 857 y(Is)d(this)h(then)g(p)q(erhaps)h
(a)f(go)q(o)q(d)i(reason)f Fk(not)g Fw(to)f(implem)o(en)n(t)d(an)o(y)j(kind)g
(of)g(compiler)e(in)h(the)h(SML)66 917 y(Kit?)21 b(P)o(ossibly;)15
b(but)h(it)f(w)o(as)g(considered)g(a)h(useful)f(exercise)f(for)h(the)g
(reasons)i(outlined)e(b)q(elo)o(w,)g(and)66 978 y(in)j(addition,)g(the)g
(highly)f(mo)q(dular)h(nature)g(of)g(the)g(Kit)f(allo)o(w)o(ed)g(the)h
(compiler)d(to)k(b)q(e)f(in)o(tegrated)66 1038 y(in)f(isolation)g(with)f(no)h
(compromises)e(to)i(the)f(structure)h(or)g(op)q(eration)g(of)h(the)e(rest)h
(of)g(the)f(system,)66 1098 y(apart)22 b(from)e(some)h(minim)o(al)d
(information)i(required)g(from)g(the)h(t)o(yp)q(ec)o(hec)o(k)o(er.)33
b(The)21 b(Kit)g(can)g(b)q(e)66 1158 y(built)f(as)h(an)f(in)o(terpreter)f(or)
h(as)h(a)f(compiler)e(from)h(a)i(large)f(b)q(o)q(dy)h(of)f(shared)h(co)q
(de|30000)h(lines)66 1218 y(of)g(the)g(system)e(\(including)h(the)h
(generated)f(parser)h(and)h(all)e(the)g(static)h(seman)o(tics)e(mac)o
(hinery\))66 1279 y(is)g(common)e(b)q(et)o(w)o(een)h(the)g(in)o(terpreter)g
(v)o(ersion)g(\(an)h(additional)g(1500)i(lines\))d(and)h(the)g(compiler)66
1339 y(v)o(ersion)c(\(an)h(additional)f(5500)i(lines\).)140
1399 y(The)i(Kit)h(pro)o(vides)f(a)h(go)q(o)q(d)i(testb)q(ed)e(for)g(exp)q
(erimen)o(tation)d(at)j(the)g(lev)o(el)e(of)i(the)f(formal)g(se-)66
1459 y(man)o(tics.)38 b(New)22 b(ideas)g(for)h(t)o(yp)q(ec)o(hec)o(king,)e
(for)i(example,)e(w)o(ould)h(b)q(e)h(form)o(ulated)d(in)i(the)g(static)66
1519 y(seman)o(tics)13 b(and)i(could)g(them)e(b)q(e)h(implem)o(en)o(ted)d(in)
j(a)h(fairly)f(direct)g(manner)f(in)h(the)h(Kit.)20 b(Similarly)l(,)66
1579 y(alterations)f(in)f(the)g(seman)o(tics)e(of)i(program)g(execution)f
(could)h(b)q(e)h(describ)q(ed)e(formally)g(and)h(then)66 1640
y(impleme)o(n)o(ted.)25 b(Ho)o(w)o(ev)o(er,)17 b(there)h(are)g(exp)q(erimen)o
(ts)e(and)j(pro)s(jects)f(whic)o(h)g(w)o(ould)h(b)q(ene\014t)f(from)g(a)66
1700 y(simple,)f(mo)q(dular,)i(implem)o(en)n(tation)e(of)i(the)f(complete)f
(SML)i(language)h(and)f(y)o(et)f(migh)o(t)f(not)j(fall)66 1760
y(in)o(to)e(an)g(area)g(whic)o(h)f(can)h(b)q(e)g(addressed)g(b)o(y)f(the)g
(formal)g(seman)o(tics.)23 b(This)18 b(is)g(probably)g(unlik)o(ely)66
1820 y(in)g(the)g(case)g(of)h(the)f(static)g(seman)o(tics|t)o(yp)q(e)e
(systems)h(are,)h(b)o(y)g(their)f(v)o(ery)g(nature,)h(formal,)g(and)66
1880 y(can)e(only)f(b)q(e)g(dealt)g(with)g(in)g(a)g(satisfactory)h(manner)e
(using)i(seman)o(tic)d(tec)o(hniques.)19 b(In)c(the)g(case)g(of)66
1941 y(the)k(dynamic)e(seman)o(tics,)g(the)i(situation)g(is)g(rather)g
(di\013eren)o(t.)28 b(Pragmatics)19 b(still)e(pla)o(ys)i(a)g(ma)s(jor)66
2001 y(part)d(in)f(compiler)d(researc)o(h,)i(and)i(program)f(execution)f(can)
h(b)q(e)g(considered)g(indep)q(enden)o(tly)e(of)i(the)66 2061
y(dynamic)f(seman)o(tics.)19 b(In)c(particular,)f(the)h(pro)o(vision)g(of)h
(a)f(functional)g(in)o(termediate)d(language)17 b(\(in)66 2121
y(this)j(case,)h(one)f(related)f(to)i(the)e(lam)o(b)q(da)h(calculus\))f
(means)g(that)h(exp)q(erimen)o(ts)e(whic)o(h)h(are)h(often)66
2181 y(p)q(erformed)d(on)i(the)f(source)g(language)i(\(suc)o(h)e(as)g(co)q
(de)h(instrumen)o(tation\))d(migh)o(t)h(b)q(e)h(done)h(at)f(the)66
2242 y(lev)o(el)d(of)h(the)g(cleaner,)f(simpler,)e(in)o(termediate)h
(language)j(instead.)140 2302 y(F)l(or)h(suc)o(h)g(pragmatic)f(exp)q(erimen)o
(ts,)f(it)h(w)o(as)i(felt)e(that)i(the)f(dynamic)e(seman)o(tics)g(of)j(the)f
(De\014-)66 2362 y(nition)e(fell)e(at)i(to)q(o)h(high)f(a)g(lev)o(el)d(to)j
(b)q(e)g(of)g(direct)f(use.)21 b(While)14 b(the)i(dynamic)e(seman)o(tics)f
(of)j(SML)g(is)66 2422 y(fairly)h(simple,)f(it)i(is)f(simple)f(at)j(a)f(lev)o
(el)e(whic)o(h)h(migh)o(t)f(fail)i(to)g(con)o(vince)f(a)h(compiler)d(writer.)
26 b(The)66 2482 y(dynamic)15 b(seman)o(tic)e(ob)s(jects)j(are)g(at)g(quite)f
(a)h(high-lev)o(el,)e(are)i(built)f(from)g(high-lev)o(el)f(abstractions)66
2543 y(lik)o(e)i(\014nite)h(maps,)g(and)h(sometimes)d(ha)o(v)o(e)i(fairly)f
(complex)g(b)q(eha)o(viour.)25 b(By)17 b(con)o(trast,)h(researc)o(h)f(in)66
2603 y(compilation)i(tec)o(hniques)f(is)i(often)g(concerned)f(with)h
(represen)o(tations)f(of)i(data)f(ob)s(jects)g(and)g(the)66
2663 y(w)o(a)o(ys)d(in)g(whic)o(h)g(suc)o(h)g(ob)s(jects)f(can)i(b)q(e)f
(e\016cien)o(tly)d(manipulated.)23 b(The)17 b(notion)g(of)h(represen)o
(tation)66 2723 y(is)f(di\013eren)o(t)f(to)i(a)f(compiler)e(writer)h(with)h
(his)g(concept)g(of)g(mac)o(hine)e(w)o(ords)j(and)f(memory)l(,)d(to)k(that)66
2783 y(of)i(a)f(theorist)g(who)h(form)o(ulates)d(rules)i(in)g(terms)e(of)j
(en)o(vironmen)o(ts)c(and)k(maps,)e(and)i(concepts)f(of)p eop
%%Page: 64 49
bop 66 527 a Fy(Chapter)40 b(6)66 735 y(Compilatio)q(n)i(from)f(the)f(Core)g
(to)66 859 y(Lam)m(b)s(da)66 1117 y Ft(6.1)83 b(In)n(tro)r(duction)66
1226 y Fw(This)18 b(c)o(hapter)f(describ)q(es)g(a)g(compiler)e(from)i(the)g
(SML)g(core)g(language)i(to)e(a)h(simple)d(in)o(termediate)66
1286 y(co)q(de)k(based)g(on)g(the)g(lam)o(b)q(da)e(calculus.)28
b(It)18 b(forms)f(an)i(optional)g(part)g(of)g(the)f(SML)h(Kit,)f(and)h(the)66
1347 y(in)o(terface)h(presen)o(ted)g(to)h(the)g(rest)f(of)i(the)e(Kit)h(is)f
(the)h(same)f(as)h(that)h(presen)o(ted)e(b)o(y)g(the)h(\\pure")66
1407 y(in)o(terpreter.)28 b(The)19 b(lam)o(b)q(da)f(compiler)e(is)j(not)g(in)
o(tended)f(to)h(b)q(e)g(an)g(example)e(of)i(ho)o(w)g(to)g(generate)66
1467 y(highly)f(e\016cien)o(t)f(co)q(de)i(for)f(SML;)h(instead,)f(it)g(serv)o
(es)g(to)h(illustrate)f(in)g(a)h(clear,)f(mo)q(dular)g(fashion)66
1527 y(some)d(of)g(the)g(tec)o(hniques)f(whic)o(h)h(are)g(needed)g(to)h
(compile)d(core)i(SML)g(in)o(to)g(a)h(simple)d(in)o(termediate)66
1587 y(language.)140 1648 y(The)19 b(Kit)g(is,)h(inasm)o(uc)o(h)e(as)j(it)e
(is)g(p)q(ossible,)i(a)f(direct)e(impleme)o(n)o(tation)f(in)i(SML)h(of)g(the)
g(SML)66 1708 y(De\014nition)f([11],)g(suc)o(h)g(that)g(the)g(in)o(ternal)f
(structure)g(of)i(the)e(compiler)f(re\015ects)h(the)h(ob)s(jects)g(and)66
1768 y(inference)c(rules)i(of)g(the)f(formal)g(seman)o(tics.)21
b(It)16 b(con)o(tains)h(a)g(t)o(yp)q(ec)o(hec)o(k)o(er)d(whic)o(h)i(is)g(a)h
(fairly)f(direct)66 1828 y(co)q(ding)h(of)g(the)f(static)g(seman)o(tics)f(of)
i(SML)f(and)h(a)g(\\pure")g(in)o(terpreter)e(whic)o(h)g(is)h(a)h(corresp)q
(onding)66 1888 y(co)q(ding)22 b(of)f(the)f(dynamic)f(seman)o(tics.)33
b(The)20 b(purp)q(ose)i(of)f(this)g(pap)q(er)g(is)f(to)i(describ)q(e)e(a)h
(mo)q(dular)66 1948 y(extension)i(to)h(the)f(Kit:)34 b(a)24
b(replacemen)o(t)c(in)o(terpreting)i(phase)i(whic)o(h)e(actually)h(compiles)e
(SML)66 2009 y(to)h(a)g(simple)d(in)o(termediate)f(co)q(de)j(and)h(executes)e
(this.)37 b(This)21 b(extension,)g(whic)o(h)g(w)o(e)g(shall)g(refer)66
2069 y(to)f(as)g(\\the)f(compiler",)e(has)j(the)f(same)f(external)g(in)o
(terface)g(as)i(the)e(in)o(terpreter)g(of)h(the)g(dynamic)66
2129 y(seman)o(tics)d(\(henceforth)h(\\the)h(in)o(terpreter"\),)e(all)i
(di\013erences)e(b)q(eing)i(in)o(ternal.)25 b(\(In)17 b(fact,)g(there)g(is)66
2189 y(one)f(di\013erence:)k(the)15 b(compiler)e(will)h(rep)q(ort)i
(inexhaustiv)o(e)e(and)i(redundan)o(t)f(matc)o(hes,)f(since)h(it)f(has)66
2249 y(the)i(mac)o(hinery)e(to)j(do)g(so;)f(the)g(in)o(terpreter)e(do)q(es)j
(not.\))140 2310 y(Our)11 b(motiv)m(ation)f(in)i(designing)f(and)h(implem)o
(en)o(ti)o(ng)d(the)i(compiler)e(w)o(as)j(not)g(e\016ciency;)f(instead,)66
2370 y(it)21 b(w)o(as)g(to)g(pro)q(duce)g(a)h(system)d(to)i(illustrate)f(the)
g(tec)o(hniques)g(needed)g(to)h(compile)d(SML)j(in)o(to)g(a)66
2430 y(simple)11 b(in)o(termediate)f(language.)21 b(If)13 b(these)g(tec)o
(hniques)e(are)i(implem)o(en)o(te)o(d)e(in)h(a)i(clear)e(and)i(mo)q(dular)66
2490 y(fashion,)f(gaining)g(e\016ciency)c(is)j(largely)f(a)h(matter)f(of)h
(re\014nemen)o(t.)17 b(Ho)o(w)o(ev)o(er,)11 b(a)h(compiler)d(whic)o(h)i(has)
66 2550 y(b)q(een)k(constructed)f(with)h(e\016ciency)d(as)j(a)g(driving)f
(force)g(in)h(its)f(design)h(is)f(unlik)o(ely)e(to)j(demonstrate)66
2611 y(its)h(in)o(ternal)g(structures)g(and)h(algorithms)e(in)h(a)h(clear)e
(and)i(mo)q(dular)f(fashion.)140 2671 y(A)f(motiv)m(ation)f(for)i(the)g(SML)f
(Kit)g(w)o(as)i(to)f(ha)o(v)o(e)e(a)i(system)e(whic)o(h)h(w)o(as)h(complete)e
(in)h(its)g(imple-)66 2731 y(men)o(tation)d(of)h(the)g(SML)g(language)h(and)g
(y)o(et)e(op)q(en)h(enough)h(in)f(terms)e(of)i(its)g(in)o(ternal)f(structure)
h(and)66 2791 y(in)o(terfaces)k(to)i(allo)o(w)f(asp)q(ects)g(of)h(its)f(op)q
(eration)h(to)f(b)q(e)g(in)o(v)o(estigated,)f(altered)h(and)g(exp)q(erimen)o
(ted)987 2947 y(64)p eop
%%Page: 63 50
bop 66 50 a Fs(CHAPTER)17 b(5.)37 b(MODULES)17 b(ELABORA)l(TION)869
b Fw(63)140 195 y(The)11 b(implem)o(en)o(tation)e(of)j Fu(unifyTy)d
Fw(and)j Fu(unifyStr)d Fw(follo)o(ws)i(the)h(pro)q(of)g(of)g(Theorem)f(10.3)h
(in)f(the)66 255 y(Commen)o(tary)h(and)k(the)e(notes)h(giv)o(en)f(in)g(the)h
(solution)g(to)g(Exercise)e(10.4)j(in)e(the)g(Commen)o(tary)l(.)k(As)66
315 y(the)11 b(co)q(de)h(is)f(w)o(ell-comm)o(en)o(te)o(d)e(and)j(follo)o(ws)f
(the)g(description)f(in)h(the)g(Commen)o(tary)e(v)o(ery)h(closely)l(,)h(w)o
(e)66 376 y(will)i(giv)o(e)h(only)g(one)g(little)e(remark)h(here.)20
b(In)14 b Fu(unifyTy)d Fw(w)o(e)j(replace)f(the)h(constructor)h(en)o
(vironmen)o(ts)66 436 y(in)i(the)f(argumen)o(t)f(t)o(yp)q(e)h(structures)h(b)
o(y)f(constructor)h(en)o(vironmen)o(ts)d(lo)q(ok)o(ed)i(up)h(in)f(the)g
(assem)o(bly)l(.)66 496 y(The)23 b(reason)g(can)g(b)q(e)g(seen)f(from)f(the)h
(follo)o(wing)h(example.)37 b(Consider)23 b(the)f(elab)q(oration)i(of)e(the)
66 556 y(second)17 b(sharing)g(sp)q(eci\014cation)f(in)g(the)g(follo)o(wing)g
(signature)g(expression)p 66 620 1890 6 v 271 702 a Fu(sig)323
762 y(datatype)22 b(t1)j(=)h(C)f(of)g(int)323 822 y(type)f(t2)323
882 y(sharing)f(type)h(t1)h(=)g(t2)323 942 y(datatype)d(t3)j(=)h(D)f(of)g
(int)323 1003 y(sharing)e(type)h(t2)h(=)g(t3)271 1063 y(end)p
66 1120 V 66 1203 a Fw(If)20 b(w)o(e)f(simply)f(lo)q(ok)i(up)g(the)g
(constructor)g(en)o(vironmen)o(t)e(for)i Fu(t2)f Fw(in)h(the)f(basis)i(w)o(e)
e(get)h(an)g(empt)o(y)66 1263 y(constructor)e(en)o(vironmen)o(t,)d(ignoring)j
(that)g Fu(t2)f Fw(shares)h(with)g Fu(t1)f Fw(and)h(the)f(second)h(sharing)g
(w)o(ould)66 1323 y(\(wrongly\))24 b(app)q(ear)g(to)f(b)q(e)h(legal.)41
b(But)23 b(since)f(the)h(Kit)g(lo)q(oks)h(the)f(t)o(yp)q(e)f(structures)h(up)
h(in)e(the)66 1383 y(assem)o(bly)10 b(w)o(e)i(get)f(the)h(non-empt)o(y)e
(constructor)i(en)o(vironmen)o(t)d(\(with)j(domain)f Fp(f)p
Fu(C)p Fp(g)p Fw(\))g(and)h(so)g(the)g(Kit)66 1443 y(sp)q(ots)k(that)e(the)g
(sharing)h(sp)q(eci\014cation)f(violates)f(the)h(third)g(condition)g(of)g
(consistency)g(\(con\015icting)66 1504 y(non-empt)o(y)h(constructor)i(en)o
(vironmen)o(t)c(domains)j(|)g(De\014nition,)g(Section)f(5.2\).)66
1670 y Ft(5.19)84 b(F)-7 b(unctor)27 b(Signature)g(Matc)n(hing)66
1779 y Fw(W)l(e)22 b(ha)o(v)o(e)e(not)j(implem)o(e)o(n)o(ted)18
b(functor)k(signature)g(matc)o(hing)e([11,)j(Section)e(5.15])h(as)g(this)f
(is)h(not)66 1839 y(required)15 b(for)i(the)f(execution)f(of)i(programs.)66
2005 y Ft(5.20)84 b(Files)66 2115 y Fw(The)17 b(relev)m(an)o(t)e(\014les)h
(are)g(listed)f(b)q(elo)o(w.)22 b(They)16 b(all)f(reside)h(in)g(directory)f
Fu(Common)p Fw(.)91 2272 y Fx(File)540 b(Con)n(tains)91 2393
y Fu(MODULE)p 250 2393 16 2 v 17 w(STATOBJEC)o(T.s)o(ml)98
b Fw(Signature)16 b(for)h(the)f(seman)o(tic)e(ob)s(jects)91
2453 y Fu(MODULE)p 250 2453 V 17 w(ENVIRONME)o(NTS)o(.s)o(ml)47
b Fw(Signature)16 b(for)h(the)f(en)o(vironmen)o(ts)91 2513
y Fu(MODULE)p 250 2513 V 17 w(UNIFY.sml)226 b Fw(Signature)16
b(for)h(the)f(admissication)f(pro)q(cess)91 2573 y Fu(ModuleStatO)o(bje)o(ct)
o(.sm)o(l)117 b Fw(Seman)o(tic)14 b(ob)s(jects)91 2633 y Fu(ModuleEnvir)o
(onm)o(en)o(ts.)o(sml)65 b Fw(The)16 b(en)o(vironmen)o(ts)d(of)k(the)f(seman)
o(tic)e(ob)s(jects)91 2694 y Fu(ModuleUnify)o(.sm)o(l)245 b
Fw(The)16 b(admissi\014cation)f(pro)q(cess)91 2754 y Fu(ElabTopdec.)o(sml)270
b Fw(The)16 b(Mo)q(dules)g(Elab)q(orator)i(corresp)q(onding)f(to)g(the)f
(inference)e(rules)p eop
%%Page: 62 51
bop 66 50 a Fs(CHAPTER)17 b(5.)37 b(MODULES)17 b(ELABORA)l(TION)869
b Fw(62)66 195 y(to)15 b(elab)q(orate)g(the)f(signature)h(expression)f
(\(corresp)q(onding)h(to)g(an)g(application)f(of)h(either)e(rule)h(63)h(or)66
255 y(rule)g(64\).)21 b(Then)15 b(w)o(e)g(simply)e(follo)o(w)h(the)h
(description)f(in)h(the)f(Commen)o(tary)f(p.)h(113,)i(and)g(c)o(hec)o(k)d
(for)66 315 y(co)o(v)o(er,)i(w)o(ell-formedness)f(of)j(the)f(signature,)g(t)o
(yp)q(e-explicitness,)e(and)j(return)f(the)g(equalit)o(y)f(princi-)66
376 y(pal)i(signature)g(if)g(it)f(exists.)22 b(The)17 b(only)g(op)q(eration)g
(whic)o(h)f(w)o(e)h(ha)o(v)o(e)f(not)h(already)g(describ)q(ed)f(is)g(the)66
436 y(c)o(hec)o(k)d(for)i(w)o(ell-formedness)d(of)i(a)h(signature.)21
b(It)14 b(is)g(implem)o(en)o(te)o(d)e(in)i(functor)g Fu(ModuleStat)o(Obj)o
(ect)66 496 y Fw(b)o(y)i(function)g Fu(wellformeds)o(ig)d Fw(sp)q(eci\014ed)i
(in)h Fu(MODULE_STAT)o(OBJ)o(EC)o(T)d Fw(b)o(y)p 66 561 1890
6 v 271 641 a Fu(val)25 b(wellformed)o(sig)d(:)j(NameSet)e(*)i(Str)g(->)g
(bool)p 66 708 V 66 790 a Fw(The)16 b(nameset)f(argumen)o(t)f(is)i(supp)q
(osed)h(to)f(b)q(e)g(the)g(set)f(of)h(rigid)g(names)f(in)g(the)h(basis)g(in)f
(whic)o(h)g(the)66 850 y(c)o(hec)o(k)e(is)h(p)q(erformed.)19
b(The)14 b(implem)o(en)o(tati)o(on)e(recursiv)o(ely)g(tra)o(v)o(erses)h(the)h
(structure)g(argumen)o(t;)f(for)66 910 y(eac)o(h)k(substructrue)g(\()p
Fv(m;)8 b(E)s Fw(\))17 b(it)f(is)h(c)o(hec)o(k)o(ed)d(that)k(if)e
Fv(m)h Fw(is)g(rigid)f(\(is)h(in)g(the)g(nameset\),)e(then)i(all)f(the)66
970 y(free)g(names)f(in)g Fv(E)20 b Fw(are)c(rigid)f(to)q(o.)22
b(If)16 b(this)g(holds)g(for)h(all)e(the)h(substructures)g(then)g(the)g
(signature)g(is)66 1031 y(w)o(ell-formed.)66 1174 y Fr(5.18.3)71
b(Rule)21 b(84)j(|)e(Datat)n(yp)r(e)h(descriptions)66 1267
y Fw(Here)f(w)o(e)g(use)g(the)g(same)f(idea)h(as)h(for)g(datat)o(yp)q(e)f
(bindings)h(in)f(the)g(Core)h(Elab)q(orator,)i(see)c(Sec-)66
1327 y(tion)c(4.2.6.)66 1471 y Fr(5.18.4)71 b(Rules)21 b(88{90)k(|)e(Sharing)
g(equations)66 1563 y Fw(Recall)17 b(from)g([10)q(,)h(Section)f(10.4])i(that)
f(the)g(admissi\014cation)f(pro)q(cess)i(m)o(ust)e(b)q(e)h(in)o(v)o(ok)o(ed)e
(for)j(eac)o(h)66 1623 y(sharing)14 b(sp)q(eci\014cation.)20
b(Admiss\014cation)12 b(is)h(implem)o(en)n(ted)d(in)j(functor)g
Fu(ModuleUnify)d Fw(b)o(y)i(the)h(func-)66 1684 y(tions)k Fu(unifyTy)d
Fw(and)i Fu(unifyStr)p Fw(,)d(whic)o(h)j(are)g(sp)q(eci\014ed)g(in)g
(signature)g Fu(MODULE_UNIF)o(Y)p Fw(:)p 66 1748 V 271 1828
a Fu(datatype)23 b(UnifyResult)f(=)374 1889 y(OK)j(of)g(Realisatio)o(n)323
1949 y(|)g(ERROR)f(of)h(ErrorInfo)271 2009 y(val)g(unifyStr:)d(NameSet)h(*)j
(Assembly)c(*)630 2069 y(\(StrName)h(*)i(longstrid\))d(list)i(->)h
(UnifyResult)271 2129 y(and)g(unifyTy)e(:)i(NameSet)e(*)j(Assembly)c(*)630
2190 y(\(TyStr)75 b(*)25 b(longtycon\))d(list)i(->)h(UnifyResult)p
66 2256 V 66 2341 a Fw(If)15 b(the)f(admissi\014cation)f(succeeds,)h(it)h
(returns)f(the)h(most)e(general)i(admissi\014er)e(\(c.f.,)g(Theorem)g(10.3)66
2402 y(in)k(the)g(Commen)o(tary\),)e(and)j(this)f(realisation)g(is)g
(returned)g(as)h(part)f(of)h(the)f(result)g(of)g(elab)q(orating)66
2462 y(the)c(sharing)h(equation)e(\(just)h(lik)o(e)e(the)i(functions)g(in)f
(the)h(Core)g(Elab)q(orator)i(return)d(a)h(substitution.\))140
2522 y(F)l(or)i(a)g(structure)g(sharing)h(sp)q(eci\014cation)e(w)o(e)h(lo)q
(ok)g(up)h(the)e(structures)h(b)q(ound)h(to)g(the)f(structure)66
2582 y(iden)o(ti\014ers)h(in)h(the)f(sharing)i(sp)q(eci\014cation,)f(and)g
(call)f Fu(unifyStr)e Fw(with)j(a)h(list)e(of)h(the)g(names)f(of)h(the)66
2642 y(structures.)j(Actually)l(,)12 b(as)i(one)f(sees)g(from)f(the)h(t)o(yp)
q(e)f(of)h Fu(unifyStr)p Fw(,)e(eac)o(h)h(structure)h(name)f(is)g(paired)66
2703 y(with)17 b(the)f(structure)f(iden)o(ti\014er)g(via)h(whic)o(h)g(it)f(w)
o(as)i(found)g(|)f(this)g(is)g(for)h(error)f(rep)q(orting)h(only)l(.)140
2763 y(F)l(or)e(a)g(t)o(yp)q(e)g(sharing)g(sp)q(eci\014cation)g(w)o(e)g
(similarly)d(lo)q(ok)j(up)h(the)e(t)o(yp)q(e)h(structures)g(b)q(ound)h(to)f
(the)66 2823 y(t)o(yp)q(e)h(constructors)h(and)g(call)e Fu(unifyTy)p
Fw(.)p eop
%%Page: 61 52
bop 66 50 a Fs(CHAPTER)17 b(5.)37 b(MODULES)17 b(ELABORA)l(TION)869
b Fw(61)66 203 y Ft(5.18)84 b(Inference)26 b(Rules)66 313 y
Fw(As)16 b(men)o(tioned)e(in)i(the)f(Section)h(5.2,)g(w)o(e)f(implem)o(en)o
(t)e(the)i(rules)h(that)g(de\014ne)g(the)f(static)h(seman)o(tics)66
373 y(of)i(the)g(mo)q(dules)e([11)q(,)h(Section)g(5.14],)h(b)o(y)f(an)h
(algorithm)e(that)i(resem)o(bles)d(algorithm)i Fv(W)7 b Fw(.)25
b(Almost)66 433 y(all)15 b(rules)f(are)h(impleme)o(n)o(ted)d(straigh)o(tforw)
o(ardly;)j(in)f(this)h(section)g(w)o(e)f(therefore)g(only)h(describ)q(e)f
(the)66 493 y(fun)j(rules!)k(First,)15 b(ho)o(w)o(ev)o(er,)f(w)o(e)i
(summarise)e(where)i(assem)o(blies)e(are)i(used.)66 636 y Fr(5.18.1)71
b(Assem)n(blies)66 728 y Fw(Recall)17 b(that)g(all)g(seman)o(tic)f(ob)s
(jects)h(o)q(ccurring)g(in)g(the)h(signature)f(expression)h(are)f(required)f
(to)i(b)q(e)66 788 y(admissible)d(and)i(that)f(assem)o(blies)e(are)j(needed)e
(during)i(admissi\014cation.)140 848 y(The)22 b(follo)o(wing)h(functions)f
(tak)o(e)g(an)h(assem)o(bly)e(as)i(argumen)o(t)f(b)q(esides)g(the)h(other)g
(usual)g(ar-)66 909 y(gumen)o(ts)e(\(the)h(expression)f(to)i(b)q(e)f(elab)q
(orated)g(and)h(the)f(seman)o(tic)e(ob)s(jects)h(against)i(whic)o(h)e(the)66
969 y(expression)16 b(is)g(to)h(b)q(e)f(elab)q(orated\).)p
576 1016 872 2 v 575 1076 2 61 v 601 1058 a Fk(F)l(unction)p
932 1076 V 171 w(Corr)n(esp)n(onding)h(rule\(s\))p 1446 1076
V 576 1078 872 2 v 575 1138 2 61 v 601 1120 a Fu(elab_sige)o(xp')p
932 1138 V 217 w Fw(63{64)p 1446 1138 V 575 1198 V 601 1180
a Fu(elab_spec)p 932 1198 V 294 w Fw(70{81)p 1446 1198 V 575
1258 V 601 1240 a Fu(elab_strd)o(esc)p 932 1258 V 254 w Fw(87)p
1446 1258 V 575 1318 V 601 1300 a Fu(elab_shar)o(eq)p 932 1318
V 247 w Fw(88-90)p 1446 1318 V 576 1320 872 2 v 66 1387 a(The)g(reason)h(it)e
(is)g(exactly)g(these)g(functions)h(that)g(tak)o(e)f(an)h(assem)o(bly)e(as)i
(argumen)o(t)f(is)g(as)i(follo)o(ws:)66 1448 y(the)d(assem)o(bly)e(is)i
(needed)f(during)h(admissi\014cation,)f(whic)o(h)g(is)h(in)o(v)o(ok)o(ed)e
(for)i(eac)o(h)g(sharing)g(equation)66 1508 y(in)20 b(the)g(original)g
(signature)g(expresion;)h(but)g(sharing)g(equations)f(o)q(ccur)g(in)g(sp)q
(eci\014cations)g(whic)o(h)66 1568 y(o)q(ccur)e(in)f(signature)h(expressions)
f(and)h(signature)g(expressions)f(o)q(ccur)h(in)f(structure)g(descriptions.)
66 1628 y(The)k(elab)q(oration)h(of)f(an)o(y)g(suc)o(h)g(phrase)g(can)g(b)q
(e)g(a\013ected)g(b)o(y)f(sharing)i(constrain)o(ts)f(it)g(con)o(tains;)66
1688 y(that)c(is)f(the)g(reason)h(wh)o(y)f(the)g(four)h(functions)f(ab)q(o)o
(v)o(e)g(m)o(ust)f(tak)o(e)h(an)g(assem)o(bly)f(as)i(a)f(parameter.)140
1748 y(The)j(follo)o(wing)h(functions)g(return)g(an)g(assem)o(bly)e(b)q
(esides)i(the)g(usual)g(return)g(v)m(alues)f(\(the)h(se-)66
1809 y(man)o(tic)15 b(ob)s(ject)g(obtained)i(b)o(y)f(elab)q(oration)h(and)f
(the)g(mo)q(di\014ed)g(syn)o(tax)g(tree.\))p 576 1856 V 575
1916 2 61 v 601 1898 a Fk(F)l(unction)p 932 1916 V 171 w(Corr)n(esp)n(onding)
h(rule\(s\))p 1446 1916 V 576 1917 872 2 v 575 1978 2 61 v
601 1960 a Fu(elab_sige)o(xp')p 932 1978 V 217 w Fw(63{64)p
1446 1978 V 575 2038 V 601 2020 a Fu(elab_spec)p 932 2038 V
294 w Fw(70{81)p 1446 2038 V 575 2098 V 601 2080 a Fu(elab_typd)o(esc)p
932 2098 V 254 w Fw(83)p 1446 2098 V 575 2158 V 601 2140 a
Fu(elab_datd)o(esc)p 932 2158 V 254 w Fw(84)p 1446 2158 V 575
2218 V 601 2200 a Fu(elab_strd)o(esc)p 932 2218 V 254 w Fw(87)p
1446 2218 V 576 2220 872 2 v 66 2287 a(These)e(are)g(the)f(functions)h(that)g
(generate)f(seman)o(tic)f(ob)s(jects)h(needed)g(during)h(admissi\014cation;)f
(for)66 2348 y(instance,)i(t)o(yp)q(e)f(and)h(datat)o(yp)q(e)h(descriptions)e
(elab)q(orate)h(to)h(t)o(yp)q(e)e(structures)h(and)g(w)o(e)g(m)o(ust)e(c)o
(hec)o(k)66 2408 y(for)e(w)o(ell-formedness)c(of)j(t)o(yp)q(e)g(structures)f
(during)h(admissi\014cation.)19 b(The)11 b(functions)f Fu(elab_sigexp)o(')66
2468 y Fw(and)17 b Fu(elab_spec)12 b Fw(return)k(an)g(assem)o(bly)e(in)h
(order)h(to)g(propagate)i(the)d(generated)h(seman)o(tic)e(ob)s(jects)66
2528 y(from)i(substructure)g(expressions.)66 2670 y Fr(5.18.2)71
b(Rule)21 b(65)j(|)e(Principal)f(signatures)66 2763 y Fw(F)l(unction)15
b Fu(elab_sigex)o(p)d Fw(tak)o(es)j(a)g(basis)g(and)h(a)f(signature)h
(expression)e(and)i(elab)q(orates)g(the)e(signa-)66 2823 y(ture)j(expression)
g(in)f(that)h(basis.)24 b(W)l(e)17 b(\014rst)g(turn)g(the)g(basis)g(in)o(to)g
(an)g(assem)o(bly)e(and)j(then)e(pro)q(ceed)p eop
%%Page: 60 53
bop 66 50 a Fs(CHAPTER)17 b(5.)37 b(MODULES)17 b(ELABORA)l(TION)869
b Fw(60)140 195 y(When)21 b(a)h(structure)f(is)g(matc)o(hed)f(against)i(a)g
(signature,)h(the)e(signature)g(has)i(b)q(een)e(accepted)66
255 y(earlier,)d(and)g(the)g(signature)h(is)f(therefore)g(t)o(yp)q
(e-explicit.)25 b(Hence)17 b(all)g(\015exible)g(t)o(yp)q(e)h(names)f(o)q
(ccur)66 315 y(in)i(the)h(t)o(yp)q(e)f(en)o(vironmen)o(ts)d(of)k(the)f
(signature)h(\(recall)e(the)h(de\014nition)g(of)h(t)o(yp)q(e-explicitness)d
([11)q(,)66 376 y(Section)j(5.8]\).)34 b(This)21 b(is)f(exploited)f(in)h
Fu(sigMatchRea)d Fw(|)j(it)g(is)g(enough)h(to)g(recursiv)o(ely)d(tra)o(v)o
(erse)66 436 y(structure)c(and)g(t)o(yp)q(e)g(en)o(vironmen)o(ts.)k(A)13
b(t)o(yp)q(e)g(name)g(is)h(\015exible)e(if)h(it)h(o)q(ccurs)g(as)g(a)h(t)o
(yp)q(e)e(function)h(in)66 496 y(a)j(t)o(yp)q(e)f(structure)g(in)g(the)g
(range)h(of)f(a)h(t)o(yp)q(e)e(en)o(vironmen)o(t)f Fk(and)22
b Fw(also)16 b(o)q(ccurs)h(in)f(the)g(set)g(of)h(\015exible)66
556 y(t)o(yp)q(e)f(names)f(of)i(the)f(signature.)66 723 y Ft(5.17)84
b(Principal)27 b(Signatures)66 847 y Fr(5.17.1)71 b(Co)n(v)n(er)66
939 y Fw(Co)o(v)o(er,)24 b([11,)g(Section)f(5.13],)h(is)f(needed)f(to)h
(implem)o(en)o(t)d(rule)i(65)h(\(see)g(Section)f(5.18)i(b)q(elo)o(w\))f(as)66
999 y(explained)c(in)g(the)g(Commen)o(tary)e(\(Chapter)j(11\).)32
b(F)l(unction)19 b Fu(covers)p Fw(,)f(implem)o(en)o(te)o(d)f(in)i(functor)66
1059 y Fu(ModuleEnvir)o(onm)o(ent)o(s)p Fw(,)10 b(tak)o(es)k(a)g(name)e(set,)
h(an)h(assem)o(bly)l(,)e(and)i(a)g(structure)f(and)i(c)o(hec)o(ks)c(whether)
66 1120 y(or)25 b(not)f(the)f(assem)o(bly)f(co)o(v)o(ers)h(the)h(structure)f
(on)i(the)e(name)g(set.)44 b(Notice)22 b(that)i(co)o(v)o(er)f(in)g(the)66
1180 y(De\014nition)15 b(is)g(not)g(de\014ned)g(in)f(terms)g(of)h(an)g(assem)
o(bly)e(but)j(in)e(terms)g(of)h(a)g(basis;)g(as)h(seen)f(from)e(the)66
1240 y(de\014nition)j(of)g(co)o(v)o(er,)f(ho)o(w)o(ev)o(er,)f(w)o(e)i(only)g
(need)f(the)h(\\sk)o(eleton")g(of)g(the)g(basis)h(and)f(the)g(set)g(of)h
(rigid)66 1300 y(names)e(of)h(the)g(basis)g(to)g(c)o(hec)o(k)e(for)i(co)o(v)o
(er;)e(hence)h(the)g(ab)q(o)o(v)o(e)h(men)o(tioned)d(t)o(yp)q(es)j(of)g(the)f
(argumen)o(ts)66 1360 y(to)i Fu(covers)p Fw(.)140 1421 y(The)e(implem)o(en)o
(tation)d(is)k(simple;)d(for)j(ev)o(ery)d(substructure)j(\()p
Fv(m;)8 b(E)s Fw(\))15 b(in)g(the)g(giv)o(en)g(structure,)g(if)66
1481 y Fv(m)j Fw(is)g(rigid)f(\(o)q(ccurs)h(in)g(the)f(giv)o(en)g(name)g
(set\),)h(the)f(o\013springs)j(recorded)d(in)h(the)f(assem)o(bly)f(for)j
Fv(m)66 1541 y Fw(are)h(lo)q(ok)o(ed)f(up.)31 b(These)19 b(o\013springs)h
(corresp)q(ond)h(to)e(the)g(t)o(yp)q(e)g(and)h(structure)f(en)o(vironmen)o
(ts)e(for)66 1601 y(the)f(rigid)f(structure)h(in)f(the)h(basis.)22
b(Then)16 b(it)f(is)h(c)o(hec)o(k)o(ed)d(that)j(the)g(domains)f(of)h(the)g
(o\013springs)h(are)66 1661 y(sup)q(ersets)h(of)g(the)f(domains)f(of)i(the)f
(structure)f(and)i(t)o(yp)q(e)f(en)o(vironmen)o(ts)e(of)i Fv(E)s
Fw(.)24 b(If)17 b(this)g(is)g(not)g(the)66 1722 y(case,)f(the)g(assem)o(bly)f
(do)q(es)i(not)f(co)o(v)o(er)f(the)h(structure.)66 1866 y Fr(5.17.2)71
b(Equalit)n(y-Principal)20 b(Signature)66 1958 y Fw(Equalit)o(y)41
b(principalit)o(y)e(is)i(implem)o(e)o(n)o(ted)d(in)j(functor)g
Fu(ModuleStatO)o(bje)o(ct)d Fw(b)o(y)i(function)66 2019 y Fu(equality_pr)o
(inc)o(ipa)o(l)p Fw(,)22 b(whic)o(h)h(tak)o(es)h(a)g(structure,)h(S,)f(and)h
(a)f(name)f(set,)i(N,)e(as)i(argumen)o(ts.)66 2079 y(The)16
b(name)f(set)h(N)f(is)h(supp)q(osed)h(to)f(b)q(e)g(the)f(set)h(of)g(rigid)g
(names)f(in)g(the)h(basis,)g(so)g(that)g(the)g(\015exible)66
2139 y(names)g(of)i(S)f(are)g(the)f(free)h(names)f(of)h(S)g(less)f(the)h
(names)f(in)h(N.)f(The)h(implem)o(en)n(tation)e(follo)o(ws)h(the)66
2199 y(De\014nition)e([11,)h(Section)e(5.13])h(closely)f(\(see)h(also)h([10,)
f(page)h(51]\).)20 b(First)14 b(the)g(set)g(of)g(t)o(yp)q(e)g(names)f
Fv(T)1937 2206 y Fm(0)66 2259 y Fw(is)k(found,)f(and)h(b)o(y)f(\014xed)g(p)q
(oin)o(t)g(iteration)g(the)g(maximal)e(set)i(of)g(t)o(yp)q(e)g(names)g(whic)o
(h)f(can)i(b)q(e)f(made)66 2319 y(to)i(admit)e(equalit)o(y)g(is)h(computed,)f
(resulting)h(in)g(a)h(subset)g(of)f Fv(T)1284 2326 y Fm(0)1304
2319 y Fw(.)24 b(This)18 b(computation)e(mak)o(es)g(use)66
2380 y(of)f(function)g Fu(maximize_)o(equ)o(ali)o(ty)c Fw(implem)o(en)o(ti)o
(ng)h(maximisation)g(of)j(equalit)o(y)e(for)i(t)o(yp)q(e)f(en)o(viron-)66
2440 y(men)o(ts,)h(c.f.,)g(Section)h(4.2.6.)22 b(When)16 b(a)h(\014xed)f(p)q
(oin)o(t)h(is)f(reac)o(hed,)f(it)h(is)h(c)o(hec)o(k)o(ed)d(that)j(the)f
(signature)66 2500 y(resp)q(ects)h(equalit)o(y)l(.)p eop
%%Page: 59 54
bop 66 50 a Fs(CHAPTER)17 b(5.)37 b(MODULES)17 b(ELABORA)l(TION)869
b Fw(59)66 203 y Ft(5.13)84 b(Signature)27 b(Instan)n(tiation)66
313 y Fw(Signature)14 b(instan)o(tiation)g([11,)g(Section)f(5.9])g(is)g
(implem)o(en)o(ted)d(b)o(y)j(function)g Fu(instanceSig)d Fw(in)j(func-)66
373 y(tor)20 b Fu(ModuleStatO)o(bje)o(ct)p Fw(;)d(giv)o(en)i(a)h(signature)g
(\(N\)S)f(it)h(simply)d(returns)j(a)g(structure)f(where)g(the)66
433 y(names)d(b)q(ound)h(b)o(y)f Fv(N)21 b Fw(ha)o(v)o(e)16
b(b)q(een)g(instan)o(tiated)g(to)g(fresh)h(names)e(\(b)o(y)h(applying)g(a)g
(realisation\).)66 600 y Ft(5.14)84 b(F)-7 b(unctor)27 b(Signature)g(Instan)n
(tiation)66 709 y Fw(W)l(e)17 b(ha)o(v)o(e)f(not)i(implem)o(en)n(ted)c(a)k
(function)e(directly)g(corresp)q(onding)i(to)f(functor)g(signature)h(instan-)
66 769 y(tiation)f([11,)f(Section)f(5.10].)22 b(Instead)16
b(a)h(function,)e(sp)q(eci\014ed)h(b)o(y)p 66 838 1890 6 v
271 922 a Fu(datatype)23 b('a)i(MatchResul)o(t)e(=)51 b(OK)24
b(of)h('a)912 982 y(|)h(ERROR)d(of)i(ErrorInfo)271 1103 y(val)g(funsigMatc)o
(hSt)o(r)e(:)i(FunSig)e(*)i(Str)g(->)g(Sig)f(MatchResult)p
66 1173 V 66 1258 a Fw(in)15 b(signature)g Fu(MODULE_ST)o(ATO)o(BJ)o(ECT)o
Fw(,)c(is)k(pro)o(vided.)20 b(Giv)o(en)13 b(a)i(functor)g(signature)g(and)g
(a)g(structure,)66 1318 y(it)20 b(returns)h(the)f(signature)h(of)g(the)f
(actual)g(result)g(of)h(the)f(functor)h(application,)f(if)g(the)h(structure)
66 1378 y(matc)o(hes)c(the)h(argumen)o(t)e(signature)j(of)f(the)g(functor)g
(signature;)h(otherwise)e(error)h(information)f(is)66 1438
y(returned.)i(The)11 b(function)g(is)g(implem)o(en)o(te)o(d)d(using)k(implem)
o(en)n(tations)d(of)i(enric)o(hmen)o(t)d(and)k(signature)66
1499 y(matc)o(hing)j(describ)q(ed)h(b)q(elo)o(w.)66 1665 y
Ft(5.15)84 b(Enric)n(hmen)n(t)66 1775 y Fw(Enric)o(hmen)o(t)24
b(is)i(impleme)o(n)o(ted)d(b)o(y)j(a)h(function)g Fu(enrichesS)c
Fw(in)j(functor)h Fu(ModuleSta)o(tO)o(bje)o(ct)p Fw(,)66 1835
y(straigh)o(t)d(out)h(of)f(the)f(De\014nition,)i(Section)e(5.11.)45
b(As)23 b(enric)o(hmen)o(t)e(is)j(only)f(needed)g(to)h(imple-)66
1895 y(men)o(t)15 b(signature)i(matc)o(hing,)e(whic)o(h)h(is)h(also)g(implem)
o(en)o(te)o(d)d(in)j(functor)g Fu(ModuleSta)o(tOb)o(je)o(ct)p
Fw(,)c(it)j(is)66 1955 y(not)j(sp)q(eci\014ed)e(in)g(signature)h
Fu(MODULE_STA)o(TO)o(BJE)o(CT)p Fw(;)c(th)o(us)k(the)f(function)g(is)h
(therefore)f(not)h(visible)66 2015 y(outside)f(the)f(functor.)66
2182 y Ft(5.16)84 b(Signature)27 b(Matc)n(hing)66 2291 y Fw(Signature)21
b(matc)o(hing)f([11,)h(Section)f(5.12])h(is)g(de\014ned)f(b)o(y)h(a)g(com)o
(bination)e(of)i(instan)o(tiation)g(and)66 2351 y(enric)o(hmen)o(t.)c(But,)c
(of)h(course,)f(w)o(e)g(cannot)h(just)g(tak)o(e)e(an)i(arbitrary)f(instance)g
(of)h(the)f(signature)h(and)66 2412 y(then)j(c)o(hec)o(k)e(whether)h(or)h
(not)g(that)g(instance)f(enric)o(hes)g(the)g(structure.)22
b(W)l(e)16 b(m)o(ust)f(instan)o(tiate)h(the)66 2472 y(signature)g(via)e(a)h
(realisation)g(that)g(maps)f(the)g(\015exible)g(names)f(of)i(the)g(signature)
g(to)g(corresp)q(onding)66 2532 y(names)24 b(in)g(the)g(structure)g(to)g(b)q
(e)h(matc)o(hed.)43 b(Therefore)24 b(signature)h(matc)o(hing)e(pro)q(ceeds)h
(b)o(y)g(a)66 2592 y(recursiv)o(e)17 b(tra)o(v)o(ersal)g(of)h(the)f
(signature)i(and)f(structure,)g(instan)o(tiating)g(\015exible)e(names)h
(along)h(the)66 2652 y(w)o(a)o(y;)h(afterw)o(ards)g(enric)o(hmen)o(t)c(is)k
(c)o(hec)o(k)o(ed.)25 b(Signature)19 b(matc)o(hing)d(is)j(implem)o(en)n(ted)c
(b)o(y)j(function)66 2713 y Fu(sigMatchStr)o Fw(,)i(the)h(recursiv)o(e)f
(instan)o(tiation)i(is)f(p)q(erformed)g(b)o(y)g(function)g
Fu(sigMatchRea)o Fw(;)g(b)q(oth)66 2773 y(functions)c(are)f(implem)o(en)o(te)
o(d)e(in)h(functor)i Fu(ModuleStat)o(Ob)o(jec)o(t)p Fw(.)p
eop
%%Page: 58 55
bop 66 50 a Fs(CHAPTER)17 b(5.)37 b(MODULES)17 b(ELABORA)l(TION)869
b Fw(58)66 203 y Ft(5.9)83 b(Admissiblit)n(y)66 313 y Fw(Admissibilit)o(y)-5
b(,)16 b([11,)j(Section)f(5.5],)g(is)g(implem)o(en)o(ted)d(b)o(y)j(separate)h
(c)o(hec)o(ks)e(for)h(consistency)l(,)g(w)o(ell-)66 373 y(formedness)13
b(and)i(cycle-freedom)c(as)j(describ)q(ed)g(ab)q(o)o(v)o(e.)20
b(\(No)14 b(admissibilit)o(y)d(predicate)i(is)h(pro)o(vided)66
433 y(or)j(needed.\))66 600 y Ft(5.10)84 b(T)n(yp)r(e)27 b(Realisation)66
709 y Fw(T)o(yp)q(e)21 b(realisations)g(are)h(implem)o(en)n(ted)c(b)o(y)j
(functor)g Fu(ModuleStat)o(Obj)o(ect)o Fw(.)33 b(Actually)l(,)21
b(the)f(op)q(er-)66 769 y(ations)h(are)g(pro)o(vided)e(b)o(y)h(one)g(of)h
(the)f(argumen)o(t)f(structures)h(to)h Fu(ModuleStat)o(Ob)o(jec)o(t)p
Fw(.)30 b(The)21 b(ar-)66 830 y(gumen)o(t)f(structure)i(matc)o(hes)e
(signature)h Fu(STATOBJECT_)o(PRO)o(P)p Fw(,)d(whic)o(h)j(in)g(turn)h(sp)q
(eci\014es)f(part)h(of)66 890 y(the)c(static)f(ob)s(jects)h(and)g(op)q
(erations)h(for)f(the)f(Core.)26 b(T)o(yp)q(e)17 b(realisations)h(are)g(only)
f(needed)g(in)g(the)66 950 y(static)22 b(seman)o(tics)e(for)i(the)g(Mo)q
(dules,)h(but)f(the)f(implem)o(en)o(tation)e(of)j(t)o(yp)q(e)g(realisation)f
(needs)h(to)66 1010 y(kno)o(w)f(the)e(represen)o(tation)h(of)g(t)o(yp)q(e)g
(names)f(and)h(t)o(yp)q(e)g(functions.)32 b(Therefor,)21 b(t)o(yp)q(e)e
(realisations)66 1070 y(are)e(implem)o(en)n(ted)c(in)j(functor)h
Fu(StatObjec)o(t)p Fw(.)66 1237 y Ft(5.11)84 b(Realisation)66
1346 y Fw(A)19 b(realisation,)f([11)q(,)h(Section)f(5.7],)g(is)h(implem)o(en)
o(te)o(d)d(in)i(functor)h Fu(ModuleStatO)o(bj)o(ect)c Fw(simply)i(as)66
1406 y(a)k(record)e(consisting)h(of)g(a)g(t)o(yp)q(e)f(realisation)h(\(see)f
(ab)q(o)o(v)o(e\))h(and)g(a)g(structure)g(realisation)f(\(imple-)66
1467 y(men)o(ted)d(b)o(y)h(a)h(SML)g(function\).)24 b(Op)q(erations)19
b(for)e(applying)h(realisations)f(to)h(the)g(represen)o(tations)66
1527 y(of)f(seman)o(tic)d(ob)s(jects)i(are)g(also)h(implem)o(en)o(te)o(d)d
(here.)66 1693 y Ft(5.12)84 b(T)n(yp)r(e)27 b(Explication)66
1803 y Fw(Chec)o(k)13 b(for)i(t)o(yp)q(e)e(explication)g([11,)h(Section)f
(5.8])h(is)g(implem)o(en)n(ted)d(b)o(y)i(a)i(function)e Fu(type_explic)o(it)p
Fw(,)66 1863 y(sp)q(eci\014ed)j(in)g(signature)h Fu(MODULE_ST)o(ATO)o(BJE)o
(CT)c Fw(b)o(y)p 66 1928 1890 6 v 271 2013 a Fu(val)25 b(type_expli)o(cit)d
(:)j(NameSet)e(*)i(Str)g(->)g(bool)p 66 2084 V 66 2168 a Fw(and)19
b(implem)o(en)o(te)o(d)d(in)i(functor)g Fu(ModuleStat)o(Obj)o(ec)o(t)p
Fw(.)24 b(The)18 b(nameset)f(argumen)o(t)g(is)h(supp)q(osed)i(to)66
2228 y(b)q(e)g(the)f(set)g(of)h(rigid)f(names)f(of)i(the)f(basis)h(in)f(whic)
o(h)g(the)g(c)o(hec)o(k)f(for)h(t)o(yp)q(e)g(explicitness)f(is)h(made.)66
2288 y(Notice)c(that)i(t)o(yp)q(e)e(explication)g(in)g(the)h(De\014nition,)f
([11,)h(Section)f(5.8],)h(is)g(de\014ned)f(for)h(a)h(signature)66
2349 y(\(N\)S;)j(when)h(the)f(ab)q(o)o(v)o(e)g(function)g(is)h(called)e(with)
h(argumen)o(ts)g Fu(NofB)f Fw(and)i Fu(S)p Fw(,)f(the)g(set)g(of)h(b)q(ound)
66 2409 y(names)e Fv(N)25 b Fw(men)o(tioned)17 b(in)i(the)h(De\014nition)f
(is)g(equal)g(to)h(those)g(free)f(names)f(of)i Fu(S)f Fw(that)h(are)g(not)g
(in)66 2469 y Fu(NofB)p Fw(.)140 2529 y(The)c(function)g(simply)e(collects)h
(the)h(set)g(of)g(explicit)f(t)o(yp)q(e)g(names)h(in)f(the)h(structure)g
(argumen)o(t)66 2589 y(and)21 b(compares)e(this)h(with)f(set)h(with)g(the)f
(set)h(of)g(b)q(ound)h(names,)f(and)g(returns)g(true)g(i\013)g(they)f(are)66
2650 y(equal.)p eop
%%Page: 57 56
bop 66 50 a Fs(CHAPTER)17 b(5.)37 b(MODULES)17 b(ELABORA)l(TION)869
b Fw(57)271 195 y Fu(val)25 b(Alookup_St)o(r)228 b(:)25 b(Assembly)e(*)i
(StrName)e(->)i(offspring_)o(St)o(r)271 255 y(and)g(Aoffspring)o(_St)o(r_F)o
(ol)o(d)e(:)i(\(\(\(strid)e(*)i(StrName\))e(*)i('b\))f(->)h('b\))g(->)g('b)g
(->)964 315 y(offspring)o(_St)o(r)d(->)j('b)271 376 y(val)g(Alookup_Ty)253
b(:)25 b(Assembly)e(*)51 b(StrName)23 b(->)i(offspring)o(_T)o(y)271
436 y(and)g(Aoffspring)o(_Ty)o(_Fo)o(ld)48 b(:)25 b(\(\(\(tycon)e(*)i
(TyStr\))e(*)j('b\))e(->)h('b\))g(->)f('b)h(->)938 496 y(offspring_)o(Ty)d
(->)j('b)271 556 y(val)g(Alookup_Ty)o(peF)o(cn)125 b(:)25 b(Assembly)e(*)i
(TypeFcn)e(->)i(TyStr)p 66 627 1890 6 v 66 712 a Fw(The)17
b Fu(_Fold)e Fw(functions)i(are)g(simply)d(functions)j(whic)o(h)f(fold)h(a)g
(function)g(o)o(v)o(er)f(the)g(elemen)o(ts)e(in)i(the)66 772
y(range)f(of)g(a)g(\014nite)f(map,)f(and)i(the)f Fu(Alookup_)e
Fw(functions)i(are,)h(of)f(course,)h(lo)q(okup)g(functions.)21
b(Other)66 832 y(op)q(erations)15 b(on)e(assem)o(blies)e(are)i(also)h(implem)
o(en)o(te)o(d;)d(some)h(of)h(them)f(are)h(describ)q(ed)g(in)f(the)h(relev)m
(an)o(t)66 892 y(sections)k(b)q(elo)o(w.)66 1059 y Ft(5.6)83
b(Consistency)66 1168 y Fw(As)16 b(explained)f(in)g(the)g(Commen)o(tary)f
(\(Section)h(10.5)h(and)h(the)e(solution)h(to)g(Exercise)f(10.4,)h(p.)f
(145\))66 1228 y(consistency)h(need)f(only)h(b)q(e)g(c)o(hec)o(k)o(ed)e
(during)i(admissi\014cation.)k(Admissi\014cation)14 b(is)i(implem)o(en)n(ted)
66 1288 y(b)o(y)21 b(functor)f Fu(ModuleUnify)o Fw(;)g(the)g(impleme)o(n)o
(tation)e(of)j(the)g(necessary)f(c)o(hec)o(k)f(for)i(consistency)f(of)66
1349 y(t)o(yp)q(e)c(structures)g([11)q(,)f(Section)h(5.2],)g(function)g
Fu(CheckCEdom)o Fw(,)d(is)j(in)g(this)g(functor.)66 1515 y
Ft(5.7)83 b(W)-7 b(ell-formedness)66 1625 y Fw(T)l(o)23 b(recall)e(\([11)q(,)
i(Section)f(5.3]\),)h(an)g(assem)o(bly)d Fv(A)i Fw(is)g(w)o(ell-formed)e(if)i
(ev)o(ery)f(t)o(yp)q(e)g(en)o(vironmen)o(t,)66 1685 y(signature)c(and)g
(functor)f(signature)h(o)q(ccuring)f(in)g Fv(A)g Fw(is)g(w)o(ell-formed.)140
1745 y(F)l(unctor)h(signatures)i(are)f(not)g(deriv)m(able)f(solely)g(b)o(y)g
(rules)h Fp(R)1302 1752 y Fm(sig)1357 1745 y Fp([)13 b(f)p
Fw(rule)i(65)q Fp(g)j Fw(\(see)f(Chapter)h(10)66 1805 y(of)d(the)g(Commen)o
(tary)d(where)i Fp(R)675 1812 y Fm(sig)734 1805 y Fw(is)g(de\014ned\);)h(the)
f(other)h(rules)f(that)h(are)g(needed)f(in)g(a)h(deriv)m(ation)66
1865 y(of)20 b(a)f(functor)g(signature)g(preserv)o(e)e(admissibilit)o(y)f
(and)j(w)o(e)g(need)f(not)h(c)o(hec)o(k)e(for)i(w)o(ell-formedness)66
1926 y(of)e(functor)f(signatures)h(\(Commen)o(tary)d(Section)i(10.5\).)140
1986 y(It)h(su\016ces)g(to)h(c)o(hec)o(k)e(for)j(w)o(ell-formedness)c(of)j
(signatures)h(in)e(rule)g(65,)i(see)e(page)i(92)f(and)g(Sec-)66
2046 y(tion)11 b(11.4)h(of)f(the)g(Commen)o(tary)l(.)17 b(The)11
b(implem)o(en)o(t)o(ation)e(of)i(this)g(c)o(hec)o(k)e(is)i(describ)q(ed)f(in)
h(Section)f(5.18)66 2106 y(b)q(elo)o(w.)140 2166 y(W)l(ell-formedness)f(of)j
(t)o(yp)q(e)f(structures)g([11)q(,)h(Section)f(4.9])g(need)g(only)h(b)q(e)f
(c)o(hec)o(k)o(ed)e(during)j(admis-)66 2226 y(si\014cation)k(\(Commen)o(tary)
d(Section)i(10.5)h(and)h(solution)f(to)g(Exercise)e(10.4\).)22
b(The)15 b(implem)o(en)o(tation)66 2287 y(of)i(the)f(c)o(hec)o(k)e(o)q(ccurs)
j(in)f(functor)g Fu(ModuleUnify)d Fw(\(function)j Fu(CheckTySt)o(rW)o(F)p
Fw(\).)66 2453 y Ft(5.8)83 b(Cycle-freedom)66 2563 y Fw(It)17
b(su\016ces)h(to)f(c)o(hec)o(k)f(for)i(cycle-freedom)c(during)k
(admissi\014cation)e(\(Commen)o(tary)f(Section)i(10.5\).)66
2623 y(F)l(unction)22 b Fu(cyclic)e Fw(in)h(functor)h Fu(ModuleEnvi)o(ron)o
(men)o(ts)c Fw(tak)o(es)k(an)g(assem)o(bly)e(as)j(argumen)o(t)e(and)66
2683 y(returns)d(true)g(i\013)f(the)h(assem)o(bly)e(is)h(cyclic.)24
b(The)17 b(cycle)f(test)i(is)f(p)q(erformed)g(b)o(y)g(a)h(mindless)e(depth-)
66 2743 y(\014rst)h(searc)o(h)f(\(for)g(eac)o(h)g(structure)g(name\).)p
eop
%%Page: 56 57
bop 66 50 a Fs(CHAPTER)17 b(5.)32 b(MODULES)16 b(ELABORA)l(TION)875
b Fw(56)271 195 y Fu(type)25 b(offspring)125 b(=)25 b({structur)o(es)d(:)k
(offspring)o(_St)o(r,)835 255 y(types)e(:)h(offspring_T)o(y};)271
315 y(type)g(Assembly_)o(Str)d(=)j(\(StrName,)d(offspring\)F)o(inM)o(ap.)o
(map)297 376 y(and)j(Assembly_)o(Ty)48 b(=)25 b(\(TypeFcn,)d(TyStr\)FinMa)o
(p.m)o(ap)271 436 y(type)j(Assembly)125 b(=)25 b({m_arcs)e(:)i(Assembly_St)o
(r,)810 496 y(theta_arc)o(s)e(:)i(Assembly_T)o(y})p 66 564
1890 6 v 66 646 a Fw(Notice)14 b(that)h(the)g(represen)o(tation)f(is)h
(\\\015at",)h(in)f(the)f(sense)h(that)g Fu(offspring_S)o(tr)d
Fw(has)j Fu(StrName)e Fw(as)66 706 y(its)j(range)h(t)o(yp)q(e)f(\(instead)g
(of)h Fu(offspring)o Fw(\).)i(Consider)d(an)h(assem)o(bly)d(consisting)j(of)f
(the)g(structure)p 66 773 V 271 854 a Fu(structure)23 b(S0)i(=)323
914 y(struct)374 974 y(structure)d(S10)j(=)425 1035 y(struct)477
1095 y(structure)d(S20)i(=)i(struct)d(end)425 1155 y(end)374
1215 y(structure)f(S11)j(=)425 1275 y(struct)425 1335 y(end)323
1396 y(end)p 66 1452 V 66 1535 a Fw(The)17 b(represen)o(tation)e(of)i(the)f
(assem)o(bly)e(is)i(then)188 1634 y Fu({)g(m_arcs)24 b(=)16
b Fp(f)g Fu(m0)41 b Fp(7!)16 b Fu({)g(structures)22 b(=)16
b Fp(f)g Fu(S10)f Fp(7!)h Fu(m10,)1059 1694 y(S11)f Fp(7!)h
Fu(m11)f Fp(g)p Fu(,)694 1754 y(types)24 b(=)144 b Fp(fg)16
b Fu(},)493 1815 y(m10)f Fp(7!)h Fu({)g(structures)22 b(=)16
b Fp(f)g Fu(S20)f Fp(7!)h Fu(m20)f Fp(g)p Fu(,)694 1875 y(types)24
b(=)144 b Fp(fg)16 b Fu(},)493 1935 y(m11)f Fp(7!)h Fu({)g(structures)22
b(=)16 b Fp(fg)p Fu(,)694 1995 y(types)24 b(=)144 b Fp(fg)16
b Fu(},)493 2055 y(m20)f Fp(7!)h Fu({)g(structures)22 b(=)16
b Fp(fg)p Fu(,)694 2116 y(types)24 b(=)144 b Fp(fg)16 b Fu(},)230
2176 y(theta_args)22 b(=)16 b Fp(fg)g Fu(})66 2275 y Fw(where)h(w)o(e)g(as)h
(usual)f(use)h Fu({})e Fw(around)i(records)g(and)f Fp(fg)g
Fw(around)i(\014nite)d(maps.)24 b(This)17 b(\015at)h(represen-)66
2335 y(tation)f(is)f(c)o(hosen)g(b)q(ecause)h(it)e(mak)o(es)g(the)h(implem)o
(en)o(tati)o(on)e(of)j(admissi\014cation)e(easier.)140 2395
y(Also)h(notice)g(that)h(for)h(a)f(t)o(yp)q(e)f(structure)g
Fv(\022)i Fw(in)f(the)f(domain)g(of)h Fu(theta_arcs)p Fw(,)c
Fv(\022)18 b Fw(is)f(mapp)q(ed)f(to)66 2455 y(\()p Fv(\022)q(;)8
b(C)-5 b(E)t Fw(\))17 b(for)g(some)f Fv(C)-5 b(E)t Fw(.)24
b(That)18 b(is,)e Fv(\022)j Fw(is)e(represen)o(ted)f(t)o(wice.)22
b(\(Actually)l(,)16 b(there)h(is)g(no)g(go)q(o)q(d)i(reason)66
2516 y(for)e(this.\))140 2576 y(F)l(unctor)h Fu(ModuleEnv)o(iro)o(nm)o(ent)o
(s)d Fw(implem)o(en)o(ts)g(op)q(erations)k(to)g(build)e(assem)o(blies)f(from)
h(other)66 2636 y(seman)o(tic)f(ob)s(jects)h(\(w)o(e)g(m)o(ust)f(b)q(e)i
(able)f(to)h(turn)f(a)h(basis)g(in)o(to)f(an)h(assem)o(bly)e(when)h(w)o(e)g
(start)h(elab-)66 2696 y(orating)24 b(a)e(signature)h(expression,)h(see)e
(Section)f(5.18)j(b)q(elo)o(w.\))39 b(The)23 b(functor)f(also)h(impleme)o(n)o
(ts)66 2756 y(functions)17 b(satisfying)f(the)g(follo)o(wing)g(sp)q
(eci\014cations)g(\(from)f(signature)i Fu(MODULE_ENV)o(IRO)o(NM)o(ENT)o(S)p
Fw(\))p 66 2823 V eop
%%Page: 55 58
bop 66 50 a Fs(CHAPTER)17 b(5.)32 b(MODULES)16 b(ELABORA)l(TION)875
b Fw(55)p 66 201 1920 2 v 65 261 2 61 v 91 243 a Fk(Signatur)n(e)p
595 261 V 331 w(Sp)n(e)n(ci\014es)p 1985 261 V 66 263 1920
2 v 65 323 2 61 v 91 305 a Fu(MODULE)p 250 305 16 2 v 17 w(STATOBJEC)o(T)p
595 323 2 61 v 98 w Fw(Simple)14 b(seman)o(tic)g(ob)s(jects)i(and)h(op)q
(erations)g(in)f(the)g(static)g(seman)o(tics)p 1985 323 V 65
383 V 91 365 a Fu(MODULE)p 250 365 16 2 v 17 w(ENVIRONME)o(NTS)p
595 383 2 61 v 46 w Fw(En)o(vironmen)o(ts)e(and)j(op)q(erations)g(on)g(these)
p 1985 383 V 66 385 1920 2 v 66 465 a(Notice)d(that)i(the)f(implem)o(e)o(n)o
(tation)e(of)i(the)g(seman)o(tic)e(ob)s(jects)i(has)g(b)q(een)g(divided)f(in)
o(to)h(t)o(w)o(o,)g(as)g(the)66 525 y(impleme)o(n)o(tation)g(of)k(en)o
(vironmen)o(ts)c(need)j(not)g(kno)o(w)h(the)e(exact)h(implem)o(en)n(tation)e
(of)i(the)g(under-)66 585 y(lying)e(seman)o(tic)e(ob)s(jects.)140
646 y(The)j(\014les)f(corresp)q(onding)i(to)g(the)e(signatures)i(are)f(named)
f(after)h(the)g(signatures)h(but)f(with)g(an)66 706 y(extension)f
Fu(.sml)p Fw(.)140 766 y(The)j(functors)g Fu(ModuleStat)o(Obj)o(ec)o(t)d
Fw(and)k Fu(ModuleEnv)o(iro)o(nm)o(ent)o(s)c Fw(implem)o(en)o(t)g(the)i
(seman)o(tic)66 826 y(ob)s(jects.)28 b(They)19 b(are)f(b)q(oth)i
(parameterised)d(on)i(the)f(seman)o(tic)f(ob)s(jects)h(of)h(the)f(Core,)h(as)
h(sp)q(eci\014ed)66 886 y(b)o(y)c(signatures)h Fu(STATOBJECT)o(_PR)o(OP)c
Fw(and)k Fu(ENVIRONME)o(NTS)o(_P)o(ROP)o Fw(.)140 947 y(Consider)25
b(the)f(further)h(comp)q(ound)g(seman)o(tic)d(ob)s(jects)j(for)g(the)g(Mo)q
(dules)g([11,)h(Figure)f(11])66 1007 y(and)e(the)f(simple)f(op)q(erations)i
(on)g(these)f([11,)i(Section)e(5.1].)39 b(The)22 b(impleme)o(n)o(tation)e(of)
i(these)g(is)66 1067 y(straigh)o(t)h(out)f(of)h(the)f(b)q(o)q(ok;)k
(StrNameSet,)21 b(NameSet,)h(Sig,)h(and)g(F)l(unSig)f(are)g(implem)o(en)o(te)
o(d)e(in)66 1127 y Fu(ModuleStatO)o(bje)o(ct)p Fw(,)12 b(and)17
b(the)f(rest)g(in)g Fu(ModuleEnvir)o(on)o(men)o(ts)p Fw(.)140
1187 y(The)h(w)o(a)o(y)h(the)f(Mo)q(dules)h(Elab)q(orator)h(\\inherits")f
(the)f(seman)o(tic)f(ob)s(jects)h(of)i(the)e(Core)h(Elab)q(o-)66
1248 y(rator)f(can)g(b)q(e)f(summarised)e(b)o(y)i(the)g(follo)o(wing)g
(simpli\014ed)d(program)k(outline.)p 66 1313 1890 6 v 271 1402
a Fu(functor)24 b(StatObjec)o(t\(.)o(..)o(\))f(=)i(...)630
1462 y(\(*)g(Core)f(objects)f(including)g(e.g.)h(type)g(realisatio)o(ns)707
1522 y(for)h(use)f(in)h(Modules)e(Elaborator)f(*\))271 1582
y(structure)h(StatObject)f(=)j(StatObject)o(\(..)o(.\);)271
1642 y(structure)e(CoreStatOb)o(je)o(ct)f(:)k(STATOBJEC)o(T)d(=)i(StatObject)
630 1702 y(\(*)g(Core)f(Elaborator')o(s)f(view)h(of)h(Core)f(Objects)f(*\))
271 1763 y(structure)g(StatObject)o(Pr)o(op)f(:)k(STATOBJEC)o(T_P)o(RO)o(P)d
(=)i(StatObject)630 1823 y(\(*)g(Modules)e(Elaborator')o(s)g(view)h(of)h
(Core)f(Objects)f(*\))271 1883 y(functor)h(ModuleSta)o(tOb)o(je)o(ct\()o(O)f
(:)i(STATOBJECT)o(_P)o(ROP)o(\))e(:)451 1943 y(MODULE_STA)o(TOB)o(JE)o(CT)f
(=)630 2003 y(\(*)j(bases,)f(signature)o(s,)e(functor)h(signatures)f(etc.)i
(*\))271 2064 y(structure)f(ModuleStat)o(Ob)o(jec)o(t)g(=)i(ModuleStat)o(Ob)o
(jec)o(t\(S)o(tat)o(Ob)o(jec)o(tPr)o(op)o(\))p 66 2135 V 140
2219 a Fw(W)l(e)18 b(m)o(ust)e(b)q(e)j(able)f(to)h(deal)f(with)g(assem)o
(blies)e(of)j(seman)o(tic)d(ob)s(jects)i(as)h(all)e(seman)o(tic)g(ob)s(jects)
66 2279 y(o)q(ccuring)d(in)f(the)g(inference)f(tree)g(for)i(a)g(signature)f
(expression)g(are)h(required)e(to)i(b)q(e)f(admissible)e(\([11)q(,)66
2339 y(Section)i(5.5]\).)20 b(In)13 b(the)g(De\014nition,)g(assem)o(blies)e
(are)i(referred)f(to)i(simly)d(as)j(a)f(collection)f(of)h(seman)o(tic)66
2400 y(ob)s(jects.)21 b(Assem)o(blies)14 b(are,)h(ho)o(w)o(ev)o(er,)g(only)h
(used)g(during)g(admissi\014cation)f([10)q(,)h(Section)f(10.4])i(and)66
2460 y(to)j(c)o(hec)o(k)e(for)h(co)o(v)o(er.)30 b(Therefore,)19
b(w)o(e)g(can)h(mak)o(e)d(do)j(with)g(the)f(follo)o(wing)g(t)o(yp)q(es)g(for)
h(assem)o(blies,)66 2520 y(de\014ned)g(in)g(functor)f Fu(ModuleEnvir)o(onm)o
(ent)o(s)p Fw(,)e(whic)o(h)i(only)h(represen)o(ts)f(the)h(\\essen)o(tial")f
(parts)i(of)66 2580 y(an)c(assem)o(bly)e(of)h(seman)o(tic)e(ob)s(jects.)p
66 2646 V 271 2734 a Fu(type)25 b(offspring)o(_St)o(r)e(=)i(\(strid,)e
(StrName\))g(FinMap.ma)o(p)297 2794 y(and)i(offspring)o(_Ty)48
b(=)25 b(\(tycon,)e(TyStr)49 b(\))26 b(FinMap.ma)o(p)p eop
%%Page: 54 59
bop 66 50 a Fs(CHAPTER)17 b(5.)37 b(MODULES)17 b(ELABORA)l(TION)869
b Fw(54)140 195 y(Recall)15 b(the)i(part)h(of)f(the)g(Mo)q(dules)g(elab)q
(orator)h(that)g(deals)f(with)g(structure)f(expressions)h(from)66
255 y(Section)d(2.2.5)g(|)f(the)g(impleme)o(n)o(tation)e(con)o(tains)j(one)g
(function)f Fu(elab)p 1409 255 16 2 v 17 w Fk(syn)h Fw(for)g(ev)o(ery)e
(phrase)i(class)66 315 y Fk(syn)p Fw(.)66 482 y Ft(5.3)83 b(Elab)r(oration)29
b(Errors)66 591 y Fw(If)20 b(an)h(error)f(o)q(ccurs)h(some)e(time)f(during)i
(elab)q(oration)h(of)g(a)f(sub)q(expression,)i(w)o(e)d(insert)h(error)g(in-)
66 652 y(formation)h(in)o(to)g(the)g(no)q(de)h(of)f(the)g(syn)o(tax)g(tree)f
(for)i(the)f(sub)q(expression,)h(just)g(as)g(for)f(the)g(Core)66
712 y(elab)q(orator)d(\(see)e(Section)f(4.2.1\).)66 878 y Ft(5.4)83
b(Syn)n(tactic)26 b(Restrictions)66 988 y Fw(The)17 b(De\014nition)f(states)h
(\(see)e(also)i(Commen)o(tary)l(,)d(App)q(endix)h(D\))i(a)f(n)o(um)o(b)q(er)f
(of)i(syn)o(tactic)e(restric-)66 1048 y(tions)21 b([11)q(,)g(Section)f(3.5].)
35 b(As)20 b(men)o(tioned)f(earlier)g(\(Chapter)i(3\))g(w)o(e)f(ha)o(v)o(e)g
(c)o(hosen)h(to)g(deal)f(with)66 1108 y(these)c(during)h(elab)q(oration.)140
1168 y(The)f(follo)o(wing)g(additional)h(commen)o(ts)d(to)i(the)h(rules)f(in)
g(the)g(De\014nition)h(indicate)e(where)h(suc)o(h)66 1228 y(c)o(hec)o(ks)f
(are)h(done.)p 299 1276 1425 2 v 298 1336 2 61 v 324 1318 a
Fk(R)o(ule)p 443 1336 V 50 w(Comment)p 1723 1336 V 299 1338
1425 2 v 298 1398 2 61 v 347 1380 a Fw(62)p 443 1398 V 74 w(By)f(the)h(syn)o
(tactic)g(restrictions)f Fk(strid)25 b Fv(=)-30 b Fp(2)14 b
Fw(Dom)o Fv(S)-5 b(E)s Fw(.)p 1723 1398 V 298 1458 V 347 1440
a(69)p 443 1458 V 74 w(By)15 b(the)h(syn)o(tactic)g(restrictions)f
Fk(sigid)25 b Fv(=)-30 b Fp(2)14 b Fw(Dom)p Fv(G)p Fw(.)p 1723
1458 V 298 1518 V 347 1500 a(82)p 443 1518 V 74 w(By)h(the)h(syn)o(tactic)g
(restrictions)f Fk(var)25 b Fv(=)-30 b Fp(2)14 b Fw(Dom)p Fv(V)s(E)s
Fw(.)p 1723 1518 V 298 1578 V 347 1560 a(83)p 443 1578 V 74
w(By)h(the)h(syn)o(tactic)g(restrictions)f Fk(tyc)n(on)24 b
Fv(=)-30 b Fp(2)14 b Fw(Dom)o Fv(T)n(E)s Fw(,)p 1723 1578 V
298 1639 V 443 1639 V 469 1621 a(and)j Fk(tyvarse)n(q)j Fw(m)o(ust)15
b(not)i(con)o(tain)f(the)g(same)f(v)m(ariable)h(t)o(wice)p
1723 1639 V 298 1699 V 347 1681 a(84)p 443 1699 V 74 w(By)f(the)h(syn)o
(tactic)g(restrictions)f Fk(tyc)n(on)24 b Fv(=)-30 b Fp(2)14
b Fw(Dom)o Fv(T)n(E)s Fw(,)p 1723 1699 V 298 1759 V 443 1759
V 469 1741 a(Dom)o Fv(C)-5 b(E)14 b Fp(\\)e Fw(Dom)o Fv(V)s(E)17
b Fw(=)d Fp(;)p Fw(,)p 1723 1759 V 298 1819 V 443 1819 V 469
1801 a Fk(tyvarse)n(q)21 b Fw(m)o(ust)14 b(not)j(con)o(tain)f(the)g(same)f(v)
m(ariable)h(t)o(wice,)p 1723 1819 V 298 1879 V 443 1879 V 469
1861 a(and)h(an)o(y)f Fk(tyvar)21 b Fw(o)q(ccuring)c(in)f Fk(c)n(ondesc)k
Fw(m)o(ust)14 b(o)q(ccur)j(in)f Fk(tyvarse)n(q)p 1723 1879
V 298 1940 V 347 1921 a Fw(85)p 443 1940 V 74 w(By)f(the)h(syn)o(tactic)g
(restrictions)f Fk(c)n(on)24 b Fv(=)-30 b Fp(2)14 b Fw(Dom)o
Fv(C)-5 b(E)t Fw(.)p 1723 1940 V 298 2000 V 347 1982 a(86)p
443 2000 V 74 w(By)15 b(the)h(syn)o(tactic)g(restrictions)f
Fk(exc)n(on)25 b Fv(=)-30 b Fp(2)14 b Fw(Dom)o Fv(E)-5 b(E)s
Fw(.)p 1723 2000 V 298 2060 V 347 2042 a(87)p 443 2060 V 74
w(By)15 b(the)h(syn)o(tactic)g(restrictions)f Fk(strid)25 b
Fv(=)-30 b Fp(2)14 b Fw(Dom)o Fv(S)-5 b(E)s Fw(.)p 1723 2060
V 298 2120 V 347 2102 a(94)p 443 2120 V 74 w(By)15 b(the)h(syn)o(tactic)g
(restrictions)f Fk(funid)25 b Fv(=)-29 b Fp(2)14 b Fw(Dom)o
Fv(F)7 b Fw(.)p 1723 2120 V 298 2180 V 347 2162 a(99)p 443
2180 V 74 w(By)15 b(the)h(syn)o(tactic)g(restrictions)f Fk(funid)25
b Fv(=)-29 b Fp(2)14 b Fw(Dom)o Fv(F)7 b Fw(.)p 1723 2180 V
299 2182 1425 2 v 66 2262 a(These)19 b(commen)o(ts)d(to)j(the)f(rules)g(in)g
(the)h(De\014nition)f(tell)f(us)i(exactly)f(whic)o(h)f(prop)q(erties)i(to)g
(c)o(hec)o(k)66 2322 y(and)e(also)g(where)f(to)h(c)o(hec)o(k)d(them.)140
2383 y(If)h(at)h(some)f(p)q(oin)o(t)i(a)f(restriction)f(is)h(violated,)f
(error)h(information)f(is)h(inserted)f(in)o(to)h(the)f(syn)o(tax)66
2443 y(tree.)66 2609 y Ft(5.5)83 b(Seman)n(tic)26 b(Ob)5 b(jects)66
2719 y Fw(The)21 b(sp)q(eci\014cation)f(of)h(the)g(seman)o(tic)d(ob)s(jects)i
(for)h(the)g(Mo)q(dules)f(and)h(the)g(op)q(erations)g(on)h(these)66
2779 y(ob)s(jects)16 b(are)h(giv)o(en)e(b)o(y)h(the)g(follo)o(wing)g
(signatures.)p eop
%%Page: 53 60
bop 66 527 a Fy(Chapter)40 b(5)66 735 y(Mo)s(dules)i(Elab)s(oration)66
992 y Ft(5.1)83 b(In)n(tro)r(duction)66 1102 y Fw(This)15 b(section)e
(describ)q(es)h(the)g(Mo)q(dules)g(Elab)q(orator)i(of)f(the)f(ML)g(Kit.)20
b(W)l(e)14 b(giv)o(e)f(an)i(o)o(v)o(erview)d(of)i(the)66 1162
y(elab)q(orator)19 b(and)f(explain)e(the)h(more)f(in)o(tricate)f(parts)j(in)f
(more)f(detail;)g(in)h(particular)g(w)o(e)g(describ)q(e)66
1222 y(ho)o(w)j(and)h(where)e(admissi\014cation)g(is)g(c)o(hec)o(k)o(ed.)29
b(W)l(e)20 b(also)g(describ)q(e)f(the)h(implem)o(en)n(tation)d(of)j(the)66
1282 y(static)c(ob)s(jects)g(and)h(op)q(erations)h(used)e(in)g(the)g(elab)q
(orator.)140 1342 y(The)11 b(outline)g(of)h(the)f(c)o(hapter)g(is)g(as)h
(follo)o(ws.)20 b(Section)11 b(5.2)h(giv)o(es)e(an)i(o)o(v)o(erview)e(of)i
(the)f(Elab)q(orator.)66 1403 y(Then)16 b(w)o(e)g(describ)q(e)f(the)g
(handling)i(of)f(elab)q(oration)g(errors)g(and)h(the)e(impleme)o(n)o(tation)e
(of)j(syn)o(tactic)66 1463 y(restrictions.)29 b(Sections)18
b(5.5{5.19)i(describ)q(e)e(the)h(implem)o(en)o(tati)o(on)e(of)i(the)f(seman)o
(tic)f(ob)s(jects)i(and)66 1523 y(op)q(erations.)j(The)14 b(constituen)o(t)g
(\014les)f(of)i(the)f(Mo)q(dules)g(Elab)q(orator)i(are)e(describ)q(ed)g(in)f
(Section)h(5.20.)140 1583 y(W)l(e)i(assume)f(the)h(reader)g(is)g(familiar)e
(with)i(algorithm)g Fv(W)23 b Fw([8].)140 1643 y(The)12 b(order)g(of)h(the)f
(subsections)h(of)f(the)g(presen)o(t)g(Chapter)h(follo)o(ws)f(the)g(order)g
(of)h(the)f(subsections)66 1704 y(of)17 b(Section)f(5)g(of)h(the)f
(De\014nition)g(\(the)g(Static)g(Seman)o(tics)e(for)i(Mo)q(dules\).)66
1870 y Ft(5.2)83 b(Elab)r(oration)66 1979 y Fw(F)l(unctor)16
b Fu(ElabTopde)o(c)p Fw(,)c(lo)q(cated)k(in)f(the)g(\014le)g
Fu(/Common/E)o(lab)o(Top)o(dec)o(.s)o(ml)p Fw(,)d(implem)o(en)n(ts)h(the)i
(elab-)66 2040 y(orator)h(for)e(the)g(Mo)q(dules,)g(i.e.,)f(it)h(implem)o(e)o
(n)o(ts)e(the)i(static)g(seman)o(tics)e(for)i(the)g(Mo)q(dules)h(as)f
(de\014ned)66 2100 y(in)g([11,)g(Section)f(5].)21 b(Recall)12
b(from)h(Section)g(2.2.5)28 b(that)15 b(functor)f Fu(ElabTopde)o(c)d
Fw(is)j(parameterised)e(on)66 2160 y(the)18 b(ob)s(jects)f(of)h(the)f(static)
g(seman)o(tics)f(of)i(the)f(Mo)q(dules)h(and)g(that)g(it)f(returns)h(a)g
(structure)f(whic)o(h)66 2220 y(can)g(b)q(e)f(constrained)h(b)o(y)e
(signature)i Fu(ELABTOPDEC)o Fw(.)140 2280 y(The)g(rules)g(de\014ning)h(the)f
(static)g(seman)o(tics)f(in)h(the)h(De\014nition)f(are)g(non-deterministic.)
23 b(Non-)66 2341 y(determinism)9 b(is)k(used)g(to)g(express)f(sharing.)21
b(Because)12 b(of)h(this)g(non-determinism,)d(the)i(rules)h(cannot)66
2401 y(b)q(e)f(implem)o(en)n(ted)c(directly)l(.)18 b(Hence)10
b(w)o(e)h(need)f(an)i(algorithm)e(whic)o(h)g(resolv)o(es)h(the)g
(non-determinism.)66 2461 y(Moreo)o(v)o(er)16 b(w)o(e)h(are)g(in)o(terested)f
(in)h(an)g(algorithm)f(with)h(the)g(prop)q(erties)g(that)h(if)f(it)f
(succeeds,)h(it)f(re-)66 2521 y(turns)24 b(the)f(principal)f(signature)i(and)
g(if)e(the)h(signature)h(expression)f(to)g(b)q(e)h(elab)q(orated)g(cannot)66
2581 y(elab)q(orate)d(according)f(to)g(the)g(static)g(seman)o(tics,)e(then)i
(the)g(algorithm)f(fails.)32 b(Our)20 b(algorithm)e(is)66 2642
y(based)i(on)g(the)f(pro)q(of)h(of)g(the)e(Principalit)o(y)g(Theorem)g([10,)h
(App)q(endix)g(A.2].)29 b(The)19 b(algorithm)f(re-)66 2702
y(sem)o(bles)12 b Fv(W)7 b Fw(,)14 b(where)g(structures)g(corresp)q(ond)h(to)
g(t)o(yp)q(es,)f(signatures)g(corresp)q(ond)i(to)e(t)o(yp)q(e)g(sc)o(hemes,)
66 2762 y(and)j(realisations)g(corresp)q(ond)g(to)f(substitutions.)987
2947 y(53)p eop
%%Page: 52 61
bop 66 50 a Fs(CHAPTER)17 b(4.)37 b(CORE)17 b(ELABORA)l(TION)974
b Fw(52)66 195 y(v)m(ariables)17 b(whic)o(h)e(are)i(to)g(b)q(e)f(quan)o
(ti\014ed,)g(the)g(function)g Fu(Close)p Fw(,)e(implem)o(en)o(te)o(d)g(in)i
Fu(StatObject)o Fw(,)d(is)66 255 y(used)k(to)f(p)q(erform)g(the)g(actual)g
(closing)g(of)h(the)f(t)o(yp)q(e)f(sc)o(heme.)66 400 y Fr(4.3.6)70
b(T)n(yp)r(e)23 b(Structures)g(and)h(T)n(yp)r(e)e(En)n(vironmen)n(ts)66
492 y Fw(The)d(De\014nition)f(declares)f([Section)h(4.9])g(that)g(\\All)g(t)o
(yp)q(e)g(structures)g(o)q(ccurring)g(in)g(elab)q(orations)66
552 y(are)d(assumed)g(to)g(b)q(e)g(w)o(ell-formed.")k(Ho)o(w)o(ev)o(er,)13
b(it)h(is)h(not)h(necessary)e(explicitly)e(to)k(c)o(hec)o(k)d(that)i(this)66
612 y(assumption)g(holds)f(in)g(the)h(elab)q(orator.)21 b(The)15
b(reason)g(is)f(the)g(follo)o(wing.)21 b(Giv)o(en)13 b(that)i(the)f(syn)o
(tactic)66 673 y(constrain)o(t)f(\(De\014nition,)g(section)g(2.9,)g(third)g
(bullet\))f(\\An)o(y)g(t)o(yv)m(ar)h(o)q(ccurring)g(within)f(the)h(righ)o(t)g
(side)66 733 y([of)19 b(a)h Fk(typbind)25 b Fw(or)19 b Fk(datbind)5
b Fw(])20 b(m)o(ust)d(o)q(ccur)i(in)g Fk(tyvarse)n(q)g Fw([of)g(the)g
Fk(typbind)25 b Fw(resp.)30 b Fk(datbind)5 b Fw(]")19 b(is)g(met,)66
793 y(the)d(t)o(yp)q(e)f(functions)h(b)q(ecome)f(w)o(ell-formed,)e(c.f.)h
(rule)h(28)i(and)f(its)g(commen)o(t.)i(Moreo)o(v)o(er,)c(the)i(t)o(yp)q(e)66
853 y(structures)k(generated)f(during)h(elab)q(oration,)h(using)f(rule)f(28)h
(and)g(29)h(are)e(then)h(w)o(ell-formed)d(to)q(o)66 913 y(|)g(this)g(is)g
(easy)g(to)h(see,)e(just)i(compare)e(the)g(de\014nition)h(of)g(w)o
(ell-formed)e(t)o(yp)q(e)i(structure)f(with)h(the)66 974 y(generated)12
b(t)o(yp)q(e)f(structures)g(in)g(the)g(t)o(w)o(o)g(rules.)19
b(Also,)12 b(note)f(that)h(the)f(uni\014cation)g(\(admissi\014cation\))66
1034 y(of)17 b(mo)q(dules)e(preserv)o(es)g(w)o(ell-formedness.)140
1094 y(The)f(function)h Fu(maximize)p 639 1094 16 2 v 15 w(equality)d
Fw(in)i Fu(Environmen)o(ts)d Fw(implem)o(en)o(ts)h(the)i(earlier)f(men)o
(tioned)66 1154 y(maximisation)h(of)j(equalit)o(y)e(\(see)i(section)f
(4.2.6\).)23 b(The)16 b(implem)o(en)o(tation)e(follo)o(ws)i(the)h
(description)66 1214 y(in)f(the)g(Commen)o(tary)e(p.)i(52)h(directly)l(,)d
(hence)h(w)o(e)h(do)h(not)g(describ)q(e)e(it)h(here.)66 1359
y Fr(4.3.7)70 b(Uni\014cation)66 1451 y Fw(The)17 b(uni\014cation)f(of)g(t)o
(yp)q(es)g(is)g(implem)o(en)o(ted)d(in)j Fu(StatObjec)o(t)p
Fw(.)i(The)f(implem)o(e)o(n)o(tation)d(is)i(straigh)o(t-)66
1511 y(forw)o(ard,)h(except)e(for)i(the)f(uni\014cation)h(of)f(record)h(t)o
(yp)q(es)f(whic)o(h)g(w)o(e)g(ha)o(v)o(e)f(describ)q(ed)h(ab)q(o)o(v)o(e.)22
b(Ho)o(w-)66 1572 y(ev)o(er,)k(one)f(needs)g(to)h(b)q(e)f(careful)g(to)g(c)o
(hec)o(k)e(the)i(attributes)g(of)h(the)f(t)o(yp)q(e)f(v)m(ariables)h(since,)i
(as)66 1632 y(men)o(tioned,)d(not)h(all)f(t)o(yp)q(e)g(v)m(ariables)g(can)h
(b)q(e)g(uni\014ed)f(|)g(this)g(is)g(implem)o(en)o(ted)d(in)j(functions)66
1692 y Fu(checkAttrib)o(ute)o(s)13 b Fw(and)k Fu(unifyExpli)o(cit)o
Fw(.)66 1858 y Ft(4.4)83 b(Files)66 1968 y Fw(The)17 b(relev)m(an)o(t)e
(\014les)h(are)g(listed)f(b)q(elo)o(w.)22 b(They)16 b(all)f(reside)h(in)g
(directory)f Fu(Common)p Fw(.)263 2078 y Fx(File)488 b(Con)n(tains)263
2198 y Fu(ELABDEC.s)o(ml)296 b Fw(Signature)16 b(for)h(the)f(Core)g(Elab)q
(orator)263 2258 y Fu(ENVIRONME)o(NTS)o(.sm)o(l)168 b Fw(Signature)16
b(for)h(the)f(en)o(vironmen)o(ts)263 2319 y Fu(ENVIRONME)o(NTS)p
576 2319 V 15 w(PROP.sml)47 b Fw(Signature)16 b(for)h(the)f(propagated)h(en)o
(vironmen)o(ts)263 2379 y Fu(STATOBJEC)o(T.s)o(ml)219 b Fw(Signature)16
b(for)h(seman)o(tic)d(ob)s(jects)263 2439 y Fu(STATOBJEC)o(T)p
525 2439 V 16 w(PROP.sml)98 b Fw(Signature)16 b(for)h(propagated)g(seman)o
(tic)e(ob)s(jects)263 2499 y Fu(ElabDec.s)o(ml)296 b Fw(The)16
b(Core)g(Elab)q(orator)263 2559 y Fu(Environme)o(nts)o(.sm)o(l)168
b Fw(The)16 b(en)o(vironmen)o(ts)e(of)i(the)g(seman)o(tic)e(ob)s(jects)263
2619 y Fu(StatObjec)o(t.s)o(ml)219 b Fw(Seman)o(tic)14 b(ob)s(jects)263
2680 y Fu(KitCompil)o(er.)o(sml)193 b Fw(Builds)15 b(the)h(Kit)g(using)g
(functor)h(applications)263 2740 y Fu(TYVAR.sml)347 b Fw(Signature)16
b(for)h(the)f(syn)o(tactic)f(category)h(T)o(yV)l(ar)p eop
%%Page: 51 62
bop 66 50 a Fs(CHAPTER)17 b(4.)37 b(CORE)17 b(ELABORA)l(TION)974
b Fw(51)140 195 y(In)13 b(Section)g(7.5)h(the)g(implem)o(en)n(tation)d(of)j
(the)g(p)q(erv)m(asiv)o(es)f(\(giv)o(en)g(in)g(Figure)h(23)g(in)g(App)q
(endix)f(A)66 255 y(of)19 b(the)f(De\014nition\))g(is)g(describ)q(ed.)27
b(A)18 b(small)f(n)o(um)o(b)q(er)f(of)j(the)f(p)q(erv)m(asiv)o(es)g(are)g
(inserted)g(man)o(ually)66 315 y(in)o(to)k(an)g(initial)e(en)o(vironmen)o(t.)
35 b(This)22 b(naturally)g(tak)o(es)f(place)g(in)h Fu(Environme)o(nts)o
Fw(.)35 b(Ev)o(erything)66 376 y(is)21 b(as)g(y)o(ou)f(w)o(ould)g(exp)q(ect,)
h(except)e(that)i(w)o(e)f(assign)h Fu(ref)e Fw(an)i(imp)q(erativ)o(e)d(t)o
(yp)q(e)i(when)g(used)h(as)g(a)66 436 y(constructor)j(in)f(a)g(pattern.)42
b(This)23 b(is)f(in)h(accordance)g(with)g(the)g(De\014nition)f(\(cf.)42
b(rule)22 b(43)i(and)66 496 y(p.)17 b(28)i(line)d(12{13)j(whic)o(h)e(sa)o(ys)
h(that)g Fv(C)t Fw(\()p Fk(c)n(on)t Fw(\))e(is)i(tak)o(en)f(to)g(stand)i(for)
e(\()p Fv(V)s(E)k Fw(of)c Fv(C)t Fw(\)\()p Fk(c)n(on)t Fw(\),)g(and)h(VE0)66
556 y(in)d(Figure)g(23)h(where)f Fu(ref)f Fw(is)h(assigned)h(the)f(t)o(yp)q
(e)g(sc)o(heme)e Fp(8)1206 538 y Fl(0)p 1211 556 16 2 v 1227
556 a Fu(a)p Fv(:)1267 538 y Fl(0)p 1272 556 V 1288 556 a Fu(a)5
b Fp(!)1375 538 y Fl(0)p 1381 556 V 1396 556 a Fu(a)p Fw(.\))21
b(But)14 b(it)h(implies)e(that)i(the)66 616 y(user)20 b(cannot)h(de\014ne)e
Fu(!)32 b Fw(with)20 b(the)g(t)o(yp)q(e)f(giv)o(en)g(in)g(VE0.)33
b(The)19 b(declaration)h Fu(fun)25 b(!\(ref)e(x\))i(=)h(x)66
677 y Fw(will)16 b(assign)h(the)f(t)o(yp)q(e)496 659 y Fl(0)p
503 677 V 518 677 a Fu(a)e(ref)t Fp(!)696 659 y Fl(0)p 702
677 V 717 677 a Fu(a)i Fw(to)h Fu(!)p Fw(.)140 737 y(Moreo)o(v)o(er,)d(note)h
(that)h(the)f(only)h(reason)g(for)g(explicitly)c(declaring)j(the)g(t)o(yp)q
(e)g Fu(bool)f Fw(is)h(that)h(it)f(is)66 797 y(used)i(in)f(the)g(initial)f(t)
o(yp)q(e)g(sc)o(hemes)f(for)j(the)f(o)o(v)o(erloaded)g(relational)f(op)q
(erators.)66 941 y Fr(4.3.3)70 b(Scop)r(e)23 b(of)g(Explicit)e(T)n(yp)r(e)h
(V)-6 b(ariables)66 1034 y Fw(Recall)14 b(from)f(rule)h(17,)h(Section)f(4.6)g
(in)g(the)g(De\014nition)h(\(see)f(also)g(Commen)o(tary)e(Section)i(4.4\),)h
(that)66 1094 y(w)o(e)i(m)o(ust)e(b)q(e)i(able)f(to)h(compute)e(the)i(set)f
(of)h(scop)q(ed)g(explicit)e(t)o(yp)q(e)h(v)m(ariables)g(for)h(a)g(giv)o(en)f
Fk(valbind)p Fw(.)66 1154 y(This)h(computation)f(is)g(done)g(b)o(y)g
(function)g Fu(Scoped)p 1046 1154 V 17 w(TyVars)e Fw(in)i Fu(Environmen)o(ts)
p Fw(.)i Fu(Scoped)p 1789 1154 V 16 w(TyVars)66 1214 y Fw(tak)o(es)24
b(a)g(syn)o(tax)g(tree)f(for)h(a)g Fk(valbind)31 b Fw(and)24
b(a)h(t)o(yp)q(e)e(v)m(ariable)h(set)f(\(the)h(parameter)f
Fu(tyvarset)p Fw(\),)66 1275 y(whic)o(h)16 b(is)h(supp)q(osed)h(to)f(b)q(e)g
(the)f Fk(U)h Fw(set)f(of)h(the)g(con)o(text)e(in)i(whic)o(h)f(the)g
Fk(valbind)23 b Fw(is)17 b(elab)q(orated,)g(and)66 1335 y(returns)f(the)e
(set)h(of)h(scop)q(ed)g(t)o(yp)q(e)e(v)m(ariables.)21 b(The)15
b(set)g(is)g(found)h(b)o(y)e(\014nding)i(the)f(set)g(of)g(unguarded)66
1395 y(t)o(yp)q(e)i(v)m(ariables)g(and)h(then)f(remo)o(ving)e(the)i(t)o(yp)q
(e)g(v)m(ariables)g(that)g(o)q(ccur)h(in)f Fu(tyvarset)p Fw(.)k(The)c(set)g
(of)66 1455 y(unguarded)f(t)o(yp)q(e)e(v)m(ariables)g(is)h(found)g(b)o(y)f
(tra)o(v)o(ersing)g(the)g Fk(valbind)21 b Fw(and)15 b(recursiv)o(ely)d
(collecting)h(the)66 1515 y(explicit)f(t)o(yp)q(e)i(v)m(ariables.)20
b(This)14 b(is)g(done)g(b)o(y)g(a)g(collection)f(of)h(m)o(utual)e(recursiv)o
(e)h(functions)h(with)f(the)66 1576 y(pre\014x)j Fu(unguarded)p
440 1576 V 32 w Fw(in)g(their)f(names.)66 1720 y Fr(4.3.4)70
b(Non-expansiv)n(e)23 b(Expressions)66 1812 y Fw(Giv)o(en)15
b(an)h(expression)f Fk(exp)s Fw(,)g(the)h(function)f Fu(isExpansi)o(veE)o(xp)
d Fw(in)j(functor)g Fu(Environment)o(s)d Fw(returns)66 1872
y(true)20 b(i\013)f(the)g(expression)g(is)h(expansiv)o(e)e(as)i(de\014ned)f
(in)g([11,)h(Section)f(4.7].)31 b(The)19 b(implem)o(en)o(tation)66
1933 y(follo)o(ws)e(the)f(de\014nition)f(of)i(expansiv)o(eness)e(closely)l(.)
66 2077 y Fr(4.3.5)70 b(Closure)66 2169 y Fw(The)11 b(Clos)g(op)q(eration)h
(de\014ned)f(in)f(Section)h(4.8)g(of)g(the)f(De\014nition)h(is)g(implem)o(e)o
(n)o(ted)d(in)i Fu(Environment)o(s)p Fw(,)66 2230 y(b)o(y)16
b(a)h(function)f Fu(Clos)f Fw(with)h(the)g(follo)o(wing)g(sp)q(eci\014cation)
g(\(from)f(signature)h Fu(ENVIRONMENT)o(S)p Fw(\).)271 2331
y Fu(val)25 b(Clos)f(:)h(Context)f(*)h(valbind)e(*)i(VarEnv)f(->)g(VarEnv)66
2433 y Fw(The)15 b(implem)o(en)o(tation)d(follo)o(ws)i(the)h(De\014nition)f
(closely)l(.)20 b(W)l(e)14 b(will)g(only)g(lik)o(e)f(to)i(p)q(oin)o(t)g(out)g
(that)g(the)66 2493 y(t)o(yp)q(e)i(v)m(ariables)h(in)f(the)g
Fk(U)25 b Fw(set)17 b(of)h(the)f Fk(Context)24 b Fw(are)17
b(considered)g(as)h(free)f(t)o(yp)q(e)f(v)m(ariables)i(whic)o(h)e(is)66
2553 y(b)q(ecause)f(they)e(are)h(going)h(to)g(b)q(e)f(quan)o(ti\014ed)f
(later)h(\(as)h(they)e(are)h(scop)q(ed)h(further)f(out\).)20
b(T)l(o)15 b(\014nd)f(the)66 2614 y(set)h(of)g(t)o(yp)q(e)f(v)m(ariables)g
(whic)o(h)g(are)h(to)g(b)q(e)f(quan)o(ti\014ed,)g(w)o(e)g(use)h(a)g
(function,)f Fu(isExpansive)o(Id)o Fw(.)k(F)l(or)d(a)66 2674
y(giv)o(en)f(v)m(alue)g(binding)h Fu(isExpansiv)o(eId)c Fw(returns)j(a)h
(function)g(whic)o(h,)f(for)g(ev)o(ery)g(v)m(ariable)g(b)q(ound)i(in)66
2734 y(the)g(v)m(alue)g(binding,)g(returns)g(true,)f(i\013)h(it)g(is)f(b)q
(ound)j(in)d(a)i Fk(p)n(at)h Fw(=)c Fk(exp)20 b Fw(where)15
b(the)h Fk(exp)k Fw(is)c(expansiv)o(e.)66 2794 y(Moreo)o(v)o(er,)22
b(when)f(w)o(e)g(for)h(a)g(t)o(yp)q(e)f(sc)o(heme)f(in)h(the)g(range)h(of)g
Fk(VE)28 b Fw(ha)o(v)o(e)21 b(found)h(the)f(set)h(of)g(t)o(yp)q(e)p
eop
%%Page: 50 63
bop 66 50 a Fs(CHAPTER)17 b(4.)37 b(CORE)17 b(ELABORA)l(TION)974
b Fw(50)271 195 y Fu(and)25 b(StrEnv)75 b(=)25 b(STRENV)e(of)i(\(strid,)e
(Str\))i(FinMap.ma)o(p)271 255 y(and)g(TyEnv)101 b(=)25 b(TYENV)f(of)h
(\(tycon,)e(TyStr\))g(FinMap.map)271 315 y(and)i(TyStr)101
b(=)25 b(TYSTR)f(of)h({theta:)e(TypeFcn,)f(CE:)j(ConEnv})271
376 y(and)g(VarEnv)75 b(=)25 b(VARENV)e(of)i(\(id,)f(VarEnvRange)o(PRI)o(VAT)
o(E\))e(FinMap.map)271 436 y(and)j(ConEnv)75 b(=)25 b(CONENV)e(of)i(\(con,)f
(TypeScheme)o(\))f(SortedFin)o(Map)o(.ma)o(p)271 496 y(and)i(ExConEnv)e(=)i
(EXCONENV)e(of)i(\(excon,)e(Type\))g(FinMap.map)271 556 y(and)i(Str)153
b(=)25 b(STR)g(of)f({m:)h(StrName,)e(E:)i(Env})p 66 623 1890
6 v 66 707 a Fw(There)f(are)h(t)o(w)o(o)f(things)h(to)f(notice)g(here.)45
b(First)24 b(the)g(range)h(of)g(the)f(v)m(ariable)g(en)o(vironmen)o(t)d(is)66
768 y(impleme)o(n)o(ted)13 b(b)o(y)j(the)g(datat)o(yp)q(e)p
66 833 V 271 917 a Fu(datatype)23 b(VarEnvRange)o(PR)o(IVA)o(TE)f(=)374
978 y(LONGVARpri)o(v)h(of)i(TypeSchem)o(e)323 1038 y(|)g(LONGCONpri)o(v)e(of)
i(TypeSchem)o(e)d(*)k(con)e(list)323 1098 y(|)h(LONGEXCONp)o(riv)d(of)j(Type)
p 66 1169 V 66 1253 a Fw(This)d(datat)o(yp)q(e)f(is)h(only)f(used)g(in)o
(ternally)f(in)h(functor)g Fu(Environmen)o(ts)p Fw(;)f(the)h(lo)q(okup)h(op)q
(erations)66 1314 y(return)16 b(v)m(alues)h(of)f(the)g(t)o(yp)q(e)p
66 1379 V 271 1463 a Fu(datatype)23 b(VarEnvRange)f(=)374 1524
y(LONGVAR)74 b(of)25 b(TypeScheme)323 1584 y(|)g(LONGCON)74
b(of)25 b(TypeScheme)323 1644 y(|)g(LONGEXCON)d(of)j(Type)p
66 1715 V 66 1802 a Fw(The)f(reason)g(for)f(the)g(di\013erence)f(is)h(that)h
(the)e(ab)q(o)o(v)o(e)i(men)o(tioned)d(\(in)h(Section)h(4.2.6\))g(function)66
1862 y Fu(addTypeInfo)p 354 1862 16 2 v 15 w(CON)e Fw(needs)g(the)h(extra)g
(information)e(concerning)i(fello)o(w)f(constructors)h(to)h(insert)66
1922 y(the)c(correct)f(information.)28 b(By)18 b(the)g(w)o(a)o(y)l(,)h
(notice)f(the)h(tagging)h(of)f(the)f(t)o(yp)q(es,)h(needed)f(to)h(resolv)o(e)
66 1983 y(iden)o(ti\014ers)c(as)i(men)o(tioned)d(in)i(Section)g(4.2.3.)140
2043 y(The)g(range)g(of)h(a)f(v)m(ariable)g(en)o(vironmen)o(t)e(is)i
(de\014ned)f(in)h(the)g(De\014nition)g(to)g(b)q(e)h(a)f(t)o(yp)q(e)g(sc)o
(heme,)66 2103 y(so)k(wh)o(y)f(is)g(the)f(domain)h(of)g(the)g(constructor)g
Fu(LONGEXCON)d Fk(T)l(yp)n(e)22 b Fw(instead)d(of)g Fk(T)l(yp)n(eScheme)t
Fw(?)31 b(The)66 2163 y(reason)21 b(is)e(simple:)26 b(the)19
b(range)i(of)f(an)g(exception)e(en)o(vironmen)o(t)f(is)i(de\014ned)h(in)f
(the)h(De\014nition)f(to)66 2223 y(b)q(e)i(T)o(yp)q(e)f(and)g(exceptions)g
(en)o(ter)f(the)h(v)m(ariable)g(en)o(vironmen)o(t)d(b)o(y)j(cop)o(ying)f
(from)g(the)h(exception)66 2284 y(en)o(vironmen)o(t,)13 b(c.f.)h(rule)h
(\(21\),)g(applying)h(an)g(implici)o(t)d(injection)h(\(from)g(T)o(yp)q(e)h
(to)h(T)o(yp)q(eSc)o(heme\))d(to)66 2344 y(eac)o(h)18 b(t)o(yp)q(e)f(in)h
(the)f(range)i(of)f(the)g(exception)e(en)o(vironmen)o(t.)24
b(As)17 b(w)o(e)h(ha)o(v)o(e)f(already)g(c)o(hosen)h(to)g(tag)66
2404 y(the)g(range)g(of)g(a)g(v)m(ariable)g(en)o(vironmen)o(t,)d(w)o(e)i(can)
h(a)o(v)o(oid)f(applying)h(this)f(injection)g(b)o(y)g(using)i
Fk(T)l(yp)n(e)66 2464 y Fw(instead)e(of)f Fk(T)l(yp)n(eScheme)21
b Fw(in)16 b(the)g(domain)g(of)g Fu(LONGEXCON)p Fw(.)140 2524
y(The)23 b(other)g(thing)g(to)g(notice)g(is)f(that)i(the)f(constructor)g(en)o
(vironmen)o(t)d(is)j(implem)o(en)o(te)o(d)e(us-)66 2585 y(ing)d(a)g(sorted)g
(\014nite)f(map,)g(while)f(the)i(other)f(en)o(vironmen)o(ts)e(are)j(implem)o
(en)n(ted)d(using)j(\(unsorted\))66 2645 y(\014nite)h(maps.)27
b(The)19 b(reason)h(is)e(simply)f(that)i(is)f(mak)o(es)f(it)h(a)i(lot)e
(easier)g(to)h(impleme)o(n)o(t)d(the)i(op)q(era-)66 2705 y(tion)h
Fu(equalCE)d Fw(whic)o(h)i(is)h(needed)f(in)g(the)h(Mo)q(dules)g(Elab)q
(orator)h(\(to)f(c)o(hec)o(k)e(for)i(enric)o(hmen)o(t,)d(c.f.,)66
2765 y(De\014nition)g(Section)g(5.10.\))p eop
%%Page: 49 64
bop 66 50 a Fs(CHAPTER)17 b(4.)32 b(CORE)16 b(ELABORA)l(TION)980
b Fw(49)66 195 y(Core.)21 b(F)l(or)14 b(instance,)f(functor)h
Fu(ElabDec)d Fw(is)i(parameterized)f(on)i Fu(STATOBJECT)c Fw(and)k
Fu(ENVIRONMEN)o(TS)p Fw(,)66 255 y(while)h(functor)h Fu(ModuleEnvi)o(ro)o
(nme)o(nts)o Fw(,)d(whic)o(h)h(impleme)o(n)o(ts)f(some)h(of)i(the)g(seman)o
(tic)d(ob)s(jects)j(and)66 315 y(op)q(erations)24 b(needed)f(in)f(Mo)q(dules)
h(elab)q(oration,)i(is)e(parameterized)e(on)i Fu(STATOBJECT)p
1740 315 16 2 v 15 w(PROP)f Fw(and)66 376 y Fu(ENVIRONMENT)o(S)p
380 376 V 15 w(PROP)p Fw(.)140 436 y(Notice)d(that)i(the)g(implem)o(en)o
(tati)o(on)e(of)i(the)f(seman)o(tic)f(ob)s(jects)h(has)i(b)q(een)f(divided)e
(in)o(to)i(t)o(w)o(o,)66 496 y(as)f(the)e(impleme)o(n)o(tation)e(of)j(en)o
(vironmen)o(ts)d(need)j(not)g(kno)o(w)g(the)f(exact)h(implem)o(e)o(n)o
(tation)d(of)j(the)66 556 y(underlying)d(seman)o(tic)e(ob)s(jects.)140
616 y(The)j(\014les)f(corresp)q(onding)i(to)g(the)e(signatures)i(are)f(named)
f(after)h(the)g(signatures)h(but)f(with)g(an)66 677 y(extension)f
Fu(.sml)p Fw(.)140 737 y(The)g(functors)g Fu(StatObject)d Fw(and)j
Fu(Environment)o(s)d Fw(implem)o(en)n(t)h(the)h(seman)o(tic)f(ob)s(jects.)21
b(When)66 797 y(the)d(system)f(is)h(built,)g(these)g(functors)g(are)g
(applied,)g(yielding)f(unconstrained)i(structures,)f(whic)o(h)66
857 y(afterw)o(ards)j(are)f(constrained)g(b)o(y)f(the)h(ab)q(o)o(v)o(e)g(men)
o(tioned)e(signatures)i(suc)o(h)g(that)g(w)o(e)g(obtain)g(the)66
917 y(desired)c(structures.)21 b(This)16 b(tak)o(es)g(place)g(in)g(functor)g
Fu(Basics)e Fw(in)i(\014le)g Fu(KitCompile)o(r.)o(sml)o Fw(.)140
978 y(Most)21 b(of)h(the)f(seman)o(tic)f(ob)s(jects)h(and)h(op)q(erations)h
(are)e(impleme)o(n)o(ted)d(in)j(a)h(straigh)o(tforw)o(ard)66
1038 y(manner.)j(Belo)o(w)16 b(w)o(e)h(describ)q(e)g(those)h(seman)o(tic)e
(ob)s(jects)h(and)h(op)q(erations)h(that)f(p)q(erhaps)g(deserv)o(e)66
1098 y(a)f(bit)f(of)g(explanation.)22 b(The)16 b(presen)o(tation)g(follo)o
(ws)g(the)g(De\014nition)g(Section)g(4.1{4.9.)66 1242 y Fr(4.3.1)70
b(T)n(yp)r(e)23 b(V)-6 b(ariables)66 1335 y Fw(The)17 b(follo)o(wing)f(is)h
(tak)o(en)f(from)f(functor)i Fu(StatObject)c Fw(and)k(is)f(our)h(impleme)o(n)
o(tation)d(of)j(t)o(yp)q(e)f(v)m(ari-)66 1395 y(ables.)p 66
1451 1890 6 v 271 1535 a Fu(datatype)23 b(TyVar)h(=)374 1595
y(ORDINARY)f(of)i({id:)f(int,)g(equality:)e(bool,)707 1655
y(imperative:)g(bool,)i(overloade)o(d:)e(bool})323 1716 y(|)j(EXPLICIT)e(of)i
(SyntaxTyV)o(ar)p 66 1787 V 66 1871 a Fw(The)14 b(thing)g(to)g(notice)e(is)i
(the)f(division)g(in)o(to)g(explicit)e(t)o(yp)q(e)i(v)m(ariables)h(and)g
(ordinary)g(t)o(yp)q(e)f(v)m(ariables.)66 1931 y(The)19 b(explicit)e(t)o(yp)q
(e)h(v)m(ariables)h(are)g(implem)o(en)n(ted)d(b)o(y)i(the)h(syn)o(tactic)f
(class)g(of)i(t)o(yp)q(e)e(v)m(ariables)h(\(as)66 1991 y(sp)q(eci\014ed)i(b)o
(y)g(signature)h Fu(TYVAR)p Fw(\).)d(While)h(ordinary)i(t)o(yp)q(e)e(v)m
(ariables)i(ha)o(v)o(e)e(attributes)h(\(equalit)o(y)l(,)66
2052 y(imp)q(erativ)o(e)13 b(and)j(o)o(v)o(erloaded\),)e(this)i(is)f(not)h
(needed)e(for)i(the)f(explicit)e(t)o(yp)q(e)i(v)m(ariables)g(as)h(the)f(v)m
(alue)66 2112 y(of)e(the)f(attributes)h(equalit)o(y)e(and)i(imp)q(erativ)o(e)
c(can)k(b)q(e)g(obtained)f(from)g(their)f(syn)o(tactic)h(app)q(earance,)66
2172 y(and)17 b(attribute)f(o)o(v)o(erloaded)g(is)g(not)g(needed)g(as)h
(explained)e(in)h(section)g(4.2.4.)66 2316 y Fr(4.3.2)70 b(En)n(vironmen)n
(ts)66 2409 y Fw(The)15 b(con)o(texts)f(and)i(en)o(vironmen)o(ts)c(are)i
(impleme)o(n)o(ted)d(b)o(y)k(the)f(follo)o(wing)g(datat)o(yp)q(e)i(\(from)d
(functor)66 2469 y Fu(Environment)o(s)p Fw(\).)p 66 2537 V
271 2621 a Fu(datatype)374 2682 y(Context)49 b(=)25 b(CONTEXT)e(of)i({T:)f
(TyNameSet,)e(U:)j(TyVarSet,)e(E:)i(Env})271 2742 y(and)g(Env)153
b(=)25 b(ENV)g(of)f({SE:)h(StrEnv,)e(TE:)h(TyEnv,)1040 2802
y(VE:)h(VarEnv,)e(EE:)i(ExConEnv})p eop
%%Page: 48 65
bop 66 50 a Fs(CHAPTER)17 b(4.)37 b(CORE)17 b(ELABORA)l(TION)974
b Fw(48)188 195 y(The)11 b(abstract)h(syn)o(tax)e(datat)o(yp)q(e)i(con)o
(tains)e(the)h(expression)g(constructor)g Fu(UNRES)p 1697 195
16 2 v 16 w(INFIXexp)p Fw(,)188 255 y(the)g(pattern)g(constructor)g
Fu(UNRES)p 820 255 V 17 w(INFIXpat)d Fw(and)j(the)g(declaration)f
(constructor)i Fu(UNRES)p 1850 255 V 16 w(FUNdec)p Fw(.)188
315 y(These)21 b(are)f(generated)g(b)o(y)g(the)g(parser,)h(but)f(eliminated)e
(during)i(the)g(parsing)h(p)q(ost-)188 376 y(pass,)14 b(so)g(that)f(the)f
(abstract)i(syn)o(tax)e(tree)g(passed)i(to)f(elab)q(orator)h(will)d(nev)o(er)
h(see)g Fu(UNRES)188 436 y Fw(syn)o(tax.)66 516 y(This)h(is)f(wh)o(y)g(the)g
(elab)q(orator)i(calls)e(the)g(function)g Fu(Crash.impo)o(ssi)o(bl)o(e)d
Fw(for)k(the)f Fu(UNRES)f Fw(constructor)66 576 y(cases.)34
b(The)21 b Fu(Crash.imp)o(oss)o(ib)o(le)c Fw(function)j(is)g(used)h(for)g(in)
o(ternal)e(errors)i(|)f(it)g(tak)o(es)g(a)g(string,)66 636
y(whic)o(h)c(it)g(prin)o(ts,)f(as)i(argumen)o(t)e(and)i(raises)f(an)h
(exception)e Fu(CRASH)p Fw(.)66 762 y Fx(Auxiliary)j(functions)66
855 y Fw(In)j(functor)g Fu(ElabDec)p Fw(,)e(the)i(elab)q(orator)h(prop)q(er,)
g(a)f(n)o(um)o(b)q(er)e(of)j(simple)c(auxiliary)i(functions)h(are)66
915 y(used.)140 975 y(W)l(e)c(ha)o(v)o(e)h(a)g(n)o(um)o(b)q(er)e(of)j
(functions)f(named)f(with)h(su\016xes)g(")p Fu(Conv)p Fw(")f(and)i(\\)p
Fu(Error)p Fw(",)e(whic)o(h)g(are)66 1035 y(simply)j(used)i(to)h(insert)e
(information)g(in)o(to)h(the)g(info)f(\014eld)h(of)g(the)g(abstract)h(syn)o
(tax)e(tree.)38 b(The)66 1095 y(follo)o(wing)21 b(four)f(functions)h(are)f
(used)h(to)g(insert)f(t)o(yp)q(e)g(information)f(and)i(lab)q(el)f
(information)g(in)o(to)66 1156 y(some)h(of)h(the)g(info)g(\014elds:)32
b Fu(addTypeIn)o(fo)p 890 1156 V 15 w(CON)p Fw(,)20 b Fu(addTypeInfo)p
1302 1156 V 15 w(EXCON)p Fw(,)f Fu(addTypeInfo)p 1766 1156
V 15 w(LAB)i Fw(and)66 1216 y Fu(addLabelInf)o(o)13 b Fw(|)j(this)g
(information)g(is)g(used)g(b)o(y)g(the)g(Compiler)e(\(Chapter)j(6\).)140
1276 y(The)h(function)g Fu(initialTE)d Fw(is)j(used)g(to)h(\014nd)g(the)f(t)o
(yp)q(e)f(en)o(vironmen)o(t)f(to)j(b)q(e)f(used)g(initially)f(in)66
1336 y(the)22 b(elab)q(oration)h(of)f(a)g Fk(datbind)p Fw(.)38
b(The)22 b(idea)g(used)g(here)f(is)h(in)f(fact)h(the)f(same)g(as)i(the)e(one)
h(used)66 1396 y(in)g(App)q(endix)g(A)g(of)h(the)f(Commen)o(tary)e(in)i(the)g
(principalit)o(y)e(pro)q(of,)k(pp.)f(126{128.)42 b(T)l(o)23
b(recall,)66 1457 y(the)17 b(idea)f(is)h(to)g(bind)g(the)f(declared)g(t)o(yp)
q(e)g(constructors)i(to)f(t)o(yp)q(e-structures)f(of)i(the)e(form)g(\()p
Fv(t)1833 1439 y Fl(\003)1852 1457 y Fv(;)8 b Fp(fg)p Fw(\),)66
1517 y(where)20 b Fv(t)229 1499 y Fl(\003)268 1517 y Fw(is)g(a)g(fresh)f(t)o
(yp)q(e)h(name)e(with)i(the)f(correct)h(arit)o(y)f(and)h(with)g(equalit)o(y)e
(attribute)h(set)h(to)66 1577 y(false.)27 b(The)18 b(empt)o(y)e(constructor)i
(en)o(vironmen)o(t)e(is)h(\014lled)h(in)f(later)h(\(b)o(y)f(function)h
Fu(elab)p 1730 1577 V 17 w(conbind)p Fw(\),)66 1637 y(and)i(the)f(correct)f
(equalit)o(y)f(attributes)i(are)g(determined)e(later)h(when)h(maximisi)o(ng)e
(equalit)o(y)l(,)g([11)q(,)66 1697 y(Section)f(4.9].)66 1860
y Ft(4.3)83 b(The)38 b(Implemen)n(tation)e(of)i(Seman)n(tic)e(Ob)5
b(jects)36 b(and)254 1951 y(Op)r(erations)66 2061 y Fw(In)18
b(this)f(section)h(w)o(e)f(describ)q(e)g(the)g(implen)o(tation)f(of)i(the)f
(seman)o(tic)f(ob)s(jects)h(and)h(op)q(erations)h(cor-)66 2121
y(resp)q(onding)f(to)e([11)q(,)f(sections)h(4.1{4.9].)140 2181
y(The)22 b(sp)q(eci\014cation)f(of)i(the)f(seman)o(tic)e(ob)s(jects)h(for)i
(the)f(core)f(and)i(the)f(op)q(erations)h(on)g(these)66 2241
y(ob)s(jects)16 b(is)h(giv)o(en)e(b)o(y)h(the)g(follo)o(wing)g(signatures.)22
b(\(The)16 b(column)f Fk(Sp)n(e)n(ci\014es)22 b Fw(is)16 b(what)h(the)f
(signature)66 2302 y(roughly)h(sp)q(eci\014es.\))p 98 2340
1827 2 v 97 2400 2 61 v 123 2382 a Fk(Signatur)n(e)p 576 2400
V 279 w(Sp)n(e)n(ci\014es)p 1924 2400 V 98 2402 1827 2 v 97
2462 2 61 v 123 2444 a Fu(STATOBJECT)p 576 2462 V 218 w Fw(T)o(yp)q(es,)f(t)o
(yp)q(esc)o(hemes,)d(t)o(yp)q(efunctions,)j(substitutions,)g(uni\014cation)p
1924 2462 V 97 2522 V 123 2504 a Fu(ENVIRONMEN)o(TS)p 576 2522
V 167 w Fw(En)o(vironmen)o(ts,)e(Closure-functions,)i(Equalit)o(y-maxim)o
(izati)o(on)p 1924 2522 V 97 2582 V 123 2564 a Fu(STATOBJECT)p
385 2564 16 2 v 15 w(PROP)p 576 2582 2 61 v 99 w Fw(Propagated)i(seman)o(tic)
c(ob)s(jects)i(and)h(op)q(erations)p 1924 2582 V 97 2642 V
123 2624 a Fu(ENVIRONMEN)o(TS)p 436 2624 16 2 v 15 w(PROP)p
576 2642 2 61 v 48 w Fw(Propagated)h(seman)o(tic)c(ob)s(jects)i(and)h(op)q
(erations)p 1924 2642 V 98 2644 1827 2 v 66 2703 a(The)p 173
2703 16 2 v 39 w Fu(PROP)h Fw(signatures)j(sp)q(ecify)e(the)h(seman)o(tic)e
(ob)s(jects)h(for)i(the)e(Core)i(as)f(required)f(b)o(y)g(systems)66
2763 y(that)k(handle)f(b)q(oth)h(Core)g(and)f(Mo)q(dules,)i(while)d(the)h
(other)g(t)o(w)o(o)g(signatures)h(sp)q(ecify)e(some)g(op-)66
2823 y(erations,)j(whic)o(h)d(are)h(only)g(needed)f(in)h(the)f(impleme)o(n)o
(tation)e(of)k(the)e(static)h(seman)o(tics)e(for)i(the)p eop
%%Page: 47 66
bop 66 50 a Fs(CHAPTER)17 b(4.)37 b(CORE)17 b(ELABORA)l(TION)974
b Fw(47)66 195 y Fr(4.2.5)70 b(The)23 b(implem)o(en)n(tati)o(on)e(of)i
(recursiv)n(e)f(v)l(alue)g(bindings)66 287 y Fw(In)e(this)f(section)h(w)o(e)f
(will)g(describ)q(e)g(the)g(implem)o(en)o(tation)e(of)j(recursiv)o(e)e(v)m
(alue)h(bindings,)h(i.e.)e(the)66 348 y(impleme)o(n)o(tation)c(of)i(rule)g
(27,)g(whic)o(h)g(is)g(a)h(little)d(tric)o(ky)l(.)140 408 y(T)l(o)i(recall,)f
(a)i(recursiv)o(e)d(v)m(alue)i(binding)g(is)g(of)h(the)f(form)f
Fu(rec)g Fk(valbind)p Fw(,)i(and)g(a)g Fk(valbind)23 b Fw(is)16
b(of)g(the)66 468 y(form)i Fk(p)n(at)5 b Fw(=)p Fk(exp)s Fp(h)p
Fu(and)18 b Fk(valbind)631 450 y Fl(0)644 468 y Fp(i)p Fw(.)30
b(W)l(e)19 b(collect)f(all)g(the)h(v)m(ariables)g(whic)o(h)f(will)g(b)q(e)h
(b)q(ound;)i(this)e(can)66 528 y(easily)13 b(b)q(e)h(done)g(b)o(y)g(tra)o(v)o
(ersing)f(the)g(left-hand)h(side)f(pattern)h Fk(p)n(at)5 b
Fw(.)20 b(Eac)o(h)14 b(of)g(these)f(v)m(ariables)h(is)f(then)66
588 y(b)q(ound)21 b(to)f(a)f(fresh)h(t)o(yp)q(e)f(v)m(ariable,)g(yielding)f
(a)i(v)m(ariable)f(en)o(vironmen)o(t)e Fv(V)s(E)s Fw(,)i(and)h(the)f
Fk(valbind)26 b Fw(is)66 649 y(then)20 b(elab)q(orated)f(as)h(usual)g(\(as)g
(a)f(non-recursiv)o(e)g(v)m(alue)g(binding\))g(in)g(a)h(con)o(text)e
(extended)g(with)66 709 y(this)e Fv(V)s(E)j Fw(|)d(to)g(allo)o(w)g(for)g
(recursion.)21 b(The)16 b(elab)q(oration)h(of)f Fk(valbind)22
b Fw(yields)15 b(a)i(substitution)f Fv(S)j Fw(and)66 769 y(a)d(v)m(ariable)g
(en)o(vironmen)o(t)d Fv(V)s(E)639 748 y Fl(0)650 769 y Fw(.)21
b(W)l(e)16 b(then)f(apply)h(the)f(substitution)h(to)g(the)g(v)m(ariable)f(en)
o(vironmen)o(t)66 829 y Fv(V)s(E)21 b Fw(yielding)16 b Fv(S)s
Fw(\()p Fv(V)s(E)s Fw(\).)26 b(The)17 b Fk(valbind)24 b Fw(is)18
b(then)f(tra)o(v)o(ersed,)g(and)h(for)g(ev)o(ery)e(v)m(ariable)h
Fk(v)p Fw(,)h(whic)o(h)f(is)h(to)66 889 y(b)q(e)k(b)q(ound)g(and)f(hence)g(o)
q(ccurs)g(in)g(a)g Fk(p)n(at)p Fw(,)h(the)e(t)o(yp)q(es)h(b)q(ound)h(to)g
Fk(v)f Fw(in)g Fv(S)s Fw(\()p Fv(V)s(E)s Fw(\))g(resp)q(ectiv)o(ely)e
Fv(V)s(E)1945 868 y Fl(0)66 950 y Fw(are)f(uni\014ed.)23 b(If)17
b(the)g(uni\014cation)g(fails,)f(error)h(information)f(is)h(inserted)g(in)o
(to)f(the)h(info)g(\014eld)g(of)g(the)66 1010 y(atomic)12 b(pattern)h(con)o
(taining)g Fk(v)h Fw(as)f(its)g(leaf)f(and)i(a)f(b)q(ogus)i(substitution)e
(\(the)g(iden)o(tit)o(y)e(substitution\))66 1070 y(is)i(returned.)19
b(If)13 b(uni\014cation)f(succeeds,)g(the)h(resulting)f(substitution)h(is)f
(returned.)20 b(The)13 b(insertion)f(of)66 1130 y(error)i(information)f(is)h
(the)g(reason)h(for)f(the)g(explicit)e(tra)o(v)o(ersal)h(of)i(the)e
Fk(valbind)p Fw(,)j(otherwise)e(w)o(e)f(could)66 1190 y(simply)18
b(ha)o(v)o(e)g(used)i(the)f(earlier)f(collected)g(set)h(of)h(v)m(ariables.)30
b(Name)18 b(the)h(resulting)g(substitution)66 1251 y Fv(S)99
1232 y Fl(0)111 1251 y Fw(.)37 b(As)21 b(the)g(result)g(of)g(the)h(elab)q
(oration)g(of)f(the)h(recursiv)o(e)d(v)m(alue)i(binding,)h(w)o(e)f(return)h
(a)f(triple)66 1311 y(con)o(taining)i Fv(S)343 1293 y Fl(0)370
1311 y Fp(\016)16 b Fv(S)s Fw(,)24 b(the)f(v)m(ariable)f(en)o(vironmen)o(t)e
Fv(S)1082 1293 y Fl(0)1094 1311 y Fw(\()p Fv(V)s(E)1183 1290
y Fl(0)1195 1311 y Fw(\))i(and)i(the)f(p)q(ossibly)g(error-annotated)66
1371 y(abstract)17 b(syn)o(tax)f(tree.)140 1431 y(The)e(reason)i(this)f(c)o
(hec)o(k)e(is)h(to)h(b)q(e)g(p)q(erformed,)f(is)g(that)i Fv(V)s(E)h
Fw(in)e(rule)f(27)i(b)q(oth)f(o)q(ccurs)h(b)q(efore)e(the)66
1491 y(turnstile)i(and)h(as)g(the)f(result)f(of)i(the)f(elab)q(oration)h
(\(after)f Fp(\))p Fw(\).)140 1551 y(As)g(an)g(example,)e(consider)i(the)g
(follo)o(wing)g(simple)e(recursiv)o(e)g(v)m(alue)i(binding.)271
1653 y Fu(val)25 b(rec)g(f)g(=)g(fn)g(\(x:)g(bool\))e(=>)i(f)g(2)66
1755 y Fw(The)15 b(elab)q(oration)g(is)f(p)q(erformed)f(this)h(w)o(a)o(y:)20
b Fu(f)13 b Fw(is)h(b)q(ound)i(to)e(the)g(t)o(yp)q(e)g(v)m(ariable)g
Fv(\013)g Fw(in)g Fv(V)s(E)s Fw(,)h(and)f(then)66 1815 y(the)j(expression)g
(is)g(elab)q(orated,)h(whereb)o(y)e Fv(\013)i Fw(is)f(uni\014ed)g(with)g
Fk(int)12 b Fp(!)7 b Fv(\014)20 b Fw(yielding)c(the)h(substitution)66
1875 y Fv(S)s Fw(,)e(and)g Fu(f)g Fw(is)g(b)q(ound)h(to)f(the)f(t)o(yp)q(e)h
Fk(b)n(o)n(ol)10 b Fp(!)c Fv(\014)17 b Fw(in)d Fv(V)s(E)1024
1854 y Fl(0)1036 1875 y Fw(.)20 b(Then)15 b(the)g(t)o(yp)q(e)f(for)h
Fu(f)g Fw(in)f Fv(S)s Fw(\()p Fv(V)s(E)s Fw(\))h(and)g(in)g
Fv(V)s(E)1931 1854 y Fl(0)1943 1875 y Fw(,)66 1935 y(i.e.,)j
Fk(int)e Fp(!)10 b Fv(\014)22 b Fw(and)d Fk(b)n(o)n(ol)d Fp(!)10
b Fv(\014)22 b Fw(are)d(uni\014ed;)g(this)h(uni\014cation)f(fails)f(and)i
(thereb)o(y)e(it)h(is)g(disco)o(v)o(ered)66 1996 y(that)e(the)f(v)m(alue)g
(binding)g(should)h(not)g(b)q(e)f(accepted.)140 2056 y(According)j(to)i(the)f
(syn)o(tactic)f(restriction,)h(De\014nition)g(Section)g(2.9,)h(the)f
Fk(exp)k Fw(of)d(a)f Fk(p)n(at)t Fw(=)p Fk(exp)66 2116 y Fw(in)f(a)g
(recursiv)o(e)e(v)m(alue)h(binding)h(m)o(ust)e(b)q(e)i(of)g(the)f(form)g
Fu(fn)g Fk(match)p Fw(,)h(i.e.,)e(of)i(function)g(t)o(yp)q(e.)28
b(Ev)o(en)66 2176 y(though)19 b(man)o(y)d(pattern)i(forms)e(therefore)h
(automatically)f(are)i(in)f(con\015ict)g(with)g(elab)q(oration,)h(the)66
2236 y(error)f(tra)o(v)o(ersal)e(of)i Fk(p)n(at)j Fw(is)c(de\014ned)g(for)h
(all)e(pattern)i(forms.)66 2381 y Fr(4.2.6)70 b(Miscellaneous)66
2473 y Fw(T)l(o)16 b(mak)o(e)d(it)i(easier)f(to)i(study)f(the)f(Elab)q
(orator)j(w)o(e)e(giv)o(e)f(some)g(commen)n(ts)f(on)i(minor)f(things)h(of)g
(the)66 2533 y(impleme)o(n)o(tation.)66 2663 y Fx(In\014xes)66
2756 y Fw(As)h(explained)g(in)g(Section)f(3.4)p eop
%%Page: 46 67
bop 66 50 a Fs(CHAPTER)17 b(4.)37 b(CORE)17 b(ELABORA)l(TION)974
b Fw(46)66 195 y Fv(\037)16 b Fw(is)f(a)h(fresh)f(ro)o(w)h(v)m(ariable,)f
(and)h(this)g(ro)o(w)g(v)m(ariable)f(is)g(recorded)h(in)f(the)g(syn)o(tax)h
(tree.)k(Remem)n(b)q(er)66 255 y(that)15 b(the)f(SML)h(selector)f
Fu(#lab)f Fw(is)h(a)h(deriv)o(ed)e(form,)g(the)h(equiv)m(alen)o(t)f(form)g(b)
q(eing)i Fu(fn)25 b Fp(f)p Fu(lab)f(=)i(var,)66 315 y(...)p
Fp(g)f Fu(=>)g(var)c Fw(so)i(it)e(is)h(enough)h(to)f(consider)g(what)h(to)g
(do)f(ab)q(out)i(the)d(wildcard)h(pattern)g(ro)o(w.)66 376
y(When)f(the)g(elab)q(oration)h(of)f(a)g Fk(de)n(c)g Fw(has)h(\014nished,)g
(yielding)d(a)i(substitution)h Fv(S)s Fw(,)f(w)o(e)g(tra)o(v)o(erse)e(the)66
436 y(syn)o(tax)c(tree,)e(applying)i Fv(S)i Fw(on)e(ev)o(ery)e(suc)o(h)i
(recorded)f(ro)o(w)g(v)m(ariable.)21 b(If)14 b(this)g(results)g(in)g(a)h(t)o
(yp)q(e)f(with)66 496 y(no)21 b(ro)o(w)f(or)g(\014eld)f(v)m(ariables,)h(o)o
(v)o(erloading)g(has)g(b)q(een)g(resolv)o(ed.)31 b(Otherwise)19
b(o)o(v)o(erloading)h(cannot)66 556 y(b)q(e)g(resolv)o(ed)f(and)i
(error-information)e(is)h(inserted)f(instead.)32 b(The)20 b(reason)g(w)o(e)g
(c)o(ho)q(ose)g(to)h(require)66 616 y(o)o(v)o(erloading)16
b(to)h(b)q(e)f(resolv)o(ed)f(at)i(this)f(p)q(oin)o(t)h(is)f(the)g(same)f(as)i
(for)f(the)g(arithmetic)e(op)q(erators.)140 677 y(Th)o(us)i(w)o(e)g(can)g
(elab)q(orate)h(the)f(follo)o(wing)g(declaration.)271 778 y
Fu(let)323 839 y(fun)24 b(eq)h(r1)g(r2)g(=)g(\(#l1)f(r1\))h(=)g(\(#l1)f(r2\))
323 899 y(val)g(t)i(=)f(eq)g({l1)f(=)i(1,)e(l2)h(=)h(3})605
959 y({l1)e(=)i(1,)e(l3)h(=)h(3})271 1019 y(in)323 1079 y(t)271
1139 y(end)66 1241 y Fw(W)l(e)d(remark)f(that)h(this)g(solution)h(is)f(more)f
(p)q(o)o(w)o(erful)g(than)i(the)f(one)g(used)h(in)e(the)h(New)g(Jersey)66
1301 y(compiler.)c(F)l(or)e(instance,)e(the)h(New)g(Jersey)f(compiler)f(do)q
(es)j(not)g(accept)f(the)g(ab)q(o)o(v)o(e)g(declaration.)140
1362 y(In)23 b(the)g(con)o(text)f(of)i(Standard)h(ML,)e(one)g(could)h(p)q
(erhaps)g(mak)o(e)d(do)j(with)g(a)f(sligh)o(tly)g(more)66 1422
y(restricted)16 b(v)o(ersion)f(of)i(R)o(\023)-23 b(em)o(y)14
b('s)i(t)o(yp)q(es.)21 b(F)l(or)c(example,)d(ha)o(ving)i(absen)o(t)g
(\014elds)h(and)f(\014eld)g(v)m(ariables)66 1482 y(do)q(es)k(not)f(seem)e
(necessary)l(.)29 b(Ho)o(w)o(ev)o(er,)17 b(w)o(e)i(ha)o(v)o(e)f(preferred)g
(taking)h(o)o(v)o(er)f(the)g(published)h(system)66 1542 y(virtually)c(unc)o
(hanged)h(as)h(opp)q(osed)h(to)e(trying)g(to)h(sp)q(ecialize)d(it)i(and)g(p)q
(erhaps)i(in)o(tro)q(duce)d(errors)i(in)66 1602 y(the)f(pro)q(cess.)66
1732 y Fx(Implemen)n(tati)o(on)g(of)j(t)n(yp)r(es)66 1825 y
Fw(The)24 b(record)f(t)o(yp)q(e)g(de\014ned)g(b)o(y)f(R)o(\023)-23
b(em)o(y)21 b(is)i(impleme)o(n)o(ted)d(directly)i(b)o(y)g(a)i(datat)o(yp)q(e)
g Fu(RecType)d Fw(in)66 1885 y(functor)15 b Fu(StatObject)o
Fw(.)j(In)c(this)g(functor)g(there)g(is)g(a)h(function)f Fu(emptyFlexR)o(ecT)
o(ype)d Fw(whic)o(h)i(returns)66 1945 y(the)j(ab)q(o)o(v)o(e)h(men)o(tioned)d
(fresh)i(ro)o(w)g(v)m(ariable)g(needed)g(for)g(the)g(wildcard)g(pattern)h(ro)
o(w.)66 2075 y Fx(Uni\014cation)66 2167 y Fw(The)i(uni\014cation)f(of)g(t)o
(yp)q(es,)g(is)g(implem)o(en)n(ted)d(in)j(functor)g Fu(StatObject)p
Fw(.)23 b(The)18 b(lab)q(els)g(of)h(a)f(record)66 2227 y(t)o(yp)q(e)h(are)h
(k)o(ept)e(sorted.)31 b(When)19 b(unifying)g(t)o(w)o(o)g(records)h
Fv(r)1177 2234 y Fm(1)1216 2227 y Fw(and)g Fv(r)1336 2234 y
Fm(2)1356 2227 y Fw(,)f(if)g(b)q(oth)h(records)g(b)q(egin)f(with)66
2288 y(a)24 b(\014eld)f(the)g(t)o(w)o(o)g(\014elds)g(lab)q(elled)f(b)o(y)h
Fv(l)826 2295 y Fm(1)869 2288 y Fw(resp)q(ectiv)o(ely)e Fv(l)1157
2295 y Fm(2)1199 2288 y Fw(are)j(uni\014ed)f(if)g(the)g(lab)q(els)g(are)g
(equal.)66 2348 y(Otherwise,)c(assuming)g(lab)q(el)g Fv(l)665
2355 y Fm(1)703 2348 y Fw(is)g(less)g(than)h Fv(l)980 2355
y Fm(2)999 2348 y Fw(,)g(w)o(e)e(extract)h(a)h(\014eld)e(lab)q(elled)g
Fv(l)1627 2355 y Fm(1)1666 2348 y Fw(from)g Fv(r)1806 2355
y Fm(2)1845 2348 y Fw(using)66 2408 y(either)h(the)h(distributivit)o(y)e
(rule)i(\(if)f Fv(r)788 2415 y Fm(2)828 2408 y Fw(ends)h(with)g
Fk(abs)q Fw(\))g(or)g(b)o(y)g(uni\014cation)g(of)g(the)g(ro)o(w)h(v)m
(ariable)66 2468 y(in)i Fv(r)152 2475 y Fm(2)194 2468 y Fw(\(if)g
Fv(r)287 2475 y Fm(2)329 2468 y Fw(ends)g(with)g(a)g(ro)o(w)g(v)m(ariable.\))
41 b(Let)23 b Fv(S)j Fw(b)q(e)d(the)f(iden)o(tit)o(y)f(substitution)i(if)g(w)
o(e)f(used)66 2528 y(the)c(distributivit)o(y)e(rule,)h(otherwise)h(the)g
(substitution)g(mapping)f(the)h(ro)o(w)g(v)m(ariable)g(of)g
Fv(r)1789 2535 y Fm(2)1827 2528 y Fw(to)g(the)66 2589 y(extracted)g(\014eld)f
(and)h(a)h(fresh)f(ro)o(w)g(v)m(ariable.)26 b(The)18 b(extracted)f(\014eld)g
(is)h(inserted)f(in)o(to)h Fv(r)1738 2596 y Fm(2)1758 2589
y Fw(,)g(yielding)66 2649 y Fv(r)89 2631 y Fl(0)88 2661 y Fm(2)108
2649 y Fw(,)e(and)h Fv(S)s Fw(\()p Fv(r)307 2656 y Fm(1)326
2649 y Fw(\))g(and)f Fv(r)479 2631 y Fl(0)478 2661 y Fm(2)514
2649 y Fw(are)h(then)f(uni\014ed.)140 2709 y(In)c(the)h(usual)g
(uni\014cation)g(algorithm,)f(there)g(is)h(an)g(o)q(ccurs)h(c)o(hec)o(k;)e
(here)g(w)o(e)g(ha)o(v)o(e)g(o)q(ccurs)i(c)o(hec)o(ks)66 2769
y(for)j(eac)o(h)f(kind)f(of)i(v)m(ariable.)p eop
%%Page: 45 68
bop 66 50 a Fs(CHAPTER)17 b(4.)37 b(CORE)17 b(ELABORA)l(TION)974
b Fw(45)66 195 y(where)24 b Fv(\013)h Fw(ranges)g(o)o(v)o(er)e(a)h(set)g(of)h
(t)o(yp)q(e)f(v)m(ariables,)h Fv(\037)f Fw(ranges)h(o)o(v)o(er)e(a)i(set)f
(of)g Fs(ro)o(w)h(v)m(ariables)p Fw(,)g Fv(\022)66 255 y Fw(ranges)c(o)o(v)o
(er)e(a)h(set)g(of)g Fs(\014eld)g(v)m(ariables)h Fw(and)g Fv(t)e
Fw(ranges)i(o)o(v)o(er)e(a)h(set)g(of)g(n)o(ullary)f(t)o(yp)q(e)h
(constructors)66 315 y Fp(f)p Fk(int)6 b Fv(;)i Fk(b)n(o)n(ol)t
Fv(;)g Fw(.)g(.)g(.)o Fp(g)p Fw(.)140 376 y(It)15 b(m)o(ust)g(hold)i(as)g(an)
f(in)o(v)m(arian)o(t)g(that)h(the)f(lab)q(els)g(in)g(a)g(ro)o(w)h(are)f
(disjoin)o(t.)140 436 y(T)o(yp)q(es)i(are)g(equal)g(mo)q(dulo)g(the)g(follo)o
(wing)f(equations)i(\(referred)e(to)i(later)e(as)i(just)g(\\the)f(equa-)66
496 y(tions"\).)223 602 y Fp(f)p Fk(lab)f Fp(7!)d Fv(\022)q(;)8
b Fk(lab)496 584 y Fl(0)522 602 y Fp(7!)14 b Fv(\022)610 584
y Fl(0)621 602 y Fv(;)8 b(\037)p Fp(g)41 b Fw(=)h Fp(f)p Fk(lab)907
584 y Fl(0)933 602 y Fp(7!)14 b Fv(\022)1021 584 y Fl(0)1032
602 y Fv(;)8 b Fk(lab)18 b Fp(7!)13 b Fv(\022)q(;)8 b(\037)p
Fp(g)90 b Fw(Left)16 b(comm)o(utativit)n(y)223 662 y Fp(f)p
Fk(abs)p Fp(g)400 b Fw(=)42 b Fp(f)p Fk(lab)17 b Fp(7!)d Fk(absent)q
Fv(;)8 b Fk(abs)p Fp(g)154 b Fw(Distributivit)o(y)66 766 y(A)14
b(template)d(ro)o(w)j(is)f(either)g Fk(abs)h Fw(or)g(a)g(ro)o(w)f(v)m
(ariable.)20 b(An)o(y)13 b(\014eld)g(can)h(b)q(e)g Fk(extr)n(acte)n(d)19
b Fw(from)12 b(a)i(template)66 826 y(ro)o(w)k(using)g(substitution)g(if)f
(the)g(template)f(is)h(a)h(v)m(ariable)f(or)h(distributivit)o(y)d(if)i(it)g
(is)g Fk(abs)q Fw(.)25 b(The)17 b(use)66 887 y(of)g(left)e(comm)o(utativ)o
(it)n(y)e(should)j(b)q(e)g(ob)o(vious.)22 b(An)15 b(example)f(sho)o(ws)j(the)
e(use)h(of)g(distributivit)o(y)e(\(for)66 947 y(readabilit)o(y)h(w)o(e)h(use)
g(Standard)i(ML)e(syn)o(tax\).)140 1007 y(The)g(follo)o(wing)g(function)271
1106 y Fu(fun)25 b(f)g({l)g(=)g(v1})g(=)g(v1)g(+)g(1)66 1206
y Fw(will)g(get)h(the)g(t)o(yp)q(e)f Fp(f)p Fv(l)30 b Fp(7!)g
Fk(pr)n(esent)q Fw(\()p Fk(int)5 b Fw(\))p Fv(;)j Fk(abs)p
Fp(g)22 b(!)f Fk(int)6 b Fw(.)49 b(When)26 b(elab)q(orating)h(the)e
(application)66 1266 y Fu(f)h(l')f(=)g(3)o Fw(,)20 b(the)e(t)o(yp)q(es)h
Fp(f)p Fv(l)g Fp(7!)f Fk(pr)n(esent)p Fw(\()p Fk(int)5 b Fw(\))p
Fv(;)j Fk(abs)q Fp(g)18 b Fw(and)i Fp(f)p Fv(l)1174 1248 y
Fl(0)1203 1266 y Fp(7!)f Fk(pr)n(esent)p Fw(\()p Fk(int)5 b
Fw(\))p Fv(;)j Fk(abs)p Fp(g)19 b Fw(are)g(to)g(b)q(e)g(uni-)66
1326 y(\014ed.)32 b(T)l(o)21 b(recall,)e(t)o(w)o(o)h(record)g(t)o(yp)q(es)f
Fv(\045)818 1333 y Fm(1)858 1326 y Fw(and)h Fv(\045)981 1333
y Fm(2)1021 1326 y Fw(are)g(uni\014able)g(if)f(they)g(ha)o(v)o(e)h(the)f
(same)g(domain)66 1386 y(of)f(lab)q(els)g(and)g(for)g(ev)o(ery)e(lab)q(el)h
Fv(l)h Fw(in)g(the)f(domain,)g(the)g(t)o(yp)q(e)g(b)q(ound)i(to)f
Fv(l)g Fw(in)f Fv(\045)1574 1393 y Fm(1)1612 1386 y Fw(is)g(uni\014able)g
(with)66 1447 y(the)g(t)o(yp)q(e)g(b)q(ound)h(to)f Fv(l)h Fw(in)e
Fv(\045)588 1454 y Fm(2)608 1447 y Fw(.)24 b(The)17 b(domains)f(of)h(the)g(t)
o(w)o(o)g(record)f(t)o(yp)q(es)h(under)g(consideration)g(are)66
1507 y(not)g(equal,)e(but)i(the)e(distributivit)o(y)f(rule)i(allo)o(ws)g(us)h
(to)f(extract)g(a)g(\014eld)g Fv(l)1459 1489 y Fl(0)1486 1507
y Fw(in)g(the)g(\014rst)g(t)o(yp)q(e)g(and)h(a)66 1567 y(\014eld)e
Fv(l)i Fw(in)e(the)g(second)h(t)o(yp)q(e,)e(so)j(that)f(the)f(domains)g(b)q
(ecome)f(equal.)20 b(Th)o(us)c(w)o(e)f(no)o(w)h(ha)o(v)o(e)f(to)h(unify)66
1627 y Fp(f)p Fv(l)g Fp(7!)e Fk(absent)q Fv(;)8 b(l)357 1609
y Fl(0)383 1627 y Fp(7!)14 b Fk(pr)n(esent)q Fw(\()p Fk(int)5
b Fw(\))p Fv(;)j Fk(abs)p Fp(g)17 b Fw(and)g Fp(f)p Fv(l)e
Fp(7!)f Fk(pr)n(esent)q Fw(\()p Fk(int)5 b Fw(\))p Fv(;)j(l)1336
1609 y Fl(0)1362 1627 y Fp(7!)14 b Fk(absent)q Fv(;)8 b Fk(abs)p
Fp(g)p Fw(.)23 b(As)16 b(the)h(\014eld)66 1687 y(t)o(yp)q(es)g
Fk(absent)h Fw(and)f Fk(pr)n(esent)q Fw(\()p Fk(int)5 b Fw(\))17
b(are)g(not)g(uni\014able,)f(uni\014cation)h(fails;)f(hence)g(the)h
(application)f(is)66 1748 y(not)h(accepted.)140 1808 y(The)h(\014eld)f
Fk(absent)j Fw(is)e(used)g(in)g(a)h(t)o(yp)q(e)e(for)i(a)f(record)g
Fv(r)i Fw(to)f(express)e(that)i(some)e(\014eld)h(m)o(ust)f(not)66
1868 y(exist)f(in)g Fv(r)q Fw(.)21 b(Field)15 b(v)m(ariables)h(are)g(used)g
(to)h(express)f(that)g(it)g(do)q(es)h(not)g(matter)d(whether)i(or)h(not)f
(the)66 1928 y(\014eld)g(is)g(presen)o(t.)140 1988 y(The)g(t)o(yping)g(of)g
(the)g(primitiv)o(e)d(op)q(erations)k(is)f(as)h(follo)o(ws.)684
2084 y Fp(fg)67 b(f)p Fk(abs)p Fp(g)666 2144 y Fu(#)p Fk(lab)50
b Fp(f)p Fk(lab)18 b Fp(7!)13 b Fk(pr)n(esent)q Fw(\()p Fv(\013)p
Fw(\))p Fv(;)8 b(\037)p Fp(g)e(!)g Fv(\013)66 2240 y Fw(The)23
b(t)o(yping)f(rules)g(are)g(the)g(same)g(as)h(in)f(Standard)h(ML.)f(One)g(do)
q(es)i(not)e(need)g(to)h(c)o(hange)f(the)66 2300 y(elab)q(oration)14
b(algorithm,)e(one)h(just)g(needs)g(to)g(let)f(the)g(initial)g(t)o(yp)q(e)g
(en)o(vironmen)o(t)e(con)o(tain)j(the)f(ab)q(o)o(v)o(e)66 2360
y(sho)o(wn)20 b(t)o(yp)q(es)f(for)g(the)g(primitiv)o(e)c(op)q(erations,)21
b(and)e(then)g(extend)g(the)f(uni\014cation)h(algorithm)f(|)66
2420 y(no)o(w)h(there)e(m)o(ust)g(b)q(e)h(three)g(kinds)g(of)g(substitutions)
h(\(one)f(for)h(eac)o(h)e(kind)h(of)g(v)m(ariable\))g(and)h(t)o(yp)q(e)66
2481 y(equalit)o(y)g(is)g(tak)o(en)h(mo)q(dulo)f(the)h(equations.)32
b(As)20 b(in)f(Standard)i(ML,)f(principal)f(t)o(yp)q(es)g(exists)h(\(in)66
2541 y(t)o(yp)q(e)c(sc)o(hemes,)e(R)o(\023)-23 b(em)o(y)14
b(quan)o(ti\014es)h(o)o(v)o(er)h(all)g(three)f(kinds)h(of)h(v)m(ariables\).)
66 2670 y Fx(Implemen)n(tati)o(on)f(of)j(Flexible)e(Records)h(using)g(R)o
(\023)-27 b(em)n(y's)17 b(Record)h(T)n(yping)g(Discipline)66
2763 y Fw(The)c(idea)f(is)h(analogous)i(to)e(the)f(idea)g(used)h(for)g(the)f
(arithmetic)f(op)q(erators.)21 b(During)14 b(elab)q(oration)h(of)66
2823 y(a)g(declaration)e Fk(de)n(c)p Fw(,)h(ev)o(ery)e(o)q(ccurrence)h(of)h
(the)g(wildcard)f(pattern)h(ro)o(w)g(is)f(giv)o(en)g(a)h(t)o(yp)q(e)f
Fp(f)p Fv(\037)p Fp(g)p Fw(,)h(where)p eop
%%Page: 44 69
bop 66 50 a Fs(CHAPTER)17 b(4.)37 b(CORE)17 b(ELABORA)l(TION)974
b Fw(44)66 195 y Fx(Flexible)17 b(records)66 287 y Fw(W)l(e)c(elab)q(orate)g
(\015exible)e(records)h(using)h(a)g(t)o(yp)q(e)f(inference)f(mac)o(hinery)f
(dev)o(elop)q(ed)h(b)o(y)h(R)o(\023)-23 b(em)o(y)10 b([13)q(][12])66
348 y(for)22 b(an)g(extension)f(of)g(ML)h(with)f(new)g(op)q(erations)i(on)e
(records.)37 b(Actually)20 b(it)g(w)o(ould)i(ha)o(v)o(e)e(b)q(een)66
408 y(su\016cien)o(t)d(with)h(a)g(simpler)d(t)o(yp)q(e)j(inference)e(system)g
(\(more)h(ab)q(out)i(this)f(later.\))25 b(In)18 b(the)g(follo)o(wing)66
468 y(sections)h(w)o(e)f(will)f(\014rst)i(explain)f(R)o(\023)-23
b(em)o(y's)16 b(extension)i(\(readers)g(familiar)f(with)h(R)o(\023)-23
b(em)o(y's)16 b(w)o(ork)j(ma)o(y)66 528 y(skip)d(this)g(section\))g(and)h
(then)f(describ)q(e)g(our)g(impleme)o(n)o(tation.)140 588 y(Recall)e(that)h
(a)h(record)f(t)o(yp)q(e)g(is)g(de\014ned)g(in)g(the)g(De\014nition)g(to)h(b)
q(e)f(a)h(\014nite)f(map)f(from)h(lab)q(els)g(to)66 649 y(t)o(yp)q(es,)g(and)
h(that)g(the)f(wildcard)g(pattern)g(ro)o(w)h(\()p Fu(...)p
Fw(\),)e(b)o(y)h(rule)f(40,)i(is)f(allo)o(w)o(ed)g(to)g(ha)o(v)o(e)g
Fk(any)k Fw(record)66 709 y(t)o(yp)q(e)d Fv(\032)p Fw(.)66
839 y Fx(R)o(\023)-27 b(em)n(y's)17 b(T)n(yp)r(e)h(Inference)f(for)i(Records)
f(in)g(an)h(Extension)f(of)h(ML)66 931 y Fw(This)f(section)f(is)h(based)g(on)
g([12)q(])f(and)h([13].)26 b(In)17 b([12])g(R)o(\023)-23 b(em)o(y)16
b(describ)q(es)h(t)o(yp)q(e)g(inference)f(for)i(records)66
991 y(with)c(op)q(erations)h(including)e(the)g(empt)o(y)e(record,)j
(selection)e(of)i(a)h(\014eld,)e(extension)g(of)h(a)g(record)f(with)66
1051 y(a)h(new)g(\014eld)f(and)h(\014eld)f(remo)o(v)m(al,)f(but)h(excluding)g
(the)g(concatenation)h(op)q(eration)g(\(whic)o(h)f(giv)o(en)f(t)o(w)o(o)66
1112 y(records)19 b(is)f(supp)q(osed)i(to)f(return)g(their)f
(concatenation.\))1162 1094 y Fm(3)1210 1112 y Fw(In)g([13)q(])g(he)g
(extends)g(the)h(earlier)e(w)o(ork)66 1172 y(to)j(include)e(the)h
(concatenation)g(op)q(eration.)31 b(In)19 b(this)g(pap)q(er)h(w)o(e)e(will)g
(only)h(describ)q(e)g(those)g(ideas)66 1232 y(of)h(R)o(\023)-23
b(em)o(y)17 b(whic)o(h)i(w)o(e)g(use.)31 b(F)l(or)19 b(concreteness,)h(the)f
(t)o(yp)q(e)g(system)f(will)g(b)q(e)h(describ)q(ed)g(for)h(a)g(little)66
1292 y(language.)66 1422 y Fx(Syn)n(tax)66 1514 y Fw(The)d(language)g(of)f
(expressions,)g(ranged)h(o)o(v)o(er)e(b)o(y)h(M,)g(is)g(de\014ned)g(b)o(y)f
(the)h(syn)o(tax)140 1616 y Fv(M)21 b Fw(::=)16 b Fv(x)385
b Fw(v)m(ariable)208 1676 y Fp(j)68 b Fv(\025x:M)296 b Fw(lam)o(b)q(da)15
b(abstraction)208 1737 y Fp(j)68 b Fv(M)337 1744 y Fm(1)356
1737 y Fv(M)403 1744 y Fm(2)703 1737 y Fw(application)208 1797
y Fp(j)g Fu(let)12 b Fv(x)i Fw(=)g Fv(M)521 1804 y Fm(1)554
1797 y Fu(in)f Fv(M)666 1804 y Fm(2)703 1797 y Fw(letexpression)208
1857 y Fp(j)68 b Fv(C)378 b Fw(constan)o(t)66 1959 y(where)23
b Fv(x)f Fw(ranges)h(o)o(v)o(er)f(a)h(set)f(of)h(program)g(v)m(ariables)f
(and)h Fv(C)j Fw(ranges)e(o)o(v)o(er)d(a)i(set)g(of)f(constan)o(ts)66
2019 y(including)16 b(the)g(follo)o(wing)g(op)q(erations)h(on)g(records.)818
2116 y Fp(fg)67 b Fw(empt)o(y)14 b(record)800 2176 y Fu(#)p
Fk(lab)50 b Fw(\014eld)16 b(selection)66 2275 y(where)g Fk(lab)h
Fw(ranges)g(o)o(v)o(er)f(the)g(syn)o(tactic)f(category)h(Lab)i(as)e(in)g(the)
g(De\014nition.)66 2405 y Fx(Static)j(Seman)n(tics)66 2497
y Fw(The)e(language)g(of)f(t)o(yp)q(es)g(is)g(de\014ned)g(b)o(y)g(the)g
(follo)o(wing)g(grammar)621 2603 y Fv(\034)47 b Fw(::=)41 b
Fv(t)13 b Fp(j)h Fv(\013)g Fp(j)g Fv(\034)d Fp(!)6 b Fv(\034)19
b Fp(j)14 b(f)p Fv(\032)p Fp(g)135 b Fw(t)o(yp)q(es)623 2663
y Fv(\032)41 b Fw(::=)g Fv(\037)13 b Fp(j)h Fk(abs)g Fp(j)g
Fk(lab)k Fp(7!)13 b Fv(';)8 b(\032)98 b Fw(ro)o(ws)616 2723
y Fv(')41 b Fw(::=)g Fv(\022)15 b Fp(j)f Fk(absent)h Fp(j)e
Fk(pr)n(esent)q Fw(\()p Fv(\034)6 b Fw(\))41 b(\014elds)p 66
2775 756 2 v 123 2806 a Fi(3)141 2821 y Fh(Notice)13 b(it)f
Fd(is)k Fh(an)c(extension)h(of)f(ML,)g(as)h(in)f(ML)h(one)f(cannot)h
(de\014ne)h(general)e(extension)i(or)e(remo)o(v)n(al)e(op)q(erations.)p
eop
%%Page: 43 70
bop 66 50 a Fs(CHAPTER)17 b(4.)37 b(CORE)17 b(ELABORA)l(TION)974
b Fw(43)66 195 y Fx(Arithmetic)16 b(op)r(erators)66 287 y Fw(In)d(this)h
(section)e(w)o(e)h(shortly)g(describ)q(e)g(the)g(implem)o(en)o(tation)d(of)k
(o)o(v)o(erloaded)e(arithmetic)f(op)q(erators.)140 348 y(The)16
b(o)o(v)o(erloaded)f(op)q(erators)j(are)e Fu(abs)p Fw(,)f Fu(~)p
Fw(,)g Fu(*)p Fw(,)h Fu(+)p Fw(,)f Fu(-)p Fw(,)h Fu(<)p Fw(,)f
Fu(>)p Fw(,)h Fu(<=)f Fw(and)i Fu(>=)p Fw(.)140 408 y(The)g(general)g(idea)h
(is)f(the)g(follo)o(wing.)25 b(Initially)16 b(w)o(e)h(bind)g(to)q(o)i
(general)e(a)h(t)o(yp)q(e)f(sc)o(heme)f(to)h(the)66 468 y(o)o(v)o(erloaded)f
(op)q(erators.)23 b(This)17 b(t)o(yp)q(e)f(sc)o(heme)e(is)i
Fp(8)p Fv(\013)d Fw(:)h Fv(\013)6 b Fp(!)g Fv(\013)16 b Fw(\(for)h
Fu(abs)e Fw(and)i Fp(\030)p Fw(\))f(or)h Fp(8)p Fv(\013)c Fw(:)h
Fv(\013)d Fp(\002)g Fv(\013)6 b Fp(!)g Fv(\013)66 528 y Fw(\(for)14
b Fu(*)p Fw(,)f Fu(+)p Fw(,)g Fu(-)p Fw(,)g Fu(<)p Fw(,)g Fu(>)p
Fw(,)g Fu(<=)g Fw(and)h Fu(>=)p Fw(.\))19 b(Eac)o(h)14 b(time)d(a)i(generic)g
(instance)g(of)g(the)g(t)o(yp)q(e)g(sc)o(heme)e(is)i(made,)f(the)66
588 y(t)o(yp)q(e)i(v)m(ariable,)f(whic)o(h)g Fv(\013)i Fw(is)e(instan)o
(tiated)h(to,)g(is)g(recorded)f(in)g(the)h(syn)o(tax)g(tree)f(\(in)g(the)h
Fu(info)e Fw(\014eld.\))66 649 y(When)21 b(the)g(elab)q(oration)h(of)f(a)g
Fk(de)n(c)g Fw(has)h(\014nished,)g(yielding)d(a)i(substitution)h
Fv(S)s Fw(,)f(w)o(e)g(tra)o(v)o(erse)e(the)66 709 y(syn)o(tax)f(tree,)f
(applying)g Fv(S)k Fw(on)d(ev)o(ery)e(suc)o(h)i(recorded)f(t)o(yp)q(e)g(v)m
(ariable.)26 b(If)17 b(this)g(results)h(in)f(the)h(t)o(yp)q(e)66
769 y Fu(int)d Fw(or)i(the)f(t)o(yp)q(e)f Fu(real)p Fw(,)g(o)o(v)o(erloading)
g(has)i(b)q(een)f(resolv)o(ed,)f(and)i(w)o(e)e(record)h(the)g(resulting)g(t)o
(yp)q(e)g(in)66 829 y(the)f(syn)o(tax)f(tree)g(\(for)h(use)g(in)f(the)g(ev)m
(aluation\).)21 b(Otherwise)14 b(o)o(v)o(erloading)g(cannot)h(b)q(e)g(resolv)
o(ed)f(and)66 889 y(error-information)j(is)g(inserted)g(instead.)24
b(The)17 b(reason)h(w)o(e)f(c)o(ho)q(ose)h(to)g(require)e(o)o(v)o(erloading)g
(to)i(b)q(e)66 950 y(resolv)o(ed)c(at)h(this)g(p)q(oin)o(t)g(is)f(that)h(it)f
(is)h(the)f(last)h(place)f(where)h(w)o(e)f(ha)o(v)o(e)g(a)h(hold)g(on)g(the)f
(substitution,)66 1010 y(and)j(doing)g(it)f(this)g(w)o(a)o(y)g(k)o(eeps)f(a)i
(nice)e(separation)i(b)q(et)o(w)o(een)e(Core)i(and)g(Mo)q(dules)f(elab)q
(oration.)140 1070 y(When)g(a)h(generic)e(instance)h(is)g(made,)f(w)o(e)g
(need)h(to)h(kno)o(w)f(whether)g(to)h(record)f(a)h(t)o(yp)q(e)f(v)m(ariable)
66 1130 y(or)d(not.)21 b(This)13 b(should)g(only)f(b)q(e)h(done)g(for)g(o)o
(v)o(erloaded)f(t)o(yp)q(e)g(v)m(ariables.)20 b(Hence)12 b(w)o(e)g(add)h(an)h
(attribute)66 1190 y(to)j(ev)o(ery)e(t)o(yp)q(e)g(v)m(ariable)h(telling)f
(whether)h(it)g(is)g(an)h(o)o(v)o(erloaded)e(t)o(yp)q(e)h(v)m(ariable)g(or)h
(not.)66 1320 y Fx(Closure)66 1413 y Fw(An)k(o)o(v)o(erloaded)f(t)o(yp)q(e)h
(v)m(ariable)g(stands)h(either)e(for)h Fu(int)f Fw(or)i(for)f
Fu(real)p Fw(.)34 b(Therefore)21 b(it)f(mak)o(es)g(no)66 1473
y(sense)d(to)f(allo)o(w)g(quan)o(ti\014cation)g(of)h(o)o(v)o(erloaded)e(t)o
(yp)q(e)h(v)m(ariables,)g(whence)f(it)h(is)g(prohibited.)66
1603 y Fx(Uni\014cation)66 1695 y Fw(Ov)o(erloaded)k(t)o(yp)q(e)f(v)m
(ariables)h(are)h(only)f(allo)o(w)o(ed)f(to)h(b)q(e)h(uni\014ed)f(with)g(t)o
(yp)q(e)f Fu(int)p Fw(,)h Fu(real)f Fw(or)h(other)66 1755 y(t)o(yp)q(e)d(v)m
(ariables.)25 b(Allo)o(wing)16 b(uni\014cation)h(with,)h(for)f(instance,)g(a)
h(functional)f(t)o(yp)q(e,)g(w)o(ould)g(mak)o(e)f(it)66 1815
y(imp)q(ossible)i(later,)h(when)g(applying)g(the)g(substitution)h
Fv(S)s Fw(,)f(to)h(get)f(in)o(t)g(or)g(real.)30 b(Uni\014cation)18
b(with)66 1876 y(other)d(t)o(yp)q(e)g(v)m(ariables)f(is)h(allo)o(w)o(ed.)20
b(As)14 b(a)i(result)e(it)g(is)h(p)q(ossible)g(to)g(t)o(yp)q(e)f(c)o(hec)o(k)
f(the)i(example)d(at)j(the)66 1936 y(top)i(of)g(page)f(55)i(in)d(the)h
(Commen)o(tary)l(.)140 1996 y(When)g(unifying)g(an)h(o)o(v)o(erloaded)f(t)o
(yp)q(e)g(v)m(ariable)g Fv(\013)h Fw(with)f(another)h(t)o(yp)q(e)f(v)m
(ariable)g Fv(\014)s Fw(,)g(the)g(o)o(v)o(er-)66 2056 y(loading)h(attribute)f
(m)o(ust)f(b)q(e)h(propagated)i(from)d Fv(\013)i Fw(to)f Fv(\014)j
Fw(to)e(a)o(v)o(oid)e(later)h(quan)o(ti\014cation)g(of)h Fv(\014)s
Fw(.)140 2116 y(Uni\014cation)d(of)h(an)g(o)o(v)o(erloaded)f(t)o(yp)q(e)g(v)m
(ariable)h(with)f(an)h(explicit)e(t)o(yp)q(e)h(v)m(ariable)h(is)f
(prohibited:)66 2177 y(an)f(explicit)c(t)o(yp)q(e)i(v)m(ariable)g(m)o(ust)g
(elab)q(orate)h(to)g(itself)e(\(De\014nition)i(rule)e(47\))j(whereas)f(an)g
(o)o(v)o(erloaded)66 2237 y(t)o(yp)q(e)k(v)m(ariable)g(stands)h(for)g
Fu(int)e Fw(or)i Fu(real)p Fw(.)66 2367 y Fx(Initial)h(En)n(vironmen)n(t)66
2459 y Fw(In)25 b(our)h(sc)o(heme,)e(o)o(v)o(erloaded)g(v)m(ariables)h(are)g
(initially)e(b)q(ound)j(to)g(a)f(t)o(yp)q(e)g(sc)o(heme)d(con)o(taining)66
2519 y(an)h(o)o(v)o(erloaded)f(t)o(yp)q(e)g(v)m(ariable.)40
b(T)l(o)23 b(a)o(v)o(oid)f(letting)g(the)g(user)h(kno)o(w)f(of)h(o)o(v)o
(erloaded)f(t)o(yp)q(e)g(v)m(ari-)66 2579 y(ables,)28 b(w)o(e)d(construct)g
(t)o(yp)q(e)g(sc)o(hemes)f(for)i(the)f(o)o(v)o(erloaded)g(v)m(ariables)g
(explicitly)e(\(see)i(the)g(\014le)66 2640 y Fu(Common/Envi)o(ron)o(men)o(ts)
o(.sm)o(l)16 b Fw(and)k(the)g(description)e(in)i(Section)f(4.3)g(b)q(elo)o
(w\))h(|)f(as)h(opp)q(osed)h(to)66 2700 y(using)i(the)f Fu(prim)f
Fw(mec)o(hanism)e(describ)q(ed)i(in)h(Section)g(7.5.)39 b(In)22
b(other)g(w)o(ords,)i(the)e(basic)g(v)m(alues)66 2760 y(include)15
b(b)q(oth)j Fu(prim)c Fw(and)j(the)f(o)o(v)o(erloaded)g(v)m(ariables.)p
eop
%%Page: 42 71
bop 66 50 a Fs(CHAPTER)17 b(4.)37 b(CORE)17 b(ELABORA)l(TION)974
b Fw(42)66 195 y Fr(4.2.3)70 b(Iden)n(ti\014er)22 b(Status)66
287 y Fw(As)16 b(men)o(tioned)d(in)j(Section)f(2.2.2)g(and)i(in)e(Section)g
(3.2)h(the)f(elab)q(orator)i(resolv)o(es)e(iden)o(ti\014er)f(status,)66
348 y(as)f(it)f(cannot)h(b)q(e)g(done)f(at)h(parsing)g(time,)e(since)g(there)
h(is)g(no)h(lexical)e(distinction)g(b)q(et)o(w)o(een)h(v)m(ariables,)66
408 y(data)i(constructors)f(and)g(exception)f(constructors.)21
b(The)12 b(classi\014cation)h(is)f(p)q(erformed)f(as)j(describ)q(ed)66
468 y(b)q(elo)o(w.)140 528 y(The)20 b(comp)q(ound)g(seman)o(tic)f(ob)s(ject)g
(v)m(ariable)i(en)o(vironmen)o(t)c(is)j(de\014ned)h(in)f(Figure)g(10)h(of)f
(the)66 588 y(De\014nition.)j(The)17 b(implem)o(en)n(tation)d(of)k(the)e(v)m
(ariable)h(en)o(vironmen)o(t)d(\(a)j(datat)o(yp)q(e)g Fu(VarEnv)d
Fw(de\014ned)66 649 y(in)h(functor)g Fu(Environmen)o(ts)p Fw(,)c(see)k
(section)f(4.3)h(b)q(elo)o(w\),)g(has)h(as)f(its)g(domain)f(unresolv)o(ed)g
(iden)o(ti\014ers.)66 709 y(When)21 b(a)g Fk(datbind)27 b Fw(or)21
b(an)g Fk(exbind)27 b Fw(is)21 b(elab)q(orated,)h(the)e(en)o(vironmen)o(t)e
(m)o(ust)h(bind)i(the)f(data)i(con-)66 769 y(structors,)h(resp.)36
b(exception)20 b(constructors,)j(to)f(their)e(resp)q(ectiv)o(e)g(t)o(yp)q(es)
h(\(c.f.)e(rule)i(30)h(and)g(31.\))66 829 y(Ho)o(w)o(ev)o(er,)14
b(in)i(the)f(implem)o(en)o(tation)e(w)o(e)i(bind)h(the)g(constructors)g(to)g
(tagged)h(t)o(yp)q(es,)e(i.e.,)f(the)i(range)66 889 y(of)h(the)f(v)m(ariable)
g(en)o(vironmen)o(t)d(is)j(impleme)o(n)o(ted)d(as)k(the)f(follo)o(wing)g
(datat)o(yp)q(e)p 66 955 1890 6 v 271 1039 a Fu(datatype)23
b(VarEnvRange)f(=)374 1099 y(LONGVAR)74 b(of)25 b(TypeScheme)323
1160 y(|)g(LONGCON)74 b(of)25 b(TypeScheme)323 1220 y(|)g(LONGEXCON)d(of)j
(Type)p 66 1291 V 66 1375 a Fw(W)l(e)c(will)f(later)g(commen)o(t)e(on)j(this)
g(datat)o(yp)q(e;)i(for)e(no)o(w)g(the)g(imp)q(ortan)o(t)e(thing)i(to)h
(notice)e(is)g(the)66 1435 y(three)d(constructors,)i(whic)o(h)d(are)i(used)g
(as)g(tags.)26 b(This)18 b(enables)f(us)h(to)g(determine)d(the)i(class)h(of)g
(all)66 1495 y(applied)h(o)q(ccurrences)f(of)h(unresolv)o(ed)f(iden)o
(ti\014ers)g(b)o(y)g(lo)q(oking)h(up)h(the)e(iden)o(ti\014er)f(in)i(the)g(v)m
(ariable)66 1556 y(en)o(vironmen)o(t.)i(V)l(ariables)c(are)g(b)q(ound)h(to)g
(a)f(tagged)h(t)o(yp)q(e)f(when)g(elab)q(orating)h(an)f(atomic)f(pattern)66
1616 y(|)24 b(if)e(the)h(unresolv)o(ed)g(iden)o(ti\014er)f(is)h(not)g(b)q
(ound)i(to)f(a)f(data)h(constructor)g(or)g(to)g(an)f(exception)66
1676 y(constructor)d(in)e(the)h(en)o(vironmen)o(t,)e(then)h(the)h(iden)o
(ti\014er)e(m)o(ust)h(b)q(e)h(a)g(v)m(ariable.)29 b(Notice)18
b(that)h(the)66 1736 y(unresolv)o(ed)e(iden)o(ti\014ers)f(corresp)q(ond)i(to)
g(the)f(non)o(terminals)f Fk(longvar)5 b Fw(,)19 b Fk(longc)n(on)j
Fw(and)c Fk(longexc)n(on)24 b Fw(in)66 1796 y(the)16 b(grammar)f(in)h(the)g
(De\014nition)711 1778 y Fm(2)730 1796 y Fw(.)66 1941 y Fr(4.2.4)70
b(Ov)n(erloading)66 2033 y Fw(The)21 b(Elab)q(orator)i(has)e(to)g(resolv)o(e)
f(the)h(o)o(v)o(erloading)f(caused)h(b)o(y)f(the)h(arithmetic)d(op)q(erators)
23 b(and)66 2093 y(the)17 b(\015exible)e(records)i(\(a)g(\015exible)e(record)
i(is)f(a)h(record)g(in)f(whic)o(h)g(the)h Fk(wildc)n(ar)n(d)g(p)n(attern)h(r)
n(ow)j Fw(\()p Fu(...)p Fw(\))66 2154 y(o)q(ccurs.\))40 b(In)22
b(the)h(Commen)o(tary)c([10)q(,)k(P)o(age)g(54])g(it)e(is)i(de\014ned)f
(precisely)e(what)j(it)f(means)g(that)66 2214 y(o)o(v)o(erloading)d(is)g
(resolv)o(ed.)30 b(It)19 b(is)g(only)g(required)f(that)i(o)o(v)o(erloading)f
(b)q(e)h(resolv)o(ed)e(in)h(eac)o(h)g Fk(top)n(de)n(c)p Fw(,)66
2274 y(but)i(implem)o(e)o(n)o(tors)d(ma)o(y)g(c)o(ho)q(ose)i(it)g(to)g(b)q(e)
g(resolv)o(ed)f(in)h(some)f(smaller)f(textual)h(unit.)32 b(W)l(e)20
b(ha)o(v)o(e)66 2334 y(c)o(hosen)c(to)g(require)e(o)o(v)o(erloading)h(to)i(b)
q(e)e(resolv)o(ed)g(when)h(a)g Fk(de)n(c)g Fw(is)f(parsed)h(as)h(a)f
Fk(str)n(de)n(c)p Fw(.)k(Th)o(us)c(when)66 2394 y(function)g
Fu(elab)p 364 2394 16 2 v 17 w(dec)f Fw(is)h(called,)e(it)h(is)h(able)g(to)g
(return)g(a)g(principal)f(en)o(vironmen)o(t)e(\(b)o(y)i(Theorem)g(5.2)66
2455 y(in)h(the)g(Commen)o(tary)l(.\))p 66 2501 756 2 v 123
2532 a Fi(2)141 2547 y Fh(Actually)g(one)g(kno)o(ws)f(at)h(parsing)g(time)f
(that)h(it)f(m)o(ust)g(b)q(e)i(an)e Fd(longexc)n(on)20 b Fh(whic)o(h)c(o)q
(ccurs)i(in)d(an)h Fd(exbind)21 b Fh(|)15 b(as)66 2597 y(the)f(grammar)d(lea)
o(v)o(es)i(no)h(other)g(p)q(ossibilities)f(|)g(but)g(the)h(iden)o(ti\014er)g
(is)f(not)h(parsed)g(as)g(suc)o(h,)g(b)q(ecause)h(it)e(w)o(ould)g(b)q(e)66
2646 y(inconsisten)o(t)i(to)f(do)f(so.)p eop
%%Page: 41 72
bop 66 50 a Fs(CHAPTER)17 b(4.)37 b(CORE)17 b(ELABORA)l(TION)974
b Fw(41)66 195 y(Recall)14 b(the)g(part)i(of)f(the)f(Core)h(Elab)q(orator)h
(that)g(deals)e(with)h Fu(let)e Fw(expressions)i(from)f(Section)g(2.2.5)66
255 y(|)i(the)g(impleme)o(n)o(tation)e(con)o(tains)i(one)g(function)g
Fu(elab)p 1142 255 16 2 v 17 w Fk(syn)h Fw(for)f(ev)o(ery)f(phrase)i(class)f
Fk(syn)p Fw(.)140 315 y(A)21 b Fk(de)n(c)i Fw(m)o(ust)e(elab)q(orate)i(to)f
(an)h(en)o(vironmen)o(t)d(\(c.f.)38 b(rules)22 b(17{25\))i(so)f(the)f(implem)
o(en)o(tation)66 376 y(returns)17 b(a)f(principal)g(en)o(vironmen)o(t)d
(instead)j(of)h(a)f(principal)g(t)o(yp)q(e.)66 520 y Fr(4.2.1)70
b(Elab)r(oration)24 b(errors)66 612 y Fw(If)c(an)h(error)f(o)q(ccurs)h(some)e
(time)f(during)i(elab)q(oration)h(of)g(a)f(sub)q(expression,)i(w)o(e)d
(insert)h(error)g(in-)66 673 y(formation)i(in)o(to)f(the)h(no)q(de)h(of)f
(the)g(syn)o(tax)g(tree)f(for)i(the)f(sub)q(expression)g(\(a)g(n)o(um)o(b)q
(er)f(of)h(utilit)o(y)66 733 y(functions)15 b(with)g(the)g(su\016x)g(\\)p
Fu(Conv)p Fw(")f(in)h(their)f(names)g(are)h(used)g(to)g(insert)g(this)g
(error)g(information.\))66 793 y(W)l(e)j(w)o(an)o(t)f(to)h(con)o(tin)o(ue)e
(elab)q(oration,)i(so)g(that)g(other)f(p)q(ossible)h(elab)q(oration)g(errors)
g(can)f(b)q(e)h(found)66 853 y(during)h(the)f(same)g(run.)28
b(W)l(e)18 b(therefore)g(assign)i(a)f(b)q(ogus)h(t)o(yp)q(e)e(to)h(the)f(sub)
q(expression.)29 b(T)l(o)19 b(a)o(v)o(oid)66 913 y(propagation)e(of)f(an)f
(elab)q(oration)h(error,)f(this)g(b)q(ogus)h(t)o(yp)q(e)f(is)g(c)o(hosen)f
(to)i(b)q(e)f(a)h(fresh)e(t)o(yp)q(e)h(v)m(ariable,)66 974
y(suc)o(h)h(that)g(no)h(constrain)o(ts)f(are)g(imp)q(osed)f(b)o(y)g(the)h
(sub)q(expression)g(in)g(the)f(rest)h(of)g(the)g(elab)q(oration.)140
1034 y(Recall)f(the)h(functionalit)o(y)f(of)h(the)h(elab)q(oration)g
(function)f Fu(elab)p 1351 1034 V 17 w(dec)f Fw(|)h(b)q(esides)h(returning)f
(an)66 1094 y(en)o(vironmen)o(t)f(it)i(returns)g(a)h(mo)q(di\014ed)e(syn)o
(tax)h(tree.)24 b(In)17 b(other)g(w)o(ords,)h(it)f(is)g(the)g(resp)q
(onsibilit)o(y)f(of)66 1154 y(the)j(user)f(of)h(the)f(Core)h(Elab)q(orator)h
(to)e(do)h(whatev)o(er)f(he)g(or)h(she)f(w)o(an)o(ts)h(with)f(the)h(inserted)
e(error)66 1214 y(information)f(|)g(the)g(Elab)q(orator)i(in)e(itself)f(do)q
(es)i(not)g(do)f(an)o(ything)h(b)q(esides)f(recording)g(the)g(errors)66
1275 y(in)g(the)g(syn)o(tax)g(tree.)66 1419 y Fr(4.2.2)70 b(Syn)n(tactic)22
b(Restrictions)66 1511 y Fw(The)14 b(De\014nition)e(states)i([11,)f(Section)g
(2.9])g(a)g(n)o(um)o(b)q(er)f(of)h(syn)o(tactic)f(restrictions,)h(and)h(in)e
(Chapter)i(3)66 1572 y(it)i(is)g(stated)h(that)g(some)e(of)h(these)g(should)h
(b)q(e)f(dealt)g(with)g(during)h(elab)q(oration.)140 1632 y(Some)j(of)j(the)e
(commen)o(ts)e(to)k(the)f(rules)f(in)h(the)g(De\014nition)f([11)q(,)i
(Section)e(4.10])h(states)h(that)66 1692 y(some)18 b(prop)q(ert)o(y)h(is)g
(ensured)f(b)o(y)h(the)f(syn)o(tactic)g(restrictions,)g(see)h(for)g(example)e
(the)h(commen)o(t)e(to)66 1752 y(rule)e(30.)21 b(If)13 b(w)o(e)h(carefully)e
(determine)g(all)h(prop)q(erties)h(only)g(ensured)f(b)o(y)h(the)f(syn)o
(tactic)g(restrictions,)66 1812 y(w)o(e)g(can)g(implem)o(en)o(t)d(the)j(syn)o
(tactic)f(restrictions)g(b)o(y)h(c)o(hec)o(king)e(whether)i(the)f(prop)q
(erties)i(holds.)20 b(F)l(or)66 1872 y(instance,)e(the)f(syn)o(tactic)g
(restriction)g(that)h(no)g Fk(c)n(onbind)24 b Fw(ma)o(y)16
b(bind)i(the)f(same)g(iden)o(ti\014er)f(t)o(wice)g(is)66 1933
y(impleme)o(n)o(ted)f(b)o(y)j(c)o(hec)o(king,)f(in)i(function)f
Fu(elab)p 1000 1933 V 17 w(conbind)p Fw(,)e(that)j(the)g(constructor)g
Fk(c)n(on)j Fw(is)c(not)i(in)66 1993 y(the)c(domain)g(of)g(the)g(constructor)
h(en)o(vironmen)o(t)d Fk(CE)p Fw(.)140 2053 y(Let)i(us)h(add)f(the)g(follo)o
(wing)g(commen)o(ts)e(to)i(some)f(of)i(the)f(rules)g(in)g(the)g(De\014nition)
1694 2035 y Fm(1)1713 2053 y Fw(.)p 421 2110 1182 2 v 420 2170
2 61 v 445 2152 a Fk(R)o(ule)p 565 2170 V 51 w(Comment)p 1601
2170 V 421 2172 1182 2 v 420 2232 2 61 v 481 2214 a Fw(8)p
565 2232 V 86 w(The)g(syn)o(tactic)f(restrictions)h(ensure)g
Fk(lab)23 b Fv(=)-30 b Fp(2)14 b Fw(Dom)p Fv(\045)p Fw(.)p
1601 2232 V 420 2292 V 469 2274 a(31)p 565 2292 V 74 w(By)h(the)h(syn)o
(tactic)f(restrictions)h Fk(exc)n(on)24 b Fv(=)-29 b Fp(2)14
b Fw(Dom)o Fv(E)-5 b(E)s Fw(.)p 1601 2292 V 420 2352 V 469
2334 a(32)p 565 2352 V 74 w(By)15 b(the)h(syn)o(tactic)f(restrictions)h
Fk(exc)n(on)24 b Fv(=)-29 b Fp(2)14 b Fw(Dom)o Fv(E)-5 b(E)s
Fw(.)p 1601 2352 V 420 2413 V 469 2395 a(41)p 565 2413 V 74
w(The)16 b(syn)o(tactic)f(restrictions)h(ensure)g Fk(lab)23
b Fv(=)-30 b Fp(2)14 b Fw(Dom)p Fv(\045)p Fw(.)p 1601 2413
V 421 2414 1182 2 v 66 2495 a(Then)22 b(the)f(commen)o(ts)e(to)j(the)f(rules)
h(in)f(the)g(De\014nition)g(tells)g(us)h(exactly)e(whic)o(h)h(prop)q(erties)h
(to)66 2555 y(c)o(hec)o(k)15 b(and)i(also)f(where)g(to)h(c)o(hec)o(k)d(them.)
140 2615 y(If)k(a)i(prop)q(ert)o(y)f(at)g(some)f(p)q(oin)o(t)i(do)q(es)g(not)
f(hold,)h(error)f(information)f(telling)g(whic)o(h)g(syn)o(tactic)66
2675 y(restriction)e(has)h(b)q(een)f(violated,)f(is)h(inserted)g(in)o(to)g
(the)g(syn)o(tax)g(tree.)p 66 2719 756 2 v 123 2749 a Fi(1)141
2765 y Fh(Notice,)d(b)o(y)g(the)h(w)o(a)o(y)m(,)e(that)h(the)h(side)f
(condition)g(on)g(rule)g(41)g(is)g(sup)q(er\015uous)i(|)d(it)h(is)g(ensured)i
(b)o(y)e(the)h(syn)o(tactic)66 2814 y(restrictions.)p eop
%%Page: 40 73
bop 66 527 a Fy(Chapter)40 b(4)66 735 y(Core)h(Elab)s(oration)66
992 y Ft(4.1)83 b(In)n(tro)r(duction)66 1102 y Fw(This)20 b(section)e
(describ)q(es)h(the)g(Core)g(Elab)q(orator)i(of)f(the)e(ML)i(Kit.)29
b(W)l(e)19 b(giv)o(e)f(an)i(o)o(v)o(erview)d(of)i(the)66 1162
y(Elab)q(orator,)e(and)f(explain)e(the)i(more)e(in)o(tricate)f(parts)j(in)f
(more)f(detail;)h(in)g(particular)g(o)o(v)o(erloading)66 1222
y(of)j(arithmetic)c(op)q(erators)k(and)g(\015exible)d(records.)23
b(W)l(e)16 b(also)i(describ)q(e)e(the)h(implem)o(e)o(n)o(tation)d(of)j(the)66
1282 y(static)f(ob)s(jects)g(and)h(op)q(erations)h(used)e(in)g(the)g(elab)q
(orator.)140 1342 y(W)l(e)g(assume)f(the)h(reader)g(is)g(familiar)e(with)i
(algorithm)g Fv(W)23 b Fw([8].)140 1403 y(The)18 b(outline)f(of)i(the)f(c)o
(hapter)g(is)g(as)h(follo)o(ws.)27 b(Section)18 b(5.2)g(giv)o(es)g(an)h(o)o
(v)o(erview)d(of)j(the)f(Elab)q(o-)66 1463 y(rator,)f(and)g(describ)q(es)e
(ho)o(w)i(elab)q(oration)g(errors)f(are)g(handled,)g(the)g(implem)o(en)n
(tation)e(of)i(syn)o(tactic)66 1523 y(restrictions,)d(and)h(ho)o(w)g(w)o(e)f
(determine)e(iden)o(ti\014er)g(status.)22 b(Moreo)o(v)o(er)12
b(w)o(e)h(describ)q(e)g(ho)o(w)g(w)o(e)g(resolv)o(e)66 1583
y(o)o(v)o(erloading,)f(and)g(the)f(implem)o(en)o(tation)e(of)j(recursiv)o(e)d
(v)m(alue)j(bindings)f(is)g(explained.)19 b(Finally)10 b(some)66
1643 y(miscellaneous)16 b(commen)o(ts)e(are)k(giv)o(en)f(in)g(order)h(to)g
(ease)g(studying)f(the)h(Elab)q(orator.)27 b(Section)17 b(4.3)66
1704 y(describ)q(e)d(the)g(implem)o(en)o(tation)e(of)i(the)g(seman)o(tic)f
(ob)s(jects)h(and)h(op)q(erations)g(corresp)q(onding)h(to)e([11)q(,)66
1764 y(Section)d(4.1{4.9].)21 b(The)11 b(constituen)o(t)g(\014les)h(of)f(the)
h(Core)g(Elab)q(orator)h(are)f(describ)q(ed)f(in)g(Section)g(5.20.)66
1930 y Ft(4.2)83 b(Elab)r(oration)66 2040 y Fw(F)l(unctor)12
b Fu(ElabDec)p Fw(,)e(lo)q(cated)i(in)f(the)h(\014le)f Fu(/Common/E)o(lab)o
(Dec)o(.s)o(ml)p Fw(,)e(implem)o(en)o(t)o(s)h(the)h(elab)q(orator)i(for)66
2100 y(the)h(Core,)g(i.e.,)e(it)i(implem)o(en)n(ts)d(the)j(static)g(seman)o
(tics)e(for)i(the)f(Core)i(as)f(de\014ned)g(in)f([11,)h(Section)g(4].)66
2160 y(Recall)19 b(from)f(Section)i(2.2.5)39 b(that)20 b(functor)g
Fu(ElabDec)d Fw(is)j(parameterised)e(on)i(the)f(ob)s(jects)g(of)h(the)66
2220 y(static)d(seman)o(tics)d(of)j(the)g(Core)g(and)g(that)g(it)f(returns)g
(a)h(structure)g(whic)o(h)f(can)g(b)q(e)h(constrained)g(b)o(y)66
2280 y(signature)g Fu(ELABDEC)p Fw(.)140 2341 y(The)24 b(Elab)q(orator)h(do)q
(es)g(not)f(c)o(hec)o(k)f(that)h(patterns)g(are)g(irredundan)o(t)g(and)h
(exhaustiv)o(e)d([11)q(,)66 2401 y(Section)16 b(4.11])h(as)g(this)f(is)g(b)q
(est)g(done)h(during)f(pattern)h(compilation.)140 2461 y(The)g(rules)g
(de\014ning)h(the)f(static)g(seman)o(tics)f(in)h(the)h(De\014nition)f(are)g
(non-deterministic.)23 b(Non-)66 2521 y(determinism)d(is)j(used)h(to)g
(express)f(p)q(olymorphism.)41 b(Because)22 b(of)i(this)g(non-determinism,)d
(the)66 2581 y(rules)f(cannot)h(b)q(e)g(implem)o(en)o(te)o(d)d(directly)l(.)
32 b(Hence)19 b(w)o(e)h(need)g(an)h(algorithm)e(whic)o(h)h(resolv)o(es)f(the)
66 2642 y(non-determinism.)g(Moreo)o(v)o(er)c(w)o(e)h(are)g(in)o(terested)f
(in)h(an)g(algorithm)g(with)g(the)g(prop)q(erties)g(that)h(if)66
2702 y(it)j(succeeds,)f(it)h(returns)f(the)h(principal)f(t)o(yp)q(e)g(and)h
(if)f(the)h(expression)f(to)h(b)q(e)g(elab)q(orated)h(cannot)66
2762 y(elab)q(orate)16 b(according)g(to)f(the)g(static)g(seman)o(tics,)e
(then)j(the)f(algorithm)f(fails.)20 b(One)15 b(suc)o(h)g(algorithm)66
2822 y(is)f(Damas')f(and)h(Milner's)e(algorithm)g Fv(W)7 b
Fw([8],)13 b(whic)o(h)g(our)h(implem)o(en)o(tati)o(on)d(is)j(based)g
(directly)e(up)q(on.)987 2947 y(40)p eop
%%Page: 39 74
bop 66 50 a Fs(CHAPTER)17 b(3.)37 b(P)l(ARSING)1281 b Fw(39)66
195 y Fu(Parsing/INF)o(IXI)o(NG.)o(sm)o(l,)22 b(Parsing/Inf)o(ixi)o(ng)o(.sm)
o(l)m Fx(:)i Fw(In\014x)17 b(resolution.)24 b(Resolv)o(es)17
b(the)g Fu(infix)188 255 y Fw(declarations)g(for)f(a)h(top-lev)o(el)e
(declaration,)g(and)i(expands)g Fu(fun)e Fw(bindings)i(in)o(to)f(their)f
(equiv-)188 315 y(alen)o(t)h(\(underiv)o(ed\))f(form.)66 417
y Fu(Parsing/INF)o(IX)p 406 417 16 2 v 15 w(STACK.sml,)22 b(Parsing/In)o(fix)
o(Sta)o(ck)o(.sm)o(l)m Fx(:)188 477 y Fw(In)o(ternal)17 b(impleme)o(n)o
(tation)e(mo)q(dule)i(for)i Fu(Infixing)m Fw(;)f(pro)o(vides)g(generic)f
(analysis)h(and)h(reso-)188 538 y(lution)d(of)h(in\014x)f(constructions)g
(for)h(b)q(oth)g(patterns)g(and)f(expressions.)66 639 y Fu(Parsing/HOO)o(KS.)
o(sml)l Fx(:)24 b Fw(Calls)14 b(to)h Fu(use)d Fw(for)j(the)f(generated)g
(lexer)e(and)j(parser,)f(since)f(the)h(generated)188 699 y(\014les)i(cannot)h
(carry)f Fu(Make)f Fw(tags.)p eop
%%Page: 38 75
bop 66 50 a Fs(CHAPTER)17 b(3.)37 b(P)l(ARSING)1281 b Fw(38)66
203 y Ft(3.7)83 b(Files)66 313 y Fw(The)17 b(abstract)h(syn)o(tax)e(mo)q
(dules)g(are)h(in)f(the)h Fu(Common/)d Fw(sub)q(directory)i(b)q(ecause)h
(they)g(are)f(required)66 373 y(b)o(y)h(the)g(en)o(tire)e(Kit.)23
b(The)17 b(other)g(parsing-related)g(\014les)g(are)g(in)f(the)h
Fu(Parsing/)d Fw(sub)q(directory)l(.)23 b(The)66 433 y(relev)m(an)o(t)16
b(\014les)f(are)i(as)g(follo)o(ws:)66 493 y Fu(Common/DEC)p
329 493 16 2 v 15 w(GRAMMAR.sml)o(,)22 b(Common/DecG)o(ram)o(mar)o(.s)o(ml)m
Fx(:)i Fw(The)13 b(signature)h(and)g(functor)f(for)g(the)188
554 y(abstract)k(syn)o(tax)f(datat)o(yp)q(e)h(of)g(the)f(Core.)66
655 y Fu(Common/TOPD)o(EC)p 406 655 V 15 w(GRAMMAR.sm)o(l,)22
b(Common/Topd)o(ecG)o(ra)o(mma)o(r.s)o(ml)m Fx(:)h Fw(The)13
b(signature)h(and)f(functor)188 716 y(for)k(the)f(abstract)h(syn)o(tax)f
(datat)o(yp)q(e)g(of)h(the)f(Mo)q(dules.)66 817 y Fu(Parsing/Top)o(dec)o(.le)
o(x)m Fx(:)24 b Fw(The)16 b(lexical)e(sp)q(eci\014cation)i(\(ML-Lex)h(source)
f(\014le\))g(for)g(SML.)66 919 y Fu(Parsing/Top)o(dec)o(.gr)o(m)m
Fx(:)24 b Fw(The)14 b(grammar)f(\(ML-Y)l(acc)h(source)g(\014le\))f(for)i
(SML,)f(as)h(describ)q(ed)f(in)f(Sec-)188 979 y(tion)k(3.5.)66
1081 y Fu(Parsing/LEX)p 354 1081 V 15 w(BASICS.sml)o(,)22 b(Parsing/Lex)o
(Bas)o(ics)o(.s)o(ml)m Fx(:)i Fw(The)g(mo)q(dule)f(whic)o(h)g(pro)o(vides)g
(the)188 1141 y(mac)o(hinery)11 b(for)h(source)h(readers)g(\(Section)f(3.3\))
h(and)g(source)g(p)q(osition)g(annotation)h(and)g(prin)o(t-)188
1201 y(ing.)66 1303 y Fu(Parsing/LEX)p 354 1303 V 15 w(UTILS.sml,)22
b(Parsing/L)o(exU)o(til)o(s.s)o(ml)l Fx(:)i Fw(General)d(lexing)f(utilities:)
30 b(accum)o(ula-)188 1363 y(tion)15 b(of)f(literal)f(strings,)i
(construction)f(of)g(in)o(teger)g(and)g(real)g(constan)o(ts,)h(and)g(commen)o
(t)c(nest-)188 1423 y(ing.)23 b Fu(LexUtils)13 b Fw(pro)o(vides)j(the)h
(lexer)e(argumen)o(t)g(\(t)o(yp)q(e)h Fu(LexArgument)l Fw(\))h(and)g(op)q
(erations)h(on)188 1484 y(it)e(for)h(string)f(and)h(commen)o(t)c(accum)o
(ulation.)66 1585 y Fu(Parsing/Top)o(dec)o(.le)o(x.)o(sml)l
Fx(:)24 b Fw(The)17 b(ML-Lex-generated)f(lexer.)66 1687 y Fu(Parsing/Top)o
(dec)o(.gr)o(m.)o(sig)l Fx(:)24 b Fw(Signature)c(for)f(the)g(ML-Y)l(acc)f
(output;)j(con)o(tains)e(the)g(tok)o(en)f(\(ter-)188 1747 y(minal)d(sym)o(b)q
(ol\))g(sp)q(eci\014cations.)66 1849 y Fu(Parsing/Top)o(dec)o(.gr)o(m.)o(sml)
l Fx(:)24 b Fw(The)17 b(ML-Y)l(acc-generated)f(parser.)66 1951
y Fu(Parsing/GRA)o(MMA)o(R)p 457 1951 V 15 w(UTILS.sml,)22
b(Parsing/Gra)o(mma)o(rU)o(til)o(s.s)o(ml)m Fx(:)h Fw(Utilit)o(y)9
b(mo)q(dule)g(for)j(the)e(parser.)188 2011 y(Its)15 b(main)f(purp)q(ose)i(is)
f(to)h(expand)f(the)g(deriv)o(ed)e(forms;)i(the)f(expansion)i(functions)f
(are)g(called)188 2071 y(from)d(the)g(actions)h(in)f(the)h(grammar)e(rules.)
19 b(It)12 b(also)h(brings)g(together)g(the)f(functions)h(for)g(turn-)188
2131 y(ing)20 b(strings)f(in)o(to)g(the)g(v)m(arious)h(kinds)g(of)f(iden)o
(ti\014ers)f(\()p Fu(con)o Fw(,)h Fu(excon)o Fw(,)g Fu(lab)g
Fw(and)g(so)h(on\),)g(do)q(es)188 2191 y(sp)q(ecial)c(constan)o(t)g
(construction,)g(and)h(pro)o(vides)e(translation)i(from)e(p)q(ositional)h
(information)188 2251 y(\()p Fu(LexBasics.p)o(os)m Fw(\))g(to)g
Fk(info)q Fw(.)66 2353 y Fu(Parsing/PAR)o(SE.)o(sml)o(,)22
b(Parsing/Par)o(se.)o(sml)l Fx(:)i Fw(The)17 b(top-lev)o(el)e(of)i(the)f
(parser.)23 b Fu(PARSE)15 b Fw(pro)o(vides)188 2413 y(the)g(in)o(terface)f
(to)h(the)g(rest)g(of)g(the)g(Kit.)20 b Fu(Parse)13 b Fw(p)q(erforms)h(all)h
(the)g(functor)g(applications)g(and)188 2474 y(links)h(all)f(the)h
(subsidiary)g(mo)q(dules,)e(and)j(pro)o(vides)e(the)h(top-lev)o(el)e
(exception)h(handling)i(and)188 2534 y(error)g(rep)q(orting)f(for)h(the)f
(parser.)66 2635 y Fu(Parsing/MyB)o(ase)o(.sm)o(l)m Fx(:)24
b Fw(Library)15 b(\014les)g(for)g(the)g(generated)g(lexer)e(and)j(parser.)21
b(A)15 b(p)q(ortable,)g(func-)188 2696 y(torised,)h(v)o(ersion)g(of)g(the)g
(mo)q(dules)f(pro)o(vided)h(with)g(ML-Lex)h(and)g(ML-Y)l(acc.)p
eop
%%Page: 37 76
bop 66 50 a Fs(CHAPTER)17 b(3.)37 b(P)l(ARSING)1281 b Fw(37)p
66 213 1890 6 v 185 267 a Fu(signature)22 b(PARSE)i(=)261 328
y(sig)338 388 y(type)g(InfixBasis)338 448 y(type)g(topdec)338
508 y(type)g(SourceReade)o(r)338 629 y(val)h(nameOf:)e(SourceRead)o(er)f(->)j
(string)338 749 y(val)g(sourceFrom)o(St)o(dIn)o(:)e(unit)h(->)h(SourceRea)o
(der)338 809 y(val)g(sourceFrom)o(Fi)o(le:)d(string)h(->)i(SourceReade)o(r)
338 869 y(val)g(sourceFrom)o(St)o(rin)o(g:)d(string)i(->)h(SourceRea)o(der)
338 990 y(type)f(Report)338 1110 y(type)g(State)338 1170 y(datatype)f(Result)
g(=)j(SUCCESS)d(of)i(InfixBasi)o(s)e(*)i(topdec)e(*)j(State)748
1230 y(|)g(ERROR)e(of)g(Report)748 1291 y(|)i(LEGAL)p 933 1291
16 2 v 16 w(EOF)338 1411 y(val)f(begin:)e(SourceReade)o(r)g(->)h(State)338
1471 y(val)h(parse:)e(InfixBasis)f(*)k(State)d(->)i(Result)261
1531 y(end)666 1687 y Fw(Figure)15 b(3.1:)22 b(The)16 b(signature)h
Fu(PARSE)p 66 1744 1890 6 v 66 1869 a Fw(b)q(e)e(used)g(rep)q(eatedly)f(b)o
(y)h Fu(Parse.par)o(se)c Fw(to)16 b(read)f(phrases.)21 b(If)14
b(the)h(curren)o(t)f(input)h(line)e(needs)i(to)g(b)q(e)66 1929
y(discarded,)f(the)g(state)g(is)g(discarded)f(and)i(a)f(new)g(source)g
(reader)g(created)f(using)i Fu(sourceFro)o(mSt)o(dIn)66 1989
y Fw(again.)140 2059 y(W)l(e)20 b(use)h(p)q(ortable)g(v)o(ersions)f(of)h(the)
f(ML-Lex)h(and)g(ML-Y)l(acc)f(pac)o(k)m(ages)i(whic)o(h)e(compile)e(un-)66
2119 y(der)g(Standard)h(ML)f(with)g(the)g(Edin)o(burgh)g(Library)g(\(the)g
(pac)o(k)m(ages)g(bundled)g(with)g(SML/NJ)g(are)66 2179 y(nonp)q(ortable\),)
23 b(and)e(our)g(v)o(ersions)g(generate)f(p)q(ortable)i(co)q(de)e(\(the)h
(SML/NJ)g(ones)g(do)g(not\).)35 b(In)66 2240 y(addition,)16
b(there)e(are)i(v)m(arious)g(supp)q(ort)g(mo)q(dules)f(for)h(ML-Y)l(acc,)e
(including)h(a)h(generic)e(parsing)i(en-)66 2300 y(gine.)21
b(W)l(e)16 b(use)g(a)h(p)q(ortable)f(v)o(ersion)g(of)g(these)g(with)g(the)g
(\\abstractions")i(remo)o(v)o(ed)13 b(and)k(outermost)66 2360
y(structures)g(replaced)e(b)o(y)h(functors.)140 2420 y(The)d(in)o(terfaces)f
(and)i(link)m(age)e(of)i(ML-Lex)g(and)f(ML-Y)l(acc)g(are)g(messy)l(,)f(and)i
(w)o(e)f(are)g(not)h(going)g(to)66 2480 y(do)q(cumen)o(t)f(their)g(op)q
(eration)i(here.)20 b(Our)14 b Fu(Parse)e Fw(functor)i(links)f(the)h
(generated)f(\014les)h(in)f(the)h(ob)o(vious)66 2541 y(w)o(a)o(y)l(.)20
b Fu(Parse)12 b Fw(con)o(tains)h(functor)h(applications)f(for)h(the)f(other)g
(supp)q(ort)i(mo)q(dules,)e(and)h(the)f(top-lev)o(el)66 2601
y(success)k(and)f(failure)g(handling)g(routines.)p eop
%%Page: 36 77
bop 66 50 a Fs(CHAPTER)17 b(3.)37 b(P)l(ARSING)1281 b Fw(36)66
195 y Fu(OneDec)p 225 195 16 2 v 17 w(or)p 294 195 V 17 w(SEMICOLON)m
Fx(:)24 b Fw(A)16 b(single)g(core-lev)o(el)e(declaration)i(or)g(a)h
(semicolon;)66 297 y Fu(NonEmptyDec)l Fx(:)24 b Fw(A)16 b(non-empt)o(y)f
(core-lev)o(el)f(declaration,)i(p)q(ossibly)g(con)o(taining)g(semicolons;)66
399 y Fu(OneDec)n Fx(:)24 b Fw(A)16 b(single)g(declaration,)f(no)i
(semicolons;)66 500 y Fu(OneDec)p 225 500 V 17 w(sans)p 346
500 V 17 w(LOCAL)n Fx(:)24 b Fw(Single)15 b(Core-lev)o(el)g(declaration)h
(phrase,)g(excluding)f(the)h Fu(local)f Fw(form;)66 602 y Fu(StrDec)p
225 602 V 17 w(sans)p 346 602 V 17 w(SEMICOLON)l Fx(:)24 b
Fw(A)c(structure)g(declaration)h(with)f(no)h(semicolons)e(at)i(the)f
(outermost)188 662 y(lev)o(el;)66 764 y Fu(SigDec)p 225 764
V 17 w(sans)p 346 764 V 17 w(SEMICOLON)l Fx(:)k Fw(As)16 b(ab)q(o)o(v)o(e,)g
(for)h(signature)f(declarations;)66 866 y Fu(FunDec)p 225 866
V 17 w(sans)p 346 866 V 17 w(SEMICOLON)l Fx(:)24 b Fw(As)16
b(ab)q(o)o(v)o(e,)g(for)h(functor)f(declarations;)66 967 y
Fu(Ty)p 121 967 V 18 w(sans)p 243 967 V 17 w(STAR)o Fx(:)24
b Fw(T)o(yp)q(e)16 b(expression)g(without)g(\\)p Fu(*)p Fw(")h(at)f(the)g
(outermost)g(lev)o(el.)140 1081 y(The)g(v)m(arious)p 409 1081
V 35 w Fu(sans)p 532 1081 V 17 w(LOCAL)e Fw(declaration)i(forms)f(eliminate)e
(the)j(am)o(biguit)o(y)e(of)i Fu(local)e Fw(b)o(y)i(con-)66
1142 y(signing)j(it)f(to)g(the)g(Mo)q(dules)g(lev)o(el)f(or)h(pushing)h(it)f
(do)o(wn)g(in)o(to)g(an)h(unam)o(biguous)f(con)o(text.)26 b(Semi-)66
1202 y(colons)d(are)f(treated)f(similarly)f(so)i(that)g(the)g(parser)g(will)f
(deal)h(with)g(them)e(prop)q(erly)i(in)f(nested)66 1262 y(constructs)16
b(but)f(not)g(shift)g(past)g(them)f(at)h(top-lev)o(el.)k Fu(Ty)p
1138 1262 V 18 w(sans)p 1260 1262 V 17 w(STAR)14 b Fw(is)g(a)i(disam)o
(biguating)e(phrase)66 1322 y(class)j(for)f(the)g(\\)p Fu(*)p
Fw(")h(op)q(erator)g(in)f(t)o(yp)q(e)g(expressions.)140 1382
y(Semicolon)f(separators)k(\(in)f(phrase)g(classes)f Fk(de)n(c)q
Fw(,)g Fk(str)n(de)n(c)g Fw(and)h Fk(sp)n(e)n(c)p Fw(\))g(are)f(a)i
(particularly)d(nast)o(y)66 1443 y(case,)22 b(since)f(they)g(are)g(optional)h
(and)g(they)e(separate)i(optional)g(\(i.e.)d(p)q(ossibly)j(empt)o(y\))d
(phrases.)66 1503 y(W)l(e)i(deal)f(with)g(this)g(problem)f(b)o(y)h(giving)g
(\\)p Fu(;)p Fw(")h(the)f(same)f(status)j(as)f(the)f(phrase)h(class)f(it)g
(serv)o(es)66 1563 y(to)h(separate.)32 b(The)20 b(\\)p Fu(compose)n
Fw(")g(functions)g(from)f Fu(GrammarUt)o(ils)d Fw(are)k(there)f(to)i(sw)o
(allo)o(w)e(empt)o(y)66 1623 y(abstract)k(syn)o(tax)g(phrases)g(whic)o(h)e
(can)i(result)f(from)f(this)h(treatmen)o(t.)38 b(One)22 b(side-e\013ect)g(of)
g(this)66 1683 y(treatmen)o(t)15 b(is)h(that)g(it)g(is)g(not)g(p)q(ossible)h
(to)f(reconstitute)g(semicolons)e(when)i(reconstituting)g(source)66
1743 y(text)f(from)f(the)g(abstract)i(syn)o(tax)f(\(since)f(that)h(w)o(ould)g
(require)f(an)h(abstract)h(syn)o(tax)f(class)g(for)g(them)66
1804 y(at)i(least\).)66 1970 y Ft(3.6)83 b(Linking)66 2080
y Fw(The)20 b(v)m(arious)h(mo)q(dules)e(of)h(the)g(parsing)h(system,)e
(including)g(the)h(ML-Lex-generated)g(lexer,)f(the)66 2140
y(ML-Y)l(acc-generated)j(parser,)i(and)f(the)f(supp)q(ort)h(mo)q(dules,)g
(are)f(link)o(ed)e(in)o(to)i(a)h(single)f(functor,)66 2200
y Fu(Parse)o Fw(,)17 b(with)g(the)h(signature)g(sho)o(wn)g(in)f(\014gure)h
(3.1.)26 b(The)17 b(in)o(terface)f(has)j(b)q(een)e(k)o(ept)g(as)h(simple)e
(as)66 2260 y(p)q(ossible:)22 b(parsing)c(is)e(done)h(from)e(a)i(source)f(of)
h(input)g(text)e(held)h(in)g(a)h(string)g(or)g(a)g(\014le,)e(and)i(in)f(the)
66 2320 y(con)o(text)h(of)h(the)f(curren)o(t)g(top-lev)o(el)f(in\014x)h
(basis.)26 b(The)18 b(result)f(of)h(the)f(parse,)h(if)f(it)g(succeeds,)g(is)g
(the)66 2381 y(abstract)k(syn)o(tax)e(for)h(a)g(top-lev)o(el)e(declaration,)i
(plus)g(an)o(y)f(top-lev)o(el)f(in\014x)h(basis)h(established)g(b)o(y)66
2441 y(this)d(declaration.)140 2501 y(The)h(reason)h(for)f(the)g(in)o
(termediate)d(t)o(yp)q(e)i Fu(State)g Fw(is)h(to)g(handle)g(parsing)h(errors)
f(elegan)o(tly)l(.)25 b(In)66 2561 y(order)20 b(to)h(deal)e(with)h(error)g
(reco)o(v)o(ery)e(prop)q(erly)i(at)g(the)f(\(in)o(teractiv)o(e\))f(top)i(lev)
o(el,)e(source)i(readers)66 2621 y(op)q(erate)e(on)f(a)g(line-b)o(y-line)e
(basis)i(so)g(that)g(the)g(remainder)e(of)i(an)g(input)g(line)e(can)i(b)q(e)g
(discarded)g(if)66 2681 y(an)e(error)g(is)f(detected.)20 b(An)14
b(in)o(teractiv)o(e)e(source)j(reader)f(is)g(created)g(b)o(y)g
Fu(Parse.sourc)o(eFr)o(om)o(Std)o(In)m Fw(.)66 2742 y(If)k(a)h(phrase)g
(parses)h(and)f(executes)e(successfully)l(,)g(the)i(remainder)d(of)j(the)f
(line)g(m)o(ust)f(b)q(e)i(retained)66 2802 y(in)g(case)h(it)e(con)o(tains)i
(additional)f(phrases.)31 b(Hence,)19 b Fu(Parse.beg)o(in)d
Fw(returns)j(a)h Fu(State)d Fw(whic)o(h)i(can)p eop
%%Page: 35 78
bop 66 50 a Fs(CHAPTER)17 b(3.)37 b(P)l(ARSING)1281 b Fw(35)66
195 y(some)22 b(class)h Fk(t)g Fw(the)f(abstract)h(syn)o(tax)g(con)o(tains)g
(a)g(\014eld)f(of)h(t)o(yp)q(e)f Fk(t)k Fu(Option)m Fw(,)e(and)f(the)g
(grammar)66 255 y(con)o(tains)g(an)h(explicit)d(\\option")j(non)o(terminal,)e
(named)g(according)h(to)g(the)g(optional)g(phrase)h(it)66 315
y(con)o(tains)15 b(and)g(the)g(terminal)d(sym)o(b)q(ol)h(\(if)h(an)o(y\))h
(that)g(is)f(used)h(to)g(in)o(tro)q(duce)f(it.)20 b(Sequenced)13
b(phrases)66 376 y(\(with)k(syn)o(tax)h(class)f(Xseq)f(for)i(some)e(X\))h
(are)g(implem)o(en)o(te)o(d)e(with)i(sp)q(eci\014c)f(non)o(terminals)g(to)h
(deal)66 436 y(with)g(the)f(sequencing.)k(More)c(sp)q(eci\014cally)l(,)e(the)
i(con)o(v)o(en)o(tions)f(are)i(as)g(follo)o(ws:)139 550 y Fp(\017)24
b Fw(Non)o(terminals)9 b(ending)i(in)g(\\)p 715 550 16 2 v
19 w Fu(opt)n Fw(")h(are)f(optional)g(phrases.)21 b(Man)o(y)10
b(\(suc)o(h)h(as)g Fu(BarConDesc)p 1867 550 V 15 w(opt)188
610 y Fw(and)h Fu(AndDatDesc)p 540 610 V 15 w(opt)o Fw(\))f(are)g(in)o(tro)q
(duced)f(b)o(y)h(k)o(eyw)o(ords)f(\()p Fu(BAR)g Fw(and)i Fu(AND)d
Fw(in)i(these)g(cases\);)h(some)188 670 y(\(suc)o(h)k(as)h
Fu(SigDec)p 536 670 V 16 w(opt)o Fw(\))g(are)f(not.)139 772
y Fp(\017)24 b Fw(Sequences)13 b(of)g(items)f(are)h(represen)o(ted)g(b)o(y)f
(non)o(terminals)g(ending)h(in)g(\\)p 1518 772 V 19 w Fu(seq0)o
Fw(")h(\(zero)f(or)h(more)188 832 y(items\),)f(\\)p 377 832
V 19 w Fu(seq1)o Fw(")i(\(one)g(or)h(more)d(items\),)g(\\)p
1010 832 V 19 w Fu(seq2)o Fw(")i(\(t)o(w)o(o)g(or)g(more\))f(and)i(so)f(on.)
22 b(Some)13 b(\(suc)o(h)188 892 y(as)20 b Fu(ExpComma)p 462
892 V 16 w(seq0)d Fw(and)j Fu(LongIdentE)o(q)p 982 892 V 15
w(seq2)o Fw(\))f(are)g(named)f(to)i(re\015ect)e(the)h(tok)o(ens)g(whic)o(h)
188 953 y(separate)e(the)f(items;)e(others)i(\(suc)o(h)g(as)h
Fu(AtExp)p 1077 953 V 17 w(seq1)o Fw(\))f(ha)o(v)o(e)f(no)i(separator.)139
1054 y Fp(\017)24 b Fu(TyVarSeq)13 b Fw(is)j(a)g(sp)q(ecial)f(case,)h(b)q
(eing)g(a)g(sequenced)f(construction)g(as)i(describ)q(ed)e(in)h(the)f(Def-)
188 1115 y(inition.)28 b(The)18 b(De\014nition)h(also)g(uses)g(the)f
(construction)h Fk(tyse)n(q)p Fw(;)g(w)o(e)f(do)h(not,)g(since)f(it)g(w)o
(ould)188 1175 y(in)o(tro)q(duce)g(an)h(am)o(biguit)o(y)c(in)o(to)j(the)g
(grammar)f(\(inde\014nite)g(lo)q(ok)m(ahead)i(w)o(ould)f(b)q(e)g(required)188
1235 y(to)f(disam)o(biguate)e(t)o(yp)q(e)h(constructions)g(from)f(paren)o
(thesised)h(t)o(yp)q(e)g(expressions\).)66 1379 y Fr(3.5.3)70
b(Am)n(biguities)20 b(resolv)n(ed)i(in)h(the)f(grammar)66 1472
y Fw(The)11 b(grammar)f(has)h(to)g(resolv)o(e)f(the)h(am)o(biguities)d
(presen)o(t)j(in)f(the)h(rules)f(of)h(the)g(syn)o(tactic)f(description)66
1532 y(con)o(tained)k(in)f(the)g(De\014nition.)20 b(Man)o(y)14
b(of)g(these)f(am)o(biguities)e(are)j(matters)f(of)h(precedence,)e(co)o(v)o
(ered)66 1592 y(b)o(y)19 b(the)g(De\014nition's)f(con)o(v)o(en)o(tions)g(in)h
(the)g(presen)o(tation)g(of)g(the)g(rules.)29 b(There)19 b(is,)g(ho)o(w)o(ev)
o(er,)f(one)66 1652 y(remaining)d(am)o(biguit)o(y:)k(a)e(phrase)f(of)h(the)f
(form)188 1766 y Fu(local)24 b Fk(de)n(c)i Fu(in)f Fk(de)n(c)h
Fu(end)66 1881 y Fw(can)c(b)q(e)g(in)o(terpreted)e(either)g(at)i(the)g(Mo)q
(dules)f(lev)o(el)f(\()p Fu(local)g Fw(o)o(v)o(er)g(t)o(w)o(o)i
Fk(str)n(de)n(c)o Fw('s)f(whic)o(h)g(happ)q(en)66 1941 y(to)f(b)q(e)g(Core)g
(declarations\))g(or)g(the)f(Core)h(lev)o(el)e(\(a)i(single)f
Fk(str)n(de)n(c)g Fw(whic)o(h)g(happ)q(ens)i(to)f(b)q(e)g(a)g(Core)66
2001 y(declaration)d(con)o(taining)g Fu(local)n Fw(\).)23 b(In)16
b(addition,)h(treatmen)o(t)e(of)i(semicolons)e(is)i(problematic)e(since)66
2061 y(w)o(e)h(wish)h(to)f(parse)188 2175 y Fk(de)n(c)26 b
Fu(;)g Fk(de)n(c)66 2290 y Fw(as)15 b(t)o(w)o(o)e(separate)h(phrases)g(at)g
(top-lev)o(el)e(but)h(as)i(a)e(single)g(phrase)h(when)g(em)o(b)q(edded)d(in)j
(an)g(enclosing)66 2350 y(syn)o(tactic)i(construct.)140 2410
y(T)l(o)c(solv)o(e)f(all)h(these)f(problems,)g(the)h(grammar)e(is)i(la)o(y)o
(ered)e(in)i(a)g(fairly)f(ob)o(vious)h(manner.)19 b(Non)o(ter-)66
2470 y(minals)c(with)h(names)f(of)i(the)f(form)f Fu(XXX)p 817
2470 V 17 w(sans)p 938 2470 V 17 w(YYY)g Fw(represen)o(t)h(am)o(biguit)o
(y-resolving)d(in)o(termediate)66 2530 y(phrases.)22 b(T)l(op-lev)o(el)15
b(declarations)h(using)g Fu(local)e Fw(are)i(regarded)g(as)g(mo)q(dules)f
(constructs,)h(in)f(order)66 2590 y(to)i(a)o(v)o(oid)f(inde\014nite)f(lo)q
(ok)m(ahead)i(when)g(resolving)f(phrases)h(suc)o(h)f(as)188
2705 y Fu(local)24 b Fk(de)n(c)i Fu(in)f(structure)d Fk(strbind)k
Fu(end)140 2819 y Fw(The)16 b(v)m(arious)h(non)o(terminals)d(o)q(ccur)j(as)g
(follo)o(ws:)p eop
%%Page: 34 79
bop 66 50 a Fs(CHAPTER)17 b(3.)37 b(P)l(ARSING)1281 b Fw(34)140
195 y(T)l(o)16 b(get)h(the)f(correct)f(treatmen)o(t)g(of)h(iden)o(ti\014ers,)
e(w)o(e)i(classify)g(them)e(in)o(to)i(a)h(n)o(um)o(b)q(er)d(of)j(distinct)66
255 y(non)o(terminals,)e(as)h(follo)o(ws:)66 361 y Fu(Ident)o
Fx(:)24 b Fw(An)o(y)15 b(v)m(alid)h(unquali\014ed)f(ML)i(iden)o(ti\014er,)d
(including)h(\\)p Fu(*)p Fw(")i(but)f(excluding)g(\\)p Fu(=)p
Fw(".)66 460 y Fu(OpIdent)n Fx(:)24 b Fw(An)16 b(iden)o(ti\014er,)e(as)j(ab)q
(o)o(v)o(e,)e(optionally)h(preceeded)f(b)o(y)h(\\)p Fu(op)p
Fw(".)66 560 y Fu(EqIdent)n Fx(:)24 b Fw(An)16 b(iden)o(ti\014er,)e(as)j(ab)q
(o)o(v)o(e,)e(or)i(\\)p Fu(=)p Fw(".)66 660 y Fu(TypeIdent)m
Fx(:)24 b Fw(An)16 b(iden)o(ti\014er,)e(as)j(ab)q(o)o(v)o(e,)f(but)g
(omitting)f(\\)p Fu(*)p Fw(".)66 759 y Fu(LongIdent)m Fx(:)24
b Fw(An)17 b(iden)o(ti\014er)e(or)j(long)f(\(quali\014ed\))f(iden)o
(ti\014er.)22 b(This)17 b(includes)f(quali\014ed)h(iden)o(ti\014ers)188
819 y(suc)o(h)f(as)h(\\)p Fu(S.*)o Fw(")f(and)h(\\)p Fu(*.S)o
Fw(")g(\(whic)o(h)e(are)h(legal\),)f(as)i(w)o(ell)d(as)j(quali\014ed)e(iden)o
(ti\014ers)g(ending)h(in)188 880 y(\\)p Fu(=)p Fw(")j(\(since)e(w)o(e)h(ma)o
(y)f(wish)h(to)h(pro)o(vide)e(the)h(equalit)o(y)f(predicate)g(within)h(a)g
(structure,)g(ev)o(en)188 940 y(though)g(it)d(is)h(not)h(legal)f(for)h
(programs)f(to)g(rebind)g(it\).)66 1039 y Fu(LongTypeIde)o(nt)m
Fx(:)24 b Fw(A)15 b Fu(LongIdent)e Fw(excluding)j(\\)p Fu(*)p
Fw(")g(and)h(quali\014ed)e(iden)o(ti\014ers)g(ending)h(with)h(\\)p
Fu(.*)o Fw(".)66 1139 y Fu(LongOpIdent)l Fx(:)24 b Fw(A)16
b Fu(LongIdent)d Fw(optionally)j(preceeded)f(b)o(y)h(\\)p Fu(op)o
Fw(".)66 1238 y Fu(LongOpEqIde)o(nt)m Fx(:)24 b Fw(A)15 b Fu(LongOpIdent)e
Fw(or)j(\\)p Fu(=)p Fw(")h(or)g(\\)p Fu(op)25 b(=)o Fw(".)66
1338 y Fu(Label)o Fx(:)f Fw(A)15 b(record)g(lab)q(el,)h(whic)o(h)f(is)g
(either)g(an)h(iden)o(ti\014er)e(\(including)h(\\)p Fu(*)p
Fw(")h(but)g(excluding)f(\\)p Fu(=)p Fw("\),)h(or)188 1398
y(a)h(p)q(ositiv)o(e)e(in)o(teger)h(of)g(inde\014nite)f(size)h(and)h(without)
f(leading)g(zeros.)140 1504 y(These)d(classes)h(of)f(iden)o(ti\014er)f(are)i
(non)o(terminals,)e(built)h(from)f(a)i(set)f(of)h(terminal)d(sym)o(b)q(ols)i
(whic)o(h)66 1564 y(includes)d(unquali\014ed)g(iden)o(ti\014ers)g(\()p
Fu(ID)o Fw(\))h(and)g(quali\014ed)f(iden)o(ti\014ers)g(\()p
Fu(FULL)p 1437 1564 16 2 v 17 w(QUAL)p 1558 1564 V 17 w(ID)o
Fw(,)h Fu(TYPE)p 1755 1564 V 17 w(QUAL)p 1876 1564 V 17 w(ID)p
Fw(\),)66 1624 y(and)18 b(whic)o(h)e(treats)h(b)q(oth)g(\\)p
Fu(*)p Fw(")h(and)f(\\)p Fu(=)p Fw(")g(as)g(reserv)o(ed)f(w)o(ords.)23
b(\(According)16 b(to)h(the)g(De\014nition,)f(\\)p Fu(*)p Fw(")66
1684 y(is)g(not)h(reserv)o(ed,)e(although)i(its)f(use)g(and)h(meaning)e(v)m
(ary)i(according)f(to)h(con)o(text.\))140 1745 y(Because)i(of)i(the)f(large)g
(n)o(um)o(b)q(er)f(of)i(iden)o(ti\014er)d(classes)j(in)f(the)g(grammar,)f(w)o
(e)h(c)o(ho)q(ose)h(not)g(to)66 1805 y(distinguish)i(b)q(et)o(w)o(een)f(the)h
(di\013eren)o(t)f Fk(semantic)i Fw(classes)f(of)g(iden)o(ti\014er)f(\()p
Fk(var)o Fw(,)j Fk(c)n(on)p Fw(,)f Fk(exc)n(on)q Fw(\),)g(ev)o(en)66
1865 y(in)d(con)o(texts)e(where)i(iden)o(ti\014er)d(status)k(is)e(kno)o(wn)h
(at)g(parse)g(time.)32 b(This)20 b(is)g(to)h(a)o(v)o(oid)f(ha)o(ving)h(an)66
1925 y(ev)o(en)e(larger)g(set)g(of)h(iden)o(ti\014er)d(non)o(terminals.)29
b(Iden)o(ti\014ers)18 b(encoun)o(tered)g(in)h(resolv)m(able)g(con)o(texts)66
1985 y(are)g(con)o(v)o(erted)e(in)o(to)h(the)h(correct)e(seman)o(tic)g(ob)s
(jects)h(in)g(the)g(rule)g(actions,)h(so)g(that)g(the)f(abstract)66
2045 y(syn)o(tax)e(has)h(iden)o(ti\014ers)e(resolv)o(ed)h(in)f(all)h(the)g
(cases)h(where)f(it)f(is)h(p)q(ossible)h(to)f(do)h(so.)66 2189
y Fr(3.5.2)70 b(Naming)23 b(Con)n(v)n(en)n(tions)66 2281 y
Fw(There)f(are)h(some)e(general)h(naming)f(con)o(v)o(en)o(tions)g(in)h(the)g
(grammar.)38 b(T)l(erminals)21 b(are)h(in)g(upp)q(er)66 2341
y(case,)d(non)o(terminals)e(in)h(mixed)e(case.)27 b(Note)18
b(the)h(trailing)e(underscores)i(in)f(the)g(non)o(terminals)f(for)66
2402 y(expressions)d(\()p Fu(Exp)p 418 2402 V 17 w Fw(\))f(and)h(matc)o(hes)e
(\()p Fu(Match)p 894 2402 V 17 w Fw(\))h(to)h(di\013eren)o(tiate)e(the)h
(iden)o(ti\014ers)f(from)h(the)g(p)q(erv)m(asiv)o(e)66 2462
y(exception)j(constructors.)140 2522 y(The)24 b(De\014nition)g(has)h(a)f(n)o
(um)o(b)q(er)f(of)i(con)o(v)o(en)o(tions)e(when)h(describing)g(the)g(syn)o
(tax)g(of)g(SML.)66 2582 y(Optional)e(phrases)h(are)f(enclosed)f(in)g(braces)
h(\()p Fv(<)g(>)p Fw(\),)g(there)g(is)f(a)h(con)o(v)o(en)o(tion)f(for)h
(sequences)f(of)66 2642 y(phrases,)g(and)f(alternativ)o(e)e(forms)g(are)i
(listed)e(in)h(order)h(of)g(decreasing)f(precedence.)29 b(W)l(e)19
b(discuss)66 2703 y(the)d(issue)g(of)h(precedence)e(later.)140
2763 y(Optional)f(phrases)h(in)f(the)f(grammatical)f(rules)i(are)g
(re\015ected)f(directly)g(in)h(the)f(abstract)i(syn)o(tax)66
2823 y(of)20 b(the)f(Kit)f(and)i(in)f(the)g(ML-Y)l(acc)f(sp)q(eci\014cation.)
30 b(Corresp)q(onding)21 b(to)e(eac)o(h)g(optional)g(phrase)h(of)p
eop
%%Page: 33 80
bop 66 50 a Fs(CHAPTER)17 b(3.)37 b(P)l(ARSING)1281 b Fw(33)139
195 y Fp(\017)24 b Fw(The)18 b(Kit)e(syn)o(tax)h(retains)h(the)f(\\)p
Fu(op)o Fw(")h(k)o(eyw)o(ord.)23 b(This)18 b(is)f(needed)f(to)i(resolv)o(e)e
(in\014xes)h(in)f(pat-)188 255 y(terns,)22 b(expressions)g(and)g
Fu(fun)n Fw(-bindings,)h(and)f(is)f(retained)g(to)g(aid)h(prin)o(ting)e
(\(rather)i(than)188 315 y(b)q(eing)d(folded)f(in)o(to)h(the)f
Fk(info)h Fw(no)q(des,)g(whic)o(h)f(is)g(another)h(p)q(ossibilit)o(y)f(but)h
(w)o(ould)f(add)h(com-)188 376 y(plexit)o(y\).)g(The)13 b(De\014nition)g
(considers)g(\\)p Fu(op)p Fw(")g(to)h(b)q(e)g(purely)e(syn)o(tactic,)g(and)i
(it)f(do)q(es)h(not)g(o)q(ccur)188 436 y(in)i(an)o(y)g(of)h(the)f(seman)o
(tic)e(rules.)139 533 y Fp(\017)24 b Fw(The)15 b(abstract)h(syn)o(tax)f
(datat)o(yp)q(e)h(con)o(tains)f(declaration)g(constructors)h
Fu(INFIX)n Fw(,)f Fu(INFIXR)e Fw(and)188 593 y Fu(NONFIX)n
Fw(.)29 b(These)19 b(are)g(needed)f(for)h(the)g(in\014x-resolving)f(p)q
(ost-pass.)32 b(Again,)19 b(the)g(De\014nition)188 653 y(considers)e(these)e
(declarations)i(to)f(b)q(e)h(purely)e(syn)o(tactic.)139 750
y Fp(\017)24 b Fw(The)15 b(abstract)g(syn)o(tax)f(datat)o(yp)q(e)g(con)o
(tains)g(the)g(expression)g(constructor)h Fu(UNRES)p 1724 750
16 2 v 17 w(INFIXexp)m Fw(,)188 810 y(the)c(pattern)g(constructor)g
Fu(UNRES)p 820 810 V 17 w(INFIXpat)m Fw(,)g(and)h(the)e(declaration)h
(constructor)g Fu(UNRES)p 1864 810 V 17 w(FUNdec)n Fw(.)188
871 y(These)16 b(are)g(generated)h(b)o(y)e(the)h(parser)g(but)h(eliminated)c
(b)o(y)i(the)h(parsing)h(p)q(ost-pass,)h(so)f(that)188 931
y(the)k(abstract)h(syn)o(tax)f(passed)g(to)h(the)e(elab)q(orator)i(and)g(the)
f(later)f(stages)i(of)f(the)g(Kit)f(will)188 991 y(nev)o(er)15
b(con)o(tain)h Fu(UNRES)f Fw(syn)o(tax.)66 1155 y Ft(3.5)83
b(Grammar)66 1264 y Fw(W)l(e)14 b(no)o(w)g(describ)q(e)g(the)f(grammar)g(of)h
(SML)g(used)g(b)o(y)g(the)f(Kit,)h(as)g(opp)q(osed)i(to)e(the)g(abstract)g
(syn)o(tax)66 1325 y(datat)o(yp)q(e.)36 b(The)21 b(t)o(w)o(o)g(do)g(not)h
(corresp)q(ond)g(directly;)f(for)g(example,)f(the)g(grammar)g(accepts)g(the)
66 1385 y(deriv)o(ed)g(forms,)h(although)h(there)e(are)h(no)g(constructs)h
(for)f(them)e(in)i(the)f(abstract)i(syn)o(tax.)35 b(The)66
1445 y(main)17 b(purp)q(ose)h(of)g(this)f(section)g(is)g(to)h(presen)o(t)f
(the)g(con)o(v)o(en)o(tions)f(adopted)j(in)e(the)g(grammar,)f(and)66
1505 y(to)h(describ)q(e)f(the)g(less)g(ob)o(vious)g(features)g(of)h(it.)66
1647 y Fr(3.5.1)70 b(T)-6 b(ok)n(ens)66 1739 y Fw(There)18
b(are)f(some)g(p)q(eculiarities)f(in)h(the)g(tok)o(ens)h(\(terminal)d(sym)o
(b)q(ols\))i(adopted)h(b)o(y)f(the)g(grammar.)66 1800 y(Firstly)l(,)g
(quali\014ed)f(iden)o(ti\014ers)g(are)i(recognised)f(as)i(individual)d
Fu(QUAL)p 1377 1800 V 17 w(ID)h Fw(tok)o(ens.)24 b(\(In)18
b(fact,)f(this)g(is)66 1860 y(not)i(p)q(eculiar)e(at)h(all,)f(and)h(is)g
(what)g(the)f(De\014nition)h(suggests,)h(but)e(other)h(ML)g(compilers,)d(sp)q
(ecif-)66 1920 y(ically)i(SML/NJ,)h(lex)f(quali\014ed)g(iden)o(ti\014ers)g
(as)i(a)f(series)g(of)g(tok)o(ens,)g(whic)o(h)f(is)h(illegal.\))25
b(Secondly)l(,)66 1980 y(the)18 b(grammar)e(distinguishes)h(b)q(et)o(w)o(een)
g(single)g(digits,)h(p)q(ositiv)o(e)f(in)o(tegers)g(of)h(t)o(w)o(o)f(or)h
(more)f(digits,)66 2040 y(and)i(negativ)o(e)e(\(signed\))h(in)o(tegers.)26
b(This)18 b(is)g(b)q(ecause)h(there)e(are)h(con)o(texts)g(in)f(whic)o(h)h
(single)f(digits)66 2101 y(are)e(required)e(\()p Fu(infix)f
Fw(and)j Fu(infixr)d Fw(declarations\),)j(and)f(in)g(whic)o(h)g(p)q(ositiv)o
(e)g(in)o(tegers)f(are)h(required)66 2161 y(\(record)i(lab)q(els\).)140
2221 y(The)j(treatmen)o(t)e(of)j(iden)o(ti\014ers)d(is)i(rather)h
(complicated.)27 b(The)20 b(syn)o(tax)f(of)g(SML)h(requires)e(un-)66
2281 y(quali\014ed)e(iden)o(ti\014ers)f(in)h(some)f(con)o(texts)h(\()p
Fu(infix)e Fw(declarations)i(and)h(record)f(lab)q(els,)g(for)g(example\))66
2341 y(while)21 b(allo)o(wing)g(quali\014ed)f(iden)o(ti\014ers)g(elsewhere.)
35 b(The)22 b(sym)o(b)q(ol)d(\\)p Fu(*)p Fw(")j(is)f(allo)o(w)o(ed)g(as)h(an)
f(iden)o(ti-)66 2402 y(\014er)f(except)f(in)g(t)o(yp)q(e)g(expressions,)i
(where)e(it)g(serv)o(es)g(a)i(sp)q(eci\014c)e(purp)q(ose.)33
b(In)19 b(other)h(w)o(ords,)h(\\)p Fu(*)p Fw(")66 2462 y(is)d(disallo)o(w)o
(ed)f(as)i(a)f(t)o(yp)q(e)g(constructor;)h(in)e(particular,)h(quali\014ed)f
(t)o(yp)q(e)h(constructors)h(di\013er)e(from)66 2522 y(other)g(quali\014ed)f
(iden)o(ti\014ers)f(in)h(that)h(they)f(cannot)h(end)f(in)h(\\)p
Fu(.*)o Fw(".)23 b(The)16 b(sym)o(b)q(ol)f(\\)p Fu(=)p Fw(")i(is)g(a)f
(reserv)o(ed)66 2582 y(w)o(ord)i(whic)o(h)f(is)h(required)e(to)i(serv)o(e)e
(as)j(an)f(iden)o(ti\014er,)e(except)g(in)h(con)o(texts)g(where)g(that)h(w)o
(ould)g(b)q(e)66 2642 y(am)o(biguous.)30 b(W)l(e)19 b(allo)o(w)f(quali\014ed)
h(use)g(of)g(\\)p Fu(=)p Fw(")h(in)e(all)h(con)o(texts.)29
b(In)19 b(addition,)g(w)o(e)g(syn)o(tactically)66 2703 y(allo)o(w)d
(rede\014nition)g(of)g(\\)p Fu(=)p Fw(",)h(since)e(our)i(in)o(terpreter)e
(builds)g(the)h(equalit)o(y)f(predicate)h(in)f(terms)g(of)i(a)66
2763 y(prede\014ned)f(p)q(erv)m(asiv)o(e)g(function.)21 b(This)c(facilit)o(y)
d(is)j(disabled)f(for)g(user)h(programs)f(in)g(the)g(seman)o(tic)66
2823 y(analysis)h(stage.)p eop
%%Page: 32 81
bop 66 50 a Fs(CHAPTER)17 b(3.)37 b(P)l(ARSING)1281 b Fw(32)66
195 y(the)18 b(t)o(yp)q(e)g(is)g(follo)o(w)o(ed)f(b)o(y)g(\\)p
Fu(as)p Fw(")h(then)g(the)g(original)g(atomic)f(pattern)h(m)o(ust)f(b)q(e)h
(an)h Fk(id)f Fw(\(optionally)66 255 y(preceeded)d(b)o(y)h(\\)p
Fu(op)p Fw("\),)g(otherwise)g(it)g(ma)o(y)e(b)q(e)j(an)o(y)f(atomic)f
(pattern.)140 315 y(This)g(problem)f(is)h(dealt)g(with)g(in)g(a)h(similar)d
(w)o(a)o(y)i(to)g(patterns)h(con)o(taining)f(in\014xes.)21
b(The)15 b(parser)66 376 y(accepts)h(a)h(sup)q(erset)g(of)f(SML)h(syn)o(tax,)
e(b)o(y)h(allo)o(wing)g(the)g(form)188 484 y Fk(p)n(at)g Fw(\()p
Fu(as)g Fk(p)n(at)o Fw(\))437 466 y Fm(?)66 593 y Fw(This)h(accepts)188
702 y Fk(p)n(at)26 b Fu(:)f Fk(ty)66 811 y Fw(in)16 b(isolation,)g(and)h
(will)e(also)i(pass)188 920 y Fk(p)n(at)26 b Fu(as)e Fk(p)n(at)66
1028 y Fw(through)18 b(to)e(b)q(e)h(transformed)e(in)o(to)188
1137 y Fk(id)26 b Fu(:)f Fk(ty)h Fu(as)e Fk(p)n(at)66 1246
y Fw(or)16 b(rejected.)j(Unlik)o(e)13 b(in\014x)h(analysis,)h(this)g(can)g(b)
q(e)h(done)f(during)g(the)g(parsing)g(stage,)h(in)e(the)h(action)66
1306 y(for)i(the)f(appropriate)h Fk(p)n(at)f Fw(rule.)140 1366
y(The)g(second)g(am)o(biguit)o(y)e(in)o(v)o(olv)o(es)g(\\)p
Fu(fun)p Fw(")i(declarations.)22 b(Consider)16 b(the)g(phrase)188
1475 y Fu(fun)25 b(\()p Fk(p)n(at)381 1482 y Fm(1)417 1475
y Fk(in\014x)508 1482 y Fm(1)546 1475 y Fk(p)n(at)610 1482
y Fm(2)630 1475 y Fu(\))g Fk(in\014x)772 1482 y Fm(2)810 1475
y Fk(p)n(at)874 1482 y Fm(3)919 1475 y Fu(=)g Fw(.)8 b(.)g(.)66
1584 y(The)18 b(phrase)g Fu(\()p Fk(p)n(at)414 1591 y Fm(1)450
1584 y Fk(in\014x)541 1591 y Fm(1)580 1584 y Fk(p)n(at)644
1591 y Fm(2)663 1584 y Fu(\))f Fw(has)h(t)o(w)o(o)g(in)o(terpretations.)24
b(If)17 b(it)g(is)g(follo)o(w)o(ed)g(b)o(y)g(an)h Fk(in\014x)1809
1591 y Fm(2)1830 1584 y Fw(,)f(then)66 1644 y(it)i(is)g(the)g(\014rst)g
(argumen)o(t)f(of)i(the)f(de\014nition)f(of)i(a)f(function)g(called)f
Fk(in\014x)1474 1651 y Fm(2)1495 1644 y Fw(.)30 b(If)19 b(not,)h(the)e
(function)66 1704 y(b)q(eing)f(de\014ned)f(is)g Fk(in\014x)506
1711 y Fm(1)527 1704 y Fw(.)140 1764 y Fu(Fun)j Fw(declarations)i(are)g
(dealt)f(with)h(using)g(a)g(grammar)e(sup)q(erset)i(whic)o(h)f(is)h(resolv)o
(ed)e(\(or)i(re-)66 1825 y(jected\))e(in)h(a)g(p)q(ost-pass,)i(similar)c(to)i
(the)f(tec)o(hnique)f(used)i(for)g(in\014x)f(patterns)h(and)h(expressions.)66
1885 y(One)15 b(reason)h(for)f(this)f(is)h(that)g Fu(fun)f
Fw(declarations)h(need)f(to)h(b)q(e)g(analysed)g(in)g(the)f(con)o(text)g(of)h
(an)h(in\014x)66 1945 y(en)o(vironmen)o(t)e(an)o(yw)o(a)o(y)l(.)21
b(The)16 b(Kit)g(grammar)e(accepts)i(function)g(bindings)h(of)f(the)g(form)
188 2054 y Fu(fun)25 b Fk(atp)n(at)395 2036 y Fm(+)451 2054
y Fw(\()p Fu(:)g Fk(ty)p Fw(\))580 2036 y Fm(?)624 2054 y Fu(=)g
Fk(exp)66 2163 y Fw(whic)o(h)19 b(result)g(in)g Fu(UNRES)p
541 2163 16 2 v 17 w(FUNdec)e Fw(no)q(des)j(in)f(the)g(abstract)i(syn)o(tax.)
30 b(These)20 b(are)f(replaced)g(b)o(y)f(the)66 2223 y(equiv)m(alen)o(t)d
Fu(val)o Fw(-bindings)i(in)f(the)g(p)q(ost-pass.)66 2366 y
Fr(3.4.3)70 b(Di\013erences)18 b(Bet)n(w)n(een)h(the)h(SML)h(Syn)n(tax)g
(De\014nition)e(and)i(the)276 2441 y(Abstract)i(Syn)n(tax)66
2534 y Fw(T)l(o)18 b(summarise,)13 b(the)k(main)e(di\013erences)h(b)q(et)o(w)
o(een)g(the)g(SML)h(syn)o(tax)g(describ)q(ed)f(in)g(the)h(De\014nition)66
2594 y(\(\014gure)g(19\),)f(and)h(the)f(abstract)h(syn)o(tax)f(of)h(the)f
(Kit,)f(are:)139 2702 y Fp(\017)24 b Fw(Iden)o(ti\014ers)16
b(are)g(often)h(just)g(of)g(t)o(yp)q(e)f Fu(id)g Fw(or)h Fu(longid)e
Fw(rather)i(than)g Fu(var)o Fw(,)f Fu(longcon)n Fw(,)g(etc.)22
b(This)188 2763 y(is)c(b)q(ecause)g(the)g(parser)g(cannot)g(in)g(general)f
(resolv)o(e)g(iden)o(ti\014er)f(status.)27 b(Where)17 b(status)i(can)188
2823 y(b)q(e)e(resolv)o(ed)e(\(for)h(example,)e(in)i Fu(datatype)d
Fw(declarations\),)j(it)g(is)g(done)g(so.)p eop
%%Page: 31 82
bop 66 50 a Fs(CHAPTER)17 b(3.)37 b(P)l(ARSING)1281 b Fw(31)66
195 y(forms)18 b(of)h(the)f(Core,)h(as)g(giv)o(en)f(in)g(App)q(endix)g(A,)f
(\014gures)i(15)g(and)g(16.)29 b(W)l(e)18 b(consider)g(the)h(deriv)o(ed)66
255 y(forms)11 b(\\)p Fu(\(\))p Fw(",)h(\\)p Fu(#)p Fk(lab)p
Fw(")h(and)f Fu([)p Fk(exp)653 262 y Fm(1)673 255 y Fu(,)26
b Fw(.)8 b(.)g(.)33 b Fk(exp)885 262 y Fg(n)909 255 y Fu(])11
b Fw(to)h(b)q(e)g(atomic)e(expressions,)i(ev)o(en)f(if)g(their)g(equiv)m
(alen)o(t)66 315 y(forms)19 b(are)h(not.)32 b(\(Suc)o(h)19
b(equiv)m(alen)o(t)g(forms)f(are)i(considered)f(paren)o(thesised.\))31
b(This)20 b(agrees)g(with)66 376 y(the)c(full)g(grammar)e(in)i(\014gure)h
(19.)140 436 y(The)h(second)g(am)o(biguit)o(y)e(in)o(v)o(olv)o(es)g
Fu(val)24 b(rec)17 b Fw(declarations.)27 b(The)18 b(De\014nition)f(states)i
(that)f(the)66 496 y(righ)o(t)h(hand)h(side)f(of)g(a)h Fu(val)k(rec)18
b Fw(m)o(ust)g(b)q(e)i(of)f(the)g(form)f(\\)p Fu(fn)h Fk(match)p
Fw(",)h(p)q(ossibly)f(constrained)h(b)o(y)66 556 y(one)c(or)f(more)e(t)o(yp)q
(e)i(expressions)g(\(Section)f(2.9,)h(page)h(9\).)21 b(This)15
b(is)g(inconsisten)o(t:)k(it)c(is)g(not)g(p)q(ossible)66 616
y(to)g(constrain)g(an)g(en)o(tire)e Fu(fn)h Fw(expression)g(without)h(brac)o
(k)o(etting)e(it.)20 b(W)l(e)14 b(ha)o(v)o(e)g(c)o(hosen)g(to)h(allo)o(w)f
(bare)66 677 y Fu(fn)19 b Fw(expressions)g(and)h(constrained)g
Fu(fn)e Fw(expressions)i(whic)o(h)e(are)i(con)o(tained)f(within)g(a)g(single)
g(pair)66 737 y(of)f(brac)o(k)o(ets;)e(this)h(seems)e(to)j(b)q(e)f(the)g
(minim)o(al)e(syn)o(tax)h(whic)o(h)h(includes)f(the)h(cases)g(describ)q(ed)g
(and)66 797 y(whic)o(h)f(also)h(mak)o(es)d(sense.)66 941 y
Fr(3.4.1)70 b(In\014xes)24 b(and)f(the)g(P)n(ost-P)n(ass)66
1034 y Fw(Because)13 b(the)h(grammar)e(presen)o(ted)h(to)h(ML-Y)l(acc)g(is)f
(\014xed,)h(it)f(cannot)h(deal)g(with)f(SML's)h(facilit)o(y)e(to)66
1094 y(c)o(hange)i(the)g(in\014x)f(status)i(or)f(precedence)e(of)i(arbitrary)
g(iden)o(ti\014ers,)e(esp)q(ecially)g(since)h(suc)o(h)h(c)o(hanges)66
1154 y(are)25 b(sub)s(ject)e(to)h(scoping)h(rules.)44 b(The)24
b(situation)g(is)g(complicated)e(b)o(y)h(the)h(con)o(text-dep)q(enden)o(t)66
1214 y(meaning)16 b(of)i(the)e(sym)o(b)q(ols)g(\\)p Fu(*)p
Fw(")i(and)f(\\)p Fu(=)p Fw(",)g(b)q(oth)h(of)f(whic)o(h)g(can)g(ha)o(v)o(e)f
(their)g(in\014x)h(status)h(c)o(hanged.)66 1275 y(Our)g(only)g(c)o(hoice)f
(is)g(to)i(resolv)o(e)d(in\014xes)i(after)g(they)f(ha)o(v)o(e)g(b)q(een)h
(parsed.)26 b(Rather)18 b(than)h(main)o(tain)66 1335 y(an)e(in\014x)f(en)o
(vironmen)o(t)e(during)i(the)h(parsing)g(pro)q(cess,)f(and)h(tac)o(kle)f
(in\014xes)f(in)h(the)h(rule)e(actions,)i(it)66 1395 y(is)f(easiest)g(to)h
(resolv)o(e)e(in\014xes)h(after)g(the)g(top-lev)o(el)f(parse)h(has)h
(completed.)140 1455 y(The)f(sup)q(erset)g(language)i(accepted)d(b)o(y)h(the)
g(main)f(parser)h(con)o(tains)h(the)f(rules)1632 1437 y Fm(2)188
1569 y Fk(Pat)h Fw(::=)e Fk(A)o(tPat)485 1551 y Fm(+)188 1629
y Fk(Exp)i Fw(::=)e Fk(A)o(tExp)497 1611 y Fm(+)66 1744 y Fw(so)21
b(that)f(a)g(pattern)g(can)g(comprise)d(a)k(sequence)d(of)i(one)g(or)g(more)e
(atomic)h(patterns,)h(and)g(an)h(ex-)66 1804 y(pression)j(can)g(b)q(e)g(one)f
(or)h(more)f(atomic)f(expressions.)43 b(The)23 b(p)q(ost-pass)j(either)d
(resolv)o(es)g(these)66 1864 y(phrases)16 b(\()p Fu(UNRES)p
391 1864 16 2 v 16 w(INFIXexp)m Fw(,)f Fu(UNRES)p 771 1864
V 17 w(INFIXpat)m Fw(\),)f(or)h(rep)q(orts)h(a)f(syn)o(tax)f(error)h(if)f
(the)h(actual)f(input)66 1924 y(is)g(not)h(legal)e(SML.)h(The)g(p)q(ost-pass)
j(remo)o(v)o(es)11 b(all)j Fu(UNRES)p 1131 1924 V 16 w(INFIXexp)d
Fw(and)k Fu(UNRES)p 1589 1924 V 17 w(INFIXpat)c Fw(no)q(des,)66
1984 y(replacing)16 b(them)f(with)h(\\prop)q(er")h(expressions)g(con)o
(taining)f(the)g(op)q(erators.)66 2129 y Fr(3.4.2)70 b(Lo)r(ok)l(ahead)26
b(am)n(biguities)66 2221 y Fw(The)17 b(am)o(biguities)d(are)j(as)g(follo)o
(ws.)k(Firstly)l(,)15 b(consider)h(the)g(follo)o(wing)h(t)o(w)o(o)f
(\(legal\))g(phrases)h(\(whic)o(h)66 2281 y(are)g(b)q(oth)g(patterns\):)188
2396 y Fk(id)26 b Fu(:)f Fk(ty)h Fu(as)e Fk(p)n(at)188 2456
y(atp)n(at)i Fu(:)f Fk(ty)66 2570 y Fw(If)15 b(the)h(parser)f(encoun)o(ters)h
(an)g(atomic)e(pattern)h(follo)o(w)o(ed)g(b)o(y)g(\\)p Fu(:)p
Fw(",)g(it)g(is)h(not)g(p)q(ossible)f(to)h(ascertain)66 2630
y(whether)g(the)f(phrase)i(is)e(legal)g(without)h(parsing)h(the)e(\\)p
Fu(:)p Fw(")i(and)f(the)f(follo)o(wing)h(t)o(yp)q(e)f(expression.)21
b(If)p 66 2674 756 2 v 123 2704 a Fi(2)141 2719 y Fh(W)m(e)14
b(are)i(using)e(a)g(ric)o(her)i(metagramm)o(ar)11 b(than)k(that)g(in)f(the)h
(De\014nition)f(for)h(conciseness)i(in)d(some)g(of)g(the)h(later)66
2769 y(examples.)i(Sup)q(erscripts)f Fb(\003)p Fh(,)e(+)g(and)f(?)g(denote)i
(zero)g(or)f(more,)e(one)i(or)g(more,)e(and)i(optional)e(phrases,)j(resp)q
(ectiv)o(ely)m(.)p eop
%%Page: 30 83
bop 66 50 a Fs(CHAPTER)17 b(3.)37 b(P)l(ARSING)1281 b Fw(30)140
195 y Fu(SourceRea)o(der)14 b Fw(is)j(the)g(t)o(yp)q(e)g(of)h(input)f
(streams.)24 b(A)17 b(source)h(reader)f(is)g(comp)q(osed)h(of)f(a)h(lexing)66
255 y(function)h(to)f(pro)q(duce)h(the)f(source)g(text)g(and)h(a)g(function)f
(mapping)f(absolute)i(c)o(haracter)f(n)o(um)o(b)q(er)66 315
y(to)f(p)q(osition.)22 b(Source)16 b(readers)h(are)f(built)g(using)g
Fu(lexFromFile)d Fw(\(to)j(read)h(source)f(text)g(from)f(a)i(\014le\))66
376 y(or)g Fu(lexFromStr)o(ing)c Fw(\(to)j(read)g(from)g(a)g(string\).)140
436 y(The)h(generated)h(lexer)e(has)j(access)e(to)h(the)g(absolute)g(c)o
(haracter)f(p)q(osition)h(of)g(eac)o(h)f(tok)o(en)g(as)i(it)66
496 y(is)f(recognised.)24 b(F)l(rom)17 b(these,)g(a)g(p)q(osition)i(ob)s
(ject)e(\(of)g(t)o(yp)q(e)g Fu(pos)o Fw(\))h(can)f(b)q(e)h(built)f(for)g(the)
h(start)g(and)66 556 y(end)f(of)g(eac)o(h)f(tok)o(en.)21 b(This)c(is)f(the)h
(link)m(age)f(required)f(b)q(et)o(w)o(een)h(the)g(ML-Lex-generated)h(lexer)f
(and)66 616 y(ML-Y)l(acc-generated)e(parser,)f(and)h(results)f(in)g(abstract)
h(syn)o(tax)f(whose)h(tok)o(ens)f(con)o(tain)h(p)q(ositional)66
677 y(information.)28 b(This)18 b(information)g(is)g(propagated)i(in)o(to)f
(the)f(info)g(\014elds)h(of)g(the)f(in)o(terior)f(no)q(des)j(of)66
737 y(the)13 b(abstract)h(syn)o(tax)f(in)f(the)h(actions)h(of)f(the)g
(grammar)e(\(Section)h(3.5\).)21 b(Since)12 b(a)h Fu(pos)f
Fw(ob)s(ject)h(can)g(b)q(e)66 797 y(transformed)18 b(in)o(to)g(its)g(\014le)f
(name,)g(line)g(n)o(um)o(b)q(er,)f(column)h(n)o(um)o(b)q(er,)f(and)j
(line-prin)o(ting)e(function,)66 857 y(the)c(original)g(source)h(p)q(osition)
g(and)f(surrounding)i(lines)d(of)h(text)g(can)g(b)q(e)h(reconstituted)e(and)i
(prin)o(ted)66 917 y(\(using)j Fu(printPosit)o(ion)c Fw(and)j
Fu(displaySour)o(ce)m Fw(\))g(from)f(an)o(y)h(part)h(of)f(the)g(abstract)h
(syn)o(tax.)140 978 y(The)f(purp)q(ose)g(of)h(the)e(mo)q(dule)g
Fu(LexBasics)e Fw(is)j(to)g(pro)o(vide)f(source)h(readers)g(and)h(the)e
Fu(pos)g Fw(t)o(yp)q(e.)66 1038 y Fu(LexUtils)e Fw(pro)o(vides)j(op)q
(erations)h(on)f(the)g(lexer)f(argumen)o(t)g(\(t)o(yp)q(e)g
Fu(LexArgumen)o(t)m Fw(,)h(aliased)f(to)i(t)o(yp)q(e)66 1098
y Fu(arg)c Fw(in)h(order)g(to)g(in)o(terface)f(to)h(ML-Lex)g(and)h(ML-Y)l
(acc\),)e(and)i(general)e(functions)h(to)h(build)e(tok)o(ens.)66
1158 y(The)23 b(lexer)e(argumen)o(t)g(con)o(tains)h(the)g(curren)o(t)g
(source)g(reader,)h(together)g(with)f(a)h(record)f(of)g(the)66
1218 y(curren)o(t)16 b(commen)o(t)d(lev)o(el)h(and)j(accum)o(ulated)d(c)o
(haracters)i(for)g(string)h(literals.)140 1279 y(Source)i(readers)g(are)g
(imp)q(ortan)o(t)f(in)h(the)g(implem)o(en)o(tation)d(of)k(the)f
Fu(use)f Fw(function)h(for)g(reading)66 1339 y(and)13 b(executing)e(SML)h
(source)g(from)f(\014les.)20 b(Eac)o(h)12 b(in)o(v)o(o)q(cation)f(of)h
Fu(use)f Fw(causes)i(a)f(new)g(source)g(reader)g(to)66 1399
y(b)q(e)i(created)e(for)i(the)e(used)i(source)f(\014le.)19
b(If)13 b(an)g(error)g(is)g(detected)f(in)h(the)g(\014le,)f(then)h(the)g
(source)g(reader)66 1459 y(can)i(b)q(e)f(discarded.)20 b(The)14
b(implem)o(en)o(tation)d(and)k(treatmen)o(t)d(of)i Fu(use)f
Fw(is)h(in)g(fact)g(quite)f(complex,)f(and)66 1519 y(describ)q(ed)k(in)g
(detail)g(in)f(Section)h(7.7.)66 1686 y Ft(3.4)83 b(P)n(arsing)66
1795 y Fw(Syn)o(tactically)l(,)18 b(SML)h(is)g(a)h(nigh)o(tmare.)28
b(P)o(arts)20 b(of)f(the)g(syn)o(tax)g(require)f(inde\014nite)g(lo)q(ok)m
(ahead,)j(so)66 1855 y(SML)12 b(is)f(certainly)f(not)i(LALR/1.)21
b(The)11 b(meaning)g(of)g(the)g(sym)o(b)q(ols)g(\\)p Fu(=)p
Fw(")h(and)g(\\)p Fu(*)p Fw(")f(c)o(hanges)h(according)66 1916
y(to)k(con)o(text,)e(and)h(the)g(requiremen)o(t)c(of)16 b(user-de\014nable)f
(in\014xes)f(\(whic)o(h)g(can)h(include)f(\\)p Fu(=)p Fw(")h(and)h(\\)p
Fu(*)p Fw("\))66 1976 y(mak)o(es)21 b(the)i(situation)f(ev)o(en)g(more)f
(complex.)37 b(The)23 b(grammar)e(describ)q(ed)h(in)g(the)g(De\014nition)g
(is)66 2036 y(am)o(biguous)f(in)f(places)g(\(sp)q(eci\014cally)l(,)g(in)g
(the)h(treatmen)o(t)d(of)j(\\)p Fu(local)o Fw("\),)g(and)h(the)e(description)
g(of)66 2096 y(some)15 b(of)h(the)f(deriv)o(ed)f(forms)g(is)i(inconsisten)o
(t)e(with)i(descriptions)f(of)h(the)f(syn)o(tax)g(elsewhere)f(in)h(the)66
2156 y(De\014nition,)h(as)h(describ)q(ed)e(b)q(elo)o(w.)140
2217 y(Some)i(of)i(these)f(am)o(biguities)f(are)h(dealt)h(with)f(the)h(the)f
(grammar)f(itself,)h(b)o(y)g(using)h(new)f(non-)66 2277 y(terminals)13
b(to)i(imp)q(ose)f(precedence)f(in)h(the)h(usual)g(w)o(a)o(y)l(.)20
b(W)l(e)14 b(detail)g(these)h(cases)f(in)h(our)g(description)66
2337 y(of)23 b(the)g(grammar)e(in)h(Section)g(3.5.)41 b(The)22
b(other)h(am)o(biguities)d(are)j(addressed)g(in)f(the)h(follo)o(wing)66
2397 y(sub-sections.)140 2457 y(Because)c(of)h(the)g(ab)q(o)o(v)o(e)f
(problems)g(\(and)h(others\),)h(it)e(is)h(imp)q(ossible)e(to)j(parse)f(SML)g
(directly)66 2518 y(without)c(using)g(a)g(sp)q(ecially)e(constructed)h
(parser)h(whic)o(h)f(can)g(carry)g(a)h(complex)d(left)i(state)g(encom-)66
2578 y(passing)i(the)f(in\014x)f(en)o(vironmen)o(t)e(and)k(so)f(on.)22
b(Because)15 b(w)o(e)h(c)o(ho)q(ose)g(to)g(use)g(ML-Y)l(acc)g(for)g(parsing,)
66 2638 y(w)o(e)f(are)h(forced)f(to)g(adopt)h(an)g(LALR/1)h(grammar)c(whic)o
(h)i(accepts)g(a)h(clean)e(sup)q(erset)i(of)f(SML,)h(and)66
2698 y(then)h(remo)o(v)o(e)c(illegal)i(constructions)i(either)e(in)h(the)g
(rule)f(actions)i(or)g(in)e(a)i(separate)g(p)q(ost-pass.)140
2758 y(In)d(passing,)h(w)o(e)f(should)h(p)q(oin)o(t)g(out)g(a)f(couple)g(of)h
(inconsistencies)e(in)h(the)h(description)e(of)i(SML's)66 2818
y(syn)o(tax)k(in)f(the)h(De\014nition.)28 b(The)19 b(\014rst)g(is)f(minor,)g
(and)h(in)o(v)o(olv)o(es)e(the)h(do)q(cumen)o(tation)g(of)h(deriv)o(ed)p
eop
%%Page: 29 84
bop 66 50 a Fs(CHAPTER)17 b(3.)37 b(P)l(ARSING)1281 b Fw(29)140
195 y(Corresp)q(onding)15 b(to)f(the)g(t)o(w)o(o)g(lev)o(els)e(of)i(abstract)
h(syn)o(tax)f(in)f(the)h(Kit,)f(there)h(are)g(t)o(w)o(o)g(signatures)66
255 y(and)24 b(t)o(w)o(o)f(functors.)43 b Fu(DEC)p 577 255
16 2 v 17 w(GRAMMAR)21 b Fw(and)j Fu(DecGrammar)19 b Fw(pro)o(vide)k(the)g
(abstract)h(syn)o(tax)f(for)g(the)66 315 y(Core,)f(and)e Fu(TOPDEC)p
459 315 V 17 w(GRAMMAR)d Fw(and)k Fu(TopdecGramm)o(ar)c Fw(the)j(abstract)h
(syn)o(tax)f(for)h(Mo)q(dules.)33 b(The)66 376 y(signatures)23
b(con)o(tain)e(the)g(full)g(datat)o(yp)q(e)h(sp)q(eci\014cations)g(\(since)e
(the)i(in)o(terfaces)e(to)i(the)f(abstract)66 436 y(syn)o(tax)d(mo)q(dules)f
(are)h(essen)o(tially)e(the)i(datat)o(yp)q(es)g(themselv)o(es\).)23
b Fu(DecGrammar)14 b Fw(is)k(parameterised)66 496 y(on)g(the)g(t)o(yp)q(es)f
Fu(id)f Fw(and)i Fu(longid)e Fw(as)i(describ)q(ed)f(ab)q(o)o(v)o(e,)g(on)h(a)
g(t)o(yp)q(e)f Fu(GrammarIn)o(fo)d Fw(whic)o(h)j(pro)o(vides)66
556 y(the)c Fk(info)g Fw(no)q(des)g(on)h(the)e(syn)o(tax)h(tree,)f(and)h(on)h
(structures)e(whic)o(h)g(pro)o(vide)g(the)h(lea)o(v)o(es)e(of)i(the)f(syn)o
(tax)66 616 y(tree)g(\()p Fu(LAB)g Fw(for)h(record)f(lab)q(els,)h
Fu(SCON)e Fw(for)i(sp)q(ecial)g(constan)o(ts,)g Fu(CON)f Fw(for)h(data)g
(constructors,)h Fu(TYVAR)d Fw(for)66 677 y(t)o(yp)q(e)17 b(v)m(ariables,)h
Fu(TYCON)d Fw(for)j(t)o(yp)q(e)f(constructors,)h Fu(EXCON)e
Fw(for)i(exception)e(constructors,)i Fu(STRID)e Fw(for)66 737
y(structure)g(iden)o(ti\014ers\).)517 719 y Fm(1)556 737 y
Fu(TopdecGramm)o(ar)c Fw(is)k(parameterised)e(on)j(a)f(similar)e(set)i(of)g
(t)o(yp)q(es)f(\()p Fu(strid)o Fw(,)66 797 y Fu(longstrid)m
Fw(,)k Fu(funid)n Fw(,)g Fu(sigid)n Fw(,)g Fu(id)o Fw(,)g Fu(tyvar)n
Fw(,)g Fu(tycon)o Fw(,)f Fu(longtycon)m Fw(,)h Fu(con)o Fw(,)g
Fu(excon)n Fw(,)g Fu(GrammarInf)o(o)m Fw(\))g(as)66 857 y(w)o(ell)c(as)i(t)o
(w)o(o)f(syn)o(tax)g(t)o(yp)q(es)g(from)g(the)g(Core)g(language)h(\()p
Fu(dec)e Fw(and)i Fu(ty)p Fw(\).)140 917 y(The)23 b(functors)h(are)g(applied)
f(in)h(t)o(w)o(o)f(places)h(in)f(the)g(linking)g(stage.)44
b(In)24 b(the)f(\014rst)h(\(functor)66 978 y Fu(TopdecParsi)o(ng)m
Fw(\),)19 b(the)g(unresolv)o(ed)g(abstract)g(syn)o(tax)g(is)g(built)g(along)h
(with)f(the)g(parser)h(and)f(the)66 1038 y(prett)o(y-prin)o(ters)d(for)h(the)
g(syn)o(tax.)24 b(In)16 b(the)h(second)h(\()p Fu(Elaborati)o(on)m
Fw(\))f(the)f(abstract)i(syn)o(tax)f(is)g(built)66 1098 y(in)i(terms)e(of)i
(the)g(resolv)o(ed)f(iden)o(ti\014ers,)f(together)i(with)g(the)f(elab)q
(orator)i(and)g(prett)o(y-prin)o(ters)d(for)66 1158 y(the)f(resolv)o(ed)g
(syn)o(tax.)66 1325 y Ft(3.3)83 b(Lexing)66 1434 y Fw(The)13
b(lexer)e(is)i(built)e(using)i(ML-Lex.)21 b(The)12 b(resulting)g(functor)h
(is)f(parameterised)f(on)i(a)g(tok)o(en)f(sp)q(eci\014-)66
1494 y(cation)j(pro)q(duced)g(b)o(y)f(ML-Y)l(acc,)g(and)h(a)g(couple)f(of)h
(utilit)o(y)d(functors)j(\()p Fu(LexBasics)c Fw(and)k Fu(LexUtils)m
Fw(\))66 1554 y(describ)q(ed)j(b)q(elo)o(w.)26 b(The)18 b(lexical)e(sp)q
(eci\014cation)i(is)g(fairly)f(straigh)o(tforw)o(ard.)27 b(The)18
b(lexer)e(carries)i(an)66 1615 y(abstract)h(argumen)o(t)d(\(of)i(t)o(yp)q(e)e
Fu(LexUtils.Le)o(xAr)o(gum)o(en)o(t)m Fw(\))h(whic)o(h)g(is)g(used)h(to)g
(accum)o(ulate)d(string)66 1675 y(constan)o(ts)k(and)f(to)g(k)o(eep)e(trac)o
(k)h(of)h(commen)n(t)d(depth.)25 b(Commen)o(ts)15 b(and)j(strings)g(are)f
(consumed)g(in)66 1735 y(separate)g(lexing)e(states)i(\()p
Fu(C)f Fw(and)h Fu(S)o Fw(\).)140 1795 y(The)e(lexing)f(sp)q(eci\014cation)h
(do)q(es)h(not)g(con)o(tain)f(k)o(eyw)o(ords,)f(since)h(these)f(w)o(ould)i
(add)g(complexit)n(y)66 1855 y(to)j(the)f(sp)q(eci\014cation)g(and)h(w)o
(ould)f(result)g(in)g(large)g(lexing)g(tables.)27 b(Instead,)18
b(the)g(lexer)f(generates)66 1916 y(generic)f(iden)o(ti\014ers)f(whic)o(h)g
(are)h(translated)h(in)o(to)f(k)o(eyw)o(ords)g(in)f(mo)q(dule)g
Fu(LexUtils)n Fw(.)140 1976 y(There)22 b(is)h(some)f(complexit)o(y)e(in)i
(the)h(handling)g(of)h(the)e(source)h(c)o(haracter)g(stream,)g(for)g(t)o(w)o
(o)66 2036 y(reasons.)36 b(Firstly)l(,)20 b(the)h(lexing)e(sp)q
(eci\014cation)i(needs)f(to)h(pro)o(vide)f(a)h(t)o(yp)q(e)f
Fu(pos)g Fw(required)g(b)o(y)g(ML-)66 2096 y(Lex)c(and)g(ML-Y)l(acc)f(so)i
(that)f(the)f(generated)g(lexer)g(and)h(parser)g(\014t)f(together,)h(with)f
(the)h(p)q(ositional)66 2156 y(information)i(of)i(the)e(tok)o(ens)h
(\014nding)g(its)g(w)o(a)o(y)f(in)o(to)h(the)g(abstract)g(syn)o(tax.)29
b(Secondly)l(,)19 b(these)f Fu(pos)66 2217 y Fw(ob)s(jects)h(ha)o(v)o(e)g(to)
h(b)q(e)f(con)o(v)o(erted)f(bac)o(k)h(in)o(to)g(v)m(alues)g(suitable)g(for)h
(prin)o(ting,)f(including)f(the)h(input)66 2277 y(\014le)c(name,)f(line)g
(and)h(column)f(n)o(um)o(b)q(er,)f(and)j(the)f(actual)g(source)g(text.)21
b(This)15 b(is)g(all)f(done)i(using)f(the)66 2337 y(abstract)i(stream)f(pac)o
(k)m(age)g(pro)o(vided)g(b)o(y)f Fu(LexBasics)m Fw(.)140 2397
y(Firstly)l(,)h(w)o(e)i(consider)f(the)h(t)o(yp)q(e)g(of)g(p)q(ositions,)h
Fu(pos)o Fw(.)26 b(A)17 b(p)q(osition)i(is)f(either)f Fu(DUMMY)f
Fw(\(a)i(mark)o(er)66 2457 y(used)i(for)f(end-of-\014le\),)h(or)f(is)g(a)h
(susp)q(ension)g(con)o(taining)f(a)h(function)e(whic)o(h)h(returns)g(the)g
(curren)o(t)66 2518 y(\014le)d(name,)e(line,)g(column)h(and)h(a)g(function)g
(mapping)f(line)g(n)o(um)o(b)q(ers)f(to)j(lines)e(of)h(source)g(text.)k(The)
66 2578 y(susp)q(ension)13 b(is)f(for)g(e\016ciency;)f(the)g(o)o(v)o(erhead)g
(of)h(p)q(osition)h(calculation)e(is)h(incurred)e(when)i(a)h(p)q(osition)66
2638 y(is)j(prin)o(ted,)f(rather)i(than)g(for)f(eac)o(h)g(tok)o(en.)p
66 2682 756 2 v 123 2712 a Fi(1)141 2727 y Ff(DecGrammar)g
Fh(do)q(es)j(not)f(actually)f(need)i(to)f(tak)o(e)g(all)f(these)j(as)e
(structure)i(argumen)o(ts;)f(man)o(y)d(could)i(just)h(b)q(e)66
2777 y(t)o(yp)q(es.)p eop
%%Page: 28 85
bop 66 50 a Fs(CHAPTER)17 b(3.)37 b(P)l(ARSING)1281 b Fw(28)66
203 y Ft(3.2)83 b(The)28 b(Abstract)f(Syn)n(tax)66 313 y Fw(The)19
b(abstract)h(syn)o(tax)f(in)g(the)g(Kit)f(is)h(split)g(in)o(to)f(t)o(w)o(o)h
(lev)o(els:)25 b(the)19 b(abstract)h(syn)o(tax)f(of)g(the)g(Core)66
373 y(and)f(that)g(of)g(the)f(Mo)q(dules.)25 b(This)17 b(is)g(the)g(same)g
(division)f(as)i(found)g(in)f(the)g(De\014nition,)g(and)h(with)66
433 y(the)c(same)g(pro)o(visos:)20 b(quali\014ed)14 b(iden)o(ti\014ers)f(and)
h Fu(open)f Fw(declarations)i(are)f(part)h(of)f(the)g(Core)h(syn)o(tax.)140
493 y(The)e(Core)h(abstract)g(syn)o(tax)f(pro)o(vides)g(the)h(language)g
(phrases)g(up)g(to)g(the)f(lev)o(el)e(of)j(declarations)66
554 y(\()p Fk(de)n(c)q Fw(\),)i(and)g(the)h(Mo)q(dules)f(abstract)h(syn)o
(tax)f(pro)o(vides)g(the)g(phrases)h(up)g(to)f(top-lev)o(el)f(declarations)66
614 y(\()p Fk(top)n(de)n(c)s Fw(\).)28 b(There)19 b(is)f(no)h(t)o(yp)q(e)g
(represen)o(ting)e(the)i(phrase)g(class)g Fk(pr)n(o)n(gr)n(am)q
Fw(;)g(instead,)g(the)g(top-lev)o(el)66 674 y(lo)q(op)i(of)f(the)g(in)o
(terpreter)e(is)h(resp)q(onsible)h(for)g(parsing)g(and)h(ev)m(aluating)f(a)g
(sequence)f(of)h(top-lev)o(el)66 734 y(declarations.)140 794
y(The)14 b(Core)g(and)g(Mo)q(dules)g(abstract)h(syn)o(tax)f(are)g(eac)o(h)f
(a)h(set)g(of)g(m)o(utually)e(recursiv)o(e)g(datat)o(yp)q(es,)66
855 y(parameterised)k(on)h(a)g(n)o(um)o(b)q(er)e(of)i(more)f(primitiv)n(e)e
(t)o(yp)q(es)i(represen)o(ting)g(constan)o(ts,)i(iden)o(ti\014ers)d(of)66
915 y(v)m(arious)i(kinds,)f(and)h(in)f(general)g(the)g(lea)o(v)o(es)f(of)i
(the)f(syn)o(tax.)22 b(In)16 b(addition,)g(the)g(Mo)q(dules)g(abstract)66
975 y(syn)o(tax)g(is)h(parameterised)d(on)j(the)f(datat)o(yp)q(e)g(of)h
(declarations,)f Fk(de)n(c)p Fw(.)140 1035 y(An)k(imp)q(ortan)o(t)f(asp)q
(ect)i(of)g(an)o(y)f(SML)h(implem)o(en)o(tation)c(is)k(the)f
(classi\014cation)g(of)h(iden)o(ti\014ers.)66 1095 y(In)15
b(SML)h(there)f(is)g(no)g(lexical)f(distinction)g(b)q(et)o(w)o(een)h(v)m
(ariables,)f(data)j(constructors)e(and)h(exception)66 1156
y(constructors;)k(they)e(are)h(all)f(conform)f(to)i(the)g(same)e(lexical)g
(con)o(v)o(en)o(tion.)26 b(In)19 b(addition,)f(it)g(is)h(not)66
1216 y(alw)o(a)o(ys)i(p)q(ossible)g(for)g(the)g(parser)g(to)g(infer)f(the)g
(class)h(of)g(an)h(iden)o(ti\014er)d(from)g(its)i(syn)o(tactic)f(con-)66
1276 y(text.)h(The)c(parser)f(therefore)g(generates)g(an)h(abstract)g(syn)o
(tax)f(tree)g(with)g(man)o(y)f(of)i(the)f(iden)o(ti\014ers)66
1336 y(unresolv)o(ed.)140 1396 y(The)k(later)f(stages)i(of)g(the)e(in)o
(terpreter)g(require)f(that)j(all)e(iden)o(ti\014ers)g(b)q(e)h(resolv)o(ed.)
32 b(One)20 b(w)o(a)o(y)66 1457 y(of)h(doing)g(this)f(is)g(to)g(decorate)g
(the)g(abstract)h(syn)o(tax)f(with)g(an)h(indication)e(of)i(the)f(class)g(of)
h(eac)o(h)66 1517 y(am)o(biguous)h(iden)o(ti\014er.)37 b(Ho)o(w)o(ev)o(er,)21
b(there)g(is)h(another)h(metho)q(d)e(whic)o(h)h(requires)e(no)j(decoration)66
1577 y(and)16 b(is)g(also)g(t)o(yp)q(e-secure,)e(in)h(that)h(the)f(later)g
(stages)h(of)g(the)f(in)o(terpreter)f(can)i(only)f(ev)o(er)f(b)q(e)h(passed)
66 1637 y(abstract)g(syn)o(tax)e(whic)o(h)f(has)j(had)f(the)f(iden)o
(ti\014ers)f(resolv)o(ed.)19 b(This)14 b(is)f(done)h(b)o(y)e(parameterising)g
(the)66 1697 y(abstract)j(syn)o(tax)e(on)i(the)e(t)o(yp)q(e)g(of)i(iden)o
(ti\014ers.)j(The)c(abstract)h(syn)o(tax)e(functor)h(is)g(used)g(t)o(wice:)k
(once)66 1758 y(with)j(generic)e(iden)o(ti\014ers,)h(and)h(once)g(with)f
(resolv)o(ed)g(iden)o(ti\014ers)f(\(represen)o(ted)g(as)i(a)g(datat)o(yp)q
(e\).)66 1818 y(The)16 b(result)g(is)f(t)o(w)o(o)h(distinct)f(abstract)i(syn)
o(tax)f(t)o(yp)q(es,)f(one)h(of)g(whic)o(h)g(can)g(ha)o(v)o(e)f(its)g(iden)o
(ti\014er)g(t)o(yp)q(e)66 1878 y(shared)i(with)f(the)g(resolv)o(ed)f(iden)o
(ti\014er)g(datat)o(yp)q(e.)140 1938 y(The)i(abstract)i(syn)o(tax)e(tree)g
(pro)q(duced)h(b)o(y)f(the)h(parser)g(is)f(unresolv)o(ed,)g(and)h(con)o
(tains)g(the)f(fol-)66 1998 y(lo)o(wing)g(t)o(yp)q(e)e(iden)o(tities:)377
2112 y Fu(TopdecGram)o(mar)o(.i)o(d)e Fw(=)k Fu(DecGramma)o(r.)o(id)c
Fw(=)j Fu(Basics.Iden)o(t.)o(id)515 2173 y(DecGramma)o(r.l)o(ong)o(id)d
Fw(=)j Fu(Basics.Ide)o(nt)o(.lo)o(ngi)o(d)66 2287 y Fw(The)h(abstract)g(syn)o
(tax)f(pro)q(duced)g(b)o(y)g(the)g(elab)q(oration)h(is)f(resolv)o(ed,)f(and)i
(con)o(tains)f(the)g(iden)o(tities)390 2401 y Fu(TopdecGra)o(mma)o(r.i)o(d)d
Fw(=)j Fu(DecGrammar.)o(id)d Fw(=)j Fu(Basics.Var)o(.va)o(r)566
2461 y(DecGrammar)o(.lo)o(ng)o(id)d Fw(=)j Fu(ResIdent.l)o(ong)o(id)66
2575 y Fw(where)188 2689 y Fu(datatype)23 b(longid)g(=)j(LONGVAR)d(of)i
(longvar)598 2750 y(|)h(LONGCON)d(of)i(longcon)598 2810 y(|)h(LONGEXCON)c(of)
j(longexcon)p eop
%%Page: 27 86
bop 66 527 a Fy(Chapter)40 b(3)66 735 y(P)m(arsing)66 992 y
Ft(3.1)83 b(In)n(tro)r(duction)66 1102 y Fw(This)19 b(c)o(hapter)f(describ)q
(es)g(the)g(parsing)h(sc)o(heme)d(of)j(the)f(SML)h(Kit.)27
b(W)l(e)19 b(in)o(tro)q(duce)f(the)g(grammar)66 1162 y(datat)o(yp)q(e,)k(or)e
(abstract)h(syn)o(tax,)g(and)g(the)f(grammar)f(sp)q(eci\014cation)h(itself,)f
(explaining)h(the)g(con-)66 1222 y(v)o(en)o(tions)g(used.)33
b(There)20 b(are)g(v)m(arious)h(mec)o(hanisms)c(emplo)o(y)o(ed)h(to)i(resolv)
o(e)g(the)g(am)o(biguities)e(and)66 1282 y(parsing)i(di\016culties)e(of)h
(SML,)h(and)f(w)o(e)g(describ)q(e)g(these)g(together)g(with)h(the)f(mec)o
(hanism)o(s)e(whic)o(h)66 1342 y(deal)f(with)g(in\014x)g(op)q(erators,)h
(deriv)o(ed)e(forms,)g(and)i(so)g(on.)140 1403 y(W)l(e)c(use)i(the)f
(ML-Lex[4])g(and)g(ML-Y)l(acc[5])g(pac)o(k)m(ages.)21 b(Both)14
b(ha)o(v)o(e)f(b)q(een)h(mo)q(di\014ed)f(to)i(pro)q(duce)66
1463 y(p)q(ortable)k(co)q(de)f(running)g(under)f(the)h(SML)g(Library[7],)f
(rather)h(than)g(SML/NJ-sp)q(eci\014c)g(co)q(de,)g(so)66 1523
y(that)13 b(the)e(resulting)h(parser)g(can)g(b)q(e)g(compiled)e(under)i
(other)g(SML)g(systems.)18 b(In)12 b(fact,)g(these)g(v)o(ersions)66
1583 y(of)18 b(ML-Lex)g(and)g(ML-Y)l(acc)g(are)f(themselv)o(es)e(p)q
(ortable,)j(so)g(that)g(all)f(Kit)g(dev)o(elopmen)o(t)d(w)o(ork)k(can)66
1643 y(tak)o(e)e(place)g(using)g(a)h(di\013eren)o(t)e(SML)i(compiler.)140
1704 y(The)e(generated)h(lexing)e(and)j(parsing)f(functors)g(are)g(supp)q
(orted)g(b)o(y)g(a)g(n)o(um)o(b)q(er)d(of)j(utilit)o(y)e(func-)66
1764 y(tors)19 b(for)f(dealing)g(with)g(in\014xes,)g(deriv)o(ed-form)d
(elimination,)h(and)j(so)f(on.)28 b(There)17 b(are)h(also)h(utilit)o(y)66
1824 y(functors)h(for)g(lexing,)f(pro)o(viding)g(p)q(ositional)h(information)
e(for)i(error)g(messages,)f(and)h(so)g(on.)32 b(All)66 1884
y(these)16 b(comp)q(onen)o(ts)g(are)g(gathered)h(together)f(in)g(the)g
(functor)g Fu(Parse)f Fw(\(Section)g(7.3\).)140 1944 y(Section)g(3.2)h
(describ)q(es)f(the)h(abstract)g(syn)o(tax)g(and)g(its)g(parameterisation.)k
(Section)15 b(3.3)h(co)o(v)o(ers)66 2004 y(lexing)f(issues,)g(and)h(Section)f
(3.4)h(o)o(v)o(erviews)e(the)h(general)g(structure)h(of)f(the)h(parser.)21
b(W)l(e)15 b(co)o(v)o(er)f(the)66 2065 y(grammar)e(sp)q(eci\014cation)h(in)h
(Section)e(3.5,)i(and)g(the)g(functor)f(structure)g(and)h(link)m(age)f(in)g
(Section)g(7.3.)66 2125 y(The)k(constituen)o(t)e(\014les)h(of)h(the)f
(parsing)h(system)d(are)j(describ)q(ed)e(in)h(Section)g(3.7.)140
2185 y(A)o(t)e(this)h(stage)g(w)o(e)g(should)h(probably)f(men)o(tion)e(the)i
(main)f(thing)h(that)g(the)g(parsing)h(phase)f(do)q(es)66 2245
y Fk(not)22 b Fw(do.)38 b(The)21 b(De\014nition)g(states)h(a)g(n)o(um)o(b)q
(er)e(of)i(syn)o(tactic)e(restrictions)h(\(Section)g(2.9\),)h(mainly)66
2305 y(concerned)13 b(with)h(rep)q(eated)f(iden)o(ti\014ers)f(of)i(v)m
(arious)g(kinds.)20 b(In)13 b(fact,)h(some)e(of)i(these)f(restrictions)g(are)
66 2366 y Fk(not)k Fw(syn)o(tactic)e(since)h(they)g(are)g(imp)q(ossible)f(to)
h(enforce)g(at)h(parse)f(time,)e(and)j(require)e(elab)q(oration.)66
2426 y(Sp)q(eci\014cally)l(,)23 b(rep)q(eated)f(iden)o(ti\014ers)f(in)i(v)m
(alue)f(bindings)h(and)g(patterns)g(cannot)h(b)q(e)e(detected)g(at)66
2486 y(parse)c(time)e(since)g(it)h(is)g(legal)g(to)h(rep)q(eat)g(v)m(alue)f
(and)h(exception)e(constructors,)i(and)g(these)g(cannot)66
2546 y(b)q(e)k(determined)c(b)q(efore)j(elab)q(oration.)36
b(W)l(e)21 b(ha)o(v)o(e)f(c)o(hosen)h(to)g(enforce)f Fk(none)i
Fw(of)g(the)e(rules)h(ab)q(out)66 2606 y(rep)q(eated)j(iden)o(ti\014ers,)g
(for)g(the)g(sak)o(e)g(of)g(simplicit)n(y;)h(it)e(is)h(cleaner)f(to)h(deal)g
(with)f(these)h(errors)66 2667 y(during)18 b(elab)q(oration.)27
b(Also)17 b(w)o(e)h(deal)f(with)h(the)f(syn)o(tactic)g(restriction)g(in)g
([11)q(,)g(Section)g(2.9,)i(third)66 2727 y(bullet,)12 b(last)g(sen)o(tence])
e(during)i(elab)q(oration.)20 b(The)12 b(one)g(remaining)e(syn)o(tactic)h
(restriction)g(in)o(v)o(olving)66 2787 y Fu(val)25 b(rec)15
b Fw(is)h(truly)g(syn)o(tactic)f(and)i(can)f(b)q(e)h(dealt)f(with)g(in)g(the)
g(grammar.)987 2947 y(27)p eop
%%Page: 26 87
bop 66 50 a Fs(CHAPTER)17 b(2.)37 b(O)o(VER)-5 b(VIEW)15 b(OF)h(THE)g(KIT)914
b Fw(26)222 188 y Fx(File)675 b(Con)n(tains)222 309 y Fu(Common/INT)o(ER)o
(PRE)o(TER)o(.sm)o(l)201 b Fw(signature)17 b(for)f(the)g(top-lev)o(el)f(lo)q
(op)222 369 y Fu(Common/Int)o(er)o(pre)o(ter)o(.sm)o(l)201
b Fw(the)16 b(top-lev)o(el)f(lo)q(op)222 429 y Fu(Common/PRE)o(TT)o(YPR)o
(INT)o(.sm)o(l)201 b Fw(signature)17 b(for)f(the)g(prett)o(y)f(prin)o(ter)222
489 y Fu(Common/CRA)o(SH)o(.sm)o(l)355 b Fw(signature)17 b(for)f(handling)h
(of)f(fatal)h(errors)222 549 y Fu(Common/DF)p 459 549 16 2
v 15 w(INFO.sml)311 b Fw(signature)17 b(for)f(info)g(ab)q(out)i(deriv)o(ed)d
(forms)659 661 y(Figure)h(2.4:)21 b(Other)16 b(\014les)g(of)h(in)o(terest)83
763 y Fx(File)785 b(Con)n(tains)83 883 y Fu(Common/DE)o(C)p
345 883 V 15 w(GRAMMAR.sml)318 b Fw(Grammar)14 b(for)j(Core)f(declarations)83
944 y Fu(Common/TO)o(PDE)o(C)p 422 944 V 15 w(GRAMMAR.sml)241
b Fw(Grammar)14 b(for)j(Core)f(declarations)83 1029 y Fu(Common/ST)o(ATO)o
(BJE)o(CT)o(.sm)o(l)337 b Fw(Ob)s(jects)15 b(in)h(the)g(static)g(seman)o
(tics)f(of)h(the)g(Core)83 1089 y Fu(Common/EL)o(ABD)o(EC.)o(sm)o(l)414
b Fw(The)16 b(elab)q(orator)i(for)e(the)g(Core)83 1149 y Fu(Common/MO)o(DUL)o
(E)p 422 1149 V 15 w(STATOBJECT.)o(sml)164 b Fw(Ob)s(jects)15
b(in)h(the)g(static)g(seman)o(tics)f(of)h(Mo)q(dules)83 1209
y Fu(Common/EL)o(ABT)o(OPD)o(EC)o(.sm)o(l)337 b Fw(The)16 b(elab)q(orator)i
(for)e(Mo)q(dules)g(\(and)h(the)f(Core\))83 1294 y Fu(Interpret)o(er/)o(COR)o
(E)p 499 1294 V 15 w(DYNOBJECT.s)o(ml)113 b Fw(Ob)s(jects)15
b(in)h(the)g(dynamic)f(seman)o(tics)f(of)j(the)f(Core)83 1355
y Fu(Interpret)o(er/)o(EVA)o(LD)o(EC.)o(sml)285 b Fw(The)16
b(Core)h(In)o(terpreter)83 1415 y Fu(Interpret)o(er/)o(MOD)o(UL)o(E)p
550 1415 V 16 w(DYNOBJECT)o(.sm)o(l)62 b Fw(Ob)s(jects)15 b(in)h(the)g
(dynamic)f(seman)o(tics)f(of)j(Mo)q(dules)83 1475 y Fu(Common/EV)o(ALT)o(OPD)
o(EC)o(.sm)o(l)337 b Fw(The)16 b(Mo)q(dules)g(In)o(terpreter)83
1535 y Fu(Compiler/)o(LAM)o(BDA)p 473 1535 V 15 w(EXP.sml)293
b Fw(The)16 b(lam)o(b)q(da)g(language)83 1595 y Fu(Compiler/)o(COM)o(PIL)o(E)
p 499 1595 V 15 w(DEC.sml)268 b Fw(The)16 b(Core)h(declaration)f(Compiler)83
1656 y Fu(Common/EV)o(ALU)o(ATI)o(ON)o(.sm)o(l)337 b Fw(Ev)m(aluator,)17
b(b)q(oth)g(Core)f(and)h(Mo)q(dules)126 1767 y(Figure)f(2.5:)21
b(Imp)q(ortan)o(t)16 b(signatures,)g(in)g(the)g(order:)21 b(parsing,)c(elab)q
(oration)g(and)g(ev)m(aluation)66 1901 y(functor.)k(Also,)13
b(a)g(\014le)g(name)f(with)h Fu(TOPDEC)e Fw(in)h(it)h(indicates)f(that)i(the)
f(\014le)f(con)o(tains)i(something)e(that)66 1961 y(has)k(to)g(do)g(with)f
(Mo)q(dules,)g(whereas)h(a)f(\014le)g(name)f(with)h Fu(DEC)g
Fw(in)g(it)f(indicates)h(that)h(the)f(\014le)f(con)o(tain)66
2022 y(something)j(to)h(do)g(with)g(the)f(Core;)h(a)g(\014le)f(name)f(with)i
Fu(PP)f Fw(in)g(it)g(indicates)g(that)h(the)f(\014le)g(con)o(tains)66
2082 y(something)h(to)g(do)h(with)f(prett)o(y)f(prin)o(ting.)26
b(F)l(or)18 b(example,)e(the)i(\014le)g Fu(Common/PP)o(DEC)o(GR)o(AMM)o(AR.)o
(sml)66 2142 y Fw(pro)o(vides)e(the)g(signature)h(for)f(the)g(prett)o(y)g
(prin)o(ting)f(functions)h(for)h(Core)f(abstract)h(syn)o(tax)g(trees.)p
eop
%%Page: 25 88
bop 66 50 a Fs(CHAPTER)17 b(2.)37 b(O)o(VER)-5 b(VIEW)15 b(OF)h(THE)g(KIT)914
b Fw(25)323 195 y Fu(end)24 b(=)271 255 y(struct)374 315 y(....)271
376 y(end)p 66 436 1890 6 v 66 523 a Fw(whic)o(h)16 b(are)g(the)g(6)h
(functions)f(w)o(e)g(sa)o(w)h(in)f(our)g(\\\014rst)h(session)g(with)f(the)g
(Kit")g(\(Section)g(1\).)140 583 y(In)f(Figure)g(2.4)h(w)o(e)g(sho)o(w)g
(where)f(a)h(n)o(um)o(b)q(er)e(of)j(other)e(imp)q(ortan)o(t)g(parts)i(of)f
(the)f(Kit)g(are)h(found.)66 737 y Fr(2.2.7)70 b(Summary)66
829 y Fw(The)23 b(Kit)f(is)h(made)e(up)i(of)g(a)g(n)o(um)o(b)q(er)e(of)i
(self-con)o(tained)f(functors)h(and)g(signatures)g(and)g(a)g(few)66
890 y(mo)q(dules)15 b(whose)g(job)h(it)e(is)h(to)g(apply)g(all)g(the)g
(functors)g(to)g(build)g(the)g(system.)k(Almost)13 b(all)i(functors)66
950 y(and)20 b(signatures)f(are)f Fs(closed)p Fw(,)h(meaning)e(that)i(the)g
(only)f(free)g(iden)o(ti\014ers)f(they)h(con)o(tain)h(are)f(either)66
1010 y(signature)c(iden)o(ti\014ers)e(or)h(are)g(declared)g(in)g(the)f
(initial)g(basis)i(or)f(the)g(Edin)o(burgh)h(SML)f(Library)l(.)20
b(W)l(e)66 1070 y(regard)13 b(this)g(extreme)c(degree)j(of)h(functorisation)g
(as)g(essen)o(tial)e(for)i(the)f(mo)q(dularit)o(y)f(and)i(readabilit)o(y)66
1130 y(of)18 b(the)g(Kit:)23 b(ev)o(ery)16 b(functor)i(explicitly)d(states)j
(what)g(it)f(requires)g(and)h(with)f(v)o(ery)g(few)g(exceptions)66
1191 y(\(suc)o(h)c(as)h(the)f(abstract)h(syn)o(tax)f(trees\),)f(the)h(implem)
o(en)o(tation)d(of)k(sp)q(eci\014ed)e(t)o(yp)q(es)h(is)g(totally)g(hidden)66
1251 y(from)j(the)g(functors)g(that)h(use)f(it.)140 1311 y(This)j(st)o(yle)f
(of)h(programming)f(mak)o(es)g(it)g(is)h(fairly)g(easy)g(to)h(\014nd)f(one's)
g(w)o(a)o(y)g(around)h(the)f(Kit,)66 1371 y(w)o(e)f(hop)q(e.)255
1353 y Fm(11)319 1371 y Fw(F)l(or)g(ev)o(ery)f(functor)h(there)f(is)h(a)g
(result)f(signature)i(whic)o(h)e(giv)o(es)g(the)h(in)o(terface)e(to)i(the)66
1431 y(functor;)i(v)o(ery)e(often,)h(one)g(do)q(es)h(not)f(ha)o(v)o(e)g(to)g
(lo)q(ok)g(inside)f(functors)i(to)f(\014nd)g(out)h(what)f(they)g(do)66
1491 y(|)j(lo)q(ok)h(at)f(the)g(result)f(signature)i(to)f(\014nd)g(out)h
(what)g(the)e(functor)h(pro)q(duces)h(and)g(lo)q(ok)f(at)g(its)66
1552 y(parameter)15 b(list)h(to)h(see)e(what)i(it)f(dep)q(ends)h(on.)p
516 1669 991 2 v 516 1738 2 70 v 530 1716 a Fx(Do)i(not)g(read)f(functors.)25
b(Read)18 b(signatures.)p 1505 1738 V 516 1740 991 2 v 66 1880
a Fw(In)e(Figure)g(2.5)h(w)o(e)f(list)f(all)h(the)g(signatures)h(w)o(e)f(ha)o
(v)o(e)f(lo)q(ok)o(ed)h(at)h(in)f(this)g(section.)140 1940
y(Finally)l(,)e(a)k(w)o(ord)e(ab)q(out)i(the)f(naming)f(of)h(\014les,)e
(functors)i(and)h(signatures.)23 b(The)16 b(con)o(v)o(en)o(tion)f(is)66
2000 y(that)h(the)f(result)f(signature)i(of)f(a)h(functor)f
Fu(Id)f Fw(is)h(found)h(in)f(a)g(\014le)g(with)f(the)h(name)f
Fu(ID.sml)p Fw(,)f(whereas)66 2060 y(the)20 b(functor)f(itself)g(is)g(found)h
(in)g Fu(Id.sml)p Fw(.)29 b(In)19 b(general,)h(\014lenames)d(with)j(upp)q
(er-case)g(letters)f(and)66 2120 y(underscores)13 b(are)f(used)g(for)h
(signatures,)g(whereas)g(a)f(mixture)e(of)j(cases)f(indicates)g(a)g(\014le)g
(con)o(taining)g(a)p 66 2164 756 2 v 106 2195 a Fi(11)141 2210
y Fh(It)h(also)f(forces)h(one)g(to)f(write)h(an)f(a)o(wful)g(lot)g(of)g
(sharing)g(constrain)o(ts,)h(but)g(that)f(is)h(something)e(one)i(learns)g(to)
f(liv)o(e)66 2260 y(with.)91 2392 y Fx(Name)210 b(File)647
b(Builds)91 2513 y Fu(Parse)225 b(Parsing/Pa)o(rse)o(.sm)o(l)301
b Fw(the)16 b(parser)g(for)h(the)f(whole)g(langauge)91 2573
y Fu(Evaluation)95 b(Interprete)o(r/E)o(val)o(uat)o(io)o(n.s)o(ml)70
b Fw(the)16 b(In)o(terpreter-based)f(Ev)m(aluator)91 2633 y
Fu(Evaluation)95 b(Compiler/E)o(val)o(uat)o(ion)o(.s)o(ml)147
b Fw(the)16 b(Compiler-based)f(Ev)m(aluator)91 2693 y Fu(KitCompile)o(r)70
b(Common/Kit)o(Com)o(pil)o(er.)o(sm)o(l)173 b Fw(the)16 b(en)o(tire)f(Kit,)g
(incl.)20 b(the)c(Elab)q(orator)710 2806 y(Figure)g(2.3:)22
b(Linking)16 b(functors)p eop
%%Page: 24 89
bop 66 50 a Fs(CHAPTER)17 b(2.)32 b(O)o(VER)-5 b(VIEW)14 b(OF)j(THE)f(KIT)919
b Fw(24)169 255 y Fu(....)169 376 y(fun)24 b(elab_strexp)e(\(B)j(:)g
(Env.Basis,)d(strexp)i(:)h(IG.strexp\))d(:)220 436 y(\(Stat.Str)h(*)i
(OG.strexp\))d(=)220 556 y(case)i(strexp)g(of)271 677 y(\(*)h(Generative)d
(*\))271 737 y(IG.STRUCTst)o(rex)o(p\(i)o(,)h(strdec\))g(=>)323
797 y(let)374 857 y(val)i(\(E,)f(out_strdec)o(\))f(=)i(elab_strde)o(c\(B)o(,)
d(strdec\))374 917 y(val)j(m)g(=)g(Stat.fresh)o(Str)o(Nam)o(e\()o(\))323
978 y(in)374 1038 y(\(Stat.mkSt)o(r\(m)o(,E\))o(,)d(OG.STRUCTst)o(rex)o(p\(c)
o(on)o(v)h(i,)i(out_strde)o(c\)\))323 1098 y(end)169 1158 y(....)118
1218 y(end;)p 66 1280 1890 6 v 66 1439 a Fr(2.2.6)70 b(Putting)23
b(it)e(all)h(together)66 1531 y Fw(W)l(e)c(ha)o(v)o(e)g(no)o(w)g(seen)g(sev)o
(eral)g(examples)e(of)i(functors)h(and)g(signatures)g(that)f(implem)o(en)o(t)
d(di\013eren)o(t)66 1591 y(parts)i(of)g(the)f(De\014nition.)21
b(W)l(e)16 b(shall)g(no)o(w)g(see)g(ho)o(w)h(all)f(these)g(mo)q(dules)f(are)h
(put)h(together.)140 1651 y(The)d(basic)h(idea)f(is)g(that)h(the)g(Kit)f(is)g
(built)g(b)o(y)g(comp)q(osing)g(functor)h(applications,)f(m)o(uc)o(h)f(as)i
(one)66 1711 y(comp)q(oses)d(functions.)19 b(Since)11 b(the)h(Kit)f(consists)
h(of)g(a)g(large)f(n)o(um)o(b)q(er)f(of)i(functors,)h(it)e(w)o(ould)h
(certainly)66 1772 y(not)17 b(b)q(e)g(practical)e(to)i(try)f(to)h(build)f
(the)g(Kit)g(in)o(teractiv)o(ely)d(b)o(y)j(t)o(yping)g(in)g(functor)g
(applications)h(to)66 1832 y(the)j(ML)g(system.)31 b(Instead,)20
b(there)f(are)h(a)h(few)e(functors)i(in)e(the)h(Kit)f(that)h(are)g
Fs(linking)f(functors)p Fw(,)66 1892 y(i.e.)29 b(their)18 b(job)h(is)g(just)g
(to)g(apply)g(other)g(functors.)30 b(The)19 b(linking)f(functors)h(of)g(the)g
(Kit)g(app)q(ear)h(in)66 1952 y(Figure)13 b(2.3.)20 b(Notice)11
b(that)j(there)e(are)g(t)o(w)o(o)h(functors)g(called)e Fu(Evaluation)p
Fw(,)f(one)i(in)h(the)f Fu(Interpreter)66 2012 y Fw(directory)h(and)i(one)f
(in)f(the)h Fu(Compiler)d Fw(directory)l(.)19 b(They)14 b(b)q(oth)h(matc)o(h)
d(the)i Fu(EVALUATIO)o(N)d Fw(signature)66 2073 y(\(\014le:)36
b Fu(Common/EV)o(ALU)o(AT)o(ION)o(.sm)o(l)p Fw(\))21 b(and)j(pro)q(duce)g
(the)f(In)o(terpreter-based)g(Ev)m(aluator)h(and)g(the)66 2133
y(Compiler-based)15 b(In)o(terpreter,)f(resp)q(ectiv)o(ely)l(.)k(The)e(in)o
(terface)e(of)i(the)g(Kit)f(at)h(top)g(lev)o(el)e(is)h(found)i(in)66
2193 y(the)f(\014le)g Fu(Common/Kit)o(Com)o(pi)o(ler)o(.sm)o(l)p
Fw(:)p 66 2257 V 271 2341 a Fu(functor)24 b(KitCompil)o(er\()o(va)o(l)f
(prelude:)f(string\))h(:)323 2402 y(sig)374 2462 y(val)i(parse:)e(unit)h(->)h
(unit)374 2522 y(val)g(elab:)e(unit)i(->)f(unit)374 2582 y(val)h(eval:)e
(unit)i(->)f(unit)374 2703 y(val)h(parseFile)o(:)e(string)g(->)i(unit)374
2763 y(val)g(elabFile:)d(string)h(->)i(unit)374 2823 y(val)g(evalFile:)d
(string)h(->)i(unit)p eop
%%Page: 23 90
bop 66 50 a Fs(CHAPTER)17 b(2.)32 b(O)o(VER)-5 b(VIEW)14 b(OF)j(THE)f(KIT)919
b Fw(23)66 195 y(in)18 b(a)g(purely)f(applicativ)o(e)f(\(and)i(rather)g
(simple-mi)o(nded\))d(w)o(a)o(y)l(,)i(but)h(the)f(whole)h(p)q(oin)o(t)g(is)f
(that)h(the)66 255 y(mo)q(dules)i(t)o(yp)q(e)g(discipline)e(can)j(ensure)f
(that)h(the)f(Ev)m(aluator)i(do)q(es)f(not)g(rely)e(on)i(this)g(particular)66
315 y(represen)o(tation)16 b(of)h(substitutions.)140 376 y(No)o(w)g(let)g(us)
h(turn)g(to)g(the)f(elab)q(oration)h(of)g(Mo)q(dules.)26 b(The)17
b(Mo)q(dules)h(elab)q(orator)h(is)e(a)h(functor)66 436 y(with)f(the)f(follo)o
(wing)f(result)h(signature)h(\(\014le:)j Fu(Common/ELAB)o(TOP)o(DE)o(C.s)o
(ml)p Fw(\))p 66 504 1890 6 v 66 588 a Fu(signature)j(ELABTOPDE)o(C)g(=)118
649 y(sig)169 709 y(type)h(StaticBasi)o(s)169 829 y(type)g(PreElabTop)o(dec)e
(and)j(PostElabT)o(op)o(dec)169 950 y(val)f(elab_topdec)o(:)f(StaticBas)o(is)
f(*)k(PreElabTo)o(pde)o(c)c(->)656 1010 y(StaticBasi)o(s)h(*)i(PostElabTo)o
(pd)o(ec)169 1070 y(type)f(StringTree)169 1130 y(val)g(layoutStati)o(cBa)o
(sis)o(:)f(StaticBas)o(is)f(->)j(StringTree)118 1190 y(end;)p
66 1257 V 66 1342 a Fw(This)18 b(in)o(terface)e(is)i(v)o(ery)e(similar)g(to)i
(the)f(in)o(terface)g(to)h(the)f(Core)h(elab)q(orator,)h(and)f(it)f(corresp)q
(onds)66 1402 y(nicely)i(to)h(the)g(middle)e(third)h(of)i(Figure)e(2.1.)33
b(In)20 b(the)f(De\014nition,)i(the)e(corresp)q(onding)i(sen)o(tence)66
1462 y(form)16 b(is[11,)f(page)i(44]:)p 817 1480 389 2 v 817
1551 2 72 v 831 1529 a Fv(B)g Fp(`)d Fk(top)n(de)n(c)i Fp(\))e
Fv(B)1180 1511 y Fl(0)p 1204 1551 V 817 1553 389 2 v 140 1616
a Fw(The)21 b(Mo)q(dules)h(elab)q(orator)h(itself)e(if)g(found)h(in)g(the)f
(\014le)g Fu(Common/Ela)o(bTo)o(pde)o(c.s)o(ml)o Fw(.)35 b(Belo)o(w)66
1677 y(w)o(e)18 b(sho)o(w)i(the)e(sk)o(eleton)f(of)i(the)f(functor)h(and)g
(the)f(piece)f(of)i(co)q(de)g(corresp)q(onding)g(to)g(the)f(rule)g(for)66
1737 y(generativ)o(e)d(structure)h(expressions[11)q(,)f(rule)h(53,)h(page)f
(37])1190 1719 y Fm(10)530 1841 y Fv(B)h Fp(`)d Fk(str)n(de)n(c)i
Fp(\))e Fv(E)100 b(m)20 b(=)-30 b Fp(2)14 b Fw(\()p Fv(N)i
Fw(of)f Fv(B)s Fw(\))c Fp([)g Fw(names)c Fv(E)p 530 1863 962
2 v 659 1908 a(B)17 b Fp(`)d Fu(struct)g Fk(str)n(de)n(c)19
b Fu(end)12 b Fp(\))i Fw(\()p Fv(m;)8 b(E)s Fw(\))p 66 2040
1890 6 v 66 2128 a Fu(functor)23 b(ElabTopdec\()o(str)o(uct)o(ure)f(IG:)i
(TOPDEC_GRAM)o(MAR)143 2189 y(structure)f(OG:)h(TOPDEC_GRAM)o(MA)o(R)143
2249 y(structure)f(ElabDec:)f(ELABDEC)143 2309 y(structure)h(ModuleSta)o(tOb)
o(jec)o(t:)f(MODULE_STA)o(TOB)o(JEC)o(T)143 2369 y(structure)h(ModuleEnv)o
(iro)o(nme)o(nt)o(s:)f(MODULE_ENVI)o(RON)o(ME)o(NTS)143 2429
y(structure)h(U)i(:)g(MODULE_UNIF)o(Y)553 2490 y(....)528 2550
y(\))g(:)g(ELABTOPDEC)48 b(=)118 2610 y(struct)p 66 2644 756
2 v 106 2675 a Fi(10)141 2690 y Fh(This)32 b(is)h(the)g(rule)f(that)h
(formalises)d(what)j(is)f(mean)o(t)f(b)o(y)h(sa)o(ying)g(that)g(the)h
(structure)i(expression)66 2740 y Ff(struct)18 b Fd(str)n(de)n(c)i
Ff(end)e Fh(is)h Fd(gener)n(ative)p Fh(:)28 b(the)19 b(name)f
Fc(m)h Fh(of)f(the)h(resulting)g(structure)i(\()p Fc(m;)7 b(E)r
Fh(\))19 b(is)g(c)o(hosen)g(outside)h(the)66 2789 y(set)15
b(\()p Fc(N)f Fh(of)e Fc(B)r Fh(\))e Fb([)f Fh(names)d Fc(E)r
Fh(.)p eop
%%Page: 22 91
bop 66 50 a Fs(CHAPTER)17 b(2.)37 b(O)o(VER)-5 b(VIEW)15 b(OF)h(THE)g(KIT)914
b Fw(22)p 66 195 1890 6 v 140 278 a(Returning)23 b(to)i(our)f(running)h
(example,)e(the)h(execution)f(of)h Fu(let)f Fw(expressions,)i(w)o(e)f(\014nd)
g(the)66 338 y(elab)q(oration)17 b(rule)f(\(6\))h(on)f(page)h(24)g(of)g(the)f
(De\014nition:)634 437 y Fv(C)h Fp(`)e Fk(de)n(c)i Fp(\))c
Fv(E)101 b(C)14 b Fp(\010)d Fv(E)17 b Fp(`)d Fk(exp)k Fp(\))c
Fv(\034)p 634 459 755 2 v 707 505 a(C)k Fp(`)c Fu(let)h Fk(de)n(c)i
Fu(in)e Fk(exp)i Fu(end)c Fp(\))h Fv(\034)66 604 y Fw(Here)i
Fv(\034)22 b Fw(is)16 b(a)g Fs(t)o(yp)q(e)p Fw([11,)g(Figure)g(10,)g(page)h
(17].)140 664 y(There)11 b(is)h(a)h(fundamen)o(tal)d(di\013erence)h(b)q(et)o
(w)o(een)g(the)h(inference)f(rules)g(in)h(the)g(dynamic)e(seman)o(tics)66
724 y(and)18 b(the)f(rules)g(in)g(the)g(static)g(seman)o(tics,)e(and)j(this)f
(applies)g(b)q(oth)h(to)f(the)g(Core)h(language)g(and)g(to)66
784 y(Mo)q(dules.)41 b(Whereas)23 b(the)g(rules)f(for)h(ev)m(aluation)g
(essen)o(tially)e(are)i(deterministic)o(,)e(the)i(rules)f(for)66
844 y(elab)q(oration)c(rely)d(on)i(non-determinism)c(to)k(express)f(p)q
(olymorphism)e(\(in)i(the)g(Core\))h(and)f(sharing)66 905 y(\(in)j(the)g(Mo)q
(dules\).)31 b(Th)o(us)20 b(it)e(is)h(less)h(straigh)o(tforw)o(ard)g(to)f
(translate)h(the)f(inference)f(rules)g(in)h(the)66 965 y(static)i(seman)o
(tics)f(to)i(Kit)e(co)q(de)i(than)g(it)e(is)h(to)h(translate)g(the)f
(inference)e(rules)i(in)g(the)g(dynamic)66 1025 y(seman)o(tics.)140
1085 y(The)15 b(algorithm)f(whic)o(h)g(faithfully)g(implem)o(e)o(n)o(ts)e
(the)j(elab)q(oration)h(rules)f(for)g(the)g(Core)g(is)g(based)66
1145 y(directly)22 b(on)j(Damas')e(and)h(Milner's)e(algorihm)h
Fv(W)7 b Fw([8].)43 b(If)23 b Fv(W)31 b Fw(is)24 b(applied)f(to)h(an)g
(expression)g Fv(e)66 1206 y Fw(and)19 b(a)g(t)o(yp)q(e)f(assignmen)o(t)f
Fv(A)p Fw(,)i Fv(W)7 b Fw(\()p Fv(A;)h(e)p Fw(\))17 b(either)g(fails)h(\(in)g
(case)h Fv(e)f Fw(is)g(not)h(t)o(ypable)e(in)h(an)o(y)h(substitu-)66
1266 y(tion)h(instance)f(of)h Fv(A)p Fw(\))f(or)h(returns)g(a)g(substitution)
g Fv(S)i Fw(and)f(a)f(t)o(yp)q(e)f Fv(\034)25 b Fw(suc)o(h)19
b(that)h Fv(S)s Fw(\()p Fv(A)p Fw(\))f Fp(`)h Fv(e)g Fp(\))f
Fv(\034)6 b Fw(.)66 1326 y(Here)20 b(is)h(the)f(part)h(of)g(the)g(Core)g
(Elab)q(orator)h(that)f(deals)g(with)f Fu(let)g Fw(expressions)h(\(from)e
(the)i(\014le)66 1386 y Fu(Common/Elab)o(Dec)o(.sm)o(l)p Fw(\):)p
66 1453 1890 6 v 169 1539 a Fu(fun)j(elab_atexp)e(\(C)j(:)h(Environme)o(nts)o
(.C)o(ont)o(ext)o(,)d(atexp)g(:)j(IG.atexp\))c(:)246 1599 y(\(Substitut)o(io)
o(n)h(*)i(StatObject)o(.Ty)o(pe)d(*)j(OG.atexp\))e(=)220 1659
y(case)h(atexp)g(of)271 1719 y(....)271 1780 y(\(*)h(let)g(expression)d(*\))
845 b(\(*)25 b(rule)f(6)h(*\))220 1840 y(|)g(IG.LETatexp)o(\(i,)d(dec,)i
(exp\))g(=>)297 1900 y(let)348 1960 y(val)h(\(S1,)f(E,)h(out_dec\))74
b(=)25 b(elab_dec\(C,)o(de)o(c\))348 2020 y(val)g(\(S2,)f(tau,)g(out_exp\))f
(=)i(elab_exp\(\(S)o(1)d(onC)j(C\))g(C_cplus_E)d(E,)j(exp\))297
2081 y(in)323 2141 y(\(S2)f(oo)h(S1,)g(tau,)f(OG.LETatex)o(p\()o(okC)o(onv)e
(i,out_dec,)o(out)o(_e)o(xp\))o(\))297 2201 y(end)271 2261
y(....)p 66 2318 V 140 2402 a Fw(Here)13 b Fu(IG)h Fw(stands)i(for)f(input)f
(grammar,)f Fu(OG)h Fw(stands)i(for)f(output)g(grammar,)e Fu(S1)h
Fw(and)i Fu(S2)e Fw(are)g(sub-)66 2462 y(stitutions,)f Fu(oo)e
Fw(is)h(in\014x)f(comp)q(osition)g(of)h(substitutions,)h Fu(onC)e
Fw(is)h(in\014x)f(application)h(of)g(a)g(substitution)66 2522
y(to)17 b(a)g(con)o(text,)e(and)h Fu(i)g Fw(is)g(the)g Fu(info)f
Fw(\014eld.)140 2582 y(W)l(e)g(cannot)h(get)f(tired)g(of)h(stressing)g(the)f
(imp)q(ortance)f(of)i(data)g(abstraction)g(obtained)g(through)66
2642 y(the)h(use)f(of)h(functors.)k(The)c(elab)q(orator)g(has)g(no)g(idea)f
(what)h(substitutions)g(are,)f(nor)h(do)q(es)g(it)f(kno)o(w)66
2703 y(ho)o(w)j(comp)q(osition)e(of)h(substitutions)g(is)g(implem)o(en)o(te)o
(d.)24 b(It)17 b(is)h(therefore)f(p)q(ossible)h(to)g(use)g(the)g(Kit)66
2763 y(elab)q(orator)d(in)e(an)h(implem)o(e)o(n)o(tation)d(where)i
(substitutions)h(are)f(done)g(b)o(y)g(side)g(e\013ects)g(\(so)h(that)g(t)o
(yp)q(e)66 2823 y Fu(subst)e Fw(w)o(ould)h(b)q(e)h(implem)o(e)o(n)o(ted)c(as)
k Fu(unit)p Fw(\);)e(in)h(the)g(Kit,)g(substitutions)h(are)f(actually)g
(implem)o(en)n(ted)p eop
%%Page: 21 92
bop 66 50 a Fs(CHAPTER)17 b(2.)37 b(O)o(VER)-5 b(VIEW)15 b(OF)h(THE)g(KIT)914
b Fw(21)66 195 y Fr(2.2.5)70 b(Elab)r(oration)66 287 y Fw(The)13
b(Elab)q(orator)h(is)e(also)h(brok)o(en)f(in)o(to)g(t)o(w)o(o)g(parts:)20
b(an)13 b(elab)q(orator)h(for)e(the)h(Core)f(and)h(an)g(elab)q(orator)66
348 y(for)20 b(Mo)q(dules.)31 b(The)20 b(former)e(is)h(an)i(implem)o(e)o(n)o
(tation)c(of)j(the)f(static)h(seman)o(tics)d(for)j(the)f(Core,)i(as)66
408 y(de\014ned)f(in)f([11,)h(Section)f(4],)h(while)f(the)g(latter)g(is)g(an)
h(implem)o(en)o(tation)d(of)i(the)h(static)f(seman)o(tics)66
468 y(for)j(Mo)q(dules,)h(as)f(de\014ned)g(in)f([11,)i(Section)e(5].)37
b(The)22 b(Elab)q(orator)h(is)f(lo)q(cated)f(in)h(the)f(directory)66
528 y Fu(Common)p Fw(,)f(since)h(b)q(oth)h(the)f(In)o(terpreter-based)g(Ev)m
(aluator)h(and)g(the)f(Compiler-based)f(Ev)m(aluator)66 588
y(use)d(the)f(Elab)q(orator.)23 b(W)l(e)16 b(no)o(w)g(lo)q(ok)h(at)f(the)g
(Core)h(and)g(the)f(Mo)q(dules)g(elab)q(orators)i(in)e(turn.)140
649 y(The)24 b(elab)q(orator)h(for)g(the)e(Core)i(language)g(is)f(a)h
(functor.)45 b(Its)24 b(result)f(signature)i(giv)o(es)e(the)66
709 y(in)o(terface)15 b(to)i(the)f(elab)q(orator)h(\(from)e(the)h(\014le)g
Fu(Common/ELA)o(BDE)o(C.)o(sml)o Fw(\):)p 66 766 1890 6 v 66
829 a Fu(signature)23 b(ELABDEC)g(=)66 889 y(sig)118 950 y(type)h(Context)f
(and)h(Env)h(and)g(Type)118 1070 y(type)f(PreElabDec)e(and)i(PostElabDec)118
1130 y(type)g(PreElabTy)48 b(and)24 b(PostElabTy)118 1251 y(val)g(elab_dec)f
(:)i(Context)e(*)j(PreElabDe)o(c)c(->)j(Env)51 b(*)25 b(PostElabDe)o(c)118
1311 y(and)f(elab_ty)49 b(:)25 b(Context)e(*)j(PreElabTy)47
b(->)25 b(Type)g(*)g(PostElabTy)66 1371 y(end;)p 66 1416 V
140 1490 a Fw(In)14 b(other)h(w)o(ords,)h(all)e(the)h(rest)g(of)h(the)e(Kit)h
(can)g(do)h(with)e(the)h(Core)h(elab)q(orator)g(is)f(to)g(call)f(either)66
1550 y Fu(elab)p 173 1550 16 2 v 17 w(dec)21 b Fw(or)g Fu(elab)p
457 1550 V 17 w(ty)p Fw(.)36 b(The)22 b(rules)e(for)i(the)f(static)g(seman)o
(tics)f(of)h(declarations)h Fk(de)n(c)s Fw([11,)g(pages)66
1610 y(25{26])c(allo)o(w)e(one)h(to)f(infer)g(sen)o(tences)f(of)h(the)g(form)
p 856 1660 312 2 v 856 1719 2 60 v 870 1707 a Fv(C)h Fp(`)d
Fk(de)n(c)j Fp(\))d Fv(E)p 1165 1719 V 856 1721 312 2 v 706
w Fw(\(2)p Fv(:)p Fw(1\))66 1798 y(where)k Fv(C)i Fw(is)e(a)g(con)o(text)e
(and)i Fv(E)j Fw(is)c(a)h(static)f(en)o(vironmen)o(t.)1191
1780 y Fm(9)1233 1798 y Fw(The)g(t)o(yp)q(e)g(of)h Fu(elab)p
1609 1798 16 2 v 17 w(dec)f Fw(is)g(therefore)66 1858 y(as)k(one)g(w)o(ould)f
(exp)q(ect,)g(ha)o(ving)g(seen)g(\(2.1\),)g(when)h(one)f(considers)g(that)h
(the)f(elab)q(orator)h(has)g(to)66 1918 y(pro)q(duce)c(a)g(\(mo)q(di\014ed\))
e(abstract)i(syn)o(tax)f(tree)f(as)i(w)o(ell)e(as)i(an)g(en)o(vironmen)o(t.)
140 1978 y(Lo)q(oking)12 b(at)f(the)g(sk)o(eleton)e(of)j(the)e(Elab)q(orator)
j(for)e(the)f(Core)h(\(from)f(the)h(\014le)f Fu(Common/Ela)o(bD)o(ec.)o(sml)o
Fw(\))66 2039 y(w)o(e)16 b(see)g(that)h(it)f(is)g(parameterised)e(on)j(the)f
(ob)s(jects)g(of)g(the)g(static)g(seman)o(tics)f(of)h(the)g(Core:)p
66 2093 1890 6 v 66 2160 a Fu(functor)23 b(ElabDec\(str)o(uct)o(ure)f(IG:)i
(DEC_GRAMMAR)477 2221 y(structure)e(OG:)i(DEC_GRAMMAR)477 2281
y(structure)e(Environmen)o(ts)o(:)h(ENVIRONME)o(NTS)477 2341
y(structure)f(StatObject)o(:)g(STATOBJECT)477 2401 y(....)246
2461 y(\))j(:)g(ELABDEC)e(=)118 2522 y(struct)143 2582 y(....)118
2642 y(end;)p 66 2678 756 2 v 123 2708 a Fi(9)141 2723 y Fh(Con)o(texts)13
b(and)f(\(static\))h(en)o(vironmen)o(ts)f(are)h(de\014ned)g(in)f([11)o(,)g
(Figure)g(10,)g(page)g(17];)g(su\016ce)h(to)f(sa)o(y)g(that)h(a)f(static)66
2773 y(en)o(vironmen)o(t)k(con)o(tains)h(a)f(\(static\))i(v)n(ariable)d(en)o
(vironmen)o(t)h(whic)o(h)h(maps)e(v)n(alue)h(v)n(ariables)g(to)h(t)o(yp)q(e)g
(sc)o(hemes)g(and)66 2823 y(that)d(a)g(con)o(text)h(con)o(tains)e(a)h(static)
g(en)o(vironmen)o(t.)p eop
%%Page: 20 93
bop 66 50 a Fs(CHAPTER)17 b(2.)37 b(O)o(VER)-5 b(VIEW)15 b(OF)h(THE)g(KIT)914
b Fw(20)66 195 y(This)17 b(explains)e(the)h(signature)h(of)g(the)f(Core)g
(compiler)e(\(\014le:)20 b Fu(Compiler/CO)o(MPI)o(LE)p 1649
195 16 2 v 15 w(DEC.sml)p Fw(\):)p 66 261 1890 6 v 271 340
a Fu(signature)j(COMPILE_DE)o(C)f(=)323 400 y(sig)374 460 y(type)i(dec)374
521 y(type)g(CEnv)g(\(*)h(Compiler)e(env:)h(ident)g(->)h(lvar/prim.)d(*\))374
581 y(type)i(LambdaExp)374 701 y(val)h(compileDe)o(c:)d(CEnv)i(->)h(dec)g(->)
g(\(CEnv)e(*)j(\(LambdaEx)o(p)d(->)i(LambdaExp)o(\)\))323 761
y(end;)p 66 823 V 66 905 a Fw(The)64 b(compiler)c(itself)i(is)h(a)h(functor)f
(whic)o(h)f(matc)o(hes)g(the)h(ab)q(o)o(v)o(e)g(signature)66
965 y(\(\014le:)21 b Fu(Compiler/C)o(omp)o(il)o(eDe)o(c.s)o(ml)o
Fw(\))p 66 1031 V 66 1114 a Fu(functor)i(CompileDec\()o(...)o(.)143
1175 y(structure)g(Grammar:)f(DEC_GRAMMAR)143 1235 y(structure)h(Lvars:)g
(LVARS)143 1295 y(structure)g(LambdaExp)o(:)g(LAMBDA_EX)o(P)143
1355 y(structure)g(CompilerE)o(nv:)f(COMPILER_E)o(NV)143 1415
y(structure)h(MatchComp)o(ile)o(r:)f(MATCH_COMP)o(ILE)o(R)553
1475 y(....)118 1536 y(\):)j(COMPILE_D)o(EC)d(=)118 1596 y(struct)169
1656 y(....)169 1776 y(fun)i(compileAtex)o(p)f(env)h(atexp)g(=)220
1837 y(case)g(atexp)271 1897 y(of)h(SCONatexp\(_)o(,)e(SCon.INTE)o(GER)f(x\))
j(=>)g(INTEGER)e(x)297 1957 y(|)i(SCONatexp\(_)o(,)e(SCon.STRI)o(NG)f(x\))j
(=>)g(STRING)e(x)297 2017 y(|)i(SCONatexp\(_)o(,)e(SCon.REAL)f(x\))j(=>)g
(REAL)f(x)297 2077 y(|)h(LETatexp\(_,)d(dec,)i(exp\))g(=>)400
2138 y(let)451 2198 y(val)g(\(env1,)g(f\))h(=)g(compileDec)d(env)j(\(false,)e
(dec\))400 2258 y(in)451 2318 y(f\(compileE)o(xp)f(\(env)i(plus)g(env1\))g
(exp\))400 2378 y(end)169 2439 y(....)118 2499 y(end;)p 66
2560 V 66 2642 a Fw(Here)f(w)o(e)h(ha)o(v)o(e)f(sho)o(wn)h(the)g(compilation)
e(of)i Fu(let)f Fw(expressions,)i(whic)o(h)e(is)h(almost)f(trivial;)i(the)66
2703 y(b)q(o)q(olean)18 b Fu(false)c Fw(in)i(the)g(recursiv)o(e)f(call)g
(indicates)h(that)g Fu(dec)g Fw(is)g(not)g(at)h(top-lev)o(el.)140
2763 y(The)10 b(directory)g Fu(Compiler)e Fw(con)o(tains)j(a)g(functor,)h
Fu(Evaluation)7 b Fw(\(\014le:)18 b Fu(Compiler/E)o(va)o(lua)o(tio)o(n.s)o
(ml)66 2823 y Fw(whic)o(h)d(builds)h(the)f(Compiler-based)f(Ev)m(aluator)j
(using)f(a)g(large)f(n)o(um)o(b)q(er)f(of)i(functor)g(applications.)p
eop
%%Page: 19 94
bop 66 50 a Fs(CHAPTER)17 b(2.)37 b(O)o(VER)-5 b(VIEW)15 b(OF)h(THE)g(KIT)914
b Fw(19)220 195 y Fu(|)25 b(PRIM_APP)e(of)i(int)g(*)g(LambdaExp)d(\(*)j
(primitive)d(function)h(applicatio)o(n.)f(*\))220 255 y(|)j(VECTOR)75
b(of)25 b(LambdaExp)d(list)j(\(*)f(records/tup)o(les)o(.)f(*\))220
315 y(|)i(SELECT)75 b(of)25 b(int)g(*)g(LambdaExp)d(\(*)j(con/record)d
(indexing.)g(*\))220 376 y(|)j(SWITCH_I)e(of)i(int)g(Switch)e(\(*)i(switch)e
(on)i(integers.)e(*\))220 436 y(|)i(SWITCH_S)e(of)i(string)f(Switch)f(\(*)i
(...strings)d(*\))220 496 y(|)j(SWITCH_R)e(of)i(real)f(Switch)g(\(*)h
(...reals)d(*\))220 556 y(|)j(RAISE)101 b(of)25 b(LambdaExp)d(\(*)j(raise)f
(exception)e(*\))220 616 y(|)j(HANDLE)75 b(of)25 b(LambdaExp)d(*)k(LambdaExp)
c(\(*)j(exception)d(handling.)h(*\))220 677 y(|)i(REF)51 b(of)25
b(LambdaExp)d(\(*)j(ref\(expr\))d(*\))220 737 y(|)j(VOID)g(\(*)g(nil,)f(\(\))
h(etc.)f(*\))169 797 y(and)g('a)h(Switch)f(=)h(SWITCH)f(of)g({arg:)g
(LambdaExp,)246 857 y(selections)o(:)e(\('a,)j(LambdaExp)o(\))e(map,)246
917 y(wildcard:)f(LambdaExp)h(Option)66 978 y(\(*)i(mandatory)e(for)h(REAL)g
(or)h(STRING)f(switches.)e(*\))220 1038 y(})169 1098 y(....)169
1158 y(type)i(StringTree)169 1218 y(val)g(layoutLambd)o(aEx)o(p:)e(LambdaExp)
h(->)h(StringTree)118 1279 y(end;)p 66 1339 1890 6 v 140 1420
a Fw(Notice)15 b(that)h(this)g(language)i(neither)d(has)i(t)o(yp)q(e)f
(declarations)g(nor)h(t)o(yp)q(e)e(annotations)j(on)f(v)m(ari-)66
1480 y(ables.)25 b(\(A)17 b(v)m(ariable)g(in)g(the)g(lam)o(b)q(da)g(language)
h(is)f(called)f(an)i Fu(lvar)p Fw(,)e(whic)o(h)h(is)g(short)h(for)g(\\lam)o
(b)q(da)66 1540 y(v)m(ariable".\))k(Also)16 b(note)g(that)h(this)f(language)h
(do)q(es)g(not)g(ha)o(v)o(e)e(pattern)i(matc)o(hing.)140 1600
y(A)22 b(signi\014can)o(t)h(part)g(of)g(the)g(Compiler)e(is)i(the)f
Fs(Matc)o(h)h(Compiler)p Fw(.)1437 1582 y Fm(8)1496 1600 y
Fw(The)g(Matc)o(h)f(Compiler)66 1661 y(compiles)9 b(a)j(matc)o(h)d(in)o(to)i
(a)g Fs(decision)f(tree)p Fw(,)h(whic)o(h)f(is)h(subsequen)o(tly)f
(transformed)g(in)o(to)h(an)h(expression)66 1721 y(in)k(the)g(lam)o(b)q(da)g
(language.)140 1781 y(The)j(Matc)o(h)g(Compiler)e(is)j(non-trivial,)f(and)h
(will)e(not)i(b)q(e)g(describ)q(ed)f(here.)30 b(The)19 b(rest)h(of)f(the)66
1841 y(Compiler)d(is)h(more)f(straigh)o(tforw)o(ard.)26 b(One)17
b(minor)f(complication)f(is)j(that)f(the)h(lam)o(b)q(da)e(language)66
1901 y(do)q(es)h(not)f(ha)o(v)o(e)e(declarations)i(as)g(a)g(phrase)g(class.)
21 b(In)o(tutiv)o(ely)l(,)12 b(one)k(migh)o(t)e(exp)q(ect)g(that)i(a)g
(declara-)66 1962 y(tion)65 b Fk(de)n(c)17 b Fp(\021)c Fu(val)g
Fk(var)515 1969 y Fm(1)549 1962 y Fu(=)g Fk(exp)661 1973 y
Fm(1)695 1962 y Fu(and)f Fp(\001)s(\001)s(\001)h Fu(and)g Fk(var)1010
1969 y Fg(n)1048 1962 y Fu(=)g Fk(exp)1160 1973 y Fg(n)1248
1962 y Fw(w)o(ould)j(b)q(e)f(compiled)f(in)o(to)h(a)h(lam)o(b)q(da)66
2022 y(term)21 b(of)h(the)f(form)g([\()p Fk(lvar)578 2029 y
Fm(1)598 2022 y Fv(;)8 b(e)643 2029 y Fm(1)662 2022 y Fw(\))p
Fv(;)g Fw(.)g(.)g(.)g(\()p Fk(lvar)873 2029 y Fg(n)897 2022
y Fv(;)g(e)942 2029 y Fg(n)965 2022 y Fw(\)],)22 b(where)g
Fk(lvar)1266 2029 y Fm(1)1286 2022 y Fv(;)8 b Fw(.)g(.)g(.)f
Fk(lvar)1459 2029 y Fg(n)1504 2022 y Fw(are)22 b(lam)o(b)q(da)f(v)m(ariables)
66 2082 y(corresp)q(onding)16 b(to)f Fk(var)509 2089 y Fm(1)529
2082 y Fv(;)8 b Fw(.)g(.)g(.)f Fv(;)h Fk(var)711 2089 y Fg(n)749
2082 y Fw(and)16 b Fv(e)866 2089 y Fm(1)885 2082 y Fv(;)8 b
Fw(.)g(.)g(.)f Fv(;)h(e)1017 2089 y Fg(n)1055 2082 y Fw(are)15
b(the)f(results)g(of)h(compiling)e Fk(exp)1717 2094 y Fm(1)1737
2082 y Fv(;)8 b Fw(.)g(.)g(.)g Fv(;)g Fk(exp)1919 2094 y Fg(n)1943
2082 y Fw(.)66 2142 y(Instead,)16 b(the)f(compiler)d(actually)j(compiles)e
Fk(de)n(c)19 b Fw(in)o(to)14 b(a)i(pair)f(\()p Fk(CEnv)6 b
Fv(;)i(f)d Fw(\),)16 b(where)f Fk(CEnv)21 b Fw(\(short)16 b(for)66
2202 y(\\compile-time)g(en)o(vironmen)o(t"\))h(w)o(ould)i(b)q(e)h(the)f
(mapping)g Fp(f)p Fk(var)1315 2209 y Fm(1)1354 2202 y Fp(7!)g
Fk(lvar)1508 2209 y Fm(1)1528 2202 y Fv(;)8 b Fw(.)g(.)g(.)f
Fv(;)h Fk(var)1710 2209 y Fg(n)1753 2202 y Fp(7!)19 b Fk(lvar)1908
2209 y Fg(n)1931 2202 y Fp(g)66 2263 y Fw(in)c(our)g(example,)e(and)i
Fv(f)20 b Fw(is)15 b(an)g(ML)g(function)g Fv(f)20 b Fw(of)15
b(t)o(yp)q(e)g(Lam)o(b)q(daExp)5 b Fp(!)h Fw(Lam)o(b)q(daExp,)14
b(where)h(for)66 2323 y(all)h Fv(e)157 2305 y Fl(0)168 2323
y Fw(,)g Fv(f)5 b Fw(\()p Fv(e)269 2305 y Fl(0)281 2323 y Fw(\))16
b(in)g(our)h(example)d(ev)m(aluates)i(to)599 2427 y Fu(FIX)o
Fw(\([\()p Fk(lvar)813 2434 y Fm(1)832 2427 y Fv(;)8 b Fw(.)g(.)g(.)g
Fv(;)g Fk(lvar)1027 2434 y Fg(n)1051 2427 y Fw(\))p Fv(;)g
Fw([)p Fv(e)1129 2434 y Fm(1)1148 2427 y Fv(;)g Fw(.)g(.)g(.)f
Fv(;)h(e)1280 2434 y Fg(n)1303 2427 y Fw(])p Fv(;)g(e)1362
2406 y Fl(0)1373 2427 y Fw(\)\)])66 2531 y(whic)o(h)16 b(in)g(more)f(con)o(v)
o(en)o(tional)g(notation)i(w)o(ould)f(b)q(e)g(written)634 2636
y Fu(let)f Fk(lvar)813 2643 y Fm(1)846 2636 y Fw(=)f Fv(e)921
2643 y Fm(1)940 2636 y Fv(;)8 b Fw(.)g(.)g(.)g Fv(;)g Fk(lvar)1135
2643 y Fg(n)1173 2636 y Fw(=)14 b Fv(e)1248 2643 y Fg(n)1287
2636 y Fu(in)h Fv(e)1377 2617 y Fl(0)p 66 2678 756 2 v 123
2708 a Fi(8)141 2723 y Fh(A)20 b Fe(matc)o(h)e Fh(in)h(ML)g(is)g(a)g
(sequence)j(of)d Fe(rules)p Fh(,)h(eac)o(h)g(rule)g(ha)o(ving)e(a)h
Fe(pattern)h Fh(on)g(the)g(left-hand)e(side)i(and)f(an)66 2773
y(expression)j(on)e(the)h(righ)o(t-hand)f(side.)38 b(Th)o(us)20
b(the)h(Matc)o(h)g(Compiler)d(do)q(es)j(what)g(is)f(often)g(referred)i(to)f
(in)f(the)66 2823 y(literature)15 b(as)f Fe(pattern)h(compilation)p
Fh(.)p eop
%%Page: 18 95
bop 66 50 a Fs(CHAPTER)17 b(2.)32 b(O)o(VER)-5 b(VIEW)14 b(OF)j(THE)f(KIT)919
b Fw(18)66 195 y Fu(signature)23 b(EVALUATIO)o(N)g(=)118 255
y(sig)169 315 y(structure)f(DynamicBasi)o(s:)g(DYNAMIC_BA)o(SIS)169
436 y(structure)g(EvalTopdec:)g(EVALTOPDEC)220 496 y(sharing)h(type)h
(EvalTopdec.)o(Dyn)o(ami)o(cB)o(asi)o(s)f(=)i(DynamicBas)o(is.)o(Ba)o(sis)169
616 y(structure)d(ValPrint:)h(VAL_PRINT)220 677 y(sharing)g(type)h
(ValPrint.Dy)o(nam)o(icB)o(as)o(is)e(=)k(DynamicBa)o(sis)o(.Ba)o(si)o(s)118
737 y(end;)p 66 797 1890 6 v 140 879 a Fw(The)20 b(functor)h
Fu(Evaluation)c Fw(no)o(w)k(builds)f(the)h(ev)m(aluator)g(using)g(a)g(great)g
(n)o(um)o(b)q(er)e(of)i(functor)66 939 y(applications)i(to)h(com)o(bine)c
(all)j(the)f(mo)q(dules)g(that)i(are)f(sp)q(eci\014c)f(to)h(ev)m(aluation,)h
(including)e(the)66 999 y(Core)17 b(ev)m(aluator)g(and)f(the)g(Mo)q(dules)h
(ev)m(aluator)g(\(see)e(\014le)h Fu(Interprete)o(r/E)o(va)o(lua)o(tio)o(n.s)o
(ml)o Fw(\).)66 1143 y Fr(2.2.4)70 b(Compiler)66 1235 y Fw(The)17
b(directory)f Fu(Compiler)e Fw(con)o(tains)i(those)h(mo)q(dules)f(that)h(are)
g(sp)q(eci\014c)f(for)h(the)f(Compiler-based)66 1295 y(Ev)m(aluator.)23
b(A)o(t)15 b(presen)o(t,)g(the)h(Compiler)f(only)h(w)o(orks)g(for)h(the)f
(Core)g(language.)140 1355 y(The)h(In)o(terpreter-based)g(Ev)m(aluator)h(and)
g(the)g(Compiler-based)e(Ev)m(aluator)i(ha)o(v)o(e)f(exactly)f(the)66
1416 y(same)g(in)o(terface,)g(namely)f(the)h(signature)i Fu(EVALUATIO)o(N)c
Fw(sho)o(wn)j(in)g(the)g(previous)f(section.)23 b(This)17 b(is)66
1476 y(wh)o(y)f(one)h(can)f(replace)g(one)g(b)o(y)g(the)g(other)g(fairly)f
(easily)l(.)140 1536 y(The)f(Compiler)f(translates)i(\(Core\))g(declarations)
f(in)o(to)h(an)g(in)o(termediate)c(language,)16 b(called)d(the)66
1596 y Fs(lam)o(b)q(da)21 b(langauge)p Fw(.)38 b(The)21 b(lam)o(b)q(da)g
(language)i(is)e(a)h(simple)d(call-b)o(y-v)m(alue)h(functional)i(language,)66
1656 y(with)16 b(record)g(construction)g(and)h(de-construction,)f(the)f
(abilit)o(y)g(to)h(switc)o(h)g(on)g(in)o(tegers)f(and)i(other)66
1717 y(constan)o(ts)e(\(constructors)g(ha)o(v)o(e)e(b)q(een)h(compiled)e(in)o
(to)h(in)o(tegers\),)h(exceptions)f(and)h(side-e\013ects.)20
b(Its)66 1777 y(full)15 b(sp)q(eci\014cation)g(is)g(giv)o(en)f(b)q(elo)o(w,)h
(not)g(that)h(w)o(e)e(will)g(explain)h(all)f(the)h(details)g(here,)f(but)i(w)
o(e)e(w)o(an)o(t)66 1837 y(to)i(giv)o(e)f(an)g(impression)f(of)i(ho)o(w)g
(small)e(the)h(language)h(is)f(\(\014le:)20 b Fu(Compiler/LA)o(MBD)o(A)p
1655 1837 16 2 v 15 w(EXP.sml)p Fw(\).)f(\(A)66 1897 y(more)c(detailed)h
(explanation)g(of)g(the)g(lam)o(b)q(da)g(language)h(is)f(giv)o(en)f(in)h
(Section)g(6.5.\))p 66 1962 1890 6 v 66 2040 a Fu(signature)23
b(LAMBDA_EX)o(P)g(=)118 2101 y(sig)169 2161 y(type)h(lvar)169
2221 y(type)g(\(''a,)g('b\))g(map)169 2341 y(datatype)f(LambdaExp)f(=)271
2402 y(VAR)153 b(of)25 b(lvar)f(\(*)h(lambda)f(variables)o(.)f(*\))220
2462 y(|)i(INTEGER)49 b(of)25 b(int)g(\(*)g(constants)o(..)o(.)e(*\))220
2522 y(|)i(STRING)75 b(of)25 b(string)220 2582 y(|)g(REAL)127
b(of)25 b(real)220 2642 y(|)g(FN)179 b(of)25 b(lvar)f(*)i(LambdaExp)c(\(*)j
(function-)o(ter)o(ms.)d(*\))220 2703 y(|)j(FIX)153 b(of)25
b(lvar)f(list)g(*)i(LambdaExp)c(list)i(*)h(LambdaExp)1092 2763
y(\(*)g(mutual)e(recursive)f(fns.)j(*\))220 2823 y(|)g(APP)153
b(of)25 b(LambdaExp)d(*)k(LambdaExp)c(\(*)j(function)e(applicati)o(on.)f(*\))
p eop
%%Page: 17 96
bop 66 50 a Fs(CHAPTER)17 b(2.)32 b(O)o(VER)-5 b(VIEW)14 b(OF)j(THE)f(KIT)919
b Fw(17)374 255 y Fu(val)25 b(FAIL_USE:)d(unit)i(->)h(unit)374
376 y(type)f(StringTree)374 436 y(val)h(layoutDyn)o(ami)o(cB)o(asi)o(s:)d
(DynamicBasi)o(s)g(->)j(StringTree)323 496 y(end;)p 66 563
1890 6 v 66 650 a Fw(whic)o(h)20 b(is)g(a)g(reasonable)g(signature,)h
(considering)f(that)h(the)e(De\014nition[11,)i(Section)e(7,)i(page)g(62])66
710 y(giv)o(es)16 b(rules)g(for)g(inferring)g(statemen)o(ts)e(of)j(the)f
(form)p 793 776 438 2 v 793 850 2 75 v 807 825 a Fv(B)g Fp(`)f
Fk(top)n(de)n(c)h Fp(\))e Fv(B)1156 807 y Fl(0)1167 825 y Fv(=p)p
1228 850 V 793 852 438 2 v 66 943 a Fw(\(The)i(signature)h(also)f(corresp)q
(onds)i(nicely)c(to)i(the)g(lo)o(w)o(er)f(third)h(of)g(Figure)g(2.1.\))21
b(Here)15 b(and)h(ev)o(ery-)66 1003 y(where)i(else,)g(names)f(with)h
Fu(layout)f Fw(and)h Fu(StringTree)d Fw(ha)o(v)o(e)j(to)g(do)h(with)f(prett)o
(y)g(prin)o(ting)f(|)h(the)66 1064 y(Kit)f(has)h(a)g(prett)o(y)e(prin)o(ter)h
(whic)o(h)f(it)h(uses)h(in)f(almost)f(ev)o(ery)g(mo)q(dule.)1406
1046 y Fm(7)1449 1064 y Fw(An)o(y)g(exception)g(raised)i(in)66
1124 y(the)f(ev)m(aluation)g(whic)o(h)f(propagates)i(to)f(the)f(top)i(lev)o
(el)c(causes)j(the)g(meta-exception)d Fu(UNCAUGHT)g Fw(to)66
1184 y(b)q(e)20 b(raised)f(with)h(a)f(pac)o(k)o(et.)30 b(The)20
b(functions)f Fu(RE_RAISE)e Fw(and)j Fu(FAIL_USE)c Fw(are)k(part)f(of)h(the)f
(imple-)66 1244 y(men)o(tation)c(of)i(a)f Fu(use)f Fw(function)h(\(see)g
(Chapter)h(7\).)140 1304 y(The)g(ev)m(aluator)g(for)g(the)g(Mo)q(dules)g(is)g
(a)h(functor)f Fu(EvalTopdec)o Fw(,)d(with)j(the)g(ab)q(o)o(v)o(e)g(result)f
(signa-)66 1365 y(ture)g Fu(EVALTOPDEC)o Fw(.)c Fu(EvalTopdec)h
Fw(is)i(parameterised)f(on,)i(among)g(other)f(things,)h(a)g(Core)g(language)
66 1425 y(ev)m(aluator;)h(here)e(is)h(the)g(sk)o(eleton)g(of)g
Fu(EvalTopdec)d Fw(\(\014le:)20 b Fu(Interpreter)o(/Ev)o(al)o(Top)o(dec)o(.s)
o(ml)p Fw(\))p 66 1493 1890 6 v 66 1581 a Fu(functor)j(EvalTopdec\()o(str)o
(uct)o(ure)f(Grammar:)g(TOPDEC_GRAM)o(MAR)143 1642 y(structure)h(ModuleDyn)o
(Obj)o(ect)o(:)f(MODULE_DYNO)o(BJE)o(CT)143 1702 y(structure)h(CoreDynOb)o
(jec)o(t:)f(CORE_DYNOB)o(JEC)o(T)143 1762 y(structure)h(EvalDec:)f(EVALDEC)
553 1822 y(....)118 1882 y(\):)j(EVALTOPDE)o(C)e(=)118 1943
y(struct)143 2003 y(....)118 2063 y(end;)p 66 2130 V 140 2214
a Fw(Correp)q(onding)d(to)f(the)g(places)g(where)f(the)h(Mo)q(dules)g
(language)h(is)f(built)f(on)h(top)h(of)f(the)g(Core)66 2274
y(language,)24 b(the)e(Mo)q(dule)g(ev)m(aluator)g(calls)f(the)h(Core)g(ev)m
(aluator)h(as)f(a)g(\\subroutine".)39 b(Ho)o(w)o(ev)o(er,)66
2335 y(b)q(ecause)12 b(the)e(signature)i Fu(EVALDEC)c Fw(giv)o(es)i(a)i(v)o
(ery)e(limited)e(view)i(of)h(the)g(Core)g(ev)m(aluator,)h(the)f(Mo)q(dules)66
2395 y(ev)m(aluator)17 b(and)g(the)f(Core)g(ev)m(aluator)h(are)f(almost)g
(completely)d(separated.)140 2455 y(The)18 b(t)o(w)o(o)f(ev)m(aluators)i
(\(the)f(one)g(for)g(the)f(Core)i(and)f(the)g(one)g(for)g(Mo)q(dules\))g(are)
g(com)o(bined)e(to)66 2515 y(form)g(the)g(In)o(terpreter-based)f(Ev)m
(aluator,)i(whose)g(signature)f(is)p 66 2581 V 66 2615 756
2 v 123 2645 a Fi(7)141 2660 y Fh(There)f(is)e(also)g(a)h(mo)q(dule)e
Ff(Report)g Fh(for)h(assem)o(bling)f(and)i(inden)o(ting)f(lines)g(of)g(text.)
19 b(This)13 b(is)h(sometimes)e(instead)66 2710 y(of)i(the)g(prett)o(y)h
(prin)o(ter.)p eop
%%Page: 16 97
bop 66 50 a Fs(CHAPTER)17 b(2.)32 b(O)o(VER)-5 b(VIEW)14 b(OF)j(THE)f(KIT)919
b Fw(16)169 195 y Fu(fun)24 b(evalAtexp\(E)o(,)f(atexp\))g(=)i(....)g
(C.E_plus_)o(E\(.)o(..)o(.\))169 315 y(....)118 436 y(end;)p
66 500 1890 6 v 140 583 a Fw(Because)20 b Fu(EvalDec)f Fw(is)i(a)h(functor,)g
(all)f(it)g(kno)o(ws)g(ab)q(out)i(the)e(dynamic)e(ob)s(jects)i(of)h(the)f
(Core)66 643 y(language)f(is)e(what)h(the)g(signature)g Fu(CORE)p
855 643 16 2 v 17 w(DYNOBJECT)c Fw(sp)q(eci\014es.)27 b(If)18
b(one)h(insp)q(ects)f(this)h(signature)66 703 y(\(lo)q(ok)e(in)e(the)h
(\014le)f Fu(Interpret)o(er/)o(COR)o(E)p 825 703 V 15 w(DYNOBJECT.s)o(ml)p
Fw(\))o(,)e(one)j(sees)g(that)g(it)f(just)h(sp)q(eci\014es)f(t)o(yp)q(es)66
764 y(and)g(op)q(erations)h(on)f(those)f(t)o(yp)q(es)g(and)h(do)q(es)g(not)g
(con)o(tain)f(an)o(y)g(external)g(sharing)h(constrain)o(ts)f(with)66
824 y(sp)q(eci\014c)i(t)o(yp)q(es)g(or)h(structures.)140 884
y(As)i(w)o(e)g(see)g(from)g(the)g(program)g(excerpt)g(ab)q(o)o(v)o(e,)g(the)h
(\\in)o(terface")f(to)g(the)h(ev)m(aluator)g(for)f(the)66 944
y(Core)e(is)f(the)g(signature)h Fu(EVALDEC)c Fw(\(\014le:)21
b Fu(Interprete)o(r/)o(EVA)o(LDE)o(C.)o(sml)o Fw(\))p 66 1011
1890 6 v 271 1093 a Fu(signature)i(EVALDEC)g(=)323 1153 y(sig)374
1213 y(type)h(dec)374 1273 y(type)g(Env)374 1394 y(exception)e(UNCAUGHT)h(of)
i(string)374 1454 y(val)g(eval:)e(Env)i(*)g(dec)g(->)g(Env)323
1514 y(end;)p 66 1578 V 66 1664 a Fw(whic)o(h)16 b(is)g(a)h(reasonable)f
(signature,)g(considering)g(that)h(the)f(dynamic)e(seman)o(tics)h(for)h(the)g
(Core[11)q(,)66 1724 y(Section)g(6,)g(page)h(53])g(allo)o(ws)f(one)g(to)h
(infer)e(statemen)o(ts)g(of)i(the)f(form)p 825 1790 373 2 v
825 1864 2 75 v 839 1839 a Fv(E)h Fp(`)d Fk(de)n(c)j Fp(\))d
Fv(E)1123 1821 y Fl(0)1135 1839 y Fv(=p)p 1196 1864 V 825 1866
373 2 v 140 1952 a Fw(So)j(m)o(uc)o(h)e(for)j(the)f(dynamic)e(seman)o(tics)h
(of)h(the)g(Core.)25 b(The)17 b(dynamic)e(seman)o(tics)h(of)h(Mo)q(dules)66
2012 y(is)h(impleme)o(n)o(ted)d(along)k(the)f(same)f(lines.)26
b(This)18 b(time,)e(let)h(us)i(lo)q(ok)f(at)h(the)f(co)q(de)g(top-do)o(wn.)28
b(The)66 2073 y(in)o(terface)15 b(to)i(the)f(mo)q(dules)f(ev)m(aluator)i(is)f
(\(\014le:)k Fu(Common/EVAL)o(TOP)o(DEC)o(.s)o(ml)p Fw(\))p
66 2139 1890 6 v 271 2221 a Fu(signature)j(EVALTOPDEC)f(=)323
2281 y(sig)374 2341 y(type)i(topdec)374 2402 y(type)g(DynamicBasi)o(s)374
2462 y(type)g(Pack)374 2582 y(val)h(RE_RAISE:)d(Pack)i(->)h(unit)374
2642 y(exception)d(UNCAUGHT)h(of)i(Pack)374 2703 y(val)g(pr_Pack:)d(Pack)i
(->)h(string)374 2823 y(val)g(eval:)e(DynamicBasi)o(s)g(*)i(topdec)e(->)i
(DynamicBasi)o(s)p eop
%%Page: 15 98
bop 66 50 a Fs(CHAPTER)17 b(2.)32 b(O)o(VER)-5 b(VIEW)14 b(OF)j(THE)f(KIT)919
b Fw(15)323 195 y Fu(....)297 315 y(|)25 b(LETatexp\(_,)d(dec,)i(exp\))g(=>)
400 376 y(let)451 436 y(val)g(E')h(=)h(evalDec\(E)o(,)d(dec\))400
496 y(in)451 556 y(evalExp\(C.)o(E_p)o(lu)o(s_E)o(\(E,)f(E'\),)i(exp\))400
616 y(end)p 66 676 1890 6 v 140 761 a Fw(In)17 b(man)o(y)f(w)o(a)o(ys,)i(the)
f(Kit)g(is)h(more)e(mo)q(dularised)h(than)h(the)g(De\014nition.)25
b(This)18 b(is)f(particularly)66 821 y(true)d(of)g(the)f(handling)h(of)g
(seman)o(tic)e(ob)s(jects,)h(suc)o(h)h(as)g(en)o(vironmen)o(ts)d(and)j(v)m
(alues.)21 b(The)14 b(De\014nition)66 881 y(de\014nes)g(these)f(concretely)g
(in)g(terms)f(of)i(set)g(equations.)20 b(F)l(or)14 b(example,)e(v)m(ariable)h
(en)o(vironmen)o(ts)e(are)66 941 y(\014nite)16 b(maps)f(from)g(v)m(ariables)h
(to)g(v)m(alues[11)q(,)f(Figure)h(13,)g(page)h(47].)k(The)16
b(Kit,)g(on)g(the)g(other)g(hand,)66 1001 y(uses)23 b(data)g(abstraction)g
(extensiv)o(ely)d(to)j(hide)f(the)g(implem)o(e)o(n)o(tation)e(of)j(the)f
(seman)o(tic)e(ob)s(jects.)66 1062 y(Indeed,)c(the)g(Ev)m(aluator)h(kno)o(ws)
g(that)g(there)f(are)g(suc)o(h)h(things)f(as)i(en)o(vironmen)o(ts)13
b(and)18 b(v)m(alues,)e(and)66 1122 y(certain)i(op)q(erations)i(on)f(these)f
(\(suc)o(h)g(as)h Fu(E)p 890 1122 16 2 v 18 w(plus)p 1012 1122
V 17 w(E)f Fw(in)g(the)g(ab)q(o)o(v)o(e)h(example\))d(but)i(it)g(has)i(no)e
(idea)66 1182 y(ab)q(out)e(ho)o(w)f(they)f(are)h(implem)o(en)n(ted.)j(The)c
(w)o(a)o(y)g(this)h(abstraction)g(is)f(ac)o(hiev)o(ed)f(is)h(b)o(y)h(hea)o
(vy)e(use)i(of)66 1242 y(functors.)24 b(Hence,)16 b(the)h(elab)q(orator)h(is)
e(a)i(functor)f(whic)o(h)f(is)h(parameterised)e(on)j(all)f(the)f(structures)
66 1302 y(it)i(refers)g(to,)g(amongst)h(whic)o(h)e(is)h(also)h(the)f
(structure)g(whic)o(h)f(impleme)o(n)o(ts)e(the)j(seman)o(tic)f(ob)s(jects)66
1363 y(in)f(the)g(dynamic)f(seman)o(tics)f(of)j(the)f(Core:)879
1345 y Fm(6)p 66 1428 1890 6 v 66 1517 a Fu(functor)23 b(EvalDec\(str)o(uct)o
(ure)f(Grammar)h(:)i(DEC_GRAMMAR)477 1577 y(structure)d(BasicValue)o(:)g
(BASIC_VALUE)477 1637 y(structure)g(SpecialVal)o(ue)o(:)h(SPECIAL_V)o(ALU)o
(E)477 1697 y(structure)f(CoreDynObj)o(ec)o(t)h(:)i(CORE_DYNOB)o(JEC)o(T)477
1757 y(structure)d(ModuleDynO)o(bj)o(ect)g(:)j(MODULE_DYNO)o(BJE)o(CT)528
1818 y(sharing)e(type)h(ModuleDynO)o(bje)o(ct.)o(En)o(v)f(=)i(CoreDynObj)o
(ect)o(.E)o(nv)477 1878 y(structure)d(PP)j(:)g(PRETTYPRIN)o(T)528
1938 y(sharing)e(type)h(CoreDynObj)o(ect)o(.St)o(ri)o(ngT)o(ree)e(=)j
(PP.StringT)o(ree)477 1998 y(structure)d(Crash)i(:)h(CRASH)477
2058 y(....)246 2118 y(\):)g(EVALDEC)e(=)118 2179 y(struct)169
2239 y(type)h(dec)h(=)g(Grammar.de)o(c)169 2299 y(type)f(Env)h(=)g
(CoreDynObj)o(ect)o(.E)o(nv)169 2359 y(type)f(Val)h(=)g(CoreDynObj)o(ect)o
(.V)o(al)169 2480 y(structure)d(C)k(=)f(CoreDynObj)o(ec)o(t)169
2600 y(....)p 66 2694 756 2 v 123 2725 a Fi(6)141 2740 y Fh(F)m(or)12
b(brevit)o(y)m(,)f(w)o(e)h(ha)o(v)o(e)g(omitted)e(some)h(of)h(the)g
(parameters)g(to)g Ff(EvalDec)e Fh(and)i(most)f(of)g(the)h(sharing)g
(constrain)o(ts.)66 2790 y(When)f(presen)o(ting)h(excerpts)h(of)d(functors,)h
(w)o(e)g(shall)f(often)h(omit)e(some)h(of)g(the)h(parameters)g(and)f(sharing)
h(constrain)o(ts.)p eop
%%Page: 14 99
bop 66 50 a Fs(CHAPTER)17 b(2.)32 b(O)o(VER)-5 b(VIEW)14 b(OF)j(THE)f(KIT)919
b Fw(14)66 195 y(not)19 b(during)f(parsing.)26 b(Notice)17
b(that)h(it)f(is)h(p)q(ossible)g(to)g(use)g(the)f Fu(atexp)f
Fw(datat)o(yp)q(e)i(to)g(describ)q(e)f(the)66 255 y(abstract)22
b(syn)o(tax)f(tree)g(that)g(con)o(tains)g(resolv)o(ed)f(iden)o(ti\014ers)g
(simply)f(b)o(y)i(letting)f(the)h(implem)o(en-)66 315 y(tation)g(of)f
Fu(longid)d Fw(mak)o(e)h(the)h(distinction)g(b)q(et)o(w)o(een)g(the)h(three)f
(kinds)g(of)h(iden)o(ti\014ers.)30 b(Th)o(us)20 b(the)66 376
y(Elab)q(orator)j(accepts)d(as)h(input)g(trees)f(where)g Fu(longid)e
Fw(is)j(a)g(t)o(yp)q(e)f(of)h(unresolv)o(ed)e(iden)o(ti\014ers)h(and)66
436 y(pro)q(duces)d(trees)f(where)g Fu(longid)e Fw(is)i(a)h(t)o(yp)q(e)e(of)i
(resolv)o(ed)e(iden)o(ti\014ers.)66 580 y Fr(2.2.3)70 b(The)23
b(In)n(terpreter)66 672 y Fw(The)17 b(directory)f Fu(Interpret)o(er)d
Fw(con)o(tains)k(the)f(In)o(terpreter-based)g(Ev)m(aluator.)23
b(The)17 b(In)o(terpreter)d(is)66 733 y(split)20 b(in)f(t)o(w)o(o,)h(one)g
(in)o(terpreter)e(for)i(the)f(Core)h(and)g(one)g(in)o(terpreter)e(for)i(Mo)q
(dules.)32 b(The)20 b(former)66 793 y(is)f(a)h(direct)d(impleme)o(n)o(tation)
f(of)k(the)e(dynamic)f(seman)o(tics)h(of)h(Core,)g(as)h(de\014ned)f(in)f([11)
q(,)h(Section)66 853 y(6],)g(while)f(the)h(latter)f(is)g(a)i(direct)d
(impleme)o(n)o(tation)f(of)j(the)g(dynamic)e(seman)o(tics)f(of)k(Mo)q(dules,)
f(as)66 913 y(de\014ned)d(in)g([11)q(,)f(Section)h(7].)140
973 y(Lo)q(oking)g(\014rst)f(at)h(the)e(Core)i(In)o(terpreter,)d(let)h(us)h
(con)o(tin)o(ue)f(our)h(trace)g(of)g(the)g(execution)f(of)h
Fu(let)66 1034 y Fw(expressions.)21 b(Rule)12 b(108)i(in)f(the)g
(De\014nition)g(\(page)h(51\))g(de\014nes)f(the)g(ev)m(aluation)h(of)f
Fu(let)f Fw(expressions)66 1094 y(as)17 b(follo)o(ws:)623 1134
y Fv(E)g Fp(`)d Fk(de)n(c)j Fp(\))d Fv(E)907 1116 y Fl(0)1016
1134 y Fv(E)g Fw(+)d Fv(E)1154 1116 y Fl(0)1180 1134 y Fp(`)j
Fk(exp)k Fp(\))13 b Fv(v)p 623 1157 777 2 v 708 1202 a(E)k
Fp(`)d Fu(let)h Fk(de)n(c)i Fu(in)e Fk(exp)i Fu(end)c Fp(\))g
Fv(v)66 1282 y Fw(Here)e Fv(E)k Fw(and)d Fv(E)357 1264 y Fl(0)381
1282 y Fw(are)g(dynamic)e(en)o(vironmen)o(ts)936 1264 y Fm(4)965
1282 y Fw(and)i(the)g(rule)f(can)h(b)q(e)g(read)g(as)h(follo)o(ws:)19
b(if)11 b(the)h(decla-)66 1342 y(ration)g Fk(de)n(c)j Fw(ev)m(aluates)c(to)h
Fv(E)586 1324 y Fl(0)609 1342 y Fw(and)g(the)f(b)q(o)q(dy)l(,)i
Fk(exp)s Fw(,)f(of)g(the)f Fu(let)f Fw(expression)h(ev)m(aluation)h(to)g
Fv(v)g Fw(in)f Fv(E)t Fw(+)q Fv(E)1944 1324 y Fl(0)66 1402
y Fw(\(whic)o(h)19 b(means)f Fv(E)k Fw(extended)c(with)h(the)g(bindings)g
(declared)f(b)o(y)h Fk(de)n(c)s Fw(\),)g(then)g Fu(let)c Fk(de)n(c)i
Fu(in)e Fk(exp)i Fu(end)66 1463 y Fw(ev)m(aluates)g(to)f Fv(v)i
Fw(in)e Fv(E)s Fw(.)140 1523 y(The)26 b(piece)f(of)h(the)g(Kit)g(that)g
(corresp)q(onds)i(to)e(this)g(inference)f(rule)g(is)h(found)h(in)f(the)g
(\014le)66 1583 y Fu(Interpreter)o(/Ev)o(alD)o(ec)o(.sm)o(l)p
Fw(.)k(Notice)20 b(that)g(rule)g(108)h(o)q(ccurs)g(in)f(a)h(section)f(for)g
(inferring)g(sen-)66 1643 y(tences)c(of)h(the)f(form)p 816
1654 391 2 v 816 1728 2 75 v 830 1703 a Fv(E)h Fp(`)d Fk(atexp)k
Fp(\))13 b Fv(v)r(=p)p 1205 1728 V 816 1730 391 2 v 66 1795
a Fw(where)23 b Fv(v)h Fw(ranges)g(o)o(v)o(er)e(v)m(alues,)i(and)f
Fv(p)g Fw(ranges)h(o)o(v)o(er)e(exception)f(pac)o(k)o(ets.)40
b(The)23 b(corresp)q(onding)66 1855 y(function)16 b(in)g(the)g(ev)m(aluator)h
(is)f(called)f Fu(evalAtexp)e Fw(and)k(it)f(has)h(the)f(t)o(yp)q(e:)1468
1837 y Fm(5)563 1964 y Fu(val)24 b(evalAtexp)f(:)50 b(Env)25
b(*)g(atexp)f(->)h(Val)66 2073 y Fw(The)f(b)q(o)q(dy)g(of)f
Fu(evalAtexp)d Fw(is)j(faithful)g(to)h(the)f(inference)e(rules)i(righ)o(t)g
(do)o(wn)g(to)h(the)f(c)o(hoice)f(of)66 2133 y(v)m(ariable)17
b(names)f(\(ev)o(en)g(though)j(this)e(o)q(ccationally)f(con\015icts)h(with)g
(the)g(general)g(con)o(v)o(en)o(tion)f(that)66 2193 y(v)m(alue)g(v)m
(ariables)h(should)f(not)h(start)g(with)f(a)h(capital)e(letter\):)p
66 2261 1890 6 v 169 2373 a Fu(fun)24 b(evalAtexp\(E)o(,)f(atexp\))g(=)220
2434 y(case)h(atexp)g(of)p 66 2478 756 2 v 123 2509 a Fi(4)141
2524 y Fh(The)c(de\014nition)f(of)g(dynamic)f(en)o(vironmen)o(ts)g(is)i
(found)f(in)g([11)o(,)h(Figure)f(13,)h(page)g(47];)g(su\016ce)h(to)e(sa)o(y)g
(that)66 2574 y(an)g(en)o(vironmen)o(t)f(con)o(tains)h(a)f
Fe(v)n(ariable)g(en)o(vironmen)o(t)p Fh(,)g(whic)o(h)h(maps)f(v)n(alue)g(v)n
(ariables)g(to)h(v)n(alues)f(and)h(that)g(this)66 2624 y(en)o(vironmen)o(t)13
b(is)h(used)h(for)e(lo)q(oking)g(up)h(the)g(v)n(alues)g(of)f(free)i(v)n
(ariables)e(during)g(ev)n(alation.)123 2658 y Fi(5)141 2673
y Fh(Note)h(that)g(the)h(result)f(t)o(yp)q(e)h(of)e Ff(evalAtexp)f
Fh(do)q(es)j(not)e(cater)i(for)f(exception)g(pac)o(k)o(ets.)19
b(This)14 b(is)f(b)q(ecause)j(excep-)66 2723 y(tions)f(and)f(side-e\013ects)j
(are)e(implemen)o(ted)d(directly)j(b)o(y)g(ML)f(exceptions)i(and)e
(side-e\013ects)j(in)d(the)i(In)o(terpreter,)g(i.e.)66 2773
y(w)o(e)e(ha)o(v)o(e)f(not)g(directly)g(follo)o(w)o(ed)f(the)i(exception)g
(and)f(store)h(con)o(v)o(en)o(tions[11)o(,)f(Section)g(6.7,)f(page)h(49])g
(that)g(generate)66 2823 y(a)h(large)g(n)o(um)o(b)q(er)f(of)g(additional)f
(inference)j(rules.)p eop
%%Page: 13 100
bop 66 50 a Fs(CHAPTER)17 b(2.)37 b(O)o(VER)-5 b(VIEW)15 b(OF)h(THE)g(KIT)914
b Fw(13)143 195 y Fu(and)25 b(tycon)152 b(\(*)25 b(type)f(constructo)o(rs)e
(*\))143 255 y(and)j(longtycon)48 b(\(*)25 b(long)f(type)g(constructo)o(rs)e
(*\))143 315 y(and)j(excon)152 b(\(*)25 b(exception)d(constructo)o(rs)g(*\))
143 376 y(and)j(longstrid)48 b(\(*)25 b(structure)d(identifier)o(s)h(*\))118
496 y(type)h(info)178 b(\(*)25 b(info)f(about)g(the)g(position)f(in)i(the)f
(source)g(text,)g(errors)f(etc)i(*\))118 616 y(datatype)d('a)j(op_opt)f(=)h
(OP_OPT)e(of)i('a)g(*)g(bool)118 737 y(datatype)d(atexp)i(=)271
797 y(SCONatexp)f(of)i(info)f(*)h(scon)f(|)271 857 y(IDENTatexp)e(of)j(info)g
(*)g(longid)e(op_opt)h(|)271 917 y(RECORDatexp)e(of)j(info)f(*)h(exprow)f
(Option)f(|)271 978 y(LETatexp)g(of)i(info)f(*)i(dec)e(*)h(exp)g(|)271
1038 y(PARatexp)e(of)i(info)f(*)i(exp)118 1098 y(.....)p 66
1158 1890 6 v 140 1242 a Fw(Notice)20 b(the)h(strong)h(similarit)o(y)c(with)j
(the)g(excerpt)f(of)h(the)g(grammar.)35 b(The)21 b(sp)q(eci\014ed)f(t)o(yp)q
(es)66 1302 y(\()p Fu(lab)p Fw(,)25 b Fu(scon)p Fw(,)f(.)8
b(.)g(.)o(\))24 b(ha)o(v)o(e)f(b)q(een)h(named)f(according)h(to)h(the)e
(De\014nition.)45 b(Notice)22 b(that)j(w)o(e)e(ev)o(en)66 1363
y(ha)o(v)o(e)14 b(a)h(constructor)f(for)h(paren)o(thesised)e(expressions)i
Fu(PARatexp)p Fw(,)c(ev)o(en)i(though)i(no)g(sane)g(compiler)66
1423 y(writer)f(w)o(ould)f(retain)h(paren)o(thesis)f(in)g(his)h(abstract)g
(syn)o(tax)g(trees!)20 b(Similarly)l(,)11 b(w)o(e)i(ha)o(v)o(e)g(mindlessly)
66 1483 y(recorded)j(whether)f(iden)o(ti\014ers)f(w)o(ere)h(pre\014xed)g(b)o
(y)g Fu(op)g Fw(\(hence)g(the)g Fu(op)p 1396 1483 16 2 v 18
w(opt)p Fw(,)f(corresp)q(onding)i(to)g(the)66 1543 y Fp(h)p
Fu(op)p Fp(i)h Fw(in)f(the)g(grammar\).)140 1603 y(The)i(main)f(di\013erence)
g(b)q(et)o(w)o(een)g(the)h(grammar)e(in)i(the)g(De\014nition)g(and)h(the)f
(datat)o(yp)q(e)g(sp)q(eci-)66 1664 y(\014cation)h(ab)q(o)o(v)o(e)f(is)g
(that)g(ev)o(ery)f(no)q(de)i(in)f(the)g(sp)q(eci\014ed)f(datat)o(yp)q(e)i
(has)g(an)f Fu(info)f Fw(\014eld,)h(whic)o(h)f(can)66 1724
y(b)q(e)23 b(used)g(to)g(hold)g(information)e(suc)o(h)i(as,)h(for)f(example,)
f(information)g(ab)q(out)i(t)o(yp)q(e)e(errors)h(and)66 1784
y(information)16 b(ab)q(out)h(whether)f(the)g(no)q(de)h(is)f(the)g
(translation)h(of)f(a)h(deriv)o(ed)e(form.)140 1844 y(Note)20
b(that)h Fu(info)e Fw(is)h(a)h(sp)q(eci\014ed)f(t)o(yp)q(e)g(and)h(can)g(b)q
(e)g(matc)o(hed)e(b)o(y)h(di\013eren)o(t)f(declarations)i(of)66
1904 y Fu(info)p Fw(.)37 b(Indeed)21 b(this)h(is)g(exploited.)37
b(The)22 b(structure)f(that)h(declares)g(the)f(abstract)i(syn)o(tax)f(trees)
66 1965 y(that)15 b(are)g(giv)o(en)f(as)h(input)f(to)h(the)f(Elab)q(orator)j
(matc)o(hes)c(the)h(ab)q(o)o(v)o(e)g(sp)q(eci\014cation)h(and)g(so)g(do)q(es)
g(the)66 2025 y(structure)j(that)g(declares)f(the)g(abstract)h(syn)o(tax)g
(trees)f(that)h(are)g(returned)f(from)g(the)g(Elab)q(orator,)66
2085 y(but)22 b(the)f(structures)g(di\013er)g(in)g(\(amongst)g(other)g
(things\))h(their)e(declaration)h(of)g(the)g Fu(info)f Fw(t)o(yp)q(e.)66
2145 y(Before)h(elab)q(oration,)j Fu(info)c Fw(con)o(tains)i(information)e
(ab)q(out)j(p)q(osition)f(in)g(the)f(source)h(text;)h(after)66
2205 y(elab)q(oration,)17 b(it)f(also)h(con)o(tains)f(information)f(ab)q(out)
j(t)o(yp)q(e)d(errors.)1323 2187 y Fm(3)140 2265 y Fw(A)i(minor)g
(di\013erence)h(b)q(et)o(w)o(een)f(the)h(grammar)f(in)h(the)g(De\014nition)g
(and)h(the)f(datat)o(yp)q(e)g(sp)q(eci\014-)66 2326 y(cation)i(ab)q(o)o(v)o
(e)f(is)h(that)g(the)f Fu(datatype)e Fw(do)q(es)j(not)g(distinguish)f(b)q(et)
o(w)o(een)g(v)m(ariables,)h(constructors)66 2386 y(and)14 b(exception)f
(constuctors)h(\(hence)e(the)i(single)f(constructor)g Fu(IDENTatexp)p
Fw(\).)k(The)c(reason)i(for)e(this)66 2446 y(deviation)18 b(from)e(the)i
(grammar)e(is)h(that)h(iden)o(ti\014er)e(status)j(is)e(b)q(est)h(resolv)o(ed)
f(during)h(elab)q(oration,)p 66 2490 756 2 v 123 2520 a Fi(3)141
2535 y Fh(An)f(alternativ)o(e)g(to)g(ha)o(ving)f(t)o(w)o(o)g(di\013eren)o(t)i
(structures)h(that)e(matc)o(h)f(the)i Ff(DEC)p 1425 2535 14
2 v 15 w(GRAMMAR)d Fh(signature)i(w)o(ould)g(b)q(e)66 2585
y(to)f(mak)o(e)f(all)f(datat)o(yp)q(es)j(in)f(the)g(abstract)h(syn)o(tax)f(p)
q(olymorphic)e(in)h(the)i Ff(info)e Fh(t)o(yp)q(e;)i(ho)o(w)o(ev)o(er,)f
(this)g(w)o(ould)g(mak)o(e)66 2635 y(the)e(datat)o(yp)q(e)f(declaration)f
(and)h(sp)q(eci\014cations)h(lo)q(ok)e(less)h(elegan)o(t.)18
b(Another)c(alternativ)o(e)e(is)h(to)g(use)g(a)g(single,)f(more)66
2685 y(general,)18 b Ff(info)e Fh(t)o(yp)q(e)h(b)q(efore)g(and)g(after)g
(elab)q(oration,)f(but)h(that)g(is)g(less)g(secure:)26 b(one)17
b(could)f(pass)i(trees)g(with)f(the)66 2735 y(wrong)g Ff(info)g
Fh(data)f(to)h(\(sa)o(y\))h(the)g(compiler)d(and)i(there)i(w)o(ould)d(b)q(e)i
(no)f(help)g(from)e(the)j(t)o(yp)q(e)g(system)f(to)g(sp)q(ot)h(the)66
2785 y(mistak)o(e.)f(W)m(e)c(w)o(an)o(t)h(the)g(t)o(yp)q(es)h(to)f(b)q(e)g
(distinct,)g(and)g(ML)g(is)f(go)q(o)q(d)h(at)g(letting)f(us)h(do)g(this.)p
eop
%%Page: 12 101
bop 66 50 a Fs(CHAPTER)17 b(2.)32 b(O)o(VER)-5 b(VIEW)14 b(OF)j(THE)f(KIT)919
b Fw(12)1066 195 y Fu(OP_OPT\(mk_)o(Lon)o(gId)22 b(id,)i(withOp\))1040
255 y(\))759 315 y(end)682 376 y(\))271 436 y(|)i(LBRACE)d(ExpRow_opt)f
(RBRACE)682 496 y(\()j(RECORDatex)o(p\()o(PP)d(LBRACEleft)g(RBRACEright)o(,)h
(ExpRow_op)o(t\))f(\))271 556 y(|)k(LET)e(Dec)h(IN)g(Exp_)f(END)682
616 y(\()h(LETatexp\(P)o(P)d(LETleft)i(ENDright,)e(Dec,)i(Exp_\))g(\))271
677 y(|)i(LPAREN)d(Exp_)h(RPAREN)682 737 y(\()h(PARatexp\(P)o(P)d(LPARENleft)
g(RPARENright)o(,)h(Exp_\))g(\))271 797 y(....)p 66 857 1890
6 v 140 941 a Fw(The)17 b(ML-Y)l(acc)h(sp)q(eci\014cation)g(asso)q(ciates)h
(\\seman)o(tic)d(actions")i(with)g(eac)o(h)f(pro)q(duction.)27
b(The)66 1001 y(seman)o(tic)16 b(actions)j(are)f(written)f(in)h(ML,)f(and)i
(their)e(e\013ect)h(is)g(to)g(build)f(an)i(abstract)g(syn)o(tax)e(tree.)66
1062 y(In)g(the)f(pro)q(duction)h(for)g Fu(let)f Fw(expressions,)g(for)h
(example,)d Fu(LETatexp)g Fw(is)i(a)h(constructor)g(de\014ned)g(in)66
1122 y(datat)o(yp)q(e)g(whic)o(h)f(implem)o(e)o(n)o(ts)e(abstract)j(syn)o
(tax)f(trees.)1131 1104 y Fm(2)140 1182 y Fw(F)l(rom)i(this)h(grammar)f(sp)q
(eci\014cation,)h(ML-Y)l(acc)g(pro)q(duces)i(a)e(parser.)31
b(The)20 b(parser)g(pro)q(duces)66 1242 y(abstract)j(syn)o(tax)f(trees)f
(according)h(to)h(the)e(grammar)g(of)h(the)g(Bare)f(language[11)r(,)i(page)f
(1],)h(i.e.)66 1302 y(deriv)o(ed)10 b(forms)g(are)h(expanded)g(during)g
(parsing)h(and)f(are)g(not)h(presen)o(t)e(in)h(the)g(abstract)g(syn)o(tax)g
(trees.)66 1363 y(The)k(abstract)h(syn)o(tax)f(follo)o(ws)f(the)h(\014gures)g
(in)g(Sections)g(2.8)g(and)g(3.4)g(of)h(the)e(De\014nition)h(as)g(closely)66
1423 y(as)21 b(p)q(ossible.)34 b(Consider)20 b(the)g(follo)o(wing)g(excerpt)f
(of)i(the)f(grammar)f(for)h(the)g(Bare)g(language)h([11)q(,)66
1483 y(Figure)16 b(3,)g(page)h(8].)417 1584 y Fk(atexp)49 b
Fw(::=)f Fk(sc)n(on)364 b Fw(sp)q(ecial)16 b(constan)o(t)690
1644 y Fp(h)p Fu(op)p Fp(i)p Fk(longvar)212 b Fw(v)m(alue)16
b(v)m(ariable)690 1704 y Fp(h)p Fu(op)p Fp(i)p Fk(longc)n(on)208
b Fw(v)m(alue)16 b(constructor)690 1765 y Fp(h)p Fu(op)p Fp(i)p
Fk(longexc)n(on)164 b Fw(exception)15 b(constructor)690 1825
y Fu({)26 b Fp(h)p Fk(expr)n(ow)5 b Fp(i)26 b Fu(})164 b Fw(record)690
1885 y Fu(let)15 b Fk(de)n(c)i Fu(in)e Fk(exp)i Fu(end)48 b
Fw(lo)q(cal)16 b(declaration)690 1945 y Fu(\()g Fk(exp)h Fu(\))140
2055 y Fw(The)f(abstract)h(syn)o(tax)f(in)g(the)g(Kit)f(is)i(found)f(in)g
(the)g(\014le)g Fu(Common/DEC)p 1481 2055 16 2 v 15 w(GRAMMAR)p
Fw(:)p 66 2121 1890 6 v 66 2205 a Fu(signature)23 b(DEC_GRAMM)o(AR)f(=)66
2265 y(sig)118 2325 y(type)i(lab)204 b(\(*)25 b(labels)e(*\))143
2386 y(and)i(scon)178 b(\(*)25 b(special)e(constants)f(*\))143
2446 y(and)j(con)204 b(\(*)25 b(construct)o(ors)d(*\))143 2506
y(and)j(id)230 b(\(*)25 b(identifie)o(rs)d(-)k(variables)c(or)j(constructo)o
(rs)d(*\))143 2566 y(and)j(longid)126 b(\(*)25 b(long)f(identifier)o(s)e(-)k
(variables)c(or)j(constructo)o(rs)d(*\))143 2626 y(and)j(tyvar)152
b(\(*)25 b(type)f(variables)e(*\))p 66 2671 756 2 v 123 2702
a Fi(2)141 2717 y Fh(The)14 b Ff(PP)22 b(LETleft)e(ENDright)12
b Fh(in)i(the)g(same)f(line)h(has)g(the)g(e\013ect)i(of)d(decorating)h(the)h
(no)q(de)f(in)g(the)g(syn)o(tax)g(tree)66 2767 y(with)j(p)q(osition)g
(information)d(\(line)j(and)g(column\))e(ab)q(out)i(the)h(b)q(eginning)f(and)
f(end)i(of)f(the)g(phrase)h(in)f(the)h(source)66 2817 y(text.)p
eop
%%Page: 11 102
bop 66 50 a Fs(CHAPTER)17 b(2.)32 b(O)o(VER)-5 b(VIEW)14 b(OF)j(THE)f(KIT)919
b Fw(11)p 301 153 358 2 v 301 271 2 119 v 441 227 a Fu(Kit)p
657 271 V 301 273 358 2 v 596 861 V 596 980 2 119 v 698 936
a(Common)p 952 980 V 596 982 358 2 v 714 684 V 714 802 2 119
v 803 753 a(Parsing)p 1070 802 V 714 804 358 2 v 832 507 V
832 625 2 119 v 870 576 a(Interpreter)p 1188 625 V 832 627
358 2 v 951 330 V 951 448 2 119 v 1027 399 a(Compiler)p 1307
448 V 951 450 358 2 v 598 286 a Fj(P)639 299 y(P)681 313 y(P)722
327 y(P)764 341 y(P)805 355 y(P)847 369 y(P)888 382 y(P)911
390 y(P)-42 b(q)539 292 y(H)580 313 y(H)622 334 y(H)663 355
y(H)705 375 y(H)746 396 y(H)788 417 y(H)829 438 y(H)871 458
y(H)912 479 y(H)954 500 y(H)970 508 y(H)g(j)480 313 y(@)521
355 y(@)563 396 y(@)604 438 y(@)646 479 y(@)687 521 y(@)729
562 y(@)770 604 y(@)812 645 y(@)852 685 y(@)g(R)421 313 y(A)442
355 y(A)462 396 y(A)483 438 y(A)504 479 y(A)525 521 y(A)545
562 y(A)566 604 y(A)587 645 y(A)608 687 y(A)628 728 y(A)649
770 y(A)670 811 y(A)691 853 y(A)695 862 y(A)-21 b(U)452 1200
y Fw(Figure)16 b(2.2:)22 b(The)16 b(Kit)g(directory)f(and)i(its)f
(sub-directories)255 1327 y Fk(atexp)50 b Fw(::=)e Fk(sc)n(on)646
b Fw(sp)q(ecial)16 b(constan)o(t)529 1388 y Fp(h)p Fu(op)o
Fp(i)q Fk(longvar)494 b Fw(v)m(alue)16 b(v)m(ariable)529 1448
y Fp(h)p Fu(op)o Fp(i)q Fk(longc)n(on)490 b Fw(v)m(alue)16
b(constructor)529 1508 y Fp(h)p Fu(op)o Fp(i)q Fk(longexc)n(on)446
b Fw(exception)15 b(constructor)529 1568 y Fu({)25 b Fp(h)p
Fk(expr)n(ow)6 b Fp(i)26 b Fu(})446 b Fw(record)529 1628 y
Fu(#)15 b Fk(lab)638 b Fw(record)16 b(selector)529 1689 y Fu(\(\))686
b Fw(0-tuple)529 1749 y Fu(\()o Fk(exp)627 1761 y Fm(1)663
1749 y Fu(,)16 b Fp(\001)s(\001)s(\001)f Fu(,)h Fk(exp)883
1761 y Fg(n)906 1749 y Fu(\))335 b Fv(n)p Fw(-tuple,)15 b Fv(n)f
Fp(\025)g Fw(2)529 1809 y Fu([)o Fk(exp)627 1821 y Fm(1)663
1809 y Fu(,)i Fp(\001)s(\001)s(\001)f Fu(,)h Fk(exp)883 1821
y Fg(n)906 1809 y Fu(])335 b Fw(list,)15 b Fv(n)f Fp(\025)f
Fw(0)529 1869 y Fu(\()o Fk(exp)627 1881 y Fm(1)663 1869 y Fu(;)j
Fp(\001)s(\001)s(\001)f Fu(;)h Fk(exp)883 1881 y Fg(n)906 1869
y Fu(\))335 b Fw(sequence,)15 b Fv(n)e Fp(\025)h Fw(2)529 1929
y Fu(let)h Fk(de)n(c)h Fu(in)g Fk(exp)846 1941 y Fm(1)882 1929
y Fu(;)f Fp(\001)s(\001)s(\001)h Fu(;)g Fk(exp)1101 1941 y
Fg(n)1141 1929 y Fu(end)48 b Fw(lo)q(cal)16 b(declaration,)g
Fv(n)d Fp(\025)h Fw(1)529 1990 y Fu(\()h Fk(exp)i Fu(\))140
2100 y Fw(Here)11 b Fk(atexp)17 b Fw(ranges)c(o)o(v)o(er)e
Fs(atomic)h(expressions)p Fw(,)g Fk(exp)17 b Fw(ranges)c(o)o(v)o(er)f
Fs(expressions)p Fw(,)h(and)g Fk(de)n(c)i Fw(ranges)66 2160
y(o)o(v)o(er)h Fs(declarations)p Fw(.)140 2220 y(Corresp)q(onding)i(to)f
(some)f(of)h(the)f(ab)q(o)o(v)o(e)h(pro)q(ductions)g(one)g(\014nds)h(the)e
(follo)o(wing)g(sp)q(eci\014cation)66 2280 y(to)d(ML-Y)l(acc)g(in)f(the)g
(\014le)g Fu(Parsing/Top)o(de)o(c.g)o(rm)d Fw(\(Section)j(3.5.2)h(details)f
(the)h(naming)e(con)o(v)o(en)o(tions)66 2340 y(used)17 b(in)f(the)g
(grammar\):)p 66 2409 1890 6 v 66 2493 a Fu(AtExp:)323 2553
y(SCon)255 b(\()25 b(SCONatexp\()o(PP)d(SConleft)h(SConright,)f(SCon\))i(\))
271 2613 y(|)i(LongOpEqI)o(den)o(t)d(\()i(let)784 2673 y(val)g({id,)f
(withOp})f(=)i(LongOpEqIde)o(nt)733 2734 y(in)784 2794 y(IDENTatexp)o(\(PP)d
(LongOpEqId)o(ent)o(lef)o(t)g(LongOpEqIde)o(ntr)o(igh)o(t,)p
eop
%%Page: 10 103
bop 66 50 a Fs(CHAPTER)17 b(2.)37 b(O)o(VER)-5 b(VIEW)15 b(OF)h(THE)g(KIT)914
b Fw(10)66 203 y Ft(2.2)83 b(A)28 b(guided)f(tour)h(of)g(the)f(Kit)66
313 y Fw(In)17 b(this)f(section)g(w)o(e)g(shall)h(explore)e(some)h(of)g(the)h
(in)o(ternal)e(structure)h(of)h(the)f(Kit.)22 b(The)16 b(Kit)g(is)h(big,)66
373 y(so)i(it)f(is)g(necessary)h(to)f(b)q(e)h(able)f(to)h(mano)q(euvre)e
(around)i(the)g(Kit,)e(without)i(kno)o(wing)g(the)f(details)66
433 y(of)i(the)f(individual)f(mo)q(dules.)29 b(The)19 b(purp)q(ose)h(of)g
(this)f(section)f(is)h(to)h(pro)o(vide)e(just)i(enough)g(tra)o(v)o(el)66
493 y(information)c(that)g(it)g(b)q(ecomes)f(p)q(ossible)i(to)f(mo)o(v)o(e)e
(around)j(the)f(Kit)g(in)g(an)h(informed)d(w)o(a)o(y)l(.)140
554 y(The)h(De\014nition)h(is)f(to)h(some)f(exten)o(t)f(a)i(map)f(of)h(the)g
(Kit.)k(W)l(e)c(hop)q(e)g(that)g(the)g(examples)d(b)q(elo)o(w)66
614 y(will)i(stim)o(ulate)e(the)i(use)h(of)g(the)f(De\014nition)g(as)h(a)g
(\\reference)f(man)o(ual")f(to)i(the)f(Kit,)g(and)h(will)f(sho)o(w)66
674 y(ho)o(w)i(closely)e(connected)h(the)g(t)o(w)o(o)g(are.)66
818 y Fr(2.2.1)70 b(Where)23 b(to)g(\014nd)g(things)66 911
y Fw(The)g(Kit)e(source)i(co)q(de)f(is)g(found)h(in)f(the)g(directory)f
Fu(src)p Fw(.)39 b(The)22 b Fu(src)f Fw(directory)g(is)h(sho)o(wn)h(with)66
971 y(its)17 b(ma)s(jor)g(sub-directories)g(in)f(Figure)h(2.2.)25
b(The)17 b Fu(Common)e Fw(directory)i(con)o(tains)g(mo)q(dules)f(that)i(are)
66 1031 y(used)e(b)o(y)e(b)q(oth)i(the)f(In)o(terpreter)f(and)h(the)g
(Compiler,)e(for)j(example)d(mo)q(dules)h(concerning)g(abstract)66
1091 y(syn)o(tax,)h(elab)q(oration)h(and)f(the)g(top-lev)o(el)e(lo)q(op.)22
b(The)15 b Fu(Parsing)d Fw(directory)i(con)o(tains)h(mo)q(dules)f(that)66
1152 y(are)21 b(sp)q(eci\014c)g(to)g(parsing.)36 b(The)21 b
Fu(Interpret)o(er)d Fw(directory)i(con)o(tains)h(mo)q(dules)f(that)h(are)g
(sp)q(eci\014c)66 1212 y(to)f(the)f(In)o(terpreter,)f(so)i(this)g(is)f(where)
g(one)g(\014nds)h(the)f(direct)g(implem)o(en)n(tation)e(of)j(the)f(dynamic)66
1272 y(seman)o(tics)g(of)h(the)g(Core)g(and)h(of)g(Mo)q(dules)f([11,)h
(Sections)f(6)g(and)h(7].)33 b(The)20 b Fu(Compiler)d Fw(directory)66
1332 y(con)o(tains)24 b(mo)q(dules)e(that)i(are)f(sp)q(eci\014c)g(to)g(the)g
(compiler,)f(for)i(example)d(the)i(lam)o(b)q(da)f(language)66
1392 y(and)i(pattern)g(compiler.)40 b(W)l(e)24 b(shall)f(no)o(w)h(giv)o(e)e
(a)i(few)f(samples)f(from)h(eac)o(h:)35 b(in)23 b(Section)g(2.2.2)66
1453 y(w)o(e)c(giv)o(e)f(an)h(o)o(v)o(erview)e(of)i(parsing,)h(in)e(Section)g
(2.2.3)h(w)o(e)g(giv)o(e)f(an)h(o)o(v)o(erview)e(of)i(the)g(In)o(terpreter-)
66 1513 y(based)g(Ev)m(aluator,)g(in)f(Section)g(2.2.4)g(w)o(e)g(giv)o(e)f
(an)i(o)o(v)o(erview)d(of)j(the)f(Compiler-based)f(Ev)m(aluator,)66
1573 y(in)g(Section)f(2.2.5)g(w)o(e)g(giv)o(e)g(an)h(o)o(v)o(erview)e(the)h
(Elab)q(orator,)i(in)e(Section)g(2.2.6)h(w)o(e)f(describ)q(e)g(ho)o(w)h(all)
66 1633 y(these)e(mo)q(dules)f(are)h(put)h(together,)f(and)g(in)g(Section)g
(2.2.7)g(w)o(e)g(\014nally)f(sum)g(up)h(our)h(o)o(v)o(erview)d(with)66
1693 y(tables)k(of)f(the)g(most)g(imp)q(ortan)o(t)f(mo)q(dules.)66
1847 y Fr(2.2.2)70 b(P)n(arsing)66 1940 y Fw(The)16 b(parser)f(reads)h(input)
f(\(from)f(a)h(string)h(or)f(a)h(stream\))e(and)i(pro)q(duces)g(an)f
(abstract)h(syn)o(tax)f(tree.)140 2000 y(The)g(parser)h(is)g(generated)f(b)o
(y)h(ML-Y)l(acc)f(and)h(ML-Lex.)1207 1982 y Fm(1)1248 2000
y Fw(Let)g(us)g(lo)q(ok)g(at)g(a)g(small)e(part)i(of)g(the)66
2060 y(grammar)f(for)i(the)f(full)f(Core)h(language[11)r(,)g(App)q(endix)f
(B,)g(page)i(71].)p 66 2107 756 2 v 123 2137 a Fi(1)141 2152
y Fh(ML-Y)m(acc)d(and)f(ML-Lex)h(are)f(due)h(to)g(Andrew)g(W.)f(App)q(el)g
(and)h(Da)o(vid)e(R.)g(T)m(ardeti,)h(based)h(on)g(earlier)f(w)o(ork)g(b)o(y)
66 2202 y(Nic)o(k)i(Roth)o(w)o(ell.)j(The)c(v)o(ersion)h(used)g(in)f(the)h
(Kit)f(is)g(the)h(p)q(ortable)g(v)o(ersion)f(whic)o(h)g(is)h(part)f(of)g(the)
h(Edin)o(burgh)f(SML)66 2252 y(Library)m(,)f(not)h(the)g(Standard)g(ML)g(of)f
(New-Jersey)j(v)o(ersion.)p eop
%%Page: 9 104
bop 66 50 a Fs(CHAPTER)17 b(2.)37 b(O)o(VER)-5 b(VIEW)15 b(OF)h(THE)g(KIT)939
b Fw(9)p 362 2024 6 2 v 362 725 V 710 2024 V 710 725 V 379
2024 12 2 v 403 2024 V 427 2024 V 450 2024 V 474 2024 V 498
2024 V 521 2024 V 545 2024 V 568 2024 V 592 2024 V 616 2024
V 639 2024 V 663 2024 V 686 2024 V 379 725 V 403 725 V 427
725 V 450 725 V 474 725 V 498 725 V 521 725 V 545 725 V 568
725 V 592 725 V 616 725 V 639 725 V 663 725 V 686 725 V 361
2023 2 6 v 715 2023 V 361 730 V 715 730 V 361 753 2 12 v 361
777 V 361 801 V 361 824 V 361 848 V 361 872 V 361 895 V 361
919 V 361 942 V 361 966 V 361 990 V 361 1013 V 361 1037 V 361
1060 V 361 1084 V 361 1108 V 361 1131 V 361 1155 V 361 1179
V 361 1202 V 361 1226 V 361 1249 V 361 1273 V 361 1297 V 361
1320 V 361 1344 V 361 1368 V 361 1391 V 361 1415 V 361 1438
V 361 1462 V 361 1486 V 361 1509 V 361 1533 V 361 1557 V 361
1580 V 361 1604 V 361 1627 V 361 1651 V 361 1675 V 361 1698
V 361 1722 V 361 1746 V 361 1769 V 361 1793 V 361 1816 V 361
1840 V 361 1864 V 361 1887 V 361 1911 V 361 1935 V 361 1958
V 361 1982 V 361 2005 V 715 753 V 715 777 V 715 801 V 715 824
V 715 848 V 715 872 V 715 895 V 715 919 V 715 942 V 715 966
V 715 990 V 715 1013 V 715 1037 V 715 1060 V 715 1084 V 715
1108 V 715 1131 V 715 1155 V 715 1179 V 715 1202 V 715 1226
V 715 1249 V 715 1273 V 715 1297 V 715 1320 V 715 1344 V 715
1368 V 715 1391 V 715 1415 V 715 1438 V 715 1462 V 715 1486
V 715 1509 V 715 1533 V 715 1557 V 715 1580 V 715 1604 V 715
1627 V 715 1651 V 715 1675 V 715 1698 V 715 1722 V 715 1746
V 715 1769 V 715 1793 V 715 1816 V 715 1840 V 715 1864 V 715
1887 V 715 1911 V 715 1935 V 715 1958 V 715 1982 V 715 2005
V 432 977 a(in\014x)16 b(basis)421 1450 y(static)g(basis)389
1917 y(dynamic)e(basis)519 682 y Fv(B)p 1307 2024 6 2 v 1307
725 V 1655 2024 V 1655 725 V 1324 2024 12 2 v 1348 2024 V 1372
2024 V 1395 2024 V 1419 2024 V 1442 2024 V 1466 2024 V 1490
2024 V 1513 2024 V 1537 2024 V 1561 2024 V 1584 2024 V 1608
2024 V 1631 2024 V 1324 725 V 1348 725 V 1372 725 V 1395 725
V 1419 725 V 1442 725 V 1466 725 V 1490 725 V 1513 725 V 1537
725 V 1561 725 V 1584 725 V 1608 725 V 1631 725 V 1306 2023
2 6 v 1660 2023 V 1306 730 V 1660 730 V 1306 753 2 12 v 1306
777 V 1306 801 V 1306 824 V 1306 848 V 1306 872 V 1306 895
V 1306 919 V 1306 942 V 1306 966 V 1306 990 V 1306 1013 V 1306
1037 V 1306 1060 V 1306 1084 V 1306 1108 V 1306 1131 V 1306
1155 V 1306 1179 V 1306 1202 V 1306 1226 V 1306 1249 V 1306
1273 V 1306 1297 V 1306 1320 V 1306 1344 V 1306 1368 V 1306
1391 V 1306 1415 V 1306 1438 V 1306 1462 V 1306 1486 V 1306
1509 V 1306 1533 V 1306 1557 V 1306 1580 V 1306 1604 V 1306
1627 V 1306 1651 V 1306 1675 V 1306 1698 V 1306 1722 V 1306
1746 V 1306 1769 V 1306 1793 V 1306 1816 V 1306 1840 V 1306
1864 V 1306 1887 V 1306 1911 V 1306 1935 V 1306 1958 V 1306
1982 V 1306 2005 V 1660 753 V 1660 777 V 1660 801 V 1660 824
V 1660 848 V 1660 872 V 1660 895 V 1660 919 V 1660 942 V 1660
966 V 1660 990 V 1660 1013 V 1660 1037 V 1660 1060 V 1660 1084
V 1660 1108 V 1660 1131 V 1660 1155 V 1660 1179 V 1660 1202
V 1660 1226 V 1660 1249 V 1660 1273 V 1660 1297 V 1660 1320
V 1660 1344 V 1660 1368 V 1660 1391 V 1660 1415 V 1660 1438
V 1660 1462 V 1660 1486 V 1660 1509 V 1660 1533 V 1660 1557
V 1660 1580 V 1660 1604 V 1660 1627 V 1660 1651 V 1660 1675
V 1660 1698 V 1660 1722 V 1660 1746 V 1660 1769 V 1660 1793
V 1660 1816 V 1660 1840 V 1660 1864 V 1660 1887 V 1660 1911
V 1660 1935 V 1660 1958 V 1660 1982 V 1660 2005 V 1377 977
a Fw(in\014x)i(basis)1365 1450 y(static)h(basis)1334 1917 y(dynamic)d(basis)
1458 683 y Fv(B)1498 665 y Fl(0)840 766 y Fw(Source)i(Program)p
832 900 358 2 v 832 1018 2 119 v 944 976 a(P)o(arser)p 1188
1018 V 832 1020 358 2 v 946 1209 a Fk(top)n(de)n(c)p 832 1373
V 832 1491 2 119 v 896 1449 a Fw(Elab)q(orator)p 1188 1491
V 832 1493 358 2 v 940 1684 a Fk(top)n(de)n(c)1071 1662 y Fl(0)p
832 1845 V 832 1963 2 119 v 907 1921 a Fw(Ev)m(aluator)p 1188
1963 V 832 1965 358 2 v 1010 901 2 119 v 1011 901 a Fj(?)p
1010 1137 V 1011 1137 a(?)p 1010 1373 V 1011 1373 a(?)p 1010
1610 V 1011 1610 a(?)p 1010 1846 V 1011 1846 a(?)p 716 961
119 2 v 793 960 a(-)p 716 1433 V 793 1432 a(-)p 716 1906 V
793 1905 a(-)p 1188 961 V 1265 960 a(-)p 1188 1433 V 1265 1432
a(-)p 1188 1906 V 1265 1905 a(-)p 1483 2141 2 119 v 1484 2141
a(?)p 1305 2140 358 2 v 1305 2258 2 119 v 1350 2216 a Fv(B)g
Fp( )e Fv(B)f Fw(+)e Fv(B)1606 2198 y Fl(0)p 1661 2258 V 1305
2260 358 2 v 539 2201 768 2 v 538 2200 2 178 v 539 2065 a Fj(6)577
2420 y Fw(Figure)16 b(2.1:)22 b(The)16 b(top-lev)o(el)f(lo)q(op)i(in)f(the)g
(Kit)p eop
%%Page: 8 105
bop 66 50 a Fs(CHAPTER)17 b(2.)37 b(O)o(VER)-5 b(VIEW)15 b(OF)h(THE)g(KIT)939
b Fw(8)66 195 y(and)20 b(the)f(lam)o(b)q(da)g(language)h(in)o(terpreter)d(is)
i(still)g(substan)o(tially)f(more)g(e\016cien)o(t)g(than)h(using)h(just)66
255 y(the)c(In)o(terpreter.)140 315 y(In)o(terestingly)l(,)c(the)h(t)o(w)o(o)
h(ev)m(aluators)h(ha)o(v)o(e)e(exactly)g(the)h(same)f(in)o(terface)f(to)j
(the)e(rest)h(of)g(the)g(Kit.)66 376 y(Th)o(us)j(one)g(constructs)g(a)g
(direct)e(implem)o(en)o(tation)f(of)j(the)f(De\014nition)g(b)o(y)g(assem)o
(bling)f(the)i(P)o(arser,)66 436 y(the)g(Elab)q(orator)h(and)f(the)f(In)o
(terpreter-based)g(Ev)m(aluator)h(whereas)g(one)g(obtains)g(a)g(more)e
(e\016cien)o(t)66 496 y(system)20 b(b)o(y)g(replacing)g(the)h(In)o
(terpreter-based)f(Ev)m(aluator)h(b)o(y)g(the)f(Compiler-based)g(Ev)m
(aluator.)66 556 y(This)e(mo)q(dularit)o(y)e(is)i(con)o(v)o(enien)o(t)d(and)j
(illustrates)f(the)h(general)f(p)q(oin)o(t)h(that)g(the)f(Kit)g(is)h(supp)q
(osed)66 616 y(to)f(b)q(e)f(a)h(collection)e(of)h(mo)q(dules,)f(that)i(can)f
(b)q(e)h(put)f(together)h(in)e(sev)o(eral)h(w)o(a)o(ys.)140
677 y(The)23 b(basic)h(top-lev)o(el)e(lo)q(op)i(in)g(the)f(Kit)g(is)g(as)i
(pictured)d(in)i(Figure)f(2.1.)43 b(The)24 b(lo)q(op)g(starts)66
737 y(at)e(the)f(top)g(left-hand)g(corner)g(with)g(a)h(basis)f
Fv(B)j Fw(and)d(a)h(source)f(program.)35 b(The)22 b(basis)f(con)o(tains)66
797 y(information)13 b(ab)q(out)i(the)f(iden)o(ti\014ers)f(that)h(ha)o(v)o(e)
f(previously)g(b)q(een)h(declared)f(at)h(top-lev)o(el;)f(initially)l(,)66
857 y(it)j(is)g(the)g Fs(initial)f(basis)i Fv(B)546 864 y Fm(0)566
857 y Fw([11,)f(App)q(endices)f(C)i(and)g(D].)140 917 y(The)g(result)g(of)g
(executing)g(the)g(source)g(program)g(is)g(a)h(basis)g Fv(B)1338
899 y Fl(0)1349 917 y Fw(,)f(whic)o(h)g(is)g(then)g(added)h(to)f(the)66
978 y(old)g(basis)f Fv(B)j Fw(\(see)d(the)g(b)q(ottom)g(righ)o(t-hand)h
(corner\))f(and)h(the)f(lo)q(op)h(starts)g(all)f(o)o(v)o(er.)140
1038 y(In)k(the)g(Kit,)g(a)g(basis)h(consists)g(of)f(three)g(comp)q(onen)o
(ts:)29 b(an)20 b Fs(in\014x)g(basis)p Fw(,)i(a)e Fs(static)g(basis)p
Fw(,)i(and)66 1098 y(a)e Fs(dynamic)d(basis)p Fw(.)29 b(The)19
b(in\014x)f(basis)i(maps)e(iden)o(ti\014ers)g(to)h(their)f(in\014x)g(status.)
30 b(The)19 b(static)g(basis)66 1158 y(maps)d(iden)o(ti\014ers)f(to)h(seman)o
(tic)e(ob)s(jects)i(in)f(the)h(static)g(seman)o(tics)e(|)i(for)h(example)c
(it)j(maps)f(v)m(alue)66 1218 y(v)m(ariables)i(to)f(t)o(yp)q(es.)21
b(Finally)l(,)15 b(the)h(dynamic)f(basis)h(maps)g(iden)o(ti\014ers)f(to)i
(the)f(seman)o(tic)e(ob)s(jects)i(of)66 1279 y(the)g(dynamic)f(seman)o(tics)f
(|)i(for)h(example)d(it)i(maps)f(v)m(alue)h(v)m(ariables)g(to)h(v)m(alues.)
140 1339 y(Lo)q(oking)k(more)e(closely)g(at)i(the)f(in)o(ternal)f(structure)h
(of)g(Figure)g(2.1,)h(w)o(e)f(see)g(that)h(the)f(result)66
1399 y(of)e(parsing)h(a)f(source)g(program)f(is)h(a)g(top-lev)o(el)e
(declaration)i Fk(top)n(de)n(c)r Fw(,)g(in)f(the)h(form)e(of)i(an)g(abstract)
66 1459 y(syn)o(tax)24 b(tree,)g(and)g(a)g(new)g(in\014x)f(basis)h(whic)o(h)f
(records)g(the)h(meaning)e(of)i(the)f(\014xit)o(y)f(directiv)o(es)66
1519 y(encoun)o(tered)d(in)g(the)g(source)g(program.)30 b(The)19
b(abstract)h(syn)o(tax)f(tree)g(is)g(then)g(elab)q(orated)h(in)e(the)66
1579 y(old)f(static)g(basis,)g(resulting)f(in)g(a)h(new)g(top-lev)o(el)e
(declaration)i Fk(top)n(de)n(c)1401 1558 y Fl(0)1429 1579 y
Fw(and)g(a)g(static)g(basis,)g(whic)o(h)66 1640 y(records)j(the)f(static)g
(information)f(of)i(the)f(iden)o(ti\014ers)e(declared)i(b)o(y)g
Fk(top)n(de)n(c)r Fw(.)30 b(Here)19 b Fk(top)n(de)n(c)1796
1618 y Fl(0)1827 1640 y Fw(di\013ers)66 1700 y(from)g Fk(top)n(de)n(c)k
Fw(in)d(that)g(it)g(has)h(b)q(een)f(decorated)g(with)g(v)m(arious)h(static)e
(information,)h(for)g(example)66 1760 y(information)d(ab)q(out)i(t)o(yp)q(e)f
(errors,)g(whic)o(h)f(is)h(dealt)f(with)h(in)g(a)g(separate)g(phase)h(after)e
(elab)q(oration)66 1820 y(\(not)g(sho)o(wn)g(in)f(the)g(picture\).)140
1880 y(The)j(lo)q(op)h(in)f(Figure)g(2.1)h(corresp)q(onds)h(to)e(Section)g(8)
h(of)g(the)f(De\014nition,)g(whic)o(h)g(the)g(reader)66 1941
y(is)24 b(encouraged)f(to)h(consult)f(at)h(this)f(stage.)43
b(Section)23 b(8)h(de\014nes)f(a)h(basis)f(as)h(just)g(a)g(pair)f
Fv(B)28 b Fw(=)66 2001 y(\()p Fv(B)122 2008 y Fm(ST)m(A)m(T)216
2001 y Fv(;)8 b(B)275 2008 y Fm(D)o(YN)355 2001 y Fw(\))14
b(of)g(a)g(static)g(and)g(a)g(dynamic)e(basis.)21 b(In)13 b(the)g
(De\014nition,)h(the)f(scop)q(e)h(rules)g(for)f(\014xit)o(y)66
2061 y(directiv)o(es)j(are)i(de\014ned)g(in)g(Sections)f(2.6)i(and)f(3.3;)h
(\014xit)o(y)e(directiv)o(es)f(are)i(not)g(treated)g(as)g(part)h(of)66
2121 y(the)e(static)f(and)i(dynamic)c(seman)o(tics.)21 b(In)16
b(an)h(impleme)o(n)o(tation,)d(where)i(one)h(has)g(to)g(sp)q(ell)f(out)h(the)
66 2181 y(e\013ect)e(of)g(\014xit)o(y)e(directiv)o(es)g(op)q(erationally)l(,)
i(it)f(is)g(natural)i(to)f(extend)f(the)g(basis)i(to)f(include)e(an)j
(in\014x)66 2242 y(basis.)140 2302 y(Section)11 b(8)h(of)g(the)f
(De\014nition)h(also)g(de\014nes)g(what)g(is)g(supp)q(osed)h(to)f(happ)q(en)g
(in)g(cases)g(of)g(abnormal)66 2362 y(termination.)19 b(F)l(or)c(example,)d
(when)j(a)g(elab)q(oration)g(error)f(o)q(ccurs,)h(ev)m(aluation)g(is)f(skipp)
q(ed)g(and)h(the)66 2422 y(basis)k(is)e(left)g(unc)o(hanged.)26
b(Figure)18 b(2.1)g(only)f(pictures)h(successful)f(executions,)g(but)h(the)f
(Kit)g(do)q(es)66 2482 y(of)24 b(course)g(also)g(deal)f(with)g(abnormal)g
(termination.)41 b(Some)22 b(e\013ort)i(has)g(gone)g(in)o(to)f(pro)q(ducing)
66 2543 y(decen)o(t)e(error)h(rep)q(orting.)38 b(F)l(or)22
b(example,)e(elab)q(oration)i(alw)o(a)o(ys)g(results)f(in)h(an)g(abstract)g
(syn)o(tax)66 2603 y(tree)g(whether)g(there)f(w)o(ere)g(an)o(y)h(errors)g(or)
h(not;)i(the)d(abstract)g(syn)o(tax)g(tree)g(is)f(decorated)h(with)66
2663 y(information)17 b(ab)q(out)i(the)e(errors)h(that)g(w)o(ere)f(found)h
(and)g(a)g(separate)h(phase)f(b)q(et)o(w)o(een)e(elab)q(oration)66
2723 y(and)j(ev)m(aluation)f(runs)g(o)o(v)o(er)f(the)h(abstract)h(syn)o(tax)e
(tree)h(and)g(collects)f(all)g(the)h(error)g(information,)66
2783 y(edits)e(it)g(and)h(prin)o(ts)f(it)f(on)i(the)f(terminal.)p
eop
%%Page: 7 106
bop 66 527 a Fy(Chapter)40 b(2)66 735 y(Ov)m(erview)h(of)f(the)g(Kit)66
961 y Fw(In)18 b(this)f(section)g(w)o(e)g(giv)o(e)g(an)h(o)o(v)o(erview)e(of)
h(the)h(Kit)f(and)h(illustrate)e(the)i(connection)f(b)q(et)o(w)o(een)f(the)66
1021 y(De\014nition)g(and)h(the)f(Kit.)66 1188 y Ft(2.1)83
b(P)n(arsing,)27 b(Elab)r(oration)i(and)e(Ev)-5 b(aluation)66
1297 y Fw(The)16 b(De\014nition)g(in)o(tro)q(duces)f(the)h(notion)g(of)g
(execution)f(of)h(ML)g(programs)g(as)h(follo)o(ws:[11)o(,)f(page)g(1])188
1395 y Fo(ML)j(is)h(an)f(in)o(teractiv)o(e)h(language,)f(and)h(a)e
Fn(program)g Fo(consists)i(of)e(a)h(sequence)h(of)f Fn(top-lev)o(el)188
1452 y(declarations)p Fo(;)e(the)g(execution)g(of)f(eac)o(h)g(declaration)h
(mo)q(di\014es)h(the)e(top-lev)o(el)h(en)o(vironmen)o(t,)188
1508 y(whic)o(h)f(w)o(e)f(call)i(a)e Fn(basis)p Fo(,)g(and)g(rep)q(orts)g
(the)g(mo)q(di\014cation)i(to)d(the)h(user.)188 1585 y(In)i(the)g(execution)g
(of)f(a)g(declaration)h(there)g(are)f(three)g(phases:)23 b
Fn(parsing)p Fo(,)16 b Fn(elab)q(oration)p Fo(,)h(and)188 1642
y Fn(ev)m(aluation)p Fo(.)k(P)o(arsing)12 b(determines)h(the)f(grammatical)g
(form)g(of)g(a)g(declaration.)19 b(Elab)q(oration,)188 1698
y(the)14 b Fn(static)f Fo(phase,)g(determines)h(whether)g(it)f(is)h(w)o
(ell-t)o(yp)q(ed)g(and)g(w)o(ell-formed)g(in)g(other)f(w)o(a)o(ys,)188
1755 y(and)j(records)g(relev)m(an)o(t)g(t)o(yp)q(e)g(or)f(form)g(information)
h(in)h(the)e(basis.)22 b(Finally)17 b(ev)m(aluation,)g(the)188
1811 y Fn(dynamic)h Fo(phase,)e(determines)i(the)e(v)m(alue)i(of)e(the)g
(declaration)h(and)g(records)f(relev)m(an)o(t)h(v)m(alue)188
1867 y(information)f(in)g(the)f(basis.)66 1969 y Fw(The)22
b(Kit)f(follo)o(ws)h(the)f(division)g(of)h(execution)f(in)o(to)g(parsing,)i
(elab)q(oration)g(and)f(ev)m(aluation,)h(al-)66 2029 y(though)g(some)d(extra)
h(phases)h(ha)o(v)o(e)e(b)q(een)h(in)o(tro)q(duced,)h(for)f(example)e(for)j
(handling)f(elab)q(oration)66 2090 y(errors)c(and)g(resolving)f(parsing)h(am)
o(biguities.)140 2150 y(In)g(the)g(Kit,)g(parsing)h(is)g(done)g(b)o(y)f(the)g
Fs(P)o(arser)p Fw(,)g(elab)q(oration)i(is)e(done)h(b)o(y)f(the)g
Fs(Elab)q(orator)j Fw(and)66 2210 y(ev)m(aluation)d(is)f(done)g(b)o(y)g(an)h
Fs(Ev)m(aluator)p Fw(.)22 b(Actually)l(,)14 b(there)i(are)g(t)o(w)o(o)g(ev)m
(aluators,)h(one)f(based)h(on)f(the)66 2270 y Fs(In)o(terpreter)f
Fw(and)i(based)g(on)f(the)g Fs(Compiler)p Fw(.)140 2330 y(The)d(Elab)q
(orator)j(and)e(the)g(In)o(terpreter-based)e(Ev)m(aluator)j(are)f(direct)e
(impleme)o(n)o(tations)f(of)j(the)66 2390 y(inference)g(rules)i(in)f(the)g
(De\014nition,)g(so)h(that)h(for)e(ev)o(ery)g(inference)e(rule)i(in)h(the)f
(De\014nition)g(there)g(is)66 2451 y(a)i(corresp)q(onding)g(piece)e(of)i(co)q
(de)f(in)g(the)g(Kit.)140 2511 y(The)i(Compiler-based)f(Ev)m(aluator)j(pro)o
(vides)e(an)h(alternativ)o(e)e(means)g(of)i(ev)m(aluation.)28
b(It)18 b(com-)66 2571 y(piles)23 b(abstract)h(syn)o(tax)f(trees)g(in)o(to)g
(expressions)h(in)f(a)h(simpler)d(in)o(termediate)f(language.)44
b(This)66 2631 y(language)19 b(is)f(an)g(un)o(t)o(yp)q(ed)f(call-b)o(y-v)m
(alue)g(lam)o(b)q(da)g(calculus,)g(with)h(constan)o(ts)g(and)g(simple)e(op)q
(era-)66 2691 y(tions)j(for)g(constructing)g(and)g(destructing)f(records,)h
(but)g(with)f(no)h(pattern)g(matc)o(hing)e(or)i(sp)q(ecial)66
2752 y(constructs)f(for)g(mo)q(dules.)24 b(There)17 b(is)h(also)g(an)g(in)o
(terpreter)d(for)j(the)f(lam)o(b)q(da)g(language.)26 b(Although)66
2812 y(the)21 b(compiler)e(do)q(es)i(not)h(pro)q(duce)f(mac)o(hine)e(co)q
(de,)j(ev)m(aluating)f(programs)g(using)g(the)g(Compiler)999
2947 y(7)p eop
%%Page: 6 107
bop 66 50 a Fs(CHAPTER)17 b(1.)37 b(A)16 b(FIRST)g(SESSION)g(WITH)g(THE)g
(KIT)720 b Fw(6)181 195 y(Readers)17 b(who)i(are)e(familiar)f(with)h(the)g
(De\014nition)h(of)g(Standard)g(ML)g(will)e(\014nd)i(this)g(output)185
255 y(fairly)f(readable.)28 b(The)19 b Fp(ff)p Fu(NAT)p Fp(g)p
Fu(,)24 b(3)p Fp(g)18 b Fw(is)g(a)h(name)e(set,)i(con)o(taining)f(a)h(t)o(yp)
q(e)f(and)i(a)f(structure)185 315 y(name,)12 b(one)i(for)g(the)g
Fu(ARITH)d Fw(structure)j(and)g(one)g(of)g(the)g Fu(NAT)e Fw(t)o(yp)q(e.)20
b(A)13 b(couple)h(of)g(lines)f(further)185 376 y(do)o(wn,)j
Fu(sig\(3\))e Fw(sho)o(ws)j(the)f(structure)g(name)f(of)h(the)g
Fu(ARITH)f Fw(structure.)21 b(The)519 486 y Fu(LAMBDA)j(\(\).)50
b(NAT/)24 b(Zero)g(NAT)h(Succ)f(\(NAT)g(->)h(NAT\))185 596
y Fw(is)d(a)h(t)o(yp)q(e)g(structure,)h(where)e Fu(LAMBDA)h(\(\).)51
b(NAT)21 b Fw(is)i(the)g(t)o(yp)q(e)f(function)h(and)g Fu(Zero)h(NAT)185
656 y(Succ)g(\(NAT)g(->)h(NAT\))15 b Fw(is)h(the)g(constructor)g(en)o
(vironmen)o(t.)66 800 y Fr(1.3.3)70 b(Making)24 b(a)f(new)g(stand-alone)g
(program)66 893 y Fw(Most)14 b(ML)g(systems)e(ha)o(v)o(e)h(a)h(w)o(a)o(y)f
(of)h(creating)g(a)g(stand-alone)g(program)g(from)e(a)i(ML)g(function.)20
b(The)66 953 y(metho)q(d)f(v)m(aries)f(a)i(bit)e(from)g(system)f(to)j
(system.)27 b(The)19 b Fu(evalFile)d Fw(program)j(of)g(Section)f(1.1)i(w)o
(as)66 1013 y(created)c(from)f(a)i(kit)e(session)i(in)f(SML/NJ)h(b)o(y)e(t)o
(yping)246 1115 y Fu(exportFn\(")o(ev)o(alF)o(ile)o(",f)o(n)22
b(\(\(_::infile)o(::r)o(est)o(\),)o(_\))g(=>)j(evalFile)e(infile\);)66
1216 y Fw(Y)l(ou)17 b(can)f(also)h(sa)o(v)o(e)e(the)h(en)o(tire)f(kit)h
(session)h(as)f(an)h(executable)e(\014le)h(b)o(y)f(t)o(yping)246
1318 y Fu(exportML)23 b("newkit";)188 1432 y Fx(W)-5 b(arning:)42
b(The)27 b(v)n(ersions)f(of)i(the)e(Kit)h(y)n(ou)g(create)f(with)h
Fu(exportFn)e Fx(and)188 1492 y Fu(exportML)16 b Fx(are)i(large,)g(t)n
(ypically)f(4)i(and)g(9)g(Mb)n(ytes,)f(resp)r(ectiv)n(ely)-6
b(.)p eop
%%Page: 5 108
bop 66 50 a Fs(CHAPTER)17 b(1.)37 b(A)16 b(FIRST)g(SESSION)g(WITH)g(THE)g
(KIT)720 b Fw(5)181 195 y(The)15 b(\014rst)h(line)e Fu(\(*$Flags:)22
b(FLAGS*\))13 b Fw(is)i(a)h(commen)n(t)d(for)i(the)g Fu(make)f
Fw(system.)19 b(Inside)c(the)g(kit)185 255 y(session,)h(w)o(e)g(no)o(w)g(t)o
(yp)q(e)323 357 y Fu(touch)24 b("Flags";)181 459 y Fw(whic)o(h)18
b(tells)g(the)h Fu(make)e Fw(system)g(that)j(w)o(e)e(ha)o(v)o(e)g(altered)g
(the)h(\014le)f(whic)o(h)g(con)o(tains)h(the)g(lab)q(el)185
519 y Fu(Flags)p Fw(.)28 b(The)20 b Fu(make)e Fw(system)g(resp)q(onds)i(with)
g(a)f(message)g(ac)o(kno)o(wledging)g(that)h Fu(Flags)d Fw(has)185
579 y(b)q(een)f(altered;)f(w)o(e)h(then)g(t)o(yp)q(e)323 681
y Fu(make)24 b("K";)181 782 y Fw(whic)o(h)15 b(instructs)g(the)g
Fu(make)f Fw(system)g(to)h(re-compile)e(as)j(m)o(uc)o(h)d(of)j(the)f(Kit)g
(as)h(it)e(needs.)21 b(After)185 843 y(some)15 b(time,)e(y)o(ou)k(will)e(see)
g(something)h(lik)o(e)323 944 y Fu(structure)22 b(K)j(:)374
1005 y(sig)425 1065 y(val)g(parse)f(:)h(unit)f(->)h(unit)425
1125 y(val)g(elab)f(:)h(unit)f(->)h(unit)425 1185 y(val)g(eval)f(:)h(unit)f
(->)h(unit)425 1245 y(val)g(parseFile)d(:)j(string)f(->)h(unit)425
1306 y(val)g(elabFile)e(:)i(string)e(->)i(unit)425 1366 y(val)g(evalFile)e(:)
i(string)e(->)i(unit)374 1426 y(end)323 1546 y(open)f(K)400
1606 y([Make:)f(K)i(now)g(OK])323 1667 y([closing)d(\045Make.tmp\045])323
1727 y(val)i(it)h(=)g(\(\))g(:)h(unit)323 1787 y(-)181 1889
y Fw(Y)l(ou)17 b(can)f(no)o(w)h(see)g(the)f(e\013ect)g(of)h(the)g(c)o(hange)f
(b)o(y)g(executing)g Fu(simpleprog)o(.sm)o(l)d Fw(in)k(the)f(new)185
1949 y(Kit:)451 2051 y Fu(evalFile)23 b("../examp)o(les)o(/s)o(imp)o(lep)o
(rog)o(.s)o(ml")o(;)181 2152 y Fw(whic)o(h)16 b(prin)o(ts)f(out)i(a)g(length)
o(y)e(piece)g(of)i(prose,)f(b)q(eginning)g(with)323 2254 y
Fu({{NAT},)23 b(3})323 2435 y(structure)f(ARITH)i(:)400 2495
y(sig\(3\))477 2555 y(NAT)g(LAMBDA)g(\(\).)g(NAT/)g(Zero)g(NAT)h(Succ)f
(\(NAT)g(->)h(NAT\))477 2615 y(val)f(twice:)g(\(NAT)g(->)h(NAT\))f(con)g
(Succ:)g(\(NAT)g(->)h(NAT\))f(con)h(Zero:)f(NAT)400 2736 y(end)p
eop
%%Page: 4 109
bop 66 50 a Fs(CHAPTER)17 b(1.)32 b(A)16 b(FIRST)g(SESSION)g(WITH)f(THE)i
(KIT)725 b Fw(4)323 195 y Fu(>)25 b(val)g(y)g(=)g(12)g(:)g(int)323
255 y(.)g(val)g(it)f(=)i(\(\))f(:)g(unit)323 315 y(-)66 417
y Fw(The)18 b(\014rst)h(and)f(the)g(last)g(line)f(are)h(part)g(of)g(the)g
(NJ/SML)g(session;)h Fu(^D)e Fw(w)o(as)i(t)o(yp)q(ed)f(after)f
Fu(.)27 b Fw(in)17 b(the)66 477 y(p)q(en)o(ultimate)d(line.)140
538 y(The)j(last)h(three)f(functions,)g Fu(parseFile)p Fw(,)e
Fu(elabFile)f Fw(and)k Fu(evalFile)p Fw(,)d(corresp)q(ond)k(to)e
Fu(parse)p Fw(,)66 598 y Fu(elab)11 b Fw(and)i Fu(eval)p Fw(,)e(except)g
(that)i(the)f(former)f(tak)o(e)h(their)f(input)h(from)f(a)i(\014le,)f(whose)h
(name)e(is)h(pro)o(vided)66 658 y(as)17 b(an)g(argumen)o(t.)66
802 y Fr(1.3.2)70 b(Mo)r(difying)23 b(the)f(Kit)66 895 y Fw(When)d(y)o(ou)g
(w)o(an)o(t)f(to)h(mo)q(dify)f(the)g(Kit,)g(the)h(basic)g(mo)q(de)e(of)i(op)q
(eration)h(is)e(as)i(follo)o(ws.)28 b(Y)l(ou)19 b(\014rst)66
955 y(edit)e(the)f(source)h(\014le\(s\))g(y)o(ou)g(w)o(an)o(t)g(to)g(c)o
(hange,)g(using)g(y)o(our)g(fa)o(v)o(ourite)f(editor.)23 b(Y)l(ou)17
b(then)g(tell)e(the)66 1015 y(kit)i(session)g(that)g(y)o(ou)g(ha)o(v)o(e)f
(touc)o(hed)h(these)f(\014les)h(and)g(ask)h(it)e(to)h(re-compile)e(as)i
(little)e(as)j(p)q(ossible)66 1075 y(in)e(order)h(to)f(re-build)g(the)g(Kit.)
66 1185 y Fx(Example)h(1.2)37 b Fw(Supp)q(ose)12 b(y)o(ou)f(w)o(an)o(t)g(mo)q
(dify)f(the)h(Kit)g(so)h(that)f(it)g(prin)o(ts)g(out)g(the)g(seman)o(tic)f
(ob)s(jects)185 1246 y(of)15 b(the)g(static)f(seman)o(tics.)19
b(\(Seman)o(tic)13 b(ob)s(jects)h(are)i(things)f(lik)o(e)e(structure)i(and)g
(t)o(yp)q(e)g(names,)185 1306 y(signatures,)h(and)g(functor)g(signatures.\))
22 b(Y)l(ou)15 b(then)h(edit)f(the)h(\014le)f Fu(Kit/Common)o(/Fl)o(ag)o(s.s)
o(ml)p Fw(,)185 1366 y(whic)o(h)g(initially)f(con)o(tains)323
1468 y Fu(\(*$Flags:)22 b(FLAGS*\))323 1528 y(functor)h(Flags\(\):)g(FLAGS)g
(=)374 1588 y(struct)425 1648 y(val)i(DEBUG_LEXI)o(NG)176 b(=)25
b(false)425 1708 y(val)g(DEBUG_PARS)o(IN)o(G)151 b(=)25 b(false)425
1769 y(val)g(DEBUG_ELAB)o(TO)o(PDE)o(C)74 b(=)25 b(false)425
1829 y(val)g(DEBUG_ENVI)o(RO)o(NME)o(NTS)d(=)j(false)425 1889
y(val)g(DEBUG_EVAL)o(DE)o(C)151 b(=)25 b(false)425 1949 y(....)374
2009 y(end;)181 2111 y Fw(c)o(hanging)17 b(it)e(to)323 2213
y Fu(\(*$Flags:)22 b(FLAGS*\))323 2273 y(functor)h(Flags\(\):)g(FLAGS)g(=)374
2333 y(struct)425 2393 y(val)i(DEBUG_LEXI)o(NG)176 b(=)25 b(false)425
2453 y(val)g(DEBUG_PARS)o(IN)o(G)151 b(=)25 b(false)425 2514
y(val)g(DEBUG_ELAB)o(TO)o(PDE)o(C)74 b(=)25 b(true)425 2574
y(val)g(DEBUG_ENVI)o(RO)o(NME)o(NTS)d(=)j(true)425 2634 y(val)g(DEBUG_EVAL)o
(DE)o(C)151 b(=)25 b(false)425 2694 y(....)374 2754 y(end;)p
eop
%%Page: 3 110
bop 66 50 a Fs(CHAPTER)17 b(1.)37 b(A)16 b(FIRST)g(SESSION)g(WITH)g(THE)g
(KIT)720 b Fw(3)271 195 y Fu(The)25 b(ML)g(Kit,)f(Version)f(1)271
255 y(Copyright)g(\(C\))h(1993)h(Edinburgh)d(and)i(Copenhagen)e(Universitie)o
(s)271 315 y(val)j(it)g(=)g(\(\))g(:)g(unit)271 376 y(-)66
477 y Fw(whic)o(h)16 b(is)g(the)g(kit)g(session's)g(w)o(a)o(y)g(of)g
(greeting)g(y)o(ou.)22 b(If)15 b(y)o(ou)h(no)o(w)h(t)o(yp)q(e)451
579 y Fu(evalFile)23 b("../examp)o(les)o(/s)o(imp)o(lep)o(rog)o(.s)o(ml")o(;)
66 681 y Fw(y)o(ou)17 b(get)f(the)g(reply)323 782 y Fu(>)25
b(structure)d(ARITH)i(=)425 843 y(struct)477 903 y(datatype)e(NAT)528
963 y(con)i(Succ)h(:)g(\(NAT)f(->)h(NAT\))528 1023 y(con)f(Zero)h(:)g(NAT)477
1083 y(val)f(twice)g(=)h(fn)g(:)g(\(NAT)f(->)h(NAT\))425 1144
y(end)323 1204 y(>)g(datatype)e(NAT)425 1264 y(con)i(Succ)f(:)h(\(NAT)f(->)h
(NAT\))425 1324 y(con)g(Zero)f(:)h(NAT)374 1384 y(val)g(twice)e(=)j(fn)f(:)g
(\(NAT)f(->)h(NAT\))323 1445 y(>)g(val)g(two)f(=)h(Succ\(Succ\(Z)o(ero)o
(\)\))d(:)j(NAT)323 1505 y(>)g(val)g(it)f(=)i(Succ\(Succ)o(\(Su)o(cc\()o(Su)o
(cc\()o(Zer)o(o\)\))o(\)\))c(:)j(NAT)66 1606 y Fw(Notice)16
b(that)h Fu(evalFile)c Fw(is)k(no)o(w)f(an)h(ML)g(function)f(of)h(t)o(yp)q(e)
f Fu(string)24 b(->)g(unit)p Fw(.)d(In)16 b(total,)h(the)f(Kit)66
1667 y(only)g(pro)o(vides)g(6)h(functions:)374 1768 y Fu(sig)425
1829 y(val)25 b(parse:)e(unit)h(->)h(unit)425 1889 y(val)g(elab:)f(unit)g(->)
h(unit)425 1949 y(val)g(eval:)f(unit)g(->)h(unit)425 2069 y(val)g(parseFile:)
d(string)h(->)i(unit)425 2130 y(val)g(elabFile:)d(string)i(->)g(unit)425
2190 y(val)h(evalFile:)d(string)i(->)g(unit)374 2250 y(end)66
2352 y Fw(The)17 b(\014rst)g(three)g(functions)f(start)i(up)f(a)g(top-lev)o
(el)e(in)o(teractiv)o(e)g(dialogue)i(with)f(y)o(ou,)h(similar)e(to)i(an)66
2412 y(ML)i(session)g(with)f(an)o(y)g(other)h(ML)g(system.)26
b Fu(parse)17 b Fw(only)h(parses,)h Fu(elab)e Fw(parses)i(and)g(elab)q
(orates,)66 2472 y(and)14 b Fu(eval)e Fw(parses,)j(elab)q(orates)f(and)g(ev)m
(aluates.)20 b(The)14 b(dialogue)f(is)g(terminated)f(b)o(y)h
Fu(^D)p Fw(,)f(whic)o(h)h(sends)66 2532 y(y)o(ou)k(bac)o(k)e(to)i(the)f
(SML/NJ)h(session.)323 2634 y Fu(-)25 b(eval\(\);)323 2694
y(.)g(val)g(x)g(=)g(3+3;)323 2754 y(>)g(val)g(x)g(=)g(6)g(:)h(int)323
2814 y(.)f(val)g(y)g(=)g(x)g(+)h(x;)p eop
%%Page: 2 111
bop 66 50 a Fs(CHAPTER)17 b(1.)32 b(A)16 b(FIRST)g(SESSION)g(WITH)f(THE)i
(KIT)725 b Fw(2)195 255 y Fu(val)24 b(two)h(=)g(Succ\(Succ)d(Zero\))i(;)195
376 y(twice)f(two)i(;)181 477 y Fw(whic)o(h)e(inciden)o(tally)d(is)k(the)f
(program)g(whic)o(h)f(is)h(studied)g(in)g(depth)h(in)e(Section)h(1)h(of)f
(the)185 538 y(Commen)o(tary)l(.)18 b(Place)e(y)o(ourself)f(in)h(the)g
Fu(src)f Fw(directory;)g(then)h(t)o(yp)q(e)451 639 y Fu(evalFile)23
b(../exampl)o(es/)o(si)o(mpl)o(epr)o(og.)o(sm)o(l)181 741 y
Fw(This)13 b(executes)f(the)g(program)h(in)g Fu(simplepro)o(g.s)o(ml)d
Fw(and)j(prin)o(ts)g(the)f(result)h(on)g(the)g(terminal:)323
843 y Fu(>)25 b(structure)d(ARITH)i(=)425 903 y(struct)477
963 y(datatype)e(NAT)528 1023 y(con)i(Succ)h(:)g(\(NAT)f(->)h(NAT\))528
1083 y(con)f(Zero)h(:)g(NAT)477 1144 y(val)f(twice)g(=)h(fn)g(:)g(\(NAT)f(->)
h(NAT\))425 1204 y(end)323 1264 y(>)g(datatype)e(NAT)425 1324
y(con)i(Succ)f(:)h(\(NAT)f(->)h(NAT\))425 1384 y(con)g(Zero)f(:)h(NAT)374
1445 y(val)g(twice)e(=)j(fn)f(:)g(\(NAT)f(->)h(NAT\))323 1505
y(>)g(val)g(two)f(=)h(Succ\(Succ\(Z)o(ero)o(\)\))d(:)j(NAT)323
1565 y(>)g(val)g(it)f(=)i(Succ\(Succ)o(\(Su)o(cc\()o(Su)o(cc\()o(Zer)o(o\)\))
o(\)\))c(:)j(NAT)66 1731 y Ft(1.3)83 b(W)-7 b(orking)20 b(with)g(the)f(Kit)h
(inside)e(another)i(ML)g(system)66 1841 y Fw(When)14 b(y)o(ou)g(w)o(an)o(t)g
(to)g(mo)q(dify)f(the)h(Kit,)f(y)o(ou)h(w)o(ork)g(inside)f(another)h(ML)h
(system,)d(for)i(instance)g(SML)66 1901 y(of)g(New)g(Jersey)f(or)h(P)o
(oly/ML.)f(In)h(the)f(presen)o(t)h(example,)d(w)o(e)j(assume)f(that)h(SML)g
(of)g(New)f(Jersey)g(is)66 1961 y(used.)21 b(When)16 b(y)o(ou)f(run)h(the)f
(executable)f(\014le)h Fu(kit)p Fw(,)f(y)o(ou)h(then)g(get)h(a)g(session)f
(with)h(Standard)g(ML)g(of)66 2021 y(New)g(Jersey)g(\(SML/NJ\).)g(This)h
(session,)f(whic)o(h)g(w)o(e)g(refer)f(to)i(as)g(the)f Fs(kit)g(session)p
Fw(,)g(di\013ers)g(from)g(an)66 2082 y(ordinary)f(SML/NJ)g(session)f(in)g
(that)h(it)f(has)h(the)f(Edin)o(burgh)h(Standard)g(ML)g(Library)f(and)h(the)f
(ML)66 2142 y(Kit)19 b(mo)q(dules)f(loaded.)29 b(In)18 b(a)h(kit)g(session)g
(y)o(ou)f(can)h(re-compile)e(parts)i(of)g(the)g(Kit)f(using)h(the)g(ML)66
2202 y Fu(make)14 b Fw(system)f(\(whic)o(h)h(is)h(part)g(of)h(the)e(Edin)o
(burgh)h(Standard)h(ML)f(Library\),)g(y)o(ou)g(can)g(execute)e(the)66
2262 y(Kit)19 b(on)h(programs)g(and)g(y)o(ou)f(can)h(create)f(stand-alone)h
(programs,)g(lik)o(e)e(the)h Fu(evalFile)d Fw(program)66 2322
y(sho)o(wn)h(in)f(Section)g(1.1.)22 b(W)l(e)16 b(no)o(w)g(illustrate)f(eac)o
(h)h(of)h(these.)66 2467 y Fr(1.3.1)70 b(Starting)23 b Fq(kit)66
2559 y Fw(Place)16 b(y)o(ourself)g(in)g(the)g(directory)f Fu(src)g
Fw(and)i(t)o(yp)q(e)451 2661 y Fu(kit)66 2763 y Fw(whic)o(h)f(yields)f(the)h
(result)p eop
%%Page: 1 112
bop 66 527 a Fy(Chapter)40 b(1)66 735 y(A)g(\014rst)f(session)i(with)g(the)f
(Kit)66 961 y Fw(Before)17 b(diving)h(in)o(to)f(the)h(in)o(ternal)f
(structure)g(of)h(the)g(Kit,)f(let)g(us)i(explain)e(ho)o(w)h(one)g(uses)g
(the)g(Kit)66 1021 y(for)g(executing)f(ML)h(programs)g(and)g(ho)o(w)g(one)g
(p)q(erforms)f(simple)e(c)o(hanges)j(to)g(the)g(Kit.)25 b(W)l(e)17
b(do)i(so)66 1081 y(in)e(the)f(st)o(yle)g(of)h(a)g(tutorial;)f(it)g(is)g
(recommended)e(that)j(the)f(reader)h(try)f(out)h(the)f(examples)f(in)h(this)
66 1142 y(section)e(on)g(the)g(mac)o(hine.)k(In)c(the)g(examples,)e(w)o(e)h
(assume)g(that)i(SML)f(of)g(New)g(Jersey)f(is)h(used,)g(and)66
1202 y(that)i(b)q(oth)g(the)f(batc)o(h)g(impleme)o(n)o(tation)e(and)i(the)g
(in)o(terpreter)f(has)i(b)q(een)f(built)g(\(see)f(Section)h(A.3\).)66
1262 y(If)h(P)o(oly/ML)g(is)f(used)h(to)g(build)f(the)h(Kit,)f(it)g(is)h(not)
g(p)q(ossible)g(to)g(mak)o(e)e(the)h(batc)o(h)h(v)o(ersion)f(and)h(y)o(ou)66
1322 y(should)h(skip)f(section)g(1.2)g(b)q(elo)o(w.)66 1489
y Ft(1.1)83 b(Where)28 b(to)f(\014nd)g(things)66 1598 y Fw(Once)17
b(the)h(Kit)f(has)h(b)q(een)g(built)f(\(see)g(Section)g(A.3\),)g(the)g
(directory)g Fu(src)f Fw(con)o(tains)i(\(at)g(least\))f(t)o(w)o(o)66
1658 y(executable)d(\014les,)g Fu(evalFile)e Fw(and)j Fu(kit)p
Fw(.)k(The)c(former)e(is)i(a)g(stand-alone)h(batc)o(h)e(implem)o(en)o(tation)
e(of)66 1718 y(ML;)j(the)f(latter)g(is)h(the)f(v)o(ersion)g(one)h(uses)g
(when)f(one)h(w)o(an)o(ts)g(to)g(mo)q(dify)e(the)i(Kit.)20
b(In)14 b(the)h(follo)o(wing)66 1779 y(subsections,)h(w)o(e)g(illustrate)g
(the)g(use)g(of)g(b)q(oth.)66 1945 y Ft(1.2)83 b(Running)27
b(the)g(Kit)h(as)f(a)g(stand-alone)g(program)66 2055 y Fw(Y)l(ou)15
b(can)g(use)g(the)f(Kit)h(as)g(a)g(batc)o(h)g(system)e(whic)o(h)h(reads)h
(its)g(input)g(from)e(a)i(named)f(\014le)g(and)i(prin)o(ts)66
2115 y(the)g(output)h(on)g(the)f(standard)i(output.)66 2225
y Fx(Example)f(1.1)37 b Fw(The)17 b(directory)f Fu(examples)e
Fw(con)o(tains)j(a)h(the)f(\014le)f Fu(simpleprog.)o(sml)o
Fw(,)e(whic)o(h)j(con-)185 2285 y(tains)f(the)g(ML)g(program)195
2387 y Fu(structure)22 b(ARITH)i(=)271 2447 y(struct)348 2507
y(datatype)f(NAT)i(=)g(Zero)f(|)h(Succ)f(of)h(NAT)348 2567
y(fun)g(twice\(Zero)o(\))e(=)i(Zero)400 2627 y(|)g(twice\(Succ)d(x\))j(=)g
(Succ\(Succ\()o(twi)o(ce)d(x\)\))271 2688 y(end)j(;)195 2808
y(open)f(ARITH)g(;)999 2947 y Fw(1)p eop
%%Page: 6 113
bop 140 195 a Fw(W)l(e)19 b(ha)o(v)o(e)g(tried)h(to)g(k)o(eep)f(this)h(do)q
(cumen)o(t)e(fairly)h(mo)q(dular.)32 b(W)l(e)20 b(recommend)d(starting)j
(with)66 255 y(Section)f(1,)i(whic)o(h)e(is)g(a)h(quic)o(k)e(tutorial)i(to)g
(giv)o(e)e(an)i(idea)g(of)g(ho)o(w)g(one)f(uses)h(the)g(Kit)f(to)h(execute)66
315 y(ML)e(programs.)24 b(Then)17 b(pro)q(ceed)h(to)f(Section)g(2)g(whic)o(h)
g(explains)f(the)h(st)o(yle)f(of)i(programming)e(that)66 376
y(connects)g(the)f(Kit)g(and)h(the)g(De\014nition;)f(this)g(section)g(also)i
(explains)e(the)g(o)o(v)o(erall)f(structure,)h(giv)o(es)66
436 y(examples)g(of)h(Kit)g(mo)q(dules)f(and)i(explains)f(ho)o(w)g(the)g
(whole)g(Kit)g(is)g(put)h(together.)140 496 y(Thereafter,)22
b(one)g(can)g(branc)o(h)g(out)h(to)f(the)g(other)g(parts)g(of)g(the)g(do)q
(cumen)o(t,)g(dep)q(ending)g(on)66 556 y(in)o(terest.)36 b(W)l(e)21
b(co)o(v)o(er)g(parsing,)i(elab)q(oration,)g(ev)m(aluation,)f(and)h
(compilation)c(in)o(to)j(the)f(lam)o(b)q(da-)66 616 y(language.)140
677 y(Section)g(A.3)h(explains)g(ho)o(w)g(to)h(install)e(the)h(Kit.)39
b(App)q(endix)21 b(B)h(con)o(tains)g(a)h(list)e(of)i(things)66
737 y(that)17 b(are)f(not)h(\(y)o(et\))e(implem)o(en)n(ted)e(in)j(the)g(Kit,)
f(although)i(they)f(are)g(Standard)h(ML.)f(App)q(endix)g(B)66
797 y(con)o(tains)h(a)f(list)g(of)g(kno)o(wn)h(bugs.)66 963
y Ft(What)28 b(y)n(ou)f(m)n(ust)f(not)i(exp)r(ect)f(of)h(the)f(Kit)66
1073 y Fw(The)21 b(Kit)f(w)o(as)h(written)f(mostly)f(for)h(fun;)j(although)e
(it)f(has)h(cop)q(ed)g(successfully)e(with)i(large)f(ML)66
1133 y(programs,)c(is)f(has)h(nev)o(er)f(b)q(een)g(rigorously)h(tested,)f
(let)f(alone)i(pro)o(v)o(ed)f(to)h(b)q(e)f(correct)g(with)h(resp)q(ect)66
1193 y(to)j(the)g(De\014nition.)28 b(Ev)o(en)18 b(a)h(careful)f(testing)h(of)
g(the)g(Kit)f(has)h(b)q(een)g(out)g(of)g(the)f(question,)h(giv)o(en)66
1253 y(the)c(limited)c(manp)q(o)o(w)o(er)j(a)o(v)m(ailable)g(for)g(this)h
(pro)s(ject.)20 b(The)14 b(fact)h(that)g(the)f(Kit)g(is)g(deriv)o(ed)f(from)g
(the)66 1314 y(De\014nition)j(is)g(of)h(course)f(in)g(itself)f(no)i(guaran)o
(tee)g(of)f(its)g(correctness.)992 2947 y(vi)p eop
%%Page: 5 114
bop 66 195 a Fw(i.e.)19 b(it)12 b(con)o(tains)h(no)g(free)e(iden)o
(ti\014ers,)h(except)f(those)i(that)g(are)f(part)h(of)g(the)f(initial)f
(basis)i(of)g(Standard)66 255 y(ML)18 b(or)g(are)f(in)g(the)g(Edin)o(burgh)h
(SML)g(Library)f([7].)24 b(References)16 b(and)i(assignmen)o(ts)f(are)g
(generally)66 315 y(a)o(v)o(oided,)i(except)f(for)i(trivial)e(purp)q(oses,)i
(suc)o(h)f(as)h(generating)f(fresh)h(sym)o(b)q(ols.)29 b(Whenev)o(er)17
b(faced)66 376 y(with)g(the)f(c)o(hoice)f(b)q(et)o(w)o(een)h(writing)g(clev)o
(er)e(co)q(de)j(and)g(writing)g(clear)e(co)q(de,)i(w)o(e)f(ha)o(v)o(e)f
(consisten)o(tly)66 436 y(c)o(hosen)22 b(not)h(to)g(write)e(clev)o(er)g(co)q
(de)h(\(whether)g(the)g(co)q(de)g(is)g(clear,)h(is)f(not)g(for)h(us)g(to)f
(sa)o(y\).)39 b(No)66 496 y(attempt)15 b(is)h(made)g(to)g(c)o(ho)q(ose)h
(fast)g(data)g(structures)f(and)h(algorithms.)140 556 y(Ho)o(w)o(ev)o(er,)j
(considerable)g(energy)h(has)h(b)q(een)f(dev)o(oted)g(to)g(ac)o(hieving)f(go)
q(o)q(d)k(mo)q(dularit)o(y)l(.)34 b(F)l(or)66 616 y(example,)10
b(although)j(man)o(y)e(algorithms)g(in)g(the)h(Kit)f(use)h(asso)q(ciation)h
(lists)e(for)i(k)o(eeping)d(information)66 677 y(ab)q(out)19
b(iden)o(ti\014ers)c(\(rather)i(than)g(hash)h(tables)e(or)i(searc)o(h)e
(trees\),)g(none)h(of)g(the)g(algorithms)f(kno)o(ws)66 737
y(it;)f(they)f(simply)e(kno)o(w)i(that)h(there)f(are)h(en)o(vironmen)o(ts)d
(and)j(that)g(one)f(can)h(use)f(certain)g(op)q(erations)66
797 y(on)g(en)o(vironmen)o(ts,)c(but)j(they)g(do)g(not)g(kno)o(w)g(ab)q(out)h
(the)f(actual)g(implem)o(en)n(tation)e(details.)19 b(That)14
b(w)o(e)66 857 y(can)19 b(mak)o(e)d(suc)o(h)h(categorical)h(statemen)o(ts)e
(ab)q(out)j(who)g(kno)o(ws)f(what,)h(is)f(thanks)g(to)g(the)g(mo)q(dules)66
917 y(system,)d(in)i(particular)f(the)h(functor)f(concept,)g(whic)o(h)g(mak)o
(es)f(it)i(p)q(ossible)f(to)i(get)e(the)h(ML)g(system)66 978
y(to)k(c)o(hec)o(k)e(that)i(mo)q(dules)e(do)i(not)g(use)f(information)g(whic)
o(h)f(is)i(not)f(explicitly)e(sp)q(eci\014ed)i(in)g(their)66
1038 y(in)o(terfaces.)k(Y)l(ou)17 b(will)f(probably)i(nev)o(er)e(ha)o(v)o(e)g
(seen)h(as)h(man)o(y)e(sharing)i(sp)q(eci\014cations)f(in)g(y)o(our)h(life)66
1098 y(as)f(y)o(ou)f(will)g(see)f(in)h(the)g(Kit,)g(but)g(that)h(is)f(the)g
(price)f(one)h(pa)o(ys)h(for)f(ha)o(ving)g(complete)e(in)o(terfaces.)140
1158 y(One)20 b(of)g(the)g(main)f(aims)g(of)i(writing)f(the)g(Kit)g(has)h(b)q
(een)f(to)h(create)f(a)g(v)o(ery)f(\\op)q(en")j(system,)66
1218 y(whic)o(h)d(p)q(eople)f(will)g(think)g(of)h(as)h(a)f(collection)f(of)h
(relativ)o(ely)d(indep)q(enden)o(t)i(mo)q(dules,)g(with)h(clean)66
1279 y(in)o(terfaces,)g(rather)g(than)h(a)f(big,)h(monolithic)d(compiler.)27
b(Indeed)18 b(that)i(is)f(wh)o(y)g(the)g(Kit)f(is)h(called)66
1339 y(the)d(Kit.)66 1505 y Ft(Who)28 b(is)f(the)g(Kit)h(aimed)e(at?)66
1615 y Fw(W)l(e)14 b(imagine)e(that)j(a)f(t)o(ypical)f(user)g(of)i(the)e(Kit)
h(is)f(a)i(p)q(erson)g(who)f(needs)g(a)g(parser)g(and)h(t)o(yp)q(e-c)o(hec)o
(k)o(er)66 1675 y(for)j(ML,)f(but)h(has)g(no)f(in)o(ten)o(tion)f(of)i
(writing)f(them.)23 b(Another)17 b(t)o(ypical)f(user)h(w)o(ould)h(b)q(e)f
(someb)q(o)q(dy)66 1735 y(who)e(w)o(ould)g(lik)o(e)d(to)j(implem)o(en)o(t)c
(some)i(v)m(arian)o(t)i(of)f(ML)h(t)o(yping,)f(for)g(example)e(p)q
(olymorphism)g(with)66 1795 y(a)21 b(di\013eren)o(t)f(w)o(a)o(y)g(of)h(t)o
(yp)q(e-c)o(hec)o(king)e(records.)34 b(Y)l(et)20 b(another)h(p)q(ossible)g
(user)f(w)o(ould)h(b)q(e)f(a)h(p)q(erson)66 1855 y(who)16 b(w)o(an)o(ts)g(to)
f(in)o(v)o(estigate)f(the)h(relativ)o(e)e(frequency)h(of)h(certain)g
(language)h(constructs)f(in)g(real)g(ML)66 1916 y(programs,)e(and)h
(therefore)e(needs)g(a)h(parser)g(whic)o(h)f(pro)q(duces)h(abstract)g(syn)o
(tax)g(trees)f(that)h(conform)66 1976 y(to)18 b(the)f(language)i
(de\014nition.)24 b(Finally)l(,)16 b(an)o(yb)q(o)q(dy)i(who)g(w)o(an)o(ts)g
(to)f(write)g(a)h(compiler)d(from)h(ML)i(to)66 2036 y(some)e(other)g
(language,)h(w)o(ould)f(of)h(course)f(b)q(e)g(a)h(p)q(oten)o(tial)f(user.)66
2202 y Ft(Ho)n(w)27 b(to)h(read)f(this)g(do)r(cumen)n(t)66
2312 y Fw(W)l(e)17 b(assume)f(that)h(the)f(reader)g(has)h(a)g(general)g(kno)o
(wledge)f(of)h(Standard)g(ML.)g(Also)f(necessary)g(are)66 2372
y(a)j(cop)o(y)f(of)g(the)g(De\014nition)g(of)g(Standard)h(ML)g(and)f(the)g
(Commen)o(tary)e(on)i(Standard)i(ML)e(\(whic)o(h)66 2432 y(w)o(e)f(shall)h
(refer)e(to)i(simply)e(as)i(the)f(De\014nition)g(and)h(the)f(Commen)o(tary)l
(,)e(from)i(no)o(w)g(on\).)26 b(W)l(e)17 b(ha)o(v)o(e)66 2492
y(not)h(undertak)o(en)g(explaining)e(the)i(seman)o(tics)d(of)j(ML)g(in)f
(this)h(do)q(cumen)o(t;)e(instead)i(w)o(e)f(frequen)o(tly)66
2553 y(refer)f(to)g(parts)h(of)g(the)f(Commen)o(tary)e(when)i(discussing)g
(details)g(of)h(the)f(Kit.)140 2613 y(The)f(purp)q(ose)g(of)h(this)f(do)q
(cumen)o(t)e(is)i(not)g(to)h(giv)o(e)e(a)h(thorough)h(description)f(of)g(all)
f(the)h(mo)q(dules)66 2673 y(of)f(the)g(Kit.)20 b(On)14 b(the)f(con)o(trary)l
(,)h(the)f(idea)h(is)f(to)h(supply)g(just)g(enough)g(information)f(that)h(it)
f(b)q(ecomes)66 2733 y(p)q(ossible)k(to)f(na)o(vigate)h(around)g(the)f(Kit.)
998 2947 y(v)p eop
%%Page: 4 115
bop 66 527 a Fy(Preface)66 753 y Fw(The)13 b(ML)g(Kit)f(is)g(an)h(implem)o
(en)o(tati)o(on)e(of)h(the)h(programming)e(language)i(Standard)h(ML[11],)f
(written)66 814 y(in)j(Standard)g(ML.)f(In)g(this)h(preface)f(w)o(e)f(wish)i
(to)g(explain)e(wh)o(y)i(w)o(e)f(ha)o(v)o(e)f(written)h(the)g(Kit,)g(and)h
(for)66 874 y(whom.)66 1040 y Ft(Historical)27 b(origins)66
1150 y Fw(The)20 b(ML)g(Kit)f(has)i(its)e(ro)q(ots)i(in)f(the)f(w)o(ork)h(on)
g(the)g(formal)e(de\014nition)i(of)g(Standard)g(ML,)g(whic)o(h)66
1210 y(is)e(do)q(cumen)o(ted)d(in)i(the)g(De\014nition)h(of)f(Standard)i(ML)e
([11)q(])f(and)i(the)f(Commen)o(tary)e(on)j(Standard)66 1270
y(ML)f([10)q(].)22 b(W)l(riting)17 b(the)f(language)i(de\014nition)e(in)o(v)o
(olv)o(ed)f(\\clerical")g(\(although)j(imp)q(ortan)o(t\))e(tasks,)66
1330 y(suc)o(h)c(as)h(imp)q(osing)f(structure)g(and)h(mo)q(dularit)o(y)d(on)j
(the)f(seman)o(tics,)f(c)o(ho)q(osing)i(notation)g(and)g(termi-)66
1390 y(nology)l(,)h(and)g(doing)g(quite)e(a)i(lot)f(of)g(engineering)g(with)g
(inference)f(rules.)19 b(These)13 b(activities)f(resem)o(ble)66
1451 y(programming.)20 b(The)14 b(though)o(t)i(o)q(ccurred,)e(that)h(it)g
(migh)o(t)e(b)q(e)i(feasible)f(to)h(sp)q(ell)f(out)h(the)g(en)o(tire)e(lan-)
66 1511 y(guage)k(de\014nition,)e(righ)o(t)g(do)o(wn)h(to)g(the)g(c)o(hoice)e
(of)i(v)m(ariable)g(names,)e(in)h(Standard)i(ML)f(itself.)k(This)66
1571 y(is)c(precisely)f(what)i(w)o(e)f(ha)o(v)o(e)f(undertak)o(en)h(to)g(do)h
(in)f(the)g(ML)g(Kit.)66 1737 y Ft(Relationship)27 b(to)h(other)f(ML)g
(implemen)n(tations)66 1847 y Fw(There)18 b(are)f(sev)o(eral)g(v)o(ery)f
(\014ne)h(impleme)o(n)o(tations)e(of)j(Standard)h(ML,)e(including)g(Standard)
h(ML)g(of)66 1907 y(New)g(Jersey[3],)g(P)o(oly/ML)g(and)h(P)o(oplog.)29
b(These)18 b(compilers)f(are)h(pro)q(duction)h(qualit)o(y)e(compilers)66
1967 y(that)12 b(generate)g(e\016cien)o(t,)e(optimized)f(mac)o(hine)h(co)q
(de,)i(using)g(all)f(the)g(tric)o(ks)g(of)h(the)f(trade)h(of)g(compiler)66
2028 y(writing.)22 b(By)15 b(con)o(trast,)h(the)g(ML)h(Kit)f(is)g(basically)f
(an)i(in)o(terpreted)e(system,)f(ev)o(en)h(though)j(it)d(do)q(es)66
2088 y(include)23 b(a)g(compiler)e(in)o(to)j(a)f(simple)f(call-b)o(y-v)m
(alue)g(lam)o(b)q(da-calculus.)42 b(Therefore,)24 b(if)f(y)o(ou)g(are)66
2148 y(primarily)15 b(lo)q(oking)i(for)h(an)f(e\016cien)o(t)e(w)o(a)o(y)i(of)
g(executing)f(y)o(our)h(Standard)h(ML)f(programs,)g(the)g(ML)66
2208 y(Kit)j(is)g(not)g(the)g(implem)o(en)o(tation)d(for)k(y)o(ou.)32
b(Ha)o(ving)20 b(said)g(that,)h(the)f(ML)g(Kit)g(is)f(more)g(e\016cien)o(t)66
2268 y(that)e(one)g(w)o(ould)f(think,)f(giv)o(en)g(that)i(it)f(is)g(written)g
(without)g(an)o(y)g(attempt)f(to)i(mak)o(e)d(it)i(run)g(fast.)66
2435 y Ft(The)28 b(st)n(yle)e(of)i(Kit)f(programming)66 2544
y Fw(The)19 b(st)o(yle)e(of)h(Kit)g(programming)f(is)h(extreme)e(in)i(sev)o
(eral)f(resp)q(ects.)27 b(First)18 b(of)h(all,)f(Standard)h(ML)66
2604 y(mo)q(dules)d(are)h(used)g(extensiv)o(ely)l(,)d(pressing)j(the)g(mo)q
(dules)f(system)g(to)h(its)f(limits.)21 b(Indeed,)16 b(there)g(is)66
2665 y(a)g(great)f(deal)f(more)g(mo)q(dularit)o(y)f(in)h(the)h(Kit)f(than)h
(in)g(the)f(language)i(de\014nition,)e(b)q(ecause)h(w)o(e)f(w)o(an)o(t)66
2725 y(p)q(eople)f(to)g(b)q(e)g(able)g(to)g(pic)o(k)f(and)h(c)o(ho)q(ose)g
(from)f(the)h(mo)q(dules)f(in)g(the)h(Kit,)f(when)h(they)g(w)o(an)o(t)g(to)g
(write)66 2785 y(programs)i(that)f(manipulate)e(ML)j(programs.)20
b(Consequen)o(tly)l(,)13 b(ev)o(ery)g(mo)q(dule)g(is)g(a)i(closed)f(functor,)
992 2947 y(iv)p eop
%%Page: 3 116
bop 252 195 a Fw(5.18.4)32 b(Rules)16 b(88{90)i(|)e(Sharing)h(equations)30
b Fv(:)24 b(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)h(:)45 b Fw(62)140 255 y(5.19)26 b(F)l(unctor)16 b(Signature)g(Matc)o
(hing)32 b Fv(:)25 b(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f
(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(63)140 315
y(5.20)26 b(Files)34 b Fv(:)24 b(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f
(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h
(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(63)66 424 y Fx(6)h(Compilation)16
b(from)i(the)g(Core)h(to)f(Lam)n(b)r(da)808 b(64)140 485 y
Fw(6.1)50 b(In)o(tro)q(duction)21 b Fv(:)k(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)
h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h
(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(64)140 545 y(6.2)50 b(Structural)16
b(Ov)o(erview)47 b Fv(:)24 b(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h
(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45
b Fw(66)140 605 y(6.3)50 b(V)l(ariables)15 b(and)i(En)o(vironmen)o(ts)31
b Fv(:)25 b(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f
(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(67)140 665 y(6.4)50
b(Run)o(time)14 b(Data)j(Ob)s(jects)e(and)i(Represen)o(tations)46
b Fv(:)24 b(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45
b Fw(68)140 725 y(6.5)50 b(The)16 b(Lam)o(b)q(da)g(Language)27
b Fv(:)e(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f
(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(69)140 786
y(6.6)50 b(The)16 b(Declaration)g(Compiler)37 b Fv(:)24 b(:)h(:)f(:)h(:)f(:)h
(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)h(:)45 b Fw(73)252 846 y(6.6.1)56 b(Con)o(v)o(en)o(tions)16
b(and)g(Represen)o(tations)38 b Fv(:)24 b(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f
(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(73)252 906 y(6.6.2)56
b(Compiling)15 b(A)o(tomic)e(Expressions)j Fv(:)24 b(:)h(:)f(:)h(:)f(:)g(:)h
(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b
Fw(76)252 966 y(6.6.3)56 b(Compiling)15 b(Expressions)32 b
Fv(:)24 b(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f
(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(78)252 1026 y(6.6.4)56 b(Compiling)15
b(Declarations)h Fv(:)24 b(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)
f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(78)140
1087 y(6.7)50 b(The)16 b(Matc)o(h)g(Compiler)32 b Fv(:)24 b(:)h(:)f(:)g(:)h
(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h
(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(81)140 1147 y(6.8)50 b(The)16
b(Primitiv)o(e)d(F)l(unctions)36 b Fv(:)24 b(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h
(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45
b Fw(86)140 1207 y(6.9)50 b(Lam)o(b)q(da)16 b(Co)q(de)h(Optimisation)37
b Fv(:)25 b(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f
(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(88)140 1267 y(6.10)26
b(Execution)36 b Fv(:)24 b(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)
f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h
(:)f(:)h(:)45 b Fw(89)140 1327 y(6.11)26 b(Conclusions)36 b
Fv(:)25 b(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h
(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45
b Fw(91)66 1436 y Fx(7)h(Miscellaneous)1421 b(92)140 1496 y
Fw(7.1)50 b(In)o(tro)q(duction)21 b Fv(:)k(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)
h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h
(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(92)140 1557 y(7.2)50 b(Ev)m(aluation)17
b(of)f(the)g(Mo)q(dules)32 b Fv(:)24 b(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)
f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45
b Fw(92)140 1617 y(7.3)50 b(Linking)f Fv(:)25 b(:)f(:)h(:)f(:)h(:)f(:)h(:)f
(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h
(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(94)140 1677
y(7.4)50 b(T)l(op-lev)o(el)15 b(Prin)o(ting)j Fv(:)24 b(:)h(:)f(:)h(:)f(:)g
(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f
(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(95)140 1737 y(7.5)50 b(Implem)o(en)n
(tation)14 b(of)j(the)f(P)o(erv)m(asiv)o(es)39 b Fv(:)24 b(:)h(:)f(:)h(:)f(:)
h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45
b Fw(98)140 1797 y(7.6)50 b(Error)16 b(Detection)g(and)h(Rep)q(orting)c
Fv(:)24 b(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f
(:)h(:)f(:)g(:)h(:)f(:)h(:)c Fw(102)140 1858 y(7.7)50 b(File)15
b(Inclusion)g(and)i(Implem)o(en)o(tation)c(of)k Fu(use)i Fv(:)24
b(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)c
Fw(102)66 1967 y Fx(Bibliograph)n(y)1491 b(105)66 2076 y(A)32
b(Release)17 b(Notes)1388 b(107)140 2136 y Fw(A.1)37 b(Cop)o(yrigh)o(t)16
b(notice)47 b Fv(:)24 b(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f
(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)c
Fw(107)140 2196 y(A.2)37 b(Getting)16 b(this)g(release)26 b
Fv(:)f(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)
h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)c Fw(107)140
2256 y(A.3)37 b(Installation)45 b Fv(:)25 b(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g
(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f
(:)h(:)f(:)g(:)h(:)f(:)h(:)c Fw(108)252 2316 y(A.3.1)43 b(Compilation)15
b(under)h(Standard)h(ML)g(of)f(New)g(Jersey)37 b Fv(:)25 b(:)f(:)h(:)f(:)h(:)
f(:)g(:)h(:)f(:)h(:)c Fw(109)252 2377 y(A.3.2)43 b(Compilation)15
b(under)h(P)o(oly/ML)k Fv(:)25 b(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h
(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)c Fw(109)140 2437 y(A.4)37
b(Non-Standard)17 b(ML)g(primitiv)o(e)o(s)c Fv(:)25 b(:)f(:)h(:)f(:)h(:)f(:)h
(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)c
Fw(109)140 2497 y(A.5)37 b(Compiling)15 b(the)h(Edin)o(burgh)g(Library)g
(using)h(the)f(Kit)39 b Fv(:)25 b(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h
(:)f(:)h(:)c Fw(110)66 2606 y Fx(B)34 b(The)18 b(State)g(of)h(the)f(System)
1132 b(111)991 2947 y Fw(iii)p eop
%%Page: 2 117
bop 140 195 a Fw(3.7)50 b(Files)34 b Fv(:)24 b(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)
h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f
(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(38)66 304
y Fx(4)h(Core)18 b(Elab)r(oration)1337 b(40)140 364 y Fw(4.1)50
b(In)o(tro)q(duction)21 b Fv(:)k(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h
(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g
(:)h(:)f(:)h(:)45 b Fw(40)140 424 y(4.2)50 b(Elab)q(oration)38
b Fv(:)25 b(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f
(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45
b Fw(40)252 485 y(4.2.1)56 b(Elab)q(oration)17 b(errors)51
b Fv(:)24 b(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h
(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(41)252 545 y(4.2.2)56
b(Syn)o(tactic)15 b(Restrictions)49 b Fv(:)24 b(:)h(:)f(:)h(:)f(:)h(:)f(:)h
(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45
b Fw(41)252 605 y(4.2.3)56 b(Iden)o(ti\014er)14 b(Status)20
b Fv(:)25 b(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h
(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(42)252
665 y(4.2.4)56 b(Ov)o(erloading)28 b Fv(:)d(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f
(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h
(:)f(:)h(:)45 b Fw(42)252 725 y(4.2.5)56 b(The)16 b(implem)o(en)o(tation)d
(of)k(recursiv)o(e)d(v)m(alue)i(bindings)43 b Fv(:)25 b(:)f(:)h(:)f(:)h(:)f
(:)g(:)h(:)f(:)h(:)45 b Fw(47)252 786 y(4.2.6)56 b(Miscellaneous)32
b Fv(:)24 b(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(47)140
846 y(4.3)50 b(The)16 b(Implem)o(en)o(tation)d(of)k(Seman)o(tic)d(Ob)s(jects)
h(and)i(Op)q(erations)23 b Fv(:)h(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45
b Fw(48)252 906 y(4.3.1)56 b(T)o(yp)q(e)16 b(V)l(ariables)41
b Fv(:)25 b(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h
(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(49)252
966 y(4.3.2)56 b(En)o(vironmen)o(ts)28 b Fv(:)c(:)h(:)f(:)g(:)h(:)f(:)h(:)f
(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h
(:)f(:)h(:)45 b Fw(49)252 1026 y(4.3.3)56 b(Scop)q(e)16 b(of)h(Explicit)e(T)o
(yp)q(e)h(V)l(ariables)47 b Fv(:)24 b(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h
(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(51)252 1087 y(4.3.4)56
b(Non-expansiv)o(e)15 b(Expressions)20 b Fv(:)k(:)h(:)f(:)h(:)f(:)h(:)f(:)g
(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45
b Fw(51)252 1147 y(4.3.5)56 b(Closure)49 b Fv(:)25 b(:)f(:)h(:)f(:)h(:)f(:)g
(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f
(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(51)252 1207 y(4.3.6)56 b(T)o(yp)q(e)16
b(Structures)g(and)h(T)o(yp)q(e)f(En)o(vironmen)o(ts)21 b Fv(:)k(:)f(:)h(:)f
(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(52)252 1267
y(4.3.7)56 b(Uni\014cation)13 b Fv(:)24 b(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f
(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h
(:)f(:)h(:)45 b Fw(52)140 1327 y(4.4)50 b(Files)34 b Fv(:)24
b(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h
(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45
b Fw(52)66 1436 y Fx(5)h(Mo)r(dules)18 b(Elab)r(oration)1245
b(53)140 1496 y Fw(5.1)50 b(In)o(tro)q(duction)21 b Fv(:)k(:)f(:)h(:)f(:)h(:)
f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h
(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(53)140 1557
y(5.2)50 b(Elab)q(oration)38 b Fv(:)25 b(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h
(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h
(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(53)140 1617 y(5.3)50 b(Elab)q(oration)17
b(Errors)42 b Fv(:)25 b(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h
(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45
b Fw(54)140 1677 y(5.4)50 b(Syn)o(tactic)15 b(Restrictions)e
Fv(:)24 b(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h
(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(54)140
1737 y(5.5)50 b(Seman)o(tic)14 b(Ob)s(jects)29 b Fv(:)24 b(:)h(:)f(:)h(:)f(:)
g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f
(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(54)140 1797 y(5.6)50 b(Consistency)34
b Fv(:)25 b(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f
(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45
b Fw(57)140 1858 y(5.7)50 b(W)l(ell-formedness)17 b Fv(:)25
b(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(57)140
1918 y(5.8)50 b(Cycle-freedom)21 b Fv(:)j(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f
(:)g(:)h(:)f(:)h(:)45 b Fw(57)140 1978 y(5.9)50 b(Admissiblit)n(y)18
b Fv(:)25 b(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f
(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45
b Fw(58)140 2038 y(5.10)26 b(T)o(yp)q(e)16 b(Realisation)41
b Fv(:)24 b(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g
(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45
b Fw(58)140 2098 y(5.11)26 b(Realisation)13 b Fv(:)24 b(:)h(:)f(:)h(:)f(:)h
(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f
(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(58)140 2159
y(5.12)26 b(T)o(yp)q(e)16 b(Explication)34 b Fv(:)24 b(:)h(:)f(:)h(:)f(:)g(:)
h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h
(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(58)140 2219 y(5.13)26 b(Signature)16
b(Instan)o(tiation)26 b Fv(:)f(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)
f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45
b Fw(59)140 2279 y(5.14)26 b(F)l(unctor)16 b(Signature)g(Instan)o(tiation)36
b Fv(:)25 b(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f
(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(59)140 2339 y(5.15)26 b(Enric)o(hmen)o(t)
38 b Fv(:)25 b(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)
f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45
b Fw(59)140 2399 y(5.16)26 b(Signature)16 b(Matc)o(hing)22
b Fv(:)j(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(59)140
2460 y(5.17)26 b(Principal)15 b(Signatures)50 b Fv(:)24 b(:)h(:)f(:)g(:)h(:)f
(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f
(:)g(:)h(:)f(:)h(:)45 b Fw(60)252 2520 y(5.17.1)32 b(Co)o(v)o(er)47
b Fv(:)24 b(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h
(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45
b Fw(60)252 2580 y(5.17.2)32 b(Equalit)o(y-Principal)14 b(Signature)23
b Fv(:)i(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g
(:)h(:)f(:)h(:)45 b Fw(60)140 2640 y(5.18)26 b(Inference)14
b(Rules)39 b Fv(:)25 b(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)
f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45
b Fw(61)252 2700 y(5.18.1)32 b(Assem)o(blies)14 b Fv(:)24 b(:)h(:)f(:)h(:)f
(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h
(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(61)252 2760 y(5.18.2)32
b(Rule)15 b(65)i(|)f(Principal)g(signatures)41 b Fv(:)25 b(:)f(:)h(:)f(:)g(:)
h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45
b Fw(61)252 2821 y(5.18.3)32 b(Rule)15 b(84)i(|)f(Datat)o(yp)q(e)h
(descriptions)36 b Fv(:)24 b(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h
(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(62)998 2947 y(ii)p eop
%%Page: 1 118
bop 66 527 a Fy(Con)m(ten)m(ts)66 802 y Fx(Preface)1661 b(iii)66
911 y(1)46 b(A)19 b(\014rst)f(session)g(with)h(the)f(Kit)1119
b(1)140 971 y Fw(1.1)50 b(Where)16 b(to)g(\014nd)h(things)38
b Fv(:)24 b(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)70 b Fw(1)140
1032 y(1.2)50 b(Running)16 b(the)g(Kit)g(as)h(a)f(stand-alone)i(program)33
b Fv(:)25 b(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h
(:)70 b Fw(1)140 1092 y(1.3)50 b(W)l(orking)16 b(with)g(the)g(Kit)g(inside)f
(another)i(ML)g(system)23 b Fv(:)i(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)
h(:)f(:)h(:)70 b Fw(2)252 1152 y(1.3.1)56 b(Starting)17 b Fu(kit)h
Fv(:)25 b(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)70 b Fw(2)252
1212 y(1.3.2)56 b(Mo)q(difying)16 b(the)g(Kit)e Fv(:)24 b(:)g(:)h(:)f(:)h(:)f
(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h
(:)f(:)h(:)70 b Fw(4)252 1272 y(1.3.3)56 b(Making)16 b(a)h(new)f(stand-alone)
h(program)30 b Fv(:)25 b(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g
(:)h(:)f(:)h(:)70 b Fw(6)66 1381 y Fx(2)46 b(Ov)n(erview)17
b(of)i(the)f(Kit)1297 b(7)140 1441 y Fw(2.1)50 b(P)o(arsing,)16
b(Elab)q(oration)i(and)e(Ev)m(aluation)47 b Fv(:)24 b(:)h(:)f(:)h(:)f(:)g(:)h
(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)70 b
Fw(7)140 1502 y(2.2)50 b(A)16 b(guided)g(tour)g(of)h(the)f(Kit)32
b Fv(:)24 b(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f
(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(10)252 1562
y(2.2.1)56 b(Where)16 b(to)g(\014nd)h(things)35 b Fv(:)25 b(:)f(:)h(:)f(:)h
(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)h(:)45 b Fw(10)252 1622 y(2.2.2)56 b(P)o(arsing)50 b Fv(:)25
b(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(10)252
1682 y(2.2.3)56 b(The)16 b(In)o(terpreter)31 b Fv(:)25 b(:)f(:)g(:)h(:)f(:)h
(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g
(:)h(:)f(:)h(:)45 b Fw(14)252 1742 y(2.2.4)56 b(Compiler)12
b Fv(:)25 b(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f
(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45
b Fw(18)252 1803 y(2.2.5)56 b(Elab)q(oration)36 b Fv(:)25 b(:)f(:)h(:)f(:)g
(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f
(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(21)252 1863 y(2.2.6)56 b(Putting)16
b(it)g(all)g(together)45 b Fv(:)24 b(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h
(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b
Fw(24)252 1923 y(2.2.7)56 b(Summary)41 b Fv(:)24 b(:)h(:)f(:)h(:)f(:)g(:)h(:)
f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f
(:)g(:)h(:)f(:)h(:)45 b Fw(25)66 2032 y Fx(3)h(P)n(arsing)1577
b(27)140 2092 y Fw(3.1)50 b(In)o(tro)q(duction)21 b Fv(:)k(:)f(:)h(:)f(:)h(:)
f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h
(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(27)140 2152
y(3.2)50 b(The)16 b(Abstract)g(Syn)o(tax)31 b Fv(:)24 b(:)h(:)f(:)g(:)h(:)f
(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f
(:)g(:)h(:)f(:)h(:)45 b Fw(28)140 2213 y(3.3)50 b(Lexing)30
b Fv(:)24 b(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h
(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)h(:)45 b Fw(29)140 2273 y(3.4)50 b(P)o(arsing)14 b Fv(:)24
b(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f
(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45
b Fw(30)252 2333 y(3.4.1)56 b(In\014xes)16 b(and)g(the)g(P)o(ost-P)o(ass)i
Fv(:)25 b(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h
(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(31)252 2393 y(3.4.2)56 b(Lo)q(ok)m(ahead)18
b(am)o(biguities)28 b Fv(:)c(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h
(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(31)252
2453 y(3.4.3)56 b(Di\013erences)18 b(Bet)o(w)o(een)g(the)h(SML)g(Syn)o(tax)g
(De\014nition)g(and)h(the)f(Abstract)408 2513 y(Syn)o(tax)57
b Fv(:)24 b(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f
(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)50
b Fw(32)140 2574 y(3.5)g(Grammar)42 b Fv(:)24 b(:)h(:)f(:)h(:)f(:)h(:)f(:)h
(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f
(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(33)252 2634 y(3.5.1)56
b(T)l(ok)o(ens)23 b Fv(:)h(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)
f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h
(:)45 b Fw(33)252 2694 y(3.5.2)56 b(Naming)15 b(Con)o(v)o(en)o(tions)34
b Fv(:)25 b(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f
(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(34)252 2754 y(3.5.3)56
b(Am)o(biguities)13 b(resolv)o(ed)i(in)h(the)g(grammar)32 b
Fv(:)24 b(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45
b Fw(35)140 2814 y(3.6)50 b(Linking)f Fv(:)25 b(:)f(:)h(:)f(:)h(:)f(:)h(:)f
(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)h
(:)f(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)45 b Fw(36)1005 2947
y(i)p eop
%%Page: 0 119
bop 780 1111 a FA(The)29 b(ML)f(Kit)836 1214 y(V)-7 b(ersion)29
b(1)115 1435 y Fz(Lars)20 b(Birk)n(edal)113 b(Nic)n(k)19 b(Roth)n(w)n(ell)113
b(Mads)20 b(T)-5 b(ofte)113 b(Da)n(vid)20 b(N.)f(T)-5 b(urner)825
1583 y(Marc)n(h)20 b(8,)g(1993)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
